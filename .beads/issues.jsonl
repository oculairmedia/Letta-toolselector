{"id":"lettatoolsselector-022","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:45:45.440464436Z","updated_at":"2025-12-29T19:45:45.440464436Z","comments":[{"id":230,"issue_id":"lettatoolsselector-022","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T19:45:45Z"}]}
{"id":"lettatoolsselector-02kz","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:40.874168308Z","updated_at":"2025-12-29T20:34:40.874168308Z","comments":[{"id":590,"issue_id":"lettatoolsselector-02kz","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:34:41Z"}]}
{"id":"lettatoolsselector-05z","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:50:01.164165877Z","updated_at":"2025-12-29T19:50:01.164165877Z","comments":[{"id":241,"issue_id":"lettatoolsselector-05z","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T19:50:01Z"}]}
{"id":"lettatoolsselector-06d","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.226044359Z","updated_at":"2025-12-29T18:56:11.266224726Z","closed_at":"2025-12-29T18:56:11.266224726Z","close_reason":"Duplicate of closed lettatoolsselector-14s","comments":[{"id":2,"issue_id":"lettatoolsselector-06d","author":"node","text":"## Problem\n\nWebhook receiver has its own tool management code that will drift from the SDK.\n\n## Solution\n\nReplace local implementations with SDK imports.\n\n## Acceptance Criteria\n\n- [ ] Add  to \n- [ ] Replace  functions with SDK imports\n- [ ] Replace  API calls with SDK helpers\n- [ ] All existing tests still pass\n- [ ] No functional changes to webhook behavior\n\n## Technical Notes\n\n- This is a refactor, not a feature change\n- May need to keep some webhook-specific wrappers\n\n---\nHuly Issue: LTSEL-5","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-07p","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:09.047844161Z","updated_at":"2025-12-23T03:23:09.420110481Z","closed_at":"2025-12-23T03:23:09.420110481Z","close_reason":"Closed","comments":[{"id":33,"issue_id":"lettatoolsselector-07p","author":"node","text":"## Problem\n\nCurrent health endpoint only returns basic status. No way to quickly check if tool management is working correctly.\n\n## Solution\n\nEnhance health endpoint to include tool state summary.\n\n## Acceptance Criteria\n\n- [ ] Health endpoint returns: status, version, config summary\n- [ ] Include: MAX_TOTAL_TOOLS, PROTECTED_TOOLS list\n- [ ] Include: total_agents_tracked, agents_over_limit count\n- [ ] Include: last_attach_timestamp, last_prune_timestamp\n- [ ] Separate deep health check for dependencies (Letta API, Weaviate)\n\n## Technical Notes\n\n- Keep lightweight for frequent polling\n- Deep health check on separate endpoint (/health/deep)\n\n---\nHuly Issue: LTSEL-14","created_at":"2025-12-23T03:23:09Z"}]}
{"id":"lettatoolsselector-09g","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:04.520360479Z","updated_at":"2025-12-23T03:23:04.874634818Z","closed_at":"2025-12-23T03:23:04.874634818Z","close_reason":"Closed","comments":[{"id":27,"issue_id":"lettatoolsselector-09g","author":"node","text":"## Problem\n\nTool selector has its own  and  that duplicate SDK functionality.\n\n## Solution\n\nReplace local implementations with SDK imports.\n\n## Acceptance Criteria\n\n- [ ] Add  to \n- [ ] Replace  helpers with SDK imports\n- [ ] Replace  with SDK imports\n- [ ] All existing tests still pass\n- [ ] No functional changes to tool selection behavior\n\n## Technical Notes\n\n- Worker service models may need adjustment\n- Keep API-specific logic in the repo, move generic logic to SDK\n\n---\nHuly Issue: LTSEL-6","created_at":"2025-12-23T03:23:04Z"}]}
{"id":"lettatoolsselector-09r8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:31.002622716Z","updated_at":"2025-12-29T20:28:31.002622716Z","comments":[{"id":524,"issue_id":"lettatoolsselector-09r8","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:28:31Z"}]}
{"id":"lettatoolsselector-0dkz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:10.083832524Z","updated_at":"2025-12-29T20:29:10.083832524Z","comments":[{"id":532,"issue_id":"lettatoolsselector-0dkz","author":"root","text":"Synced from Beads: lettatoolsselector-4lx\n\n---\nHuly Issue: LTSEL-166","created_at":"2025-12-29T20:29:10Z"}]}
{"id":"lettatoolsselector-0fk","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:46:58.008495135Z","updated_at":"2025-12-29T19:46:58.008495135Z","comments":[{"id":233,"issue_id":"lettatoolsselector-0fk","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T19:46:58Z"}]}
{"id":"lettatoolsselector-0g6","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.711027378Z","updated_at":"2025-12-29T18:56:01.217907727Z","closed_at":"2025-12-29T18:56:01.217907727Z","close_reason":"Duplicate of closed lettatoolsselector-b8l"}
{"id":"lettatoolsselector-0qzr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:04.716480693Z","updated_at":"2025-12-29T20:24:04.716480693Z","comments":[{"id":466,"issue_id":"lettatoolsselector-0qzr","author":"root","text":"Synced from Beads: lettatoolsselector-l5y\n\n---\nHuly Issue: LTSEL-179","created_at":"2025-12-29T20:24:04Z"}]}
{"id":"lettatoolsselector-0vn","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:52:22.116307641Z","updated_at":"2025-12-29T19:52:22.116307641Z","comments":[{"id":251,"issue_id":"lettatoolsselector-0vn","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T19:52:22Z"}]}
{"id":"lettatoolsselector-0ya8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:23.185721122Z","updated_at":"2025-12-29T20:30:23.185721122Z","comments":[{"id":551,"issue_id":"lettatoolsselector-0ya8","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T20:30:23Z"}]}
{"id":"lettatoolsselector-0zwo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:28.814944026Z","updated_at":"2025-12-29T20:11:28.814944026Z","comments":[{"id":328,"issue_id":"lettatoolsselector-0zwo","author":"root","text":"Synced from Beads: lettatoolsselector-7q4\n\n---\nHuly Issue: LTSEL-216","created_at":"2025-12-29T20:11:29Z"}]}
{"id":"lettatoolsselector-13qs","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:53:14.999989269Z","updated_at":"2025-12-29T20:53:14.999989269Z","comments":[{"id":743,"issue_id":"lettatoolsselector-13qs","author":"root","text":"Synced from Beads: lettatoolsselector-gei\n\n---\nHuly Issue: LTSEL-133","created_at":"2025-12-29T20:53:15Z"}]}
{"id":"lettatoolsselector-140","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:06:00.24394217Z","updated_at":"2025-12-29T20:06:00.24394217Z","comments":[{"id":278,"issue_id":"lettatoolsselector-140","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T20:06:00Z"}]}
{"id":"lettatoolsselector-14s","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:03.941511875Z","updated_at":"2025-12-23T03:23:04.323825275Z","closed_at":"2025-12-23T03:23:04.323825275Z","close_reason":"Closed","comments":[{"id":26,"issue_id":"lettatoolsselector-14s","author":"node","text":"## Problem\n\nWebhook receiver has its own tool management code that will drift from the SDK.\n\n## Solution\n\nReplace local implementations with SDK imports.\n\n## Acceptance Criteria\n\n- [ ] Add  to \n- [ ] Replace  functions with SDK imports\n- [ ] Replace  API calls with SDK helpers\n- [ ] All existing tests still pass\n- [ ] No functional changes to webhook behavior\n\n## Technical Notes\n\n- This is a refactor, not a feature change\n- May need to keep some webhook-specific wrappers\n\n---\nHuly Issue: LTSEL-5","created_at":"2025-12-23T03:23:04Z"}]}
{"id":"lettatoolsselector-19c","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:28.355127429Z","updated_at":"2025-12-29T18:56:30.045132541Z","closed_at":"2025-12-29T18:56:30.045132541Z","close_reason":"Duplicate of lettatoolsselector-vc5 (API contract test)","comments":[{"id":15,"issue_id":"lettatoolsselector-19c","author":"node","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2025-12-22T23:46:28Z"}]}
{"id":"lettatoolsselector-1fv5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:54.167632179Z","updated_at":"2025-12-29T20:36:54.167632179Z","comments":[{"id":621,"issue_id":"lettatoolsselector-1fv5","author":"root","text":"Synced from Beads: lettatoolsselector-ar6\n\n---\nHuly Issue: LTSEL-162","created_at":"2025-12-29T20:36:54Z"}]}
{"id":"lettatoolsselector-1j0o","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:51:43.637707975Z","updated_at":"2025-12-29T20:51:43.637707975Z","comments":[{"id":732,"issue_id":"lettatoolsselector-1j0o","author":"root","text":"Synced from Beads: lettatoolsselector-7ka\n\n---\nHuly Issue: LTSEL-136","created_at":"2025-12-29T20:51:43Z"}]}
{"id":"lettatoolsselector-1jg4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:58.658501133Z","updated_at":"2025-12-29T20:57:58.658501133Z","comments":[{"id":792,"issue_id":"lettatoolsselector-1jg4","author":"root","text":"Synced from Beads: lettatoolsselector-eyc\n\n---\nHuly Issue: LTSEL-121","created_at":"2025-12-29T20:57:59Z"}]}
{"id":"lettatoolsselector-1jt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:56:23.834094584Z","updated_at":"2025-12-29T19:56:23.834094584Z","comments":[{"id":262,"issue_id":"lettatoolsselector-1jt","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T19:56:24Z"}]}
{"id":"lettatoolsselector-1l9s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:28.899933107Z","updated_at":"2025-12-29T20:36:28.899933107Z","comments":[{"id":614,"issue_id":"lettatoolsselector-1l9s","author":"root","text":"Synced from Beads: lettatoolsselector-n7f\n\n---\nHuly Issue: LTSEL-163","created_at":"2025-12-29T20:36:29Z"}]}
{"id":"lettatoolsselector-1lqk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:47:21.616892862Z","updated_at":"2025-12-29T20:47:21.616892862Z","comments":[{"id":695,"issue_id":"lettatoolsselector-1lqk","author":"root","text":"Synced from Beads: lettatoolsselector-6p9\n\n---\nHuly Issue: LTSEL-148","created_at":"2025-12-29T20:47:21Z"}]}
{"id":"lettatoolsselector-1lrx","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:29.728656994Z","updated_at":"2025-12-29T20:29:29.728656994Z","comments":[{"id":537,"issue_id":"lettatoolsselector-1lrx","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:29:30Z"}]}
{"id":"lettatoolsselector-1ni8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:55.506817444Z","updated_at":"2025-12-29T20:25:55.506817444Z","comments":[{"id":490,"issue_id":"lettatoolsselector-1ni8","author":"root","text":"Synced from Beads: lettatoolsselector-c33\n\n---\nHuly Issue: LTSEL-172","created_at":"2025-12-29T20:25:55Z"}]}
{"id":"lettatoolsselector-1ny5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:31:28.298907297Z","updated_at":"2025-12-29T20:31:28.298907297Z","comments":[{"id":557,"issue_id":"lettatoolsselector-1ny5","author":"root","text":"Synced from Beads: lettatoolsselector-ar6\n\n---\nHuly Issue: LTSEL-162","created_at":"2025-12-29T20:31:28Z"}]}
{"id":"lettatoolsselector-1o41","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:46.777006883Z","updated_at":"2025-12-29T20:12:46.777006883Z","comments":[{"id":338,"issue_id":"lettatoolsselector-1o41","author":"root","text":"Synced from Beads: lettatoolsselector-qh2\n\n---\nHuly Issue: LTSEL-199","created_at":"2025-12-29T20:12:47Z"}]}
{"id":"lettatoolsselector-1o6","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:50:48.802458764Z","updated_at":"2025-12-29T19:50:48.802458764Z","comments":[{"id":244,"issue_id":"lettatoolsselector-1o6","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T19:50:49Z"}]}
{"id":"lettatoolsselector-1tqj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:59.690433096Z","updated_at":"2025-12-29T20:48:59.690433096Z","comments":[{"id":711,"issue_id":"lettatoolsselector-1tqj","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-100","created_at":"2025-12-29T20:49:00Z"}]}
{"id":"lettatoolsselector-1ukl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:06.57508542Z","updated_at":"2025-12-29T20:16:06.57508542Z","comments":[{"id":376,"issue_id":"lettatoolsselector-1ukl","author":"root","text":"Synced from Beads: lettatoolsselector-mfj\n\n---\nHuly Issue: LTSEL-202","created_at":"2025-12-29T20:16:06Z"}]}
{"id":"lettatoolsselector-1vb","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:28.451265395Z","updated_at":"2025-12-29T18:56:28.974741759Z","closed_at":"2025-12-29T18:56:28.974741759Z","close_reason":"Duplicate of lettatoolsselector-5l3 (webhook contract test)","comments":[{"id":16,"issue_id":"lettatoolsselector-1vb","author":"node","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2025-12-22T23:46:28Z"}]}
{"id":"lettatoolsselector-1wy","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:55:57.461208501Z","updated_at":"2025-12-29T19:55:57.461208501Z","comments":[{"id":261,"issue_id":"lettatoolsselector-1wy","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T19:55:57Z"}]}
{"id":"lettatoolsselector-1xa","title":"[Perf] Add connection wait with timeout to Weaviate pool","description":"## Problem\n`_acquire_connection()` raises exception immediately if no connections available instead of waiting.\n\n**Location:** `weaviate_client_manager.py:408-425`\n\n```python\n# Line 425\nraise Exception(\"No connections available in pool\")\n```\n\n## Impact\n- Under load, requests fail instead of queuing\n- **Priority:** LOW - only affects high concurrency\n\n## Solution\nImplement connection wait with timeout:\n\n```python\nasync def _acquire_connection(self, timeout: float = 5.0) -\u003e WeaviateConnection:\n    \"\"\"Acquire connection with wait timeout.\"\"\"\n    start = time.time()\n    \n    while time.time() - start \u003c timeout:\n        # Try to get available connection\n        for conn in self._pool:\n            if not conn.in_use:\n                conn.in_use = True\n                return conn\n        \n        # Wait briefly before retry\n        await asyncio.sleep(0.05)\n    \n    raise TimeoutError(f\"No connection available after {timeout}s\")\n```\n\n## Acceptance Criteria\n- [ ] Connections wait with configurable timeout\n- [ ] Timeout raises appropriate exception\n- [ ] Metrics for connection wait time\n- [ ] All unit tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T01:51:11.704316045Z","updated_at":"2025-12-29T19:41:48.059663755Z","closed_at":"2025-12-29T19:41:48.059663755Z","close_reason":"Implemented connection wait with timeout using threading.Condition. Added acquire_timeout config (default 5s), wait metrics, and notify on release.","labels":["performance"]}
{"id":"lettatoolsselector-1xva","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:39.840311477Z","updated_at":"2025-12-29T20:32:39.840311477Z","comments":[{"id":569,"issue_id":"lettatoolsselector-1xva","author":"root","text":"Synced from Beads: lettatoolsselector-n7f\n\n---\nHuly Issue: LTSEL-163","created_at":"2025-12-29T20:32:40Z"}]}
{"id":"lettatoolsselector-1zc8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:25.806520467Z","updated_at":"2025-12-29T20:36:25.806520467Z","comments":[{"id":611,"issue_id":"lettatoolsselector-1zc8","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T20:36:26Z"}]}
{"id":"lettatoolsselector-21j3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:28.177335479Z","updated_at":"2025-12-29T20:11:28.177335479Z","comments":[{"id":327,"issue_id":"lettatoolsselector-21j3","author":"root","text":"Synced from Beads: lettatoolsselector-vwd\n\n---\nHuly Issue: LTSEL-211","created_at":"2025-12-29T20:11:28Z"}]}
{"id":"lettatoolsselector-22pu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:34.075702737Z","updated_at":"2025-12-29T20:26:34.075702737Z","comments":[{"id":499,"issue_id":"lettatoolsselector-22pu","author":"root","text":"Synced from Beads: lettatoolsselector-ux4\n\n---\nHuly Issue: LTSEL-186","created_at":"2025-12-29T20:26:34Z"}]}
{"id":"lettatoolsselector-24z","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:17.158269365Z","updated_at":"2025-12-29T18:56:27.621840582Z","closed_at":"2025-12-29T18:56:27.621840582Z","close_reason":"Duplicate of lettatoolsselector-2a2 (unit test protected tools)","comments":[{"id":41,"issue_id":"lettatoolsselector-24z","author":"node","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2025-12-23T03:23:17Z"}]}
{"id":"lettatoolsselector-27c0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:12.010440084Z","updated_at":"2025-12-29T20:19:12.010440084Z","comments":[{"id":408,"issue_id":"lettatoolsselector-27c0","author":"root","text":"Synced from Beads: lettatoolsselector-0do\n\n---\nHuly Issue: LTSEL-189","created_at":"2025-12-29T20:19:12Z"}]}
{"id":"lettatoolsselector-2a2","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:27:59.540444503Z","updated_at":"2025-12-23T03:27:59.540444503Z","comments":[{"id":50,"issue_id":"lettatoolsselector-2a2","author":"node","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2025-12-23T03:27:59Z"}]}
{"id":"lettatoolsselector-2d06","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:57.194881214Z","updated_at":"2025-12-29T20:37:57.194881214Z","comments":[{"id":630,"issue_id":"lettatoolsselector-2d06","author":"root","text":"Synced from Beads: lettatoolsselector-3dk\n\n---\nHuly Issue: LTSEL-154","created_at":"2025-12-29T20:37:57Z"}]}
{"id":"lettatoolsselector-2fi3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:52:37.071168471Z","updated_at":"2025-12-29T20:52:37.071168471Z","comments":[{"id":738,"issue_id":"lettatoolsselector-2fi3","author":"root","text":"Synced from Beads: lettatoolsselector-88a\n\n---\nHuly Issue: LTSEL-130","created_at":"2025-12-29T20:52:37Z"}]}
{"id":"lettatoolsselector-2h31","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:08.240230021Z","updated_at":"2025-12-29T20:34:08.240230021Z","comments":[{"id":587,"issue_id":"lettatoolsselector-2h31","author":"root","text":"Synced from Beads: lettatoolsselector-2bc\n\n---\nHuly Issue: LTSEL-161","created_at":"2025-12-29T20:34:08Z"}]}
{"id":"lettatoolsselector-2jrd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:38:32.487020095Z","updated_at":"2025-12-29T20:38:32.487020095Z","comments":[{"id":634,"issue_id":"lettatoolsselector-2jrd","author":"root","text":"Synced from Beads: lettatoolsselector-yc7\n\n---\nHuly Issue: LTSEL-153","created_at":"2025-12-29T20:38:32Z"}]}
{"id":"lettatoolsselector-2nlg","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:56.24600428Z","updated_at":"2025-12-29T20:20:56.24600428Z","comments":[{"id":427,"issue_id":"lettatoolsselector-2nlg","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:20:56Z"}]}
{"id":"lettatoolsselector-2og3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:58.816776944Z","updated_at":"2025-12-29T20:58:58.816776944Z","comments":[{"id":804,"issue_id":"lettatoolsselector-2og3","author":"root","text":"Synced from Beads: lettatoolsselector-lv2\n\n---\nHuly Issue: LTSEL-131","created_at":"2025-12-29T20:58:59Z"}]}
{"id":"lettatoolsselector-2rjf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:47.934696856Z","updated_at":"2025-12-29T20:34:47.934696856Z","comments":[{"id":595,"issue_id":"lettatoolsselector-2rjf","author":"root","text":"Synced from Beads: lettatoolsselector-4lx\n\n---\nHuly Issue: LTSEL-166","created_at":"2025-12-29T20:34:48Z"}]}
{"id":"lettatoolsselector-2tq2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:28.478212993Z","updated_at":"2025-12-29T20:54:28.478212993Z","comments":[{"id":755,"issue_id":"lettatoolsselector-2tq2","author":"root","text":"Synced from Beads: lettatoolsselector-w33\n\n---\nHuly Issue: LTSEL-138","created_at":"2025-12-29T20:54:28Z"}]}
{"id":"lettatoolsselector-2w7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:49:11.604246422Z","updated_at":"2025-12-29T19:49:11.604246422Z","comments":[{"id":237,"issue_id":"lettatoolsselector-2w7","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T19:49:11Z"}]}
{"id":"lettatoolsselector-2yhg","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:59:26.264853793Z","updated_at":"2025-12-29T20:59:26.264853793Z","comments":[{"id":809,"issue_id":"lettatoolsselector-2yhg","author":"root","text":"Synced from Beads: lettatoolsselector-88a\n\n---\nHuly Issue: LTSEL-130","created_at":"2025-12-29T20:59:26Z"}]}
{"id":"lettatoolsselector-2zoj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:11.624268883Z","updated_at":"2025-12-29T20:23:11.624268883Z","comments":[{"id":455,"issue_id":"lettatoolsselector-2zoj","author":"root","text":"Synced from Beads: lettatoolsselector-h76\n\n---\nHuly Issue: LTSEL-188","created_at":"2025-12-29T20:23:11Z"}]}
{"id":"lettatoolsselector-30a8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:58.829070545Z","updated_at":"2025-12-29T20:26:58.829070545Z","comments":[{"id":506,"issue_id":"lettatoolsselector-30a8","author":"root","text":"Synced from Beads: lettatoolsselector-sk8\n\n---\nHuly Issue: LTSEL-180","created_at":"2025-12-29T20:26:59Z"}]}
{"id":"lettatoolsselector-31sy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:52.597823919Z","updated_at":"2025-12-29T20:36:52.597823919Z","comments":[{"id":619,"issue_id":"lettatoolsselector-31sy","author":"root","text":"Synced from Beads: lettatoolsselector-yc7\n\n---\nHuly Issue: LTSEL-153","created_at":"2025-12-29T20:36:52Z"}]}
{"id":"lettatoolsselector-33d","title":"[Refactor] Migrate safety handlers to safety blueprint","description":"## Goal\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\nThese handlers interact with:\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T00:43:22.309752565Z","updated_at":"2025-12-29T01:06:15.70343165Z","closed_at":"2025-12-29T01:06:15.70343165Z","close_reason":"Closed","labels":["refactor","services-layer"]}
{"id":"lettatoolsselector-35e","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:19.20176836Z","updated_at":"2025-12-29T18:56:24.150553096Z","closed_at":"2025-12-29T18:56:24.150553096Z","close_reason":"Duplicate of lettatoolsselector-5vu (config validation CI)","comments":[{"id":45,"issue_id":"lettatoolsselector-35e","author":"node","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2025-12-23T03:23:19Z"}]}
{"id":"lettatoolsselector-3ct9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:10.756878554Z","updated_at":"2025-12-29T20:23:10.756878554Z","comments":[{"id":454,"issue_id":"lettatoolsselector-3ct9","author":"root","text":"Synced from Beads: lettatoolsselector-9xp\n\n---\nHuly Issue: LTSEL-181","created_at":"2025-12-29T20:23:11Z"}]}
{"id":"lettatoolsselector-3iy","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:07.521149427Z","updated_at":"2025-12-23T03:23:07.879876339Z","closed_at":"2025-12-23T03:23:07.879876339Z","close_reason":"Closed","comments":[{"id":31,"issue_id":"lettatoolsselector-3iy","author":"node","text":"## Problem\n\nTool selector has multiple compose files (compose.yaml, docker-compose.yml, compose-with-reranker.yaml) and an .env file. Changes require editing multiple places.\n\n## Solution\n\nConsolidate to single compose.yaml with environment-specific overrides via .env.\n\n## Acceptance Criteria\n\n- [ ] Single compose.yaml as source of truth\n- [ ] .env.example checked into repo with all variables documented\n- [ ] .env (not checked in) for local overrides\n- [ ] Remove deprecated docker-compose.yml\n- [ ] CI validates .env.example has all required vars\n\n## Technical Notes\n\n- Use compose profiles for optional services (reranker, etc.)\n- Document which vars are required vs optional\n- Add validation script to check env completeness\n\n---\nHuly Issue: LTSEL-15","created_at":"2025-12-23T03:23:07Z"}]}
{"id":"lettatoolsselector-3j00","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:24.294817629Z","updated_at":"2025-12-29T20:17:24.294817629Z","comments":[{"id":390,"issue_id":"lettatoolsselector-3j00","author":"root","text":"Synced from Beads: lettatoolsselector-vn0\n\n---\nHuly Issue: LTSEL-192","created_at":"2025-12-29T20:17:24Z"}]}
{"id":"lettatoolsselector-3ke","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:16.839784903Z","updated_at":"2025-12-29T20:09:16.839784903Z","comments":[{"id":304,"issue_id":"lettatoolsselector-3ke","author":"root","text":"Synced from Beads: lettatoolsselector-7yx\n\n---\nHuly Issue: LTSEL-206","created_at":"2025-12-29T20:09:17Z"}]}
{"id":"lettatoolsselector-3l3y","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:46:40.193713181Z","updated_at":"2025-12-29T20:46:40.193713181Z","comments":[{"id":691,"issue_id":"lettatoolsselector-3l3y","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-100","created_at":"2025-12-29T20:46:40Z"}]}
{"id":"lettatoolsselector-3nw","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","description":"## Problem\nEach call to `search_tools_with_reranking()` creates a new Weaviate client via `init_client()`, including TCP/gRPC connection establishment.\n\n**Location:** `weaviate_tool_search_with_reranking.py:204-208, 331-335`\n\n```python\n# Line 204\nclient = init_client()  # Creates new client EVERY search!\n```\n\n## Impact\n- **Latency:** 50-200ms per search in connection overhead\n- **Priority:** CRITICAL - affects every search request\n\n## Solution\nUse the existing `WeaviateClientManager` connection pool from `weaviate_client_manager.py`:\n\n```python\nfrom weaviate_client_manager import get_client_manager\n\ndef search_tools_with_reranking(...):\n    manager = get_client_manager()\n    with manager.get_client() as client:\n        # perform search\n```\n\n## Acceptance Criteria\n- [ ] `search_tools()` uses connection pool\n- [ ] `search_tools_with_reranking()` uses connection pool\n- [ ] No new Weaviate clients created per request\n- [ ] Connection pool metrics logged on startup\n- [ ] All unit tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:49:05.951470743Z","updated_at":"2025-12-29T15:40:23.078098729Z","closed_at":"2025-12-29T15:40:23.078098729Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-3p1s","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:32.26735709Z","updated_at":"2025-12-29T20:32:32.26735709Z","comments":[{"id":566,"issue_id":"lettatoolsselector-3p1s","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:32:32Z"}]}
{"id":"lettatoolsselector-3qkf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:38.974864288Z","updated_at":"2025-12-29T20:30:38.974864288Z","comments":[{"id":553,"issue_id":"lettatoolsselector-3qkf","author":"root","text":"Synced from Beads: lettatoolsselector-4lx\n\n---\nHuly Issue: LTSEL-166","created_at":"2025-12-29T20:30:39Z"}]}
{"id":"lettatoolsselector-3sc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:51:45.323365685Z","updated_at":"2025-12-29T19:51:45.323365685Z","comments":[{"id":248,"issue_id":"lettatoolsselector-3sc","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T19:51:45Z"}]}
{"id":"lettatoolsselector-3td","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:52:01.676137607Z","updated_at":"2025-12-29T19:52:01.676137607Z","comments":[{"id":250,"issue_id":"lettatoolsselector-3td","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T19:52:01Z"}]}
{"id":"lettatoolsselector-3tf5","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:37.161624734Z","updated_at":"2025-12-29T20:23:37.161624734Z","comments":[{"id":457,"issue_id":"lettatoolsselector-3tf5","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T20:23:37Z"}]}
{"id":"lettatoolsselector-3vgi","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:51:15.220412301Z","updated_at":"2025-12-29T20:51:15.220412301Z","comments":[{"id":726,"issue_id":"lettatoolsselector-3vgi","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T20:51:15Z"}]}
{"id":"lettatoolsselector-3xeu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:03.097794352Z","updated_at":"2025-12-29T20:28:03.097794352Z","comments":[{"id":519,"issue_id":"lettatoolsselector-3xeu","author":"root","text":"Synced from Beads: lettatoolsselector-x6v\n\n---\nHuly Issue: LTSEL-168","created_at":"2025-12-29T20:28:03Z"}]}
{"id":"lettatoolsselector-3yad","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:46.209143424Z","updated_at":"2025-12-29T20:18:46.209143424Z","comments":[{"id":403,"issue_id":"lettatoolsselector-3yad","author":"root","text":"Synced from Beads: lettatoolsselector-wtn\n\n---\nHuly Issue: LTSEL-57","created_at":"2025-12-29T20:18:46Z"}]}
{"id":"lettatoolsselector-40r","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:07:29.584607116Z","updated_at":"2025-12-29T20:07:29.584607116Z","comments":[{"id":288,"issue_id":"lettatoolsselector-40r","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:07:29Z"}]}
{"id":"lettatoolsselector-416d","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:50:14.042720687Z","updated_at":"2025-12-29T20:50:14.042720687Z","comments":[{"id":717,"issue_id":"lettatoolsselector-416d","author":"root","text":"Synced from Beads: lettatoolsselector-7ka\n\n---\nHuly Issue: LTSEL-136","created_at":"2025-12-29T20:50:14Z"}]}
{"id":"lettatoolsselector-418","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:18.823169301Z","updated_at":"2025-12-29T18:56:25.289903875Z","closed_at":"2025-12-29T18:56:25.289903875Z","close_reason":"Duplicate of lettatoolsselector-7rj (deploy script)","comments":[{"id":44,"issue_id":"lettatoolsselector-418","author":"node","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2025-12-23T03:23:19Z"}]}
{"id":"lettatoolsselector-41hn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:56.227732281Z","updated_at":"2025-12-29T20:54:56.227732281Z","comments":[{"id":759,"issue_id":"lettatoolsselector-41hn","author":"root","text":"Synced from Beads: lettatoolsselector-5j1\n\n---\nHuly Issue: LTSEL-128","created_at":"2025-12-29T20:54:56Z"}]}
{"id":"lettatoolsselector-41mp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:28.235500508Z","updated_at":"2025-12-29T20:39:28.235500508Z","comments":[{"id":643,"issue_id":"lettatoolsselector-41mp","author":"root","text":"Synced from Beads: lettatoolsselector-kne\n\n---\nHuly Issue: LTSEL-158","created_at":"2025-12-29T20:39:28Z"}]}
{"id":"lettatoolsselector-42n","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:51:28.31119505Z","updated_at":"2025-12-29T19:51:28.31119505Z","comments":[{"id":246,"issue_id":"lettatoolsselector-42n","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T19:51:28Z"}]}
{"id":"lettatoolsselector-43z1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:26.552938277Z","updated_at":"2025-12-29T20:35:26.552938277Z","comments":[{"id":603,"issue_id":"lettatoolsselector-43z1","author":"root","text":"Synced from Beads: lettatoolsselector-22q\n\n---\nHuly Issue: LTSEL-170","created_at":"2025-12-29T20:35:26Z"}]}
{"id":"lettatoolsselector-445","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:58:09.863363454Z","updated_at":"2025-12-29T19:58:09.863363454Z","comments":[{"id":270,"issue_id":"lettatoolsselector-445","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T19:58:10Z"}]}
{"id":"lettatoolsselector-448k","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:25.825507411Z","updated_at":"2025-12-29T20:58:25.825507411Z","comments":[{"id":798,"issue_id":"lettatoolsselector-448k","author":"root","text":"Synced from Beads: lettatoolsselector-i3k\n\n---\nHuly Issue: LTSEL-127","created_at":"2025-12-29T20:58:26Z"}]}
{"id":"lettatoolsselector-44eb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:35.040584665Z","updated_at":"2025-12-29T20:24:35.040584665Z","comments":[{"id":473,"issue_id":"lettatoolsselector-44eb","author":"root","text":"Synced from Beads: lettatoolsselector-72a\n\n---\nHuly Issue: LTSEL-185","created_at":"2025-12-29T20:24:35Z"}]}
{"id":"lettatoolsselector-44wn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:23.586404086Z","updated_at":"2025-12-29T20:17:23.586404086Z","comments":[{"id":389,"issue_id":"lettatoolsselector-44wn","author":"root","text":"Synced from Beads: lettatoolsselector-wtn\n\n---\nHuly Issue: LTSEL-57","created_at":"2025-12-29T20:17:23Z"}]}
{"id":"lettatoolsselector-46k","title":"[Code Quality] Fix type annotation errors in api_server.py","description":"The api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\nFunctions return `None` but type hints expect a specific type:\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables  \nVariables that might not be defined in all code paths:\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\nDeclared types don't match actual implementations:\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior  \n- [ ] No runtime behavior changes\n- [ ] Tests still pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T17:12:59.527538844Z","updated_at":"2025-12-29T19:21:55.149577816Z","closed_at":"2025-12-29T19:21:55.149577816Z","close_reason":"Fixed: removed duplicate functions, fixed async stubs, added type ignore for import conflicts - 0 pyright errors"}
{"id":"lettatoolsselector-489x","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:04.185924199Z","updated_at":"2025-12-29T20:57:04.185924199Z","comments":[{"id":782,"issue_id":"lettatoolsselector-489x","author":"root","text":"Synced from Beads: lettatoolsselector-2iz\n\n---\nHuly Issue: LTSEL-120","created_at":"2025-12-29T20:57:04Z"}]}
{"id":"lettatoolsselector-48rn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:07.932469249Z","updated_at":"2025-12-29T20:20:07.932469249Z","comments":[{"id":418,"issue_id":"lettatoolsselector-48rn","author":"root","text":"Synced from Beads: lettatoolsselector-joa\n\n---\nHuly Issue: LTSEL-187","created_at":"2025-12-29T20:20:08Z"}]}
{"id":"lettatoolsselector-4g6o","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:27.38865976Z","updated_at":"2025-12-29T20:39:27.38865976Z","comments":[{"id":642,"issue_id":"lettatoolsselector-4g6o","author":"root","text":"Synced from Beads: lettatoolsselector-4pp\n\n---\nHuly Issue: LTSEL-151","created_at":"2025-12-29T20:39:27Z"}]}
{"id":"lettatoolsselector-4gt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:10:08.863971393Z","updated_at":"2025-12-29T20:10:08.863971393Z","comments":[{"id":314,"issue_id":"lettatoolsselector-4gt","author":"root","text":"Synced from Beads: lettatoolsselector-vnx\n\n---\nHuly Issue: LTSEL-207","created_at":"2025-12-29T20:10:09Z"}]}
{"id":"lettatoolsselector-4gv1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:51.323124074Z","updated_at":"2025-12-29T21:00:51.323124074Z","comments":[{"id":819,"issue_id":"lettatoolsselector-4gv1","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-112","created_at":"2025-12-29T21:00:51Z"}]}
{"id":"lettatoolsselector-4hc2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:29.082041612Z","updated_at":"2025-12-29T20:29:29.082041612Z","comments":[{"id":536,"issue_id":"lettatoolsselector-4hc2","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T20:29:29Z"}]}
{"id":"lettatoolsselector-4m2l","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:44:44.390240365Z","updated_at":"2025-12-29T20:44:44.390240365Z","comments":[{"id":679,"issue_id":"lettatoolsselector-4m2l","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:44:44Z"}]}
{"id":"lettatoolsselector-4me3","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:53:36.04762735Z","updated_at":"2025-12-29T20:53:36.04762735Z","comments":[{"id":745,"issue_id":"lettatoolsselector-4me3","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T20:53:36Z"}]}
{"id":"lettatoolsselector-4o9z","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:05.198521804Z","updated_at":"2025-12-29T20:48:05.198521804Z","comments":[{"id":700,"issue_id":"lettatoolsselector-4o9z","author":"root","text":"Synced from Beads: lettatoolsselector-egp\n\n---\nHuly Issue: LTSEL-141","created_at":"2025-12-29T20:48:05Z"}]}
{"id":"lettatoolsselector-4oox","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:34.623717837Z","updated_at":"2025-12-29T20:22:34.623717837Z","comments":[{"id":447,"issue_id":"lettatoolsselector-4oox","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T20:22:34Z"}]}
{"id":"lettatoolsselector-4p9c","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:44.685901003Z","updated_at":"2025-12-29T20:14:44.685901003Z","comments":[{"id":361,"issue_id":"lettatoolsselector-4p9c","author":"root","text":"Synced from Beads: lettatoolsselector-kl5\n\n---\nHuly Issue: LTSEL-209","created_at":"2025-12-29T20:14:44Z"}]}
{"id":"lettatoolsselector-4pn","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:46:37.670253419Z","updated_at":"2025-12-29T19:46:37.670253419Z","comments":[{"id":232,"issue_id":"lettatoolsselector-4pn","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T19:46:37Z"}]}
{"id":"lettatoolsselector-4q7p","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:45.647455166Z","updated_at":"2025-12-29T20:18:45.647455166Z","comments":[{"id":402,"issue_id":"lettatoolsselector-4q7p","author":"root","text":"Synced from Beads: lettatoolsselector-joa\n\n---\nHuly Issue: LTSEL-187","created_at":"2025-12-29T20:18:45Z"}]}
{"id":"lettatoolsselector-4r12","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:44:22.205297733Z","updated_at":"2025-12-29T20:44:22.205297733Z","comments":[{"id":675,"issue_id":"lettatoolsselector-4r12","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:44:22Z"}]}
{"id":"lettatoolsselector-4t5u","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:29.704661653Z","updated_at":"2025-12-29T20:48:29.704661653Z","comments":[{"id":704,"issue_id":"lettatoolsselector-4t5u","author":"root","text":"Synced from Beads: lettatoolsselector-cic\n\n---\nHuly Issue: LTSEL-140","created_at":"2025-12-29T20:48:30Z"}]}
{"id":"lettatoolsselector-4tm","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:12.941728881Z","updated_at":"2025-12-23T03:23:13.332563419Z","closed_at":"2025-12-23T03:23:13.332563419Z","close_reason":"Closed","comments":[{"id":36,"issue_id":"lettatoolsselector-4tm","author":"node","text":"## Problem\n\nTool management logic is duplicated across webhook-receiver and tool-selector repos, causing drift and inconsistent behavior.\n\n## Solution\n\nCreate a shared Python package  that can be installed in both repos.\n\n## Acceptance Criteria\n\n- [ ] Package scaffold with  and proper versioning\n- [ ] Package published to private PyPI or installable via git+https\n- [ ] Basic CI/CD pipeline for testing and publishing\n- [ ] README with installation and usage instructions\n\n## Technical Notes\n\n- Use  layout for clean imports\n- Target Python 3.11+\n- Include type hints throughout\n\n---\nHuly Issue: LTSEL-1","created_at":"2025-12-23T03:23:13Z"}]}
{"id":"lettatoolsselector-4w9","title":"[Refactor] Phase 3: Extract service layer - SearchService","description":"Extract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService (`services/search_service.py`)\n\nMove/consolidate these:\n\n| Source | Function | Responsibility |\n|--------|----------|----------------|\n| api_server.py | `unified_tool_search()` | Unified search interface |\n| weaviate_tool_search_with_reranking.py | `search_tools()` | Weaviate search |\n| weaviate_tool_search_with_reranking.py | `search_tools_with_reranking()` | Search + rerank |\n\n### Interface\n```python\nclass SearchService:\n    def __init__(\n        self, \n        weaviate_client,\n        reranker_config: RerankerConfig,\n        expansion_config: ExpansionConfig\n    ):\n        self.weaviate = weaviate_client\n        self.reranker = reranker_config\n        self.expansion = expansion_config\n    \n    async def search(\n        self,\n        query: str,\n        limit: int = 10,\n        min_score: float = 0.0,\n        enable_reranking: bool = True,\n        enable_expansion: bool = True\n    ) -\u003e List[ToolSearchResult]:\n        ...\n    \n    async def rerank(\n        self,\n        query: str,\n        documents: List[str],\n        top_k: int = 10\n    ) -\u003e List[RerankResult]:\n        ...\n    \n    def expand_query(self, query: str) -\u003e ExpandedQuery:\n        ...\n```\n\n### Reranker Abstraction\n```python\nclass RerankerClient(Protocol):\n    async def rerank(self, query: str, documents: List[str], top_k: int) -\u003e List[RerankResult]:\n        ...\n\nclass VLLMReranker(RerankerClient):\n    # http://100.81.139.20:11435/v1/rerank\n    ...\n\nclass OllamaReranker(RerankerClient):\n    # http://ollama-reranker-adapter:8080/rerank\n    ...\n```\n\n## Acceptance Criteria\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:37:39.506134951Z","updated_at":"2025-12-29T19:02:07.732528849Z","closed_at":"2025-12-29T19:02:07.732528849Z","close_reason":"SearchService extracted to search_service.py (615 lines)"}
{"id":"lettatoolsselector-50es","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:05.517127648Z","updated_at":"2025-12-29T20:24:05.517127648Z","comments":[{"id":467,"issue_id":"lettatoolsselector-50es","author":"root","text":"Synced from Beads: lettatoolsselector-ux4\n\n---\nHuly Issue: LTSEL-186","created_at":"2025-12-29T20:24:05Z"}]}
{"id":"lettatoolsselector-51m8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:58.591142494Z","updated_at":"2025-12-29T20:48:58.591142494Z","comments":[{"id":710,"issue_id":"lettatoolsselector-51m8","author":"root","text":"Synced from Beads: lettatoolsselector-mam\n\n---\nHuly Issue: LTSEL-142","created_at":"2025-12-29T20:48:58Z"}]}
{"id":"lettatoolsselector-52k","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:49:37.084387268Z","updated_at":"2025-12-29T19:49:37.084387268Z","comments":[{"id":239,"issue_id":"lettatoolsselector-52k","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T19:49:37Z"}]}
{"id":"lettatoolsselector-534","title":"[Perf] Queue audit events for async background processing","description":"## Problem\nAudit events are emitted synchronously in the request path, adding latency to every attach/prune operation.\n\n**Location:** `routes/tools.py:557-603, 700-754`\n\n```python\n# Line 557-603\nif _emit_batch_event_func and _audit_action_class and _audit_source_class:\n    # ... emit events synchronously ...\n```\n\n## Impact\n- **Latency:** 1-10ms per request\n- **Priority:** LOW-MEDIUM\n\n## Solution\nQueue audit events for background processing:\n\n```python\nimport asyncio\nfrom collections import deque\n\n_audit_queue: deque = deque(maxsize=10000)\n_audit_task: asyncio.Task = None\n\ndef queue_audit_event(event: dict):\n    \"\"\"Queue event for background processing.\"\"\"\n    try:\n        _audit_queue.append(event)\n    except:\n        logger.warning(\"Audit queue full, dropping event\")\n\nasync def _process_audit_queue():\n    \"\"\"Background task to process audit events.\"\"\"\n    while True:\n        if _audit_queue:\n            event = _audit_queue.popleft()\n            try:\n                await _emit_event_async(event)\n            except Exception as e:\n                logger.error(f\"Failed to emit audit event: {e}\")\n        else:\n            await asyncio.sleep(0.1)\n\nasync def start_audit_processor():\n    global _audit_task\n    _audit_task = asyncio.create_task(_process_audit_queue())\n```\n\n## Acceptance Criteria\n- [ ] Audit events queued instead of sync emission\n- [ ] Background task processes queue\n- [ ] Queue overflow handling (drop oldest or warn)\n- [ ] Graceful shutdown flushes queue\n- [ ] All unit tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T01:50:47.407351837Z","updated_at":"2025-12-29T19:34:43.068258037Z","closed_at":"2025-12-29T19:34:43.068258037Z","close_reason":"Added async queue for audit events with background processor, start/stop lifecycle hooks, graceful shutdown with flush","labels":["performance"]}
{"id":"lettatoolsselector-55lb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:08.921671272Z","updated_at":"2025-12-29T20:33:08.921671272Z","comments":[{"id":575,"issue_id":"lettatoolsselector-55lb","author":"root","text":"Synced from Beads: lettatoolsselector-ar6\n\n---\nHuly Issue: LTSEL-162","created_at":"2025-12-29T20:33:09Z"}]}
{"id":"lettatoolsselector-59zc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:05.004748584Z","updated_at":"2025-12-29T20:32:05.004748584Z","comments":[{"id":564,"issue_id":"lettatoolsselector-59zc","author":"root","text":"Synced from Beads: lettatoolsselector-9k9\n\n---\nHuly Issue: LTSEL-171","created_at":"2025-12-29T20:32:05Z"}]}
{"id":"lettatoolsselector-5ac","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:50:19.157246377Z","updated_at":"2025-12-29T19:50:19.157246377Z","comments":[{"id":242,"issue_id":"lettatoolsselector-5ac","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T19:50:19Z"}]}
{"id":"lettatoolsselector-5gu4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:12.014605216Z","updated_at":"2025-12-29T20:29:12.014605216Z","comments":[{"id":534,"issue_id":"lettatoolsselector-5gu4","author":"root","text":"Synced from Beads: lettatoolsselector-ayf\n\n---\nHuly Issue: LTSEL-176","created_at":"2025-12-29T20:29:12Z"}]}
{"id":"lettatoolsselector-5hck","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:13.357395619Z","updated_at":"2025-12-29T20:56:13.357395619Z","comments":[{"id":771,"issue_id":"lettatoolsselector-5hck","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:56:13Z"}]}
{"id":"lettatoolsselector-5hw7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:37.619485728Z","updated_at":"2025-12-29T20:12:37.619485728Z","comments":[{"id":337,"issue_id":"lettatoolsselector-5hw7","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:12:37Z"}]}
{"id":"lettatoolsselector-5l3","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:16.775680432Z","updated_at":"2025-12-23T03:23:16.775680432Z","comments":[{"id":40,"issue_id":"lettatoolsselector-5l3","author":"node","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2025-12-23T03:23:16Z"}]}
{"id":"lettatoolsselector-5lew","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:38.907969086Z","updated_at":"2025-12-29T20:22:38.907969086Z","comments":[{"id":450,"issue_id":"lettatoolsselector-5lew","author":"root","text":"Synced from Beads: lettatoolsselector-0do\n\n---\nHuly Issue: LTSEL-189","created_at":"2025-12-29T20:22:39Z"}]}
{"id":"lettatoolsselector-5lr6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:28.197519136Z","updated_at":"2025-12-29T20:27:28.197519136Z","comments":[{"id":515,"issue_id":"lettatoolsselector-5lr6","author":"root","text":"Synced from Beads: lettatoolsselector-8ix\n\n---\nHuly Issue: LTSEL-184","created_at":"2025-12-29T20:27:28Z"}]}
{"id":"lettatoolsselector-5m4g","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:45.324691843Z","updated_at":"2025-12-29T20:23:45.324691843Z","comments":[{"id":462,"issue_id":"lettatoolsselector-5m4g","author":"root","text":"Synced from Beads: lettatoolsselector-joa\n\n---\nHuly Issue: LTSEL-187","created_at":"2025-12-29T20:23:45Z"}]}
{"id":"lettatoolsselector-5m9","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:48:53.422804001Z","updated_at":"2025-12-29T19:48:53.422804001Z","comments":[{"id":236,"issue_id":"lettatoolsselector-5m9","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T19:48:53Z"}]}
{"id":"lettatoolsselector-5moq","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:49:48.656203731Z","updated_at":"2025-12-29T20:49:48.656203731Z","comments":[{"id":712,"issue_id":"lettatoolsselector-5moq","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:49:48Z"}]}
{"id":"lettatoolsselector-5qq2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:23.265618982Z","updated_at":"2025-12-29T20:18:23.265618982Z","comments":[{"id":400,"issue_id":"lettatoolsselector-5qq2","author":"root","text":"Synced from Beads: lettatoolsselector-bte\n\n---\nHuly Issue: LTSEL-197","created_at":"2025-12-29T20:18:23Z"}]}
{"id":"lettatoolsselector-5v0b","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:37.393157032Z","updated_at":"2025-12-29T20:29:37.393157032Z","comments":[{"id":540,"issue_id":"lettatoolsselector-5v0b","author":"root","text":"Synced from Beads: lettatoolsselector-x6v\n\n---\nHuly Issue: LTSEL-168","created_at":"2025-12-29T20:29:37Z"}]}
{"id":"lettatoolsselector-5vjn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:17.732010797Z","updated_at":"2025-12-29T21:00:17.732010797Z","comments":[{"id":816,"issue_id":"lettatoolsselector-5vjn","author":"root","text":"Synced from Beads: lettatoolsselector-5mj\n\n---\nHuly Issue: LTSEL-123","created_at":"2025-12-29T21:00:18Z"}]}
{"id":"lettatoolsselector-5vu","title":"[Config] Add config validation to CI pipeline","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:28:00.54116237Z","updated_at":"2025-12-23T03:28:00.54116237Z","comments":[{"id":53,"issue_id":"lettatoolsselector-5vu","author":"node","text":"Synced from Beads: lettatoolsselector-388\n\n---\nHuly Issue: LTSEL-31","created_at":"2025-12-23T03:28:00Z"}]}
{"id":"lettatoolsselector-5wwo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:53:15.996539491Z","updated_at":"2025-12-29T20:53:15.996539491Z","comments":[{"id":744,"issue_id":"lettatoolsselector-5wwo","author":"root","text":"Synced from Beads: lettatoolsselector-egp\n\n---\nHuly Issue: LTSEL-141","created_at":"2025-12-29T20:53:16Z"}]}
{"id":"lettatoolsselector-5xn","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:05.985338423Z","updated_at":"2025-12-23T03:23:06.372637179Z","closed_at":"2025-12-23T03:23:06.372637179Z","close_reason":"Closed","comments":[{"id":29,"issue_id":"lettatoolsselector-5xn","author":"node","text":"## Purpose\n\nRegression guard to ensure protected tools are never removed during pruning.\n\n## Test Scenario\n\n1. Create test agent with MAX_TOTAL_TOOLS tools including find_agents\n2. Trigger attachment that would require pruning\n3. Assert: find_agents is still attached after operation\n4. Repeat for each protected tool in PROTECTED_TOOLS list\n\n## Acceptance Criteria\n\n- [ ] Test runs in CI on every PR\n- [ ] Covers all configured protected tools\n- [ ] Fails if any protected tool is detached\n- [ ] Logs which tools were pruned vs preserved\n\n## Technical Notes\n\n- Parameterize test over PROTECTED_TOOLS list\n- Use pytest-parametrize for clean test output\n- Tag as \n\n---\nHuly Issue: LTSEL-20","created_at":"2025-12-23T03:23:06Z"}]}
{"id":"lettatoolsselector-5y15","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:50.544289768Z","updated_at":"2025-12-29T21:00:50.544289768Z","comments":[{"id":818,"issue_id":"lettatoolsselector-5y15","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-109","created_at":"2025-12-29T21:00:50Z"}]}
{"id":"lettatoolsselector-5z59","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:29.385611698Z","updated_at":"2025-12-29T20:54:29.385611698Z","comments":[{"id":756,"issue_id":"lettatoolsselector-5z59","author":"root","text":"Synced from Beads: lettatoolsselector-m03\n\n---\nHuly Issue: LTSEL-70","created_at":"2025-12-29T20:54:29Z"}]}
{"id":"lettatoolsselector-5zta","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:07.325098951Z","updated_at":"2025-12-29T20:39:07.325098951Z","comments":[{"id":640,"issue_id":"lettatoolsselector-5zta","author":"root","text":"Synced from Beads: lettatoolsselector-n7f\n\n---\nHuly Issue: LTSEL-163","created_at":"2025-12-29T20:39:07Z"}]}
{"id":"lettatoolsselector-61cz","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:35.937568192Z","updated_at":"2025-12-29T20:14:35.937568192Z","comments":[{"id":356,"issue_id":"lettatoolsselector-61cz","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:14:36Z"}]}
{"id":"lettatoolsselector-626","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:28.787444478Z","updated_at":"2025-12-29T18:56:26.302600036Z","closed_at":"2025-12-29T18:56:26.302600036Z","close_reason":"Duplicate of lettatoolsselector-xoz (operational runbooks)","comments":[{"id":19,"issue_id":"lettatoolsselector-626","author":"node","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2025-12-22T23:46:28Z"}]}
{"id":"lettatoolsselector-62k","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:57:43.418219404Z","updated_at":"2025-12-29T19:57:43.418219404Z","comments":[{"id":269,"issue_id":"lettatoolsselector-62k","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T19:57:43Z"}]}
{"id":"lettatoolsselector-62we","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:55:25.801821032Z","updated_at":"2025-12-29T20:55:25.801821032Z","comments":[{"id":765,"issue_id":"lettatoolsselector-62we","author":"root","text":"Synced from Beads: lettatoolsselector-egp\n\n---\nHuly Issue: LTSEL-141","created_at":"2025-12-29T20:55:26Z"}]}
{"id":"lettatoolsselector-637o","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:40.757078236Z","updated_at":"2025-12-29T20:56:40.757078236Z","comments":[{"id":779,"issue_id":"lettatoolsselector-637o","author":"root","text":"Synced from Beads: lettatoolsselector-lv2\n\n---\nHuly Issue: LTSEL-131","created_at":"2025-12-29T20:56:41Z"}]}
{"id":"lettatoolsselector-642","title":"[Refactor] Phase 0: Establish test coverage for critical paths","description":"Before refactoring api_server.py (9,027 lines), we need test coverage on critical paths to ensure refactoring doesn't break functionality.\n\n## Critical Paths to Cover\n\n### Priority 1 - Core Tool Operations (Most Used)\n1. **POST /api/v1/tools/attach** (lines 1136-1455)\n   - Tool search and attachment flow\n   - Pre-attach pruning logic\n   - Loop trigger mechanism\n   - Webhook emission\n\n2. **POST /api/v1/tools/search** (lines 577-678)\n   - Weaviate search with reranking\n   - Query expansion\n   - Score filtering\n\n3. **POST /api/v1/tools/prune** (lines 1779-1888)\n   - Tool pruning logic\n   - MIN_MCP_TOOLS enforcement\n\n### Priority 2 - Supporting Functions\n4. `attach_tool()` / `detach_tool()` (lines 309-401)\n5. `process_tools()` (lines 403-575)\n6. `_perform_tool_pruning()` (lines 1483-1777)\n7. `trigger_agent_loop()` (lines 1037-1081)\n\n### Priority 3 - Cache \u0026 Agent Operations\n8. `read_tool_cache()` / `read_mcp_servers_cache()`\n9. `fetch_agent_info()` / `fetch_agent_tools()`\n\n## Current Coverage\n- Overall: 13%\n- api_server.py: 8.8%\n\n## Target Coverage Before Refactoring\n- Critical paths (Priority 1): 80%+\n- Supporting functions (Priority 2): 70%+\n- Cache operations (Priority 3): 60%+\n\n## Test Types Needed\n- [ ] Unit tests with mocked Letta/Weaviate clients\n- [ ] Integration tests against running services\n- [ ] Contract tests for API endpoints\n\n## Acceptance Criteria\n- [ ] Critical path coverage reaches 80%\n- [ ] All existing tests still pass\n- [ ] Test fixtures/mocks established for reuse","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T19:36:47.114061273Z","updated_at":"2025-12-29T19:02:05.655579446Z","closed_at":"2025-12-29T19:02:05.655579446Z","close_reason":"Test coverage established: 389 unit tests passing"}
{"id":"lettatoolsselector-64ep","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:06.501028129Z","updated_at":"2025-12-29T20:48:06.501028129Z","comments":[{"id":701,"issue_id":"lettatoolsselector-64ep","author":"root","text":"Synced from Beads: lettatoolsselector-t4d\n\n---\nHuly Issue: LTSEL-146","created_at":"2025-12-29T20:48:06Z"}]}
{"id":"lettatoolsselector-65hs","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:51:19.189447371Z","updated_at":"2025-12-29T20:51:19.189447371Z","comments":[{"id":729,"issue_id":"lettatoolsselector-65hs","author":"root","text":"Synced from Beads: lettatoolsselector-w33\n\n---\nHuly Issue: LTSEL-138","created_at":"2025-12-29T20:51:19Z"}]}
{"id":"lettatoolsselector-667y","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:24.963976246Z","updated_at":"2025-12-29T20:58:24.963976246Z","comments":[{"id":797,"issue_id":"lettatoolsselector-667y","author":"root","text":"Synced from Beads: lettatoolsselector-2iz\n\n---\nHuly Issue: LTSEL-120","created_at":"2025-12-29T20:58:25Z"}]}
{"id":"lettatoolsselector-66j7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:31.222696346Z","updated_at":"2025-12-29T20:25:31.222696346Z","comments":[{"id":483,"issue_id":"lettatoolsselector-66j7","author":"root","text":"Synced from Beads: lettatoolsselector-ayf\n\n---\nHuly Issue: LTSEL-176","created_at":"2025-12-29T20:25:31Z"}]}
{"id":"lettatoolsselector-67zd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:50:14.788529515Z","updated_at":"2025-12-29T20:50:14.788529515Z","comments":[{"id":718,"issue_id":"lettatoolsselector-67zd","author":"root","text":"Synced from Beads: lettatoolsselector-cic\n\n---\nHuly Issue: LTSEL-140","created_at":"2025-12-29T20:50:15Z"}]}
{"id":"lettatoolsselector-689a","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:57.767650094Z","updated_at":"2025-12-29T20:57:57.767650094Z","comments":[{"id":791,"issue_id":"lettatoolsselector-689a","author":"root","text":"Synced from Beads: lettatoolsselector-lec\n\n---\nHuly Issue: LTSEL-117","created_at":"2025-12-29T20:57:58Z"}]}
{"id":"lettatoolsselector-68co","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:13.345556021Z","updated_at":"2025-12-29T20:19:13.345556021Z","comments":[{"id":410,"issue_id":"lettatoolsselector-68co","author":"root","text":"Synced from Beads: lettatoolsselector-8pi\n\n---\nHuly Issue: LTSEL-200","created_at":"2025-12-29T20:19:13Z"}]}
{"id":"lettatoolsselector-6fh","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:29.355653376Z","updated_at":"2025-12-29T18:56:33.26947331Z","closed_at":"2025-12-29T18:56:33.26947331Z","close_reason":"Duplicate of lettatoolsselector-784 (scheduled pruning job)","comments":[{"id":24,"issue_id":"lettatoolsselector-6fh","author":"node","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2025-12-22T23:46:29Z"}]}
{"id":"lettatoolsselector-6g48","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:53.019147486Z","updated_at":"2025-12-29T20:27:53.019147486Z","comments":[{"id":518,"issue_id":"lettatoolsselector-6g48","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T20:27:53Z"}]}
{"id":"lettatoolsselector-6hbw","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:51.527645356Z","updated_at":"2025-12-29T20:54:51.527645356Z","comments":[{"id":757,"issue_id":"lettatoolsselector-6hbw","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:54:51Z"}]}
{"id":"lettatoolsselector-6he","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:19.698941683Z","updated_at":"2025-12-29T18:56:22.989182633Z","closed_at":"2025-12-29T18:56:22.989182633Z","close_reason":"Duplicate of lettatoolsselector-mna (Prometheus metrics)","comments":[{"id":46,"issue_id":"lettatoolsselector-6he","author":"node","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2025-12-23T03:23:19Z"}]}
{"id":"lettatoolsselector-6hpv","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:33.602526622Z","updated_at":"2025-12-29T20:21:33.602526622Z","comments":[{"id":435,"issue_id":"lettatoolsselector-6hpv","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:21:33Z"}]}
{"id":"lettatoolsselector-6io","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","description":"## Overview\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher  \n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-29T03:26:52.205387601Z","updated_at":"2025-12-29T20:30:45.833956603Z","closed_at":"2025-12-29T20:30:45.833956603Z","close_reason":"Semantic Enrichment System complete. Phase 1 (Server Profiler), Phase 2 (Tool Enricher), Phase 3 (Weaviate schema/search), Phase 4 (API routes) all implemented. Files: semantic_enrichment/, sync_enrichment_to_weaviate.py, routes/enrichment.py. Search now uses action_entities, semantic_keywords, use_cases, server_domain fields.","labels":["enhancement"]}
{"id":"lettatoolsselector-6j8h","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:37.650921954Z","updated_at":"2025-12-29T20:28:37.650921954Z","comments":[{"id":526,"issue_id":"lettatoolsselector-6j8h","author":"root","text":"Synced from Beads: lettatoolsselector-4tv\n\n---\nHuly Issue: LTSEL-167","created_at":"2025-12-29T20:28:37Z"}]}
{"id":"lettatoolsselector-6lkv","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:51.746955722Z","updated_at":"2025-12-29T20:16:51.746955722Z","comments":[{"id":383,"issue_id":"lettatoolsselector-6lkv","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:16:52Z"}]}
{"id":"lettatoolsselector-6sz","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.939734223Z","updated_at":"2025-12-29T18:56:06.258845534Z","closed_at":"2025-12-29T18:56:06.258845534Z","close_reason":"Duplicate of closed lettatoolsselector-3iy","comments":[{"id":7,"issue_id":"lettatoolsselector-6sz","author":"node","text":"## Problem\n\nTool selector has multiple compose files (compose.yaml, docker-compose.yml, compose-with-reranker.yaml) and an .env file. Changes require editing multiple places.\n\n## Solution\n\nConsolidate to single compose.yaml with environment-specific overrides via .env.\n\n## Acceptance Criteria\n\n- [ ] Single compose.yaml as source of truth\n- [ ] .env.example checked into repo with all variables documented\n- [ ] .env (not checked in) for local overrides\n- [ ] Remove deprecated docker-compose.yml\n- [ ] CI validates .env.example has all required vars\n\n## Technical Notes\n\n- Use compose profiles for optional services (reranker, etc.)\n- Document which vars are required vs optional\n- Add validation script to check env completeness\n\n---\nHuly Issue: LTSEL-15","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-6t7r","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:17.852959073Z","updated_at":"2025-12-29T20:42:17.852959073Z","comments":[{"id":661,"issue_id":"lettatoolsselector-6t7r","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:42:18Z"}]}
{"id":"lettatoolsselector-6ti","title":"[Code Quality] Fix async function return type annotations","description":"Several async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n```\nType '(config: Dict[str, Any]) -\u003e ConfigValidationResponse' is not assignable to declared type '() -\u003e CoroutineType[Any, Any, Response | tuple[Response, Literal[500]]]'\n```\n\n### Line 23 - Multiple tracking functions\n```\nType '(operation: str, token_count: int, provider: str = \"openai\") -\u003e CoroutineType[Any, Any, bool]' is not assignable to declared type '(...) -\u003e None'\n```\n\n## Root Cause\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-28T17:13:30.373745238Z","updated_at":"2025-12-29T19:24:03.132221922Z","closed_at":"2025-12-29T19:24:03.132221922Z","close_reason":"Fixed as part of api_server.py type fixes - async cost tracking stubs now properly typed"}
{"id":"lettatoolsselector-6vzv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:58.599646774Z","updated_at":"2025-12-29T20:17:58.599646774Z","comments":[{"id":397,"issue_id":"lettatoolsselector-6vzv","author":"root","text":"Synced from Beads: lettatoolsselector-8hp\n\n---\nHuly Issue: LTSEL-203","created_at":"2025-12-29T20:17:58Z"}]}
{"id":"lettatoolsselector-6y5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:21.185987331Z","updated_at":"2025-12-29T20:09:21.185987331Z","comments":[{"id":306,"issue_id":"lettatoolsselector-6y5","author":"root","text":"Synced from Beads: lettatoolsselector-7q4\n\n---\nHuly Issue: LTSEL-216","created_at":"2025-12-29T20:09:21Z"}]}
{"id":"lettatoolsselector-6zkt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:51.219374127Z","updated_at":"2025-12-29T20:26:51.219374127Z","comments":[{"id":501,"issue_id":"lettatoolsselector-6zkt","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T20:26:51Z"}]}
{"id":"lettatoolsselector-70xc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:55.854531748Z","updated_at":"2025-12-29T20:24:55.854531748Z","comments":[{"id":477,"issue_id":"lettatoolsselector-70xc","author":"root","text":"Synced from Beads: lettatoolsselector-eln\n\n---\nHuly Issue: LTSEL-174","created_at":"2025-12-29T20:24:56Z"}]}
{"id":"lettatoolsselector-718i","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:43:55.16187477Z","updated_at":"2025-12-29T20:43:55.16187477Z","comments":[{"id":674,"issue_id":"lettatoolsselector-718i","author":"root","text":"Synced from Beads: lettatoolsselector-f4x\n\n---\nHuly Issue: LTSEL-155","created_at":"2025-12-29T20:43:55Z"}]}
{"id":"lettatoolsselector-784","title":"[Enforcement] Create scheduled agent tool pruning job","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:21.106579546Z","updated_at":"2025-12-23T03:23:21.106579546Z","comments":[{"id":48,"issue_id":"lettatoolsselector-784","author":"node","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2025-12-23T03:23:21Z"}]}
{"id":"lettatoolsselector-7bdq","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:50.434595481Z","updated_at":"2025-12-29T20:24:50.434595481Z","comments":[{"id":475,"issue_id":"lettatoolsselector-7bdq","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:24:50Z"}]}
{"id":"lettatoolsselector-7br","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:57:25.106858913Z","updated_at":"2025-12-29T19:57:25.106858913Z","comments":[{"id":266,"issue_id":"lettatoolsselector-7br","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T19:57:25Z"}]}
{"id":"lettatoolsselector-7dmh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:06.657874989Z","updated_at":"2025-12-29T20:39:06.657874989Z","comments":[{"id":639,"issue_id":"lettatoolsselector-7dmh","author":"root","text":"Synced from Beads: lettatoolsselector-x82\n\n---\nHuly Issue: LTSEL-159","created_at":"2025-12-29T20:39:06Z"}]}
{"id":"lettatoolsselector-7dri","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:48.100665054Z","updated_at":"2025-12-29T20:12:48.100665054Z","comments":[{"id":340,"issue_id":"lettatoolsselector-7dri","author":"root","text":"Synced from Beads: lettatoolsselector-b2i\n\n---\nHuly Issue: LTSEL-208","created_at":"2025-12-29T20:12:48Z"}]}
{"id":"lettatoolsselector-7dzi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:59:24.667421262Z","updated_at":"2025-12-29T20:59:24.667421262Z","comments":[{"id":807,"issue_id":"lettatoolsselector-7dzi","author":"root","text":"Synced from Beads: lettatoolsselector-lec\n\n---\nHuly Issue: LTSEL-117","created_at":"2025-12-29T20:59:24Z"}]}
{"id":"lettatoolsselector-7e49","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:56.801859701Z","updated_at":"2025-12-29T20:39:56.801859701Z","comments":[{"id":646,"issue_id":"lettatoolsselector-7e49","author":"root","text":"Synced from Beads: lettatoolsselector-tqp\n\n---\nHuly Issue: LTSEL-150","created_at":"2025-12-29T20:39:57Z"}]}
{"id":"lettatoolsselector-7gkz","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:34.779270769Z","updated_at":"2025-12-29T20:29:34.779270769Z","comments":[{"id":538,"issue_id":"lettatoolsselector-7gkz","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T20:29:35Z"}]}
{"id":"lettatoolsselector-7gwi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:07.452717348Z","updated_at":"2025-12-29T20:34:07.452717348Z","comments":[{"id":586,"issue_id":"lettatoolsselector-7gwi","author":"root","text":"Synced from Beads: lettatoolsselector-kne\n\n---\nHuly Issue: LTSEL-158","created_at":"2025-12-29T20:34:07Z"}]}
{"id":"lettatoolsselector-7it2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:59:23.904863787Z","updated_at":"2025-12-29T20:59:23.904863787Z","comments":[{"id":806,"issue_id":"lettatoolsselector-7it2","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-112","created_at":"2025-12-29T20:59:24Z"}]}
{"id":"lettatoolsselector-7kwi","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:12.797947975Z","updated_at":"2025-12-29T20:35:12.797947975Z","comments":[{"id":598,"issue_id":"lettatoolsselector-7kwi","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:35:13Z"}]}
{"id":"lettatoolsselector-7l3y","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:09.959123876Z","updated_at":"2025-12-29T20:13:09.959123876Z","comments":[{"id":344,"issue_id":"lettatoolsselector-7l3y","author":"root","text":"Synced from Beads: lettatoolsselector-12y\n\n---\nHuly Issue: LTSEL-201","created_at":"2025-12-29T20:13:10Z"}]}
{"id":"lettatoolsselector-7lj","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:55:06.822715997Z","updated_at":"2025-12-29T19:55:06.822715997Z","comments":[{"id":258,"issue_id":"lettatoolsselector-7lj","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T19:55:07Z"}]}
{"id":"lettatoolsselector-7rj","title":"[Config] Create automated deploy script","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:28:00.227878853Z","updated_at":"2025-12-23T03:28:00.227878853Z","comments":[{"id":52,"issue_id":"lettatoolsselector-7rj","author":"node","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2025-12-23T03:28:00Z"}]}
{"id":"lettatoolsselector-7whu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:43:54.507212272Z","updated_at":"2025-12-29T20:43:54.507212272Z","comments":[{"id":673,"issue_id":"lettatoolsselector-7whu","author":"root","text":"Synced from Beads: lettatoolsselector-tqp\n\n---\nHuly Issue: LTSEL-150","created_at":"2025-12-29T20:43:54Z"}]}
{"id":"lettatoolsselector-7y2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:51:27.788504943Z","updated_at":"2025-12-29T19:51:27.788504943Z","comments":[{"id":245,"issue_id":"lettatoolsselector-7y2","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T19:51:28Z"}]}
{"id":"lettatoolsselector-7z8","title":"[Refactor] Migrate models handlers to models blueprint","description":"## Goal\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\nThese handlers interact with:\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T00:43:14.483667034Z","updated_at":"2025-12-29T01:10:44.00743334Z","closed_at":"2025-12-29T01:10:44.00743334Z","close_reason":"Closed","labels":["refactor","services-layer"]}
{"id":"lettatoolsselector-80x","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:14.296026908Z","updated_at":"2025-12-29T18:56:31.064288926Z","closed_at":"2025-12-29T18:56:31.064288926Z","close_reason":"Duplicate of lettatoolsselector-9x3 (E2E test)","comments":[{"id":38,"issue_id":"lettatoolsselector-80x","author":"node","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2025-12-23T03:23:14Z"}]}
{"id":"lettatoolsselector-85qn","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:05.875874762Z","updated_at":"2025-12-29T20:34:05.875874762Z","comments":[{"id":585,"issue_id":"lettatoolsselector-85qn","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T20:34:06Z"}]}
{"id":"lettatoolsselector-867m","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:12.781930505Z","updated_at":"2025-12-29T20:14:12.781930505Z","comments":[{"id":355,"issue_id":"lettatoolsselector-867m","author":"root","text":"Synced from Beads: lettatoolsselector-6gk\n\n---\nHuly Issue: LTSEL-210","created_at":"2025-12-29T20:14:13Z"}]}
{"id":"lettatoolsselector-869","title":"[Refactor] Phase 1: Extract data models and types","description":"Extract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models (`models/tool.py`)\n```python\n@dataclass\nclass Tool:\n    id: str\n    name: str\n    description: str\n    tool_type: str  # 'external_mcp', 'custom', 'letta_core'\n    source_type: str\n    json_schema: dict\n    mcp_server_name: Optional[str]\n    tags: List[str]\n    \n@dataclass\nclass ToolAttachResult:\n    tool_id: str\n    tool_name: str\n    success: bool\n    error: Optional[str]\n\n@dataclass  \nclass ToolSearchResult:\n    tool: Tool\n    score: float\n    rerank_score: Optional[float]\n```\n\n### 2. Agent Models (`models/agent.py`)\n```python\n@dataclass\nclass AgentInfo:\n    id: str\n    name: str\n    \n@dataclass\nclass AgentToolSet:\n    agent_id: str\n    mcp_tools: List[Tool]\n    core_tools: List[Tool]\n    total_count: int\n```\n\n### 3. Request/Response Models (`models/requests.py`)\n```python\n@dataclass\nclass AttachRequest:\n    agent_id: str\n    query: str\n    limit: int = 10\n    min_score: float = 50.0\n    keep_tools: List[str] = field(default_factory=list)\n    skip_loop_trigger: bool = False\n\n@dataclass\nclass AttachResponse:\n    success: bool\n    message: str\n    successful_attachments: List[ToolAttachResult]\n    failed_attachments: List[ToolAttachResult]\n    detached_tools: List[str]\n    loop_triggered: bool\n```\n\n### 4. Constants (`constants.py`)\n```python\n# Tool limits\nDEFAULT_MAX_TOTAL_TOOLS = 30\nDEFAULT_MAX_MCP_TOOLS = 20\nDEFAULT_MIN_MCP_TOOLS = 7\nDEFAULT_DROP_RATE = 0.3\n\n# Letta core tool types\nLETTA_CORE_TOOL_TYPES = [\n    'letta_core', 'letta_voice_sleeptime_core', ...\n]\n\n# Never detach tools\nNEVER_DETACH_TOOLS = ['find_tools', 'matrix_messaging', ...]\n```\n\n## File Structure\n```\nlettaaugment-source/\n models/\n    __init__.py\n    tool.py\n    agent.py\n    requests.py\n constants.py\n api_server.py (imports from above)\n```\n\n## Acceptance Criteria\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:37:09.269216431Z","updated_at":"2025-12-28T21:09:10.980552414Z","closed_at":"2025-12-28T21:09:10.980559948Z"}
{"id":"lettatoolsselector-87gs","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:50.633714936Z","updated_at":"2025-12-29T20:17:50.633714936Z","comments":[{"id":393,"issue_id":"lettatoolsselector-87gs","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T20:17:50Z"}]}
{"id":"lettatoolsselector-88k","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:48:35.011200371Z","updated_at":"2025-12-29T19:48:35.011200371Z","comments":[{"id":235,"issue_id":"lettatoolsselector-88k","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T19:48:35Z"}]}
{"id":"lettatoolsselector-89tt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:01.068655476Z","updated_at":"2025-12-29T20:36:01.068655476Z","comments":[{"id":609,"issue_id":"lettatoolsselector-89tt","author":"root","text":"Synced from Beads: lettatoolsselector-r2m\n\n---\nHuly Issue: LTSEL-169","created_at":"2025-12-29T20:36:01Z"}]}
{"id":"lettatoolsselector-8m5","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:11.704019765Z","updated_at":"2025-12-23T03:23:11.910721455Z","closed_at":"2025-12-23T03:23:11.910721455Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8owo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:09.22593839Z","updated_at":"2025-12-29T20:20:09.22593839Z","comments":[{"id":420,"issue_id":"lettatoolsselector-8owo","author":"root","text":"Synced from Beads: lettatoolsselector-le1\n\n---\nHuly Issue: LTSEL-198","created_at":"2025-12-29T20:20:09Z"}]}
{"id":"lettatoolsselector-8q9","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:41.633484509Z","updated_at":"2025-12-29T20:09:41.633484509Z","comments":[{"id":308,"issue_id":"lettatoolsselector-8q9","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T20:09:41Z"}]}
{"id":"lettatoolsselector-8s1","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:08:16.853460013Z","updated_at":"2025-12-29T20:08:16.853460013Z","comments":[{"id":295,"issue_id":"lettatoolsselector-8s1","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T20:08:17Z"}]}
{"id":"lettatoolsselector-8wq7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:41:05.645168525Z","updated_at":"2025-12-29T20:41:05.645168525Z","comments":[{"id":653,"issue_id":"lettatoolsselector-8wq7","author":"root","text":"Synced from Beads: lettatoolsselector-7mg\n\n---\nHuly Issue: LTSEL-144","created_at":"2025-12-29T20:41:05Z"}]}
{"id":"lettatoolsselector-8z4r","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:33.395046976Z","updated_at":"2025-12-29T20:16:33.395046976Z","comments":[{"id":382,"issue_id":"lettatoolsselector-8z4r","author":"root","text":"Synced from Beads: lettatoolsselector-ajz\n\n---\nHuly Issue: LTSEL-205","created_at":"2025-12-29T20:16:33Z"}]}
{"id":"lettatoolsselector-8zqu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:07.685751861Z","updated_at":"2025-12-29T20:11:07.685751861Z","comments":[{"id":323,"issue_id":"lettatoolsselector-8zqu","author":"root","text":"Synced from Beads: lettatoolsselector-6pf\n\n---\nHuly Issue: LTSEL-212","created_at":"2025-12-29T20:11:07Z"}]}
{"id":"lettatoolsselector-92rx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:03.851380918Z","updated_at":"2025-12-29T20:28:03.851380918Z","comments":[{"id":520,"issue_id":"lettatoolsselector-92rx","author":"root","text":"Synced from Beads: lettatoolsselector-9k9\n\n---\nHuly Issue: LTSEL-171","created_at":"2025-12-29T20:28:04Z"}]}
{"id":"lettatoolsselector-94qy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:59.611499638Z","updated_at":"2025-12-29T20:57:59.611499638Z","comments":[{"id":793,"issue_id":"lettatoolsselector-94qy","author":"root","text":"Synced from Beads: lettatoolsselector-5j1\n\n---\nHuly Issue: LTSEL-128","created_at":"2025-12-29T20:57:59Z"}]}
{"id":"lettatoolsselector-95p2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:36.276395873Z","updated_at":"2025-12-29T20:33:36.276395873Z","comments":[{"id":581,"issue_id":"lettatoolsselector-95p2","author":"root","text":"Synced from Beads: lettatoolsselector-x6v\n\n---\nHuly Issue: LTSEL-168","created_at":"2025-12-29T20:33:36Z"}]}
{"id":"lettatoolsselector-96wu","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:02.855913657Z","updated_at":"2025-12-29T20:19:02.855913657Z","comments":[{"id":406,"issue_id":"lettatoolsselector-96wu","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:19:03Z"}]}
{"id":"lettatoolsselector-97pf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:55.947235892Z","updated_at":"2025-12-29T20:39:55.947235892Z","comments":[{"id":645,"issue_id":"lettatoolsselector-97pf","author":"root","text":"Synced from Beads: lettatoolsselector-08q\n\n---\nHuly Issue: LTSEL-147","created_at":"2025-12-29T20:39:56Z"}]}
{"id":"lettatoolsselector-98rl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:31:29.272145265Z","updated_at":"2025-12-29T20:31:29.272145265Z","comments":[{"id":558,"issue_id":"lettatoolsselector-98rl","author":"root","text":"Synced from Beads: lettatoolsselector-tow\n\n---\nHuly Issue: LTSEL-165","created_at":"2025-12-29T20:31:29Z"}]}
{"id":"lettatoolsselector-9glu","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:22.413375412Z","updated_at":"2025-12-29T20:36:22.413375412Z","comments":[{"id":610,"issue_id":"lettatoolsselector-9glu","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T20:36:22Z"}]}
{"id":"lettatoolsselector-9hpy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:55.20714589Z","updated_at":"2025-12-29T20:54:55.20714589Z","comments":[{"id":758,"issue_id":"lettatoolsselector-9hpy","author":"root","text":"Synced from Beads: lettatoolsselector-dj2\n\n---\nHuly Issue: LTSEL-125","created_at":"2025-12-29T20:54:55Z"}]}
{"id":"lettatoolsselector-9hu8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:33.492617817Z","updated_at":"2025-12-29T20:26:33.492617817Z","comments":[{"id":498,"issue_id":"lettatoolsselector-9hu8","author":"root","text":"Synced from Beads: lettatoolsselector-9xp\n\n---\nHuly Issue: LTSEL-181","created_at":"2025-12-29T20:26:33Z"}]}
{"id":"lettatoolsselector-9i6k","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:44:26.31551729Z","updated_at":"2025-12-29T20:44:26.31551729Z","comments":[{"id":677,"issue_id":"lettatoolsselector-9i6k","author":"root","text":"Synced from Beads: lettatoolsselector-3dk\n\n---\nHuly Issue: LTSEL-154","created_at":"2025-12-29T20:44:26Z"}]}
{"id":"lettatoolsselector-9kv","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.807195814Z","updated_at":"2025-12-29T18:56:07.37428219Z","closed_at":"2025-12-29T18:56:07.37428219Z","close_reason":"Duplicate of closed lettatoolsselector-v66","comments":[{"id":6,"issue_id":"lettatoolsselector-9kv","author":"node","text":"## Purpose\n\nRegression guard to ensure tool limits are enforced end-to-end.\n\n## Test Scenario\n\n1. Create test agent with MAX_TOTAL_TOOLS-1 tools attached\n2. Trigger webhook with query that matches 5 tools\n3. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS after operation\n4. Assert: Response includes pruned tools if any were removed\n\n## Acceptance Criteria\n\n- [ ] Test runs in CI on every PR\n- [ ] Uses real tool selector API (integration test)\n- [ ] Cleans up test agent after run\n- [ ] Fails if agent exceeds limit\n\n## Technical Notes\n\n- Use pytest with fixtures for agent setup/teardown\n- May need test-specific MAX_TOTAL_TOOLS value (e.g., 5) for fast testing\n- Tag as \n\n---\nHuly Issue: LTSEL-19","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-9o7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:57:25.732260101Z","updated_at":"2025-12-29T19:57:25.732260101Z","comments":[{"id":267,"issue_id":"lettatoolsselector-9o7","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T19:57:25Z"}]}
{"id":"lettatoolsselector-9q81","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:53.578566913Z","updated_at":"2025-12-29T20:24:53.578566913Z","comments":[{"id":476,"issue_id":"lettatoolsselector-9q81","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T20:24:53Z"}]}
{"id":"lettatoolsselector-9qb0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:37.99154799Z","updated_at":"2025-12-29T20:21:37.99154799Z","comments":[{"id":438,"issue_id":"lettatoolsselector-9qb0","author":"root","text":"Synced from Beads: lettatoolsselector-zzl\n\n---\nHuly Issue: LTSEL-190","created_at":"2025-12-29T20:21:38Z"}]}
{"id":"lettatoolsselector-9swt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:51:42.859149112Z","updated_at":"2025-12-29T20:51:42.859149112Z","comments":[{"id":731,"issue_id":"lettatoolsselector-9swt","author":"root","text":"Synced from Beads: lettatoolsselector-gei\n\n---\nHuly Issue: LTSEL-133","created_at":"2025-12-29T20:51:43Z"}]}
{"id":"lettatoolsselector-9ve","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.837976718Z","updated_at":"2025-12-29T18:56:00.056507758Z","closed_at":"2025-12-29T18:56:00.056507758Z","close_reason":"Duplicate of closed lettatoolsselector-8m5"}
{"id":"lettatoolsselector-9vsz","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:47:39.482729677Z","updated_at":"2025-12-29T20:47:39.482729677Z","comments":[{"id":696,"issue_id":"lettatoolsselector-9vsz","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T20:47:39Z"}]}
{"id":"lettatoolsselector-9vy7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:32.499023936Z","updated_at":"2025-12-29T20:37:32.499023936Z","comments":[{"id":628,"issue_id":"lettatoolsselector-9vy7","author":"root","text":"Synced from Beads: lettatoolsselector-4lx\n\n---\nHuly Issue: LTSEL-166","created_at":"2025-12-29T20:37:32Z"}]}
{"id":"lettatoolsselector-9wii","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:02.392546768Z","updated_at":"2025-12-29T20:22:02.392546768Z","comments":[{"id":443,"issue_id":"lettatoolsselector-9wii","author":"root","text":"Synced from Beads: lettatoolsselector-wtn\n\n---\nHuly Issue: LTSEL-57","created_at":"2025-12-29T20:22:02Z"}]}
{"id":"lettatoolsselector-9wir","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:48.754126363Z","updated_at":"2025-12-29T20:42:48.754126363Z","comments":[{"id":668,"issue_id":"lettatoolsselector-9wir","author":"root","text":"Synced from Beads: lettatoolsselector-omu\n\n---\nHuly Issue: LTSEL-157","created_at":"2025-12-29T20:42:49Z"}]}
{"id":"lettatoolsselector-9x3","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:27:59.187579944Z","updated_at":"2025-12-23T03:27:59.187579944Z","comments":[{"id":49,"issue_id":"lettatoolsselector-9x3","author":"node","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2025-12-23T03:27:59Z"}]}
{"id":"lettatoolsselector-9yr","title":"[Refactor] Extract config module for tool limits","description":"## Summary\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n- `api_server.py:129-154` (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n- `config/tool_limits.py` or add to existing `models.py`\n\n## Values to Extract\n```python\nMAX_TOTAL_TOOLS = int(os.getenv('MAX_TOTAL_TOOLS', '30'))\nMAX_MCP_TOOLS = int(os.getenv('MAX_MCP_TOOLS', '20'))\nMIN_MCP_TOOLS = int(os.getenv('MIN_MCP_TOOLS', '7'))\nMANAGE_ONLY_MCP_TOOLS = os.getenv('MANAGE_ONLY_MCP_TOOLS', 'false').lower() == 'true'\nNEVER_DETACH_TOOLS = [...]\n```\n\n## Implementation\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\nlettatoolsselector-nav","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:51:49.575697277Z","updated_at":"2025-12-29T19:03:29.979084356Z","closed_at":"2025-12-29T19:03:29.979084356Z","close_reason":"Already implemented: ToolLimitsConfig in models.py:337"}
{"id":"lettatoolsselector-a38","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:49:12.201644429Z","updated_at":"2025-12-29T19:49:12.201644429Z","comments":[{"id":238,"issue_id":"lettatoolsselector-a38","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T19:49:12Z"}]}
{"id":"lettatoolsselector-a3a","title":"[Perf] Cache MCP servers data in memory","description":"## Problem\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** `api_server.py:823-835`\n\n```python\n# Line 828-830\nasync with aiofiles.open(MCP_SERVERS_CACHE_FILE_PATH, 'r') as f:\n    mcp_data = json.loads(await f.read())\n    mcp_servers_cache_size_on_disk = len(mcp_data)\n```\n\n## Impact\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n```python\n_mcp_servers_cache: List[dict] = []\n_mcp_servers_cache_mtime: float = 0\n\nasync def read_mcp_servers_cache(force_reload=False) -\u003e List[dict]:\n    global _mcp_servers_cache, _mcp_servers_cache_mtime\n    \n    if not force_reload and _mcp_servers_cache:\n        # Check if file changed\n        current_mtime = os.path.getmtime(MCP_SERVERS_CACHE_FILE_PATH)\n        if current_mtime == _mcp_servers_cache_mtime:\n            return _mcp_servers_cache\n    \n    # Load from file\n    async with aiofiles.open(MCP_SERVERS_CACHE_FILE_PATH, 'r') as f:\n        _mcp_servers_cache = json.loads(await f.read())\n        _mcp_servers_cache_mtime = os.path.getmtime(MCP_SERVERS_CACHE_FILE_PATH)\n    \n    return _mcp_servers_cache\n```\n\n## Acceptance Criteria\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T01:50:20.792232309Z","updated_at":"2025-12-29T17:48:49.124654192Z","closed_at":"2025-12-29T17:48:49.124654192Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-a3pr","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:22.049602944Z","updated_at":"2025-12-29T20:58:22.049602944Z","comments":[{"id":795,"issue_id":"lettatoolsselector-a3pr","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T20:58:22Z"}]}
{"id":"lettatoolsselector-a55e","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:26.560781599Z","updated_at":"2025-12-29T20:26:26.560781599Z","comments":[{"id":494,"issue_id":"lettatoolsselector-a55e","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:26:26Z"}]}
{"id":"lettatoolsselector-a6c","title":"[Refactor] Add search_tools callback to tool_manager","description":"## Summary\nAdd `search_tools` as a configurable callback in `tool_manager.py` to support `_perform_tool_pruning` extraction.\n\n## Problem\n`_perform_tool_pruning` calls `search_tools()` which is imported from `weaviate_tool_search_with_reranking.py`. We can't import this directly in tool_manager without creating circular dependencies.\n\n## Solution\nAdd search function as a callback in `tool_manager.configure()`:\n\n```python\ndef configure(\n    http_session=None,\n    letta_url=None,\n    headers=None,\n    use_letta_sdk=False,\n    get_letta_sdk_client_func=None,\n    search_tools_func=None,  # NEW: callback for search\n    tool_config=None         # NEW: ToolLimitConfig\n):\n    ...\n```\n\n## Implementation\n1. Add `search_tools_func` parameter to `configure()`\n2. Store as module-level `_search_tools`\n3. Update api_server.py startup to pass `search_tools` function\n4. Add unit tests with mock search function\n\n## Acceptance Criteria\n- [ ] configure() accepts search_tools_func\n- [ ] api_server.py passes search_tools on startup\n- [ ] Tests pass with mock search\n\n## Parent Issue\nlettatoolsselector-nav","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:52:01.134499169Z","updated_at":"2025-12-29T19:03:28.781267636Z","closed_at":"2025-12-29T19:03:28.781267636Z","close_reason":"Already implemented: search_tools_func callback in tool_manager.configure()"}
{"id":"lettatoolsselector-a754","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:13.579331907Z","updated_at":"2025-12-29T20:27:13.579331907Z","comments":[{"id":510,"issue_id":"lettatoolsselector-a754","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:27:13Z"}]}
{"id":"lettatoolsselector-a75c","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:48.354998635Z","updated_at":"2025-12-29T20:25:48.354998635Z","comments":[{"id":486,"issue_id":"lettatoolsselector-a75c","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T20:25:48Z"}]}
{"id":"lettatoolsselector-a8bg","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:05.26440744Z","updated_at":"2025-12-29T20:16:05.26440744Z","comments":[{"id":374,"issue_id":"lettatoolsselector-a8bg","author":"root","text":"Synced from Beads: lettatoolsselector-vn0\n\n---\nHuly Issue: LTSEL-192","created_at":"2025-12-29T20:16:05Z"}]}
{"id":"lettatoolsselector-a97e","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:02.332638568Z","updated_at":"2025-12-29T20:34:02.332638568Z","comments":[{"id":584,"issue_id":"lettatoolsselector-a97e","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T20:34:02Z"}]}
{"id":"lettatoolsselector-abo9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:43.407031837Z","updated_at":"2025-12-29T20:14:43.407031837Z","comments":[{"id":359,"issue_id":"lettatoolsselector-abo9","author":"root","text":"Synced from Beads: lettatoolsselector-le1\n\n---\nHuly Issue: LTSEL-198","created_at":"2025-12-29T20:14:43Z"}]}
{"id":"lettatoolsselector-acet","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:55:44.179802102Z","updated_at":"2025-12-29T20:55:44.179802102Z","comments":[{"id":767,"issue_id":"lettatoolsselector-acet","author":"root","text":"Synced from Beads: lettatoolsselector-5mj\n\n---\nHuly Issue: LTSEL-123","created_at":"2025-12-29T20:55:44Z"}]}
{"id":"lettatoolsselector-aglx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:32.845900585Z","updated_at":"2025-12-29T20:16:32.845900585Z","comments":[{"id":381,"issue_id":"lettatoolsselector-aglx","author":"root","text":"Synced from Beads: lettatoolsselector-12y\n\n---\nHuly Issue: LTSEL-201","created_at":"2025-12-29T20:16:33Z"}]}
{"id":"lettatoolsselector-ahfr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:17.784531086Z","updated_at":"2025-12-29T20:35:17.784531086Z","comments":[{"id":600,"issue_id":"lettatoolsselector-ahfr","author":"root","text":"Synced from Beads: lettatoolsselector-53h\n\n---\nHuly Issue: LTSEL-156","created_at":"2025-12-29T20:35:18Z"}]}
{"id":"lettatoolsselector-apj","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:57:03.271631081Z","updated_at":"2025-12-29T19:57:03.271631081Z","comments":[{"id":265,"issue_id":"lettatoolsselector-apj","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T19:57:03Z"}]}
{"id":"lettatoolsselector-aths","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:29.533869772Z","updated_at":"2025-12-29T20:36:29.533869772Z","comments":[{"id":615,"issue_id":"lettatoolsselector-aths","author":"root","text":"Synced from Beads: lettatoolsselector-x6v\n\n---\nHuly Issue: LTSEL-168","created_at":"2025-12-29T20:36:29Z"}]}
{"id":"lettatoolsselector-auxq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:41.357361694Z","updated_at":"2025-12-29T20:32:41.357361694Z","comments":[{"id":571,"issue_id":"lettatoolsselector-auxq","author":"root","text":"Synced from Beads: lettatoolsselector-8o8\n\n---\nHuly Issue: LTSEL-175","created_at":"2025-12-29T20:32:41Z"}]}
{"id":"lettatoolsselector-awvr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:35.309214363Z","updated_at":"2025-12-29T20:33:35.309214363Z","comments":[{"id":580,"issue_id":"lettatoolsselector-awvr","author":"root","text":"## Purpose\n\nGuard against regression where pagination is forgotten and only partial tools returned.\n\n## Test Scenario\n\n1. Mock Letta API to return 10 tools per page (3 pages total = 30 tools)\n2. Call list_agent_tools(agent_id)\n3. Assert: Returns all 30 tools\n4. Assert: Makes correct number of API calls\n\n## Acceptance Criteria\n\n- [ ] Test uses mocked responses (no real API)\n- [ ] Covers edge cases: 0 tools, exactly 1 page, multiple pages\n- [ ] Fails if fewer tools returned than expected\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock or responses library\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-21","created_at":"2025-12-29T20:33:35Z"}]}
{"id":"lettatoolsselector-axa1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:11.443922295Z","updated_at":"2025-12-29T20:14:11.443922295Z","comments":[{"id":353,"issue_id":"lettatoolsselector-axa1","author":"root","text":"Synced from Beads: lettatoolsselector-qh2\n\n---\nHuly Issue: LTSEL-199","created_at":"2025-12-29T20:14:11Z"}]}
{"id":"lettatoolsselector-b0kb","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:05.338037089Z","updated_at":"2025-12-29T20:13:05.338037089Z","comments":[{"id":342,"issue_id":"lettatoolsselector-b0kb","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T20:13:05Z"}]}
{"id":"lettatoolsselector-b1t","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:08.070788495Z","updated_at":"2025-12-23T03:23:08.431030137Z","closed_at":"2025-12-23T03:23:08.431030137Z","close_reason":"Closed","comments":[{"id":32,"issue_id":"lettatoolsselector-b1t","author":"node","text":"## Problem\n\nWebhook receiver and tool selector have different ideas about what fields are required, what keep_tools means, and how limits work.\n\n## Solution\n\nDefine a formal contract (JSON schema or Pydantic model) that both sides adhere to.\n\n## Acceptance Criteria\n\n- [ ] Document payload schema: query, agent_id, keep_tools, limit, min_score, protected_tools\n- [ ] Document response schema: success, attached, detached, preserved, errors\n- [ ] Document behavior: what happens when limits are exceeded, how protected tools work\n- [ ] Version the contract (v1) to allow future evolution\n- [ ] Both repos reference the same contract documentation\n\n## Technical Notes\n\n- Consider using OpenAPI/Swagger for formal spec\n- Publish contract in shared docs location or SDK repo\n\n---\nHuly Issue: LTSEL-9","created_at":"2025-12-23T03:23:08Z"}]}
{"id":"lettatoolsselector-b6d","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:08:17.495447541Z","updated_at":"2025-12-29T20:08:17.495447541Z","comments":[{"id":296,"issue_id":"lettatoolsselector-b6d","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T20:08:17Z"}]}
{"id":"lettatoolsselector-b8l","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:11.316159731Z","updated_at":"2025-12-23T03:23:11.516214876Z","closed_at":"2025-12-23T03:23:11.516214876Z","close_reason":"Closed"}
{"id":"lettatoolsselector-b9q4","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:51:15.988844364Z","updated_at":"2025-12-29T20:51:15.988844364Z","comments":[{"id":727,"issue_id":"lettatoolsselector-b9q4","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:51:16Z"}]}
{"id":"lettatoolsselector-bbbc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:29.225693134Z","updated_at":"2025-12-29T20:22:29.225693134Z","comments":[{"id":445,"issue_id":"lettatoolsselector-bbbc","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T20:22:29Z"}]}
{"id":"lettatoolsselector-bdhu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:05.82224928Z","updated_at":"2025-12-29T20:57:05.82224928Z","comments":[{"id":784,"issue_id":"lettatoolsselector-bdhu","author":"root","text":"Synced from Beads: lettatoolsselector-88a\n\n---\nHuly Issue: LTSEL-130","created_at":"2025-12-29T20:57:06Z"}]}
{"id":"lettatoolsselector-bf1e","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:41.545499721Z","updated_at":"2025-12-29T20:15:41.545499721Z","comments":[{"id":371,"issue_id":"lettatoolsselector-bf1e","author":"root","text":"Synced from Beads: lettatoolsselector-8hp\n\n---\nHuly Issue: LTSEL-203","created_at":"2025-12-29T20:15:41Z"}]}
{"id":"lettatoolsselector-bhm","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.661060325Z","updated_at":"2025-12-29T18:56:08.386604841Z","closed_at":"2025-12-29T18:56:08.386604841Z","close_reason":"Duplicate of closed lettatoolsselector-5xn","comments":[{"id":5,"issue_id":"lettatoolsselector-bhm","author":"node","text":"## Purpose\n\nRegression guard to ensure protected tools are never removed during pruning.\n\n## Test Scenario\n\n1. Create test agent with MAX_TOTAL_TOOLS tools including find_agents\n2. Trigger attachment that would require pruning\n3. Assert: find_agents is still attached after operation\n4. Repeat for each protected tool in PROTECTED_TOOLS list\n\n## Acceptance Criteria\n\n- [ ] Test runs in CI on every PR\n- [ ] Covers all configured protected tools\n- [ ] Fails if any protected tool is detached\n- [ ] Logs which tools were pruned vs preserved\n\n## Technical Notes\n\n- Parameterize test over PROTECTED_TOOLS list\n- Use pytest-parametrize for clean test output\n- Tag as \n\n---\nHuly Issue: LTSEL-20","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-bnoi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:04.72168344Z","updated_at":"2025-12-29T20:28:04.72168344Z","comments":[{"id":521,"issue_id":"lettatoolsselector-bnoi","author":"root","text":"Synced from Beads: lettatoolsselector-au5\n\n---\nHuly Issue: LTSEL-178","created_at":"2025-12-29T20:28:05Z"}]}
{"id":"lettatoolsselector-bp6o","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:51.177255931Z","updated_at":"2025-12-29T20:36:51.177255931Z","comments":[{"id":618,"issue_id":"lettatoolsselector-bp6o","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T20:36:51Z"}]}
{"id":"lettatoolsselector-br0s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:59:25.536388412Z","updated_at":"2025-12-29T20:59:25.536388412Z","comments":[{"id":808,"issue_id":"lettatoolsselector-br0s","author":"root","text":"Synced from Beads: lettatoolsselector-dj2\n\n---\nHuly Issue: LTSEL-125","created_at":"2025-12-29T20:59:25Z"}]}
{"id":"lettatoolsselector-btg","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:56:24.444551782Z","updated_at":"2025-12-29T19:56:24.444551782Z","comments":[{"id":263,"issue_id":"lettatoolsselector-btg","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T19:56:24Z"}]}
{"id":"lettatoolsselector-buhs","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:49.0874566Z","updated_at":"2025-12-29T20:25:49.0874566Z","comments":[{"id":487,"issue_id":"lettatoolsselector-buhs","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:25:49Z"}]}
{"id":"lettatoolsselector-bwad","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:02.62622618Z","updated_at":"2025-12-29T20:23:02.62622618Z","comments":[{"id":452,"issue_id":"lettatoolsselector-bwad","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T20:23:02Z"}]}
{"id":"lettatoolsselector-bxs9","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:56.088807879Z","updated_at":"2025-12-29T20:35:56.088807879Z","comments":[{"id":605,"issue_id":"lettatoolsselector-bxs9","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T20:35:56Z"}]}
{"id":"lettatoolsselector-bzgk","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:30.070062131Z","updated_at":"2025-12-29T20:22:30.070062131Z","comments":[{"id":446,"issue_id":"lettatoolsselector-bzgk","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:22:30Z"}]}
{"id":"lettatoolsselector-c05","title":"[Refactor] Extract _perform_tool_pruning to tool_manager","description":"## Summary\nMove `_perform_tool_pruning` function from `api_server.py` to `tool_manager.py`.\n\n## Current Location\n- `api_server.py:1228-1521` (~300 lines)\n\n## Dependencies (must be resolved first)\n1. **lettatoolsselector-pmp**: Extract `fetch_agent_tools` to tool_manager\n2. **lettatoolsselector-9yr**: Extract config module for tool limits\n3. **lettatoolsselector-a6c**: Add `search_tools` callback to tool_manager\n\n## Function Signature\n```python\nasync def perform_tool_pruning(\n    agent_id: str,\n    user_prompt: str,\n    drop_rate: float,\n    keep_tool_ids: list = None,\n    newly_matched_tool_ids: list = None\n) -\u003e dict:\n```\n\n## Internal Dependencies (already in tool_manager)\n- `detach_tool()` - already extracted\n- `is_letta_core_tool()` - already in models.py\n\n## Implementation\n1. Complete prerequisite issues\n2. Move function to tool_manager.py\n3. Update api_server.py to delegate\n4. Update tests in test_tool_management.py to use tool_manager.configure()\n5. Add dedicated tests in test_tool_manager.py\n\n## Acceptance Criteria\n- [ ] Prerequisites completed\n- [ ] Function moved to tool_manager.py\n- [ ] api_server.py delegates to tool_manager\n- [ ] All 296+ unit tests pass\n- [ ] Integration tests pass\n\n## Parent Issue\nlettatoolsselector-nav","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:52:19.997470978Z","updated_at":"2025-12-29T19:03:31.619789024Z","closed_at":"2025-12-29T19:03:31.619789024Z","close_reason":"Already extracted: perform_tool_pruning in tool_manager.py:418"}
{"id":"lettatoolsselector-c1l","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","description":"## Problem\nSame `_is_letta_core_tool()` check is performed twice for the same tools - once for counting, once in the loop.\n\n**Location:** `routes/tools.py:382-390`\n\n```python\n# Counting - checks every tool\nmcp_count = len([t for t in current_agent_tools \n               if (t.get(\"tool_type\") == \"external_mcp\" or \n                   (not _is_letta_core_tool(t) and t.get(\"tool_type\") == \"custom\"))])\n\n# Loop - checks same tools again\nfor tool in current_agent_tools:\n    is_mcp_tool = (tool.get(\"tool_type\") == \"external_mcp\" or \n                 (not _is_letta_core_tool(tool) and tool.get(\"tool_type\") == \"custom\"))\n```\n\n## Impact\n- **Latency:** ~0.1ms per tool (duplicate function calls)\n- **Priority:** LOW\n\n## Solution\nCompute once and store results:\n\n```python\n# Compute MCP status once per tool\nmcp_status = {}\nfor tool in current_agent_tools:\n    tool_id = tool.get('id') or tool.get('tool_id')\n    is_mcp = (tool.get(\"tool_type\") == \"external_mcp\" or \n              (not _is_letta_core_tool(tool) and tool.get(\"tool_type\") == \"custom\"))\n    mcp_status[tool_id] = is_mcp\n\nmcp_count = sum(1 for is_mcp in mcp_status.values() if is_mcp)\n\n# Later in loop\nfor tool in current_agent_tools:\n    tool_id = tool.get('id') or tool.get('tool_id')\n    if mcp_status.get(tool_id):\n        # ... process MCP tool ...\n```\n\n## Acceptance Criteria\n- [ ] Each tool checked only once\n- [ ] MCP status cached for reuse\n- [ ] All unit tests pass","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T01:51:26.059923Z","updated_at":"2025-12-29T19:43:33.740744305Z","closed_at":"2025-12-29T19:43:33.740744305Z","close_reason":"Precomputed MCP status per tool in a dict, eliminating redundant _is_letta_core_tool() calls during attach loop","labels":["performance"]}
{"id":"lettatoolsselector-c9a","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:46:09.746557955Z","updated_at":"2025-12-29T19:46:09.746557955Z","comments":[{"id":231,"issue_id":"lettatoolsselector-c9a","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T19:46:09Z"}]}
{"id":"lettatoolsselector-cbir","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:03.379203651Z","updated_at":"2025-12-29T20:15:03.379203651Z","comments":[{"id":362,"issue_id":"lettatoolsselector-cbir","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:15:03Z"}]}
{"id":"lettatoolsselector-cch2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:43.006068396Z","updated_at":"2025-12-29T20:23:43.006068396Z","comments":[{"id":460,"issue_id":"lettatoolsselector-cch2","author":"root","text":"Synced from Beads: lettatoolsselector-2md\n\n---\nHuly Issue: LTSEL-177","created_at":"2025-12-29T20:23:43Z"}]}
{"id":"lettatoolsselector-cgro","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:52.478892722Z","updated_at":"2025-12-29T20:25:52.478892722Z","comments":[{"id":488,"issue_id":"lettatoolsselector-cgro","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T20:25:52Z"}]}
{"id":"lettatoolsselector-civ","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:10:43.947188927Z","updated_at":"2025-12-29T20:10:43.947188927Z","comments":[{"id":319,"issue_id":"lettatoolsselector-civ","author":"root","text":"Synced from Beads: lettatoolsselector-zxm\n\n---\nHuly Issue: LTSEL-213","created_at":"2025-12-29T20:10:44Z"}]}
{"id":"lettatoolsselector-ckt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:07:55.579971527Z","updated_at":"2025-12-29T20:07:55.579971527Z","comments":[{"id":291,"issue_id":"lettatoolsselector-ckt","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T20:07:55Z"}]}
{"id":"lettatoolsselector-cp2x","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:44.419967004Z","updated_at":"2025-12-29T20:23:44.419967004Z","comments":[{"id":461,"issue_id":"lettatoolsselector-cp2x","author":"root","text":"Synced from Beads: lettatoolsselector-sk8\n\n---\nHuly Issue: LTSEL-180","created_at":"2025-12-29T20:23:44Z"}]}
{"id":"lettatoolsselector-cq9p","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:30.307996701Z","updated_at":"2025-12-29T20:21:30.307996701Z","comments":[{"id":434,"issue_id":"lettatoolsselector-cq9p","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:21:30Z"}]}
{"id":"lettatoolsselector-cu79","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:06.488872711Z","updated_at":"2025-12-29T20:15:06.488872711Z","comments":[{"id":363,"issue_id":"lettatoolsselector-cu79","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T20:15:06Z"}]}
{"id":"lettatoolsselector-cv0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:10:08.331523179Z","updated_at":"2025-12-29T20:10:08.331523179Z","comments":[{"id":313,"issue_id":"lettatoolsselector-cv0","author":"root","text":"Synced from Beads: lettatoolsselector-mwv\n\n---\nHuly Issue: LTSEL-102","created_at":"2025-12-29T20:10:08Z"}]}
{"id":"lettatoolsselector-cvj4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:29.079568061Z","updated_at":"2025-12-29T20:57:29.079568061Z","comments":[{"id":786,"issue_id":"lettatoolsselector-cvj4","author":"root","text":"Synced from Beads: lettatoolsselector-h52\n\n---\nHuly Issue: LTSEL-118","created_at":"2025-12-29T20:57:29Z"}]}
{"id":"lettatoolsselector-cvy","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:05.071719446Z","updated_at":"2025-12-23T03:23:05.419749054Z","closed_at":"2025-12-23T03:23:05.419749054Z","close_reason":"Closed","comments":[{"id":28,"issue_id":"lettatoolsselector-cvy","author":"node","text":"## Problem\n\nNo audit trail for tool changes. Debugging requires scraping logs from multiple containers.\n\n## Solution\n\nEmit structured events to a queue/stream whenever tools are attached or detached.\n\n## Acceptance Criteria\n\n- [ ] Event schema: {timestamp, agent_id, tool_id, tool_name, action, reason, source}\n- [ ] Events emitted from tool selector API on every attach/detach\n- [ ] Events written to Redis Stream or similar (low overhead)\n- [ ] Events include correlation ID for tracing webhook -\u003e attach flow\n\n## Technical Notes\n\n- Use Redis Streams for simplicity (XADD)\n- Keep 7 days of events by default\n- Consider also writing to structured log for Loki ingestion\n\n---\nHuly Issue: LTSEL-11","created_at":"2025-12-23T03:23:05Z"}]}
{"id":"lettatoolsselector-cx0v","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:52:13.82353501Z","updated_at":"2025-12-29T20:52:13.82353501Z","comments":[{"id":734,"issue_id":"lettatoolsselector-cx0v","author":"root","text":"Synced from Beads: lettatoolsselector-iym\n\n---\nHuly Issue: LTSEL-135","created_at":"2025-12-29T20:52:14Z"}]}
{"id":"lettatoolsselector-cy7g","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:55:24.205615003Z","updated_at":"2025-12-29T20:55:24.205615003Z","comments":[{"id":763,"issue_id":"lettatoolsselector-cy7g","author":"root","text":"Synced from Beads: lettatoolsselector-i3k\n\n---\nHuly Issue: LTSEL-127","created_at":"2025-12-29T20:55:24Z"}]}
{"id":"lettatoolsselector-czig","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:26.276664372Z","updated_at":"2025-12-29T20:48:26.276664372Z","comments":[{"id":702,"issue_id":"lettatoolsselector-czig","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:48:26Z"}]}
{"id":"lettatoolsselector-d0t","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:12.533425716Z","updated_at":"2025-12-23T03:23:12.739214321Z","closed_at":"2025-12-23T03:23:12.739214321Z","close_reason":"Closed"}
{"id":"lettatoolsselector-d26o","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:02.901544757Z","updated_at":"2025-12-29T20:17:02.901544757Z","comments":[{"id":388,"issue_id":"lettatoolsselector-d26o","author":"root","text":"Synced from Beads: lettatoolsselector-mwv\n\n---\nHuly Issue: LTSEL-102","created_at":"2025-12-29T20:17:03Z"}]}
{"id":"lettatoolsselector-d2w5","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:30.453041039Z","updated_at":"2025-12-29T20:24:30.453041039Z","comments":[{"id":470,"issue_id":"lettatoolsselector-d2w5","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T20:24:30Z"}]}
{"id":"lettatoolsselector-d30j","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:50:32.929515462Z","updated_at":"2025-12-29T20:50:32.929515462Z","comments":[{"id":719,"issue_id":"lettatoolsselector-d30j","author":"root","text":"Synced from Beads: lettatoolsselector-nlt\n\n---\nHuly Issue: LTSEL-34","created_at":"2025-12-29T20:50:33Z"}]}
{"id":"lettatoolsselector-d4k1","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:50:11.653019824Z","updated_at":"2025-12-29T20:50:11.653019824Z","comments":[{"id":716,"issue_id":"lettatoolsselector-d4k1","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:50:11Z"}]}
{"id":"lettatoolsselector-d5h","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:10:42.639765521Z","updated_at":"2025-12-29T20:10:42.639765521Z","comments":[{"id":317,"issue_id":"lettatoolsselector-d5h","author":"root","text":"Synced from Beads: lettatoolsselector-71n\n\n---\nHuly Issue: LTSEL-204","created_at":"2025-12-29T20:10:42Z"}]}
{"id":"lettatoolsselector-d5ym","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:58.051276655Z","updated_at":"2025-12-29T20:35:58.051276655Z","comments":[{"id":606,"issue_id":"lettatoolsselector-d5ym","author":"root","text":"Synced from Beads: lettatoolsselector-f4x\n\n---\nHuly Issue: LTSEL-155","created_at":"2025-12-29T20:35:58Z"}]}
{"id":"lettatoolsselector-d8b","title":"[Perf] Cache environment-based config at startup","description":"## Problem\nConfig endpoints parse environment variables on every request.\n\n**Location:** `routes/config.py:60-77, 135-151, 305-340`\n\n```python\n# Line 65-71\nconfig = {\n    \"enabled\": os.getenv('RERANKER_ENABLED', 'true').lower() == 'true',\n    \"model\": os.getenv('RERANKER_MODEL', 'qwen3-reranker-4b'),\n    ...\n}\n```\n\n## Impact\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\nCache config values at startup, only reload on explicit refresh:\n\n```python\n_cached_config: dict = None\n_config_loaded_at: float = 0\n\ndef _load_config() -\u003e dict:\n    return {\n        \"reranker\": {\n            \"enabled\": os.getenv('RERANKER_ENABLED', 'true').lower() == 'true',\n            \"model\": os.getenv('RERANKER_MODEL', 'qwen3-reranker-4b'),\n            # ...\n        },\n        \"weaviate\": {\n            # ...\n        }\n    }\n\ndef get_cached_config() -\u003e dict:\n    global _cached_config, _config_loaded_at\n    if _cached_config is None:\n        _cached_config = _load_config()\n        _config_loaded_at = time.time()\n    return _cached_config\n\ndef refresh_config():\n    global _cached_config\n    _cached_config = _load_config()\n```\n\n## Acceptance Criteria\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T01:51:01.443245463Z","updated_at":"2025-12-29T19:37:19.127415932Z","closed_at":"2025-12-29T19:37:19.127415932Z","close_reason":"Added config caching at startup with _reload_config_cache(), get_cached_config(), and /api/v1/config/refresh endpoint","labels":["performance"]}
{"id":"lettatoolsselector-d98z","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:38:31.569257273Z","updated_at":"2025-12-29T20:38:31.569257273Z","comments":[{"id":633,"issue_id":"lettatoolsselector-d98z","author":"root","text":"Synced from Beads: lettatoolsselector-tqp\n\n---\nHuly Issue: LTSEL-150","created_at":"2025-12-29T20:38:32Z"}]}
{"id":"lettatoolsselector-d9b6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:46.344341017Z","updated_at":"2025-12-29T20:34:46.344341017Z","comments":[{"id":593,"issue_id":"lettatoolsselector-d9b6","author":"root","text":"Synced from Beads: lettatoolsselector-omu\n\n---\nHuly Issue: LTSEL-157","created_at":"2025-12-29T20:34:46Z"}]}
{"id":"lettatoolsselector-d9t7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:45.068144992Z","updated_at":"2025-12-29T20:19:45.068144992Z","comments":[{"id":412,"issue_id":"lettatoolsselector-d9t7","author":"root","text":"Synced from Beads: lettatoolsselector-h76\n\n---\nHuly Issue: LTSEL-188","created_at":"2025-12-29T20:19:45Z"}]}
{"id":"lettatoolsselector-dae","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:57:02.744476808Z","updated_at":"2025-12-29T19:57:02.744476808Z","comments":[{"id":264,"issue_id":"lettatoolsselector-dae","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T19:57:02Z"}]}
{"id":"lettatoolsselector-dai","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","description":"Move remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools  \n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n~450 lines removed from api_server.py","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T00:41:37.690094322Z","updated_at":"2025-12-29T15:45:40.101009704Z","closed_at":"2025-12-29T15:45:40.101009704Z","close_reason":"Closed","labels":["refactor","services-layer"]}
{"id":"lettatoolsselector-dhk","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:52:40.88077533Z","updated_at":"2025-12-29T19:52:40.88077533Z","comments":[{"id":252,"issue_id":"lettatoolsselector-dhk","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T19:52:41Z"}]}
{"id":"lettatoolsselector-dly4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:55:44.943896739Z","updated_at":"2025-12-29T20:55:44.943896739Z","comments":[{"id":768,"issue_id":"lettatoolsselector-dly4","author":"root","text":"Synced from Beads: lettatoolsselector-xei\n\n---\nHuly Issue: LTSEL-126","created_at":"2025-12-29T20:55:45Z"}]}
{"id":"lettatoolsselector-dm03","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:47.958974018Z","updated_at":"2025-12-29T20:42:47.958974018Z","comments":[{"id":667,"issue_id":"lettatoolsselector-dm03","author":"root","text":"Synced from Beads: lettatoolsselector-xj7\n\n---\nHuly Issue: LTSEL-152","created_at":"2025-12-29T20:42:48Z"}]}
{"id":"lettatoolsselector-dm1b","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:59:46.909358121Z","updated_at":"2025-12-29T20:59:46.909358121Z","comments":[{"id":810,"issue_id":"lettatoolsselector-dm1b","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-112","created_at":"2025-12-29T20:59:47Z"}]}
{"id":"lettatoolsselector-dnw","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:55:56.906202713Z","updated_at":"2025-12-29T19:55:56.906202713Z","comments":[{"id":260,"issue_id":"lettatoolsselector-dnw","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T19:55:57Z"}]}
{"id":"lettatoolsselector-dt02","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:29.627876989Z","updated_at":"2025-12-29T20:13:29.627876989Z","comments":[{"id":347,"issue_id":"lettatoolsselector-dt02","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T20:13:29Z"}]}
{"id":"lettatoolsselector-dv20","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:32.114784007Z","updated_at":"2025-12-29T20:16:32.114784007Z","comments":[{"id":380,"issue_id":"lettatoolsselector-dv20","author":"root","text":"Synced from Beads: lettatoolsselector-toy\n\n---\nHuly Issue: LTSEL-194","created_at":"2025-12-29T20:16:32Z"}]}
{"id":"lettatoolsselector-dv8m","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:45:31.347871784Z","updated_at":"2025-12-29T20:45:31.347871784Z","comments":[{"id":685,"issue_id":"lettatoolsselector-dv8m","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T20:45:31Z"}]}
{"id":"lettatoolsselector-dvm2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:37.390937041Z","updated_at":"2025-12-29T20:15:37.390937041Z","comments":[{"id":368,"issue_id":"lettatoolsselector-dvm2","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T20:15:37Z"}]}
{"id":"lettatoolsselector-dx1v","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:47.345056847Z","updated_at":"2025-12-29T20:12:47.345056847Z","comments":[{"id":339,"issue_id":"lettatoolsselector-dx1v","author":"root","text":"Synced from Beads: lettatoolsselector-mfj\n\n---\nHuly Issue: LTSEL-202","created_at":"2025-12-29T20:12:47Z"}]}
{"id":"lettatoolsselector-dxox","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:41.009087575Z","updated_at":"2025-12-29T20:13:41.009087575Z","comments":[{"id":348,"issue_id":"lettatoolsselector-dxox","author":"root","text":"Synced from Beads: lettatoolsselector-bte\n\n---\nHuly Issue: LTSEL-197","created_at":"2025-12-29T20:13:41Z"}]}
{"id":"lettatoolsselector-dxqx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:31.679481889Z","updated_at":"2025-12-29T20:57:31.679481889Z","comments":[{"id":789,"issue_id":"lettatoolsselector-dxqx","author":"root","text":"Synced from Beads: lettatoolsselector-iym\n\n---\nHuly Issue: LTSEL-135","created_at":"2025-12-29T20:57:32Z"}]}
{"id":"lettatoolsselector-e0q","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:55:24.681298917Z","updated_at":"2025-12-29T19:55:24.681298917Z","comments":[{"id":259,"issue_id":"lettatoolsselector-e0q","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T19:55:24Z"}]}
{"id":"lettatoolsselector-e2vq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:42.311610084Z","updated_at":"2025-12-29T20:13:42.311610084Z","comments":[{"id":350,"issue_id":"lettatoolsselector-e2vq","author":"root","text":"Synced from Beads: lettatoolsselector-7yx\n\n---\nHuly Issue: LTSEL-206","created_at":"2025-12-29T20:13:42Z"}]}
{"id":"lettatoolsselector-e2wr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:41.589675636Z","updated_at":"2025-12-29T20:20:41.589675636Z","comments":[{"id":425,"issue_id":"lettatoolsselector-e2wr","author":"root","text":"Synced from Beads: lettatoolsselector-vn0\n\n---\nHuly Issue: LTSEL-192","created_at":"2025-12-29T20:20:41Z"}]}
{"id":"lettatoolsselector-e3n8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:55.404597016Z","updated_at":"2025-12-29T20:29:55.404597016Z","comments":[{"id":543,"issue_id":"lettatoolsselector-e3n8","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T20:29:55Z"}]}
{"id":"lettatoolsselector-e488","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:57.492595425Z","updated_at":"2025-12-29T20:24:57.492595425Z","comments":[{"id":479,"issue_id":"lettatoolsselector-e488","author":"root","text":"Synced from Beads: lettatoolsselector-8ix\n\n---\nHuly Issue: LTSEL-184","created_at":"2025-12-29T20:24:57Z"}]}
{"id":"lettatoolsselector-e5ej","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:03.185116002Z","updated_at":"2025-12-29T20:30:03.185116002Z","comments":[{"id":546,"issue_id":"lettatoolsselector-e5ej","author":"root","text":"Synced from Beads: lettatoolsselector-dlg\n\n---\nHuly Issue: LTSEL-164","created_at":"2025-12-29T20:30:03Z"}]}
{"id":"lettatoolsselector-e71","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:10:43.257253178Z","updated_at":"2025-12-29T20:10:43.257253178Z","comments":[{"id":318,"issue_id":"lettatoolsselector-e71","author":"root","text":"Synced from Beads: lettatoolsselector-7yx\n\n---\nHuly Issue: LTSEL-206","created_at":"2025-12-29T20:10:43Z"}]}
{"id":"lettatoolsselector-e7xk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:56.648763324Z","updated_at":"2025-12-29T20:17:56.648763324Z","comments":[{"id":394,"issue_id":"lettatoolsselector-e7xk","author":"root","text":"Synced from Beads: lettatoolsselector-0do\n\n---\nHuly Issue: LTSEL-189","created_at":"2025-12-29T20:17:56Z"}]}
{"id":"lettatoolsselector-e8fc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:52:37.965611587Z","updated_at":"2025-12-29T20:52:37.965611587Z","comments":[{"id":739,"issue_id":"lettatoolsselector-e8fc","author":"root","text":"Synced from Beads: lettatoolsselector-qkj\n\n---\nHuly Issue: LTSEL-134","created_at":"2025-12-29T20:52:38Z"}]}
{"id":"lettatoolsselector-e8q9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:26.662844324Z","updated_at":"2025-12-29T20:11:26.662844324Z","comments":[{"id":325,"issue_id":"lettatoolsselector-e8q9","author":"root","text":"Synced from Beads: lettatoolsselector-mfj\n\n---\nHuly Issue: LTSEL-202","created_at":"2025-12-29T20:11:26Z"}]}
{"id":"lettatoolsselector-eam2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:45:13.602173059Z","updated_at":"2025-12-29T20:45:13.602173059Z","comments":[{"id":684,"issue_id":"lettatoolsselector-eam2","author":"root","text":"Synced from Beads: lettatoolsselector-xj7\n\n---\nHuly Issue: LTSEL-152","created_at":"2025-12-29T20:45:14Z"}]}
{"id":"lettatoolsselector-eape","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:56.44361108Z","updated_at":"2025-12-29T20:25:56.44361108Z","comments":[{"id":491,"issue_id":"lettatoolsselector-eape","author":"root","text":"Synced from Beads: lettatoolsselector-8o8\n\n---\nHuly Issue: LTSEL-175","created_at":"2025-12-29T20:25:56Z"}]}
{"id":"lettatoolsselector-ebwh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:44:49.161552234Z","updated_at":"2025-12-29T20:44:49.161552234Z","comments":[{"id":682,"issue_id":"lettatoolsselector-ebwh","author":"root","text":"Synced from Beads: lettatoolsselector-yc7\n\n---\nHuly Issue: LTSEL-153","created_at":"2025-12-29T20:44:49Z"}]}
{"id":"lettatoolsselector-ecmm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:47:20.036827154Z","updated_at":"2025-12-29T20:47:20.036827154Z","comments":[{"id":694,"issue_id":"lettatoolsselector-ecmm","author":"root","text":"Synced from Beads: lettatoolsselector-m03\n\n---\nHuly Issue: LTSEL-70","created_at":"2025-12-29T20:47:20Z"}]}
{"id":"lettatoolsselector-edej","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:03.952003796Z","updated_at":"2025-12-29T20:24:03.952003796Z","comments":[{"id":465,"issue_id":"lettatoolsselector-edej","author":"root","text":"Synced from Beads: lettatoolsselector-ayf\n\n---\nHuly Issue: LTSEL-176","created_at":"2025-12-29T20:24:04Z"}]}
{"id":"lettatoolsselector-ejb7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:40.16835879Z","updated_at":"2025-12-29T20:15:40.16835879Z","comments":[{"id":369,"issue_id":"lettatoolsselector-ejb7","author":"root","text":"Synced from Beads: lettatoolsselector-88g\n\n---\nHuly Issue: LTSEL-193","created_at":"2025-12-29T20:15:40Z"}]}
{"id":"lettatoolsselector-en49","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:30.952710849Z","updated_at":"2025-12-29T20:57:30.952710849Z","comments":[{"id":788,"issue_id":"lettatoolsselector-en49","author":"root","text":"Synced from Beads: lettatoolsselector-sh9\n\n---\nHuly Issue: LTSEL-129","created_at":"2025-12-29T20:57:31Z"}]}
{"id":"lettatoolsselector-eo70","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:05.831926735Z","updated_at":"2025-12-29T20:16:05.831926735Z","comments":[{"id":375,"issue_id":"lettatoolsselector-eo70","author":"root","text":"Synced from Beads: lettatoolsselector-rc8\n\n---\nHuly Issue: LTSEL-195","created_at":"2025-12-29T20:16:06Z"}]}
{"id":"lettatoolsselector-etbc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:01.72145199Z","updated_at":"2025-12-29T20:24:01.72145199Z","comments":[{"id":464,"issue_id":"lettatoolsselector-etbc","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T20:24:02Z"}]}
{"id":"lettatoolsselector-ev3l","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:25.745421774Z","updated_at":"2025-12-29T20:17:25.745421774Z","comments":[{"id":392,"issue_id":"lettatoolsselector-ev3l","author":"root","text":"Synced from Beads: lettatoolsselector-71n\n\n---\nHuly Issue: LTSEL-204","created_at":"2025-12-29T20:17:25Z"}]}
{"id":"lettatoolsselector-f0o7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:01.468314764Z","updated_at":"2025-12-29T20:34:01.468314764Z","comments":[{"id":583,"issue_id":"lettatoolsselector-f0o7","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:34:01Z"}]}
{"id":"lettatoolsselector-f0yl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:20.594207558Z","updated_at":"2025-12-29T20:12:20.594207558Z","comments":[{"id":335,"issue_id":"lettatoolsselector-f0yl","author":"root","text":"Synced from Beads: lettatoolsselector-kl5\n\n---\nHuly Issue: LTSEL-209","created_at":"2025-12-29T20:12:20Z"}]}
{"id":"lettatoolsselector-f1hk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:11.019053381Z","updated_at":"2025-12-29T20:29:11.019053381Z","comments":[{"id":533,"issue_id":"lettatoolsselector-f1hk","author":"root","text":"Synced from Beads: lettatoolsselector-r2m\n\n---\nHuly Issue: LTSEL-169","created_at":"2025-12-29T20:29:11Z"}]}
{"id":"lettatoolsselector-f1j","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:47.25484919Z","updated_at":"2025-12-29T20:09:47.25484919Z","comments":[{"id":309,"issue_id":"lettatoolsselector-f1j","author":"root","text":"Synced from Beads: lettatoolsselector-ajz\n\n---\nHuly Issue: LTSEL-205","created_at":"2025-12-29T20:09:47Z"}]}
{"id":"lettatoolsselector-f1s","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:50:00.624235947Z","updated_at":"2025-12-29T19:50:00.624235947Z","comments":[{"id":240,"issue_id":"lettatoolsselector-f1s","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T19:50:00Z"}]}
{"id":"lettatoolsselector-f4a","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:10:35.543133742Z","updated_at":"2025-12-29T20:10:35.543133742Z","comments":[{"id":316,"issue_id":"lettatoolsselector-f4a","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T20:10:35Z"}]}
{"id":"lettatoolsselector-f8b8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:00.692131286Z","updated_at":"2025-12-29T20:57:00.692131286Z","comments":[{"id":781,"issue_id":"lettatoolsselector-f8b8","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:57:01Z"}]}
{"id":"lettatoolsselector-fax5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:07.343436433Z","updated_at":"2025-12-29T20:20:07.343436433Z","comments":[{"id":417,"issue_id":"lettatoolsselector-fax5","author":"root","text":"Synced from Beads: lettatoolsselector-8ix\n\n---\nHuly Issue: LTSEL-184","created_at":"2025-12-29T20:20:07Z"}]}
{"id":"lettatoolsselector-fb5i","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:47.511637408Z","updated_at":"2025-12-29T20:18:47.511637408Z","comments":[{"id":405,"issue_id":"lettatoolsselector-fb5i","author":"root","text":"Synced from Beads: lettatoolsselector-12y\n\n---\nHuly Issue: LTSEL-201","created_at":"2025-12-29T20:18:47Z"}]}
{"id":"lettatoolsselector-fe62","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:57.923353019Z","updated_at":"2025-12-29T20:26:57.923353019Z","comments":[{"id":505,"issue_id":"lettatoolsselector-fe62","author":"root","text":"Synced from Beads: lettatoolsselector-z62\n\n---\nHuly Issue: LTSEL-173","created_at":"2025-12-29T20:26:58Z"}]}
{"id":"lettatoolsselector-fg6d","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:42.827084973Z","updated_at":"2025-12-29T20:14:42.827084973Z","comments":[{"id":358,"issue_id":"lettatoolsselector-fg6d","author":"root","text":"Synced from Beads: lettatoolsselector-rc8\n\n---\nHuly Issue: LTSEL-195","created_at":"2025-12-29T20:14:43Z"}]}
{"id":"lettatoolsselector-fgk2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:05.721340957Z","updated_at":"2025-12-29T20:32:05.721340957Z","comments":[{"id":565,"issue_id":"lettatoolsselector-fgk2","author":"root","text":"Synced from Beads: lettatoolsselector-ayf\n\n---\nHuly Issue: LTSEL-176","created_at":"2025-12-29T20:32:06Z"}]}
{"id":"lettatoolsselector-fi6r","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:19.323828138Z","updated_at":"2025-12-29T20:12:19.323828138Z","comments":[{"id":333,"issue_id":"lettatoolsselector-fi6r","author":"root","text":"Synced from Beads: lettatoolsselector-8pi\n\n---\nHuly Issue: LTSEL-200","created_at":"2025-12-29T20:12:19Z"}]}
{"id":"lettatoolsselector-fiph","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:52.197235011Z","updated_at":"2025-12-29T21:00:52.197235011Z","comments":[{"id":820,"issue_id":"lettatoolsselector-fiph","author":"root","text":"Synced from Beads: lettatoolsselector-80w\n\n---\nHuly Issue: LTSEL-122","created_at":"2025-12-29T21:00:52Z"}]}
{"id":"lettatoolsselector-fjqp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:40.745907051Z","updated_at":"2025-12-29T20:32:40.745907051Z","comments":[{"id":570,"issue_id":"lettatoolsselector-fjqp","author":"root","text":"Synced from Beads: lettatoolsselector-22q\n\n---\nHuly Issue: LTSEL-170","created_at":"2025-12-29T20:32:41Z"}]}
{"id":"lettatoolsselector-fkeg","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:43:49.669940572Z","updated_at":"2025-12-29T20:43:49.669940572Z","comments":[{"id":672,"issue_id":"lettatoolsselector-fkeg","author":"root","text":"Synced from Beads: lettatoolsselector-nlt\n\n---\nHuly Issue: LTSEL-34","created_at":"2025-12-29T20:43:49Z"}]}
{"id":"lettatoolsselector-ftlv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:41:06.364429192Z","updated_at":"2025-12-29T20:41:06.364429192Z","comments":[{"id":654,"issue_id":"lettatoolsselector-ftlv","author":"root","text":"Synced from Beads: lettatoolsselector-6p9\n\n---\nHuly Issue: LTSEL-148","created_at":"2025-12-29T20:41:06Z"}]}
{"id":"lettatoolsselector-fv0","title":"[Perf] Add TTL cache for search results","description":"## Problem\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** `services/tool_search.py`, `weaviate_tool_search_with_reranking.py`\n\n## Impact\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\nAdd TTL-based cache for search results (60-300 seconds):\n\n```python\nfrom cachetools import TTLCache\n\n_search_cache = TTLCache(maxsize=1000, ttl=60)\n\ndef search_tools(query: str, limit: int = 10, reranker_config: dict = None):\n    # Create cache key from query params\n    cache_key = f\"{query}:{limit}:{hash(str(reranker_config))}\"\n    \n    if cache_key in _search_cache:\n        logger.debug(f\"Cache hit for query: {query}\")\n        return _search_cache[cache_key]\n    \n    # ... perform search ...\n    \n    _search_cache[cache_key] = results\n    return results\n```\n\n## Configuration\n- TTL configurable via env var `SEARCH_CACHE_TTL_SECONDS` (default: 60)\n- Max size configurable via `SEARCH_CACHE_MAX_SIZE` (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:49:42.255551437Z","updated_at":"2025-12-29T16:13:42.500990485Z","closed_at":"2025-12-29T16:13:42.500990485Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-fvk","title":"[Code Quality] Add Optional type hints for nullable parameters","description":"Several functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\nParameters that can be None but aren't typed as Optional:\n- `new_run_id: str = None` should be `new_run_id: Optional[str] = None`\n- `tool_names: list = None` should be `tool_names: Optional[List[str]] = None`\n- `query: str = None` should be `query: Optional[str] = None`\n\n### _send_trigger_message (line 898)\n- Similar nullable parameter issues\n\n### Other locations\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-28T17:13:10.07216349Z","updated_at":"2025-12-29T19:24:34.88561713Z","closed_at":"2025-12-29T19:24:34.88561713Z","close_reason":"Already done: agent_service.py functions already use Optional type hints"}
{"id":"lettatoolsselector-g05u","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:57.948404808Z","updated_at":"2025-12-29T20:54:57.948404808Z","comments":[{"id":761,"issue_id":"lettatoolsselector-g05u","author":"root","text":"Synced from Beads: lettatoolsselector-mam\n\n---\nHuly Issue: LTSEL-142","created_at":"2025-12-29T20:54:58Z"}]}
{"id":"lettatoolsselector-g0s","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:54:41.618524307Z","updated_at":"2025-12-29T19:54:41.618524307Z","comments":[{"id":256,"issue_id":"lettatoolsselector-g0s","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T19:54:41Z"}]}
{"id":"lettatoolsselector-g186","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:21.132909361Z","updated_at":"2025-12-29T20:12:21.132909361Z","comments":[{"id":336,"issue_id":"lettatoolsselector-g186","author":"root","text":"Synced from Beads: lettatoolsselector-4c0\n\n---\nHuly Issue: LTSEL-214","created_at":"2025-12-29T20:12:21Z"}]}
{"id":"lettatoolsselector-g3u5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:41:07.160101174Z","updated_at":"2025-12-29T20:41:07.160101174Z","comments":[{"id":655,"issue_id":"lettatoolsselector-g3u5","author":"root","text":"Synced from Beads: lettatoolsselector-f4x\n\n---\nHuly Issue: LTSEL-155","created_at":"2025-12-29T20:41:07Z"}]}
{"id":"lettatoolsselector-g3w1","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:56.368797755Z","updated_at":"2025-12-29T20:21:56.368797755Z","comments":[{"id":440,"issue_id":"lettatoolsselector-g3w1","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T20:21:56Z"}]}
{"id":"lettatoolsselector-g9gi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:38.033444573Z","updated_at":"2025-12-29T20:30:38.033444573Z","comments":[{"id":552,"issue_id":"lettatoolsselector-g9gi","author":"root","text":"Synced from Beads: lettatoolsselector-n7f\n\n---\nHuly Issue: LTSEL-163","created_at":"2025-12-29T20:30:38Z"}]}
{"id":"lettatoolsselector-gc7f","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:47:43.019320223Z","updated_at":"2025-12-29T20:47:43.019320223Z","comments":[{"id":698,"issue_id":"lettatoolsselector-gc7f","author":"root","text":"Synced from Beads: lettatoolsselector-08q\n\n---\nHuly Issue: LTSEL-147","created_at":"2025-12-29T20:47:43Z"}]}
{"id":"lettatoolsselector-gep","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:11.134813876Z","updated_at":"2025-12-29T20:09:11.134813876Z","comments":[{"id":303,"issue_id":"lettatoolsselector-gep","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T20:09:11Z"}]}
{"id":"lettatoolsselector-ghos","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:29.980359252Z","updated_at":"2025-12-29T20:26:29.980359252Z","comments":[{"id":495,"issue_id":"lettatoolsselector-ghos","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T20:26:30Z"}]}
{"id":"lettatoolsselector-glti","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:39.854205242Z","updated_at":"2025-12-29T20:28:39.854205242Z","comments":[{"id":529,"issue_id":"lettatoolsselector-glti","author":"root","text":"Synced from Beads: lettatoolsselector-n9f\n\n---\nHuly Issue: LTSEL-182","created_at":"2025-12-29T20:28:40Z"}]}
{"id":"lettatoolsselector-gmbb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:56.601087342Z","updated_at":"2025-12-29T20:24:56.601087342Z","comments":[{"id":478,"issue_id":"lettatoolsselector-gmbb","author":"root","text":"Synced from Beads: lettatoolsselector-2md\n\n---\nHuly Issue: LTSEL-177","created_at":"2025-12-29T20:24:56Z"}]}
{"id":"lettatoolsselector-gpo","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:51:44.752460034Z","updated_at":"2025-12-29T19:51:44.752460034Z","comments":[{"id":247,"issue_id":"lettatoolsselector-gpo","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T19:51:45Z"}]}
{"id":"lettatoolsselector-gqah","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:38.352236779Z","updated_at":"2025-12-29T20:29:38.352236779Z","comments":[{"id":541,"issue_id":"lettatoolsselector-gqah","author":"root","text":"Synced from Beads: lettatoolsselector-8o8\n\n---\nHuly Issue: LTSEL-175","created_at":"2025-12-29T20:29:38Z"}]}
{"id":"lettatoolsselector-gr47","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:55.555284407Z","updated_at":"2025-12-29T20:57:55.555284407Z","comments":[{"id":790,"issue_id":"lettatoolsselector-gr47","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T20:57:55Z"}]}
{"id":"lettatoolsselector-gtb7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:03.341094787Z","updated_at":"2025-12-29T20:32:03.341094787Z","comments":[{"id":562,"issue_id":"lettatoolsselector-gtb7","author":"root","text":"## Purpose\n\nGuard against regression where pagination is forgotten and only partial tools returned.\n\n## Test Scenario\n\n1. Mock Letta API to return 10 tools per page (3 pages total = 30 tools)\n2. Call list_agent_tools(agent_id)\n3. Assert: Returns all 30 tools\n4. Assert: Makes correct number of API calls\n\n## Acceptance Criteria\n\n- [ ] Test uses mocked responses (no real API)\n- [ ] Covers edge cases: 0 tools, exactly 1 page, multiple pages\n- [ ] Fails if fewer tools returned than expected\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock or responses library\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-21","created_at":"2025-12-29T20:32:03Z"}]}
{"id":"lettatoolsselector-gxug","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:00.249170782Z","updated_at":"2025-12-29T20:36:00.249170782Z","comments":[{"id":608,"issue_id":"lettatoolsselector-gxug","author":"root","text":"Synced from Beads: lettatoolsselector-dlg\n\n---\nHuly Issue: LTSEL-164","created_at":"2025-12-29T20:36:00Z"}]}
{"id":"lettatoolsselector-h0ps","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:54.79050041Z","updated_at":"2025-12-29T20:36:54.79050041Z","comments":[{"id":622,"issue_id":"lettatoolsselector-h0ps","author":"root","text":"Synced from Beads: lettatoolsselector-4tv\n\n---\nHuly Issue: LTSEL-167","created_at":"2025-12-29T20:36:55Z"}]}
{"id":"lettatoolsselector-h54p","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:12.799660276Z","updated_at":"2025-12-29T20:29:12.799660276Z","comments":[{"id":535,"issue_id":"lettatoolsselector-h54p","author":"root","text":"Synced from Beads: lettatoolsselector-9xp\n\n---\nHuly Issue: LTSEL-181","created_at":"2025-12-29T20:29:13Z"}]}
{"id":"lettatoolsselector-h8wk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:53:39.145013091Z","updated_at":"2025-12-29T20:53:39.145013091Z","comments":[{"id":747,"issue_id":"lettatoolsselector-h8wk","author":"root","text":"Synced from Beads: lettatoolsselector-lv2\n\n---\nHuly Issue: LTSEL-131","created_at":"2025-12-29T20:53:39Z"}]}
{"id":"lettatoolsselector-hbn6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:52:39.216573521Z","updated_at":"2025-12-29T20:52:39.216573521Z","comments":[{"id":740,"issue_id":"lettatoolsselector-hbn6","author":"root","text":"Synced from Beads: lettatoolsselector-mam\n\n---\nHuly Issue: LTSEL-142","created_at":"2025-12-29T20:52:39Z"}]}
{"id":"lettatoolsselector-hc8i","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:51:40.327832201Z","updated_at":"2025-12-29T20:51:40.327832201Z","comments":[{"id":730,"issue_id":"lettatoolsselector-hc8i","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:51:40Z"}]}
{"id":"lettatoolsselector-he3x","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:44.071555094Z","updated_at":"2025-12-29T20:42:44.071555094Z","comments":[{"id":665,"issue_id":"lettatoolsselector-he3x","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:42:44Z"}]}
{"id":"lettatoolsselector-hejv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:06.091640954Z","updated_at":"2025-12-29T20:24:06.091640954Z","comments":[{"id":468,"issue_id":"lettatoolsselector-hejv","author":"root","text":"Synced from Beads: lettatoolsselector-zzl\n\n---\nHuly Issue: LTSEL-190","created_at":"2025-12-29T20:24:06Z"}]}
{"id":"lettatoolsselector-hhl","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:28.031316453Z","updated_at":"2025-12-29T18:55:57.998322623Z","closed_at":"2025-12-29T18:55:57.998322623Z","close_reason":"Duplicate of closed lettatoolsselector-4tm","comments":[{"id":12,"issue_id":"lettatoolsselector-hhl","author":"node","text":"## Problem\n\nTool management logic is duplicated across webhook-receiver and tool-selector repos, causing drift and inconsistent behavior.\n\n## Solution\n\nCreate a shared Python package  that can be installed in both repos.\n\n## Acceptance Criteria\n\n- [ ] Package scaffold with  and proper versioning\n- [ ] Package published to private PyPI or installable via git+https\n- [ ] Basic CI/CD pipeline for testing and publishing\n- [ ] README with installation and usage instructions\n\n## Technical Notes\n\n- Use  layout for clean imports\n- Target Python 3.11+\n- Include type hints throughout\n\n---\nHuly Issue: LTSEL-1","created_at":"2025-12-22T23:46:28Z"}]}
{"id":"lettatoolsselector-hlri","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:50:35.814737131Z","updated_at":"2025-12-29T20:50:35.814737131Z","comments":[{"id":722,"issue_id":"lettatoolsselector-hlri","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:50:36Z"}]}
{"id":"lettatoolsselector-hnt3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:10.007060585Z","updated_at":"2025-12-29T20:34:10.007060585Z","comments":[{"id":589,"issue_id":"lettatoolsselector-hnt3","author":"root","text":"Synced from Beads: lettatoolsselector-c33\n\n---\nHuly Issue: LTSEL-172","created_at":"2025-12-29T20:34:10Z"}]}
{"id":"lettatoolsselector-hpy","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:07:56.242227298Z","updated_at":"2025-12-29T20:07:56.242227298Z","comments":[{"id":292,"issue_id":"lettatoolsselector-hpy","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T20:07:56Z"}]}
{"id":"lettatoolsselector-hr05","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:25.102888224Z","updated_at":"2025-12-29T20:17:25.102888224Z","comments":[{"id":391,"issue_id":"lettatoolsselector-hr05","author":"root","text":"Synced from Beads: lettatoolsselector-qh2\n\n---\nHuly Issue: LTSEL-199","created_at":"2025-12-29T20:17:25Z"}]}
{"id":"lettatoolsselector-hs4b","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:41:59.584384016Z","updated_at":"2025-12-29T20:41:59.584384016Z","comments":[{"id":657,"issue_id":"lettatoolsselector-hs4b","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-100","created_at":"2025-12-29T20:42:00Z"}]}
{"id":"lettatoolsselector-hu6n","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:27.288051551Z","updated_at":"2025-12-29T20:11:27.288051551Z","comments":[{"id":326,"issue_id":"lettatoolsselector-hu6n","author":"root","text":"Synced from Beads: lettatoolsselector-mwv\n\n---\nHuly Issue: LTSEL-102","created_at":"2025-12-29T20:11:27Z"}]}
{"id":"lettatoolsselector-hv1s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:11.309214279Z","updated_at":"2025-12-29T20:15:11.309214279Z","comments":[{"id":367,"issue_id":"lettatoolsselector-hv1s","author":"root","text":"Synced from Beads: lettatoolsselector-b2i\n\n---\nHuly Issue: LTSEL-208","created_at":"2025-12-29T20:15:11Z"}]}
{"id":"lettatoolsselector-hvq4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:05.026266209Z","updated_at":"2025-12-29T20:30:05.026266209Z","comments":[{"id":548,"issue_id":"lettatoolsselector-hvq4","author":"root","text":"Synced from Beads: lettatoolsselector-eln\n\n---\nHuly Issue: LTSEL-174","created_at":"2025-12-29T20:30:05Z"}]}
{"id":"lettatoolsselector-hwii","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:51.7560916Z","updated_at":"2025-12-29T20:26:51.7560916Z","comments":[{"id":502,"issue_id":"lettatoolsselector-hwii","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:26:52Z"}]}
{"id":"lettatoolsselector-hzmq","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:47.814940464Z","updated_at":"2025-12-29T20:36:47.814940464Z","comments":[{"id":617,"issue_id":"lettatoolsselector-hzmq","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T20:36:48Z"}]}
{"id":"lettatoolsselector-i1s7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:02.087430825Z","updated_at":"2025-12-29T20:32:02.087430825Z","comments":[{"id":561,"issue_id":"lettatoolsselector-i1s7","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:32:02Z"}]}
{"id":"lettatoolsselector-i50h","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:46:37.104234892Z","updated_at":"2025-12-29T20:46:37.104234892Z","comments":[{"id":690,"issue_id":"lettatoolsselector-i50h","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:46:37Z"}]}
{"id":"lettatoolsselector-i93i","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:49:51.195313515Z","updated_at":"2025-12-29T20:49:51.195313515Z","comments":[{"id":713,"issue_id":"lettatoolsselector-i93i","author":"root","text":"Synced from Beads: lettatoolsselector-w33\n\n---\nHuly Issue: LTSEL-138","created_at":"2025-12-29T20:49:51Z"}]}
{"id":"lettatoolsselector-iacc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:37.238447313Z","updated_at":"2025-12-29T20:21:37.238447313Z","comments":[{"id":437,"issue_id":"lettatoolsselector-iacc","author":"root","text":"Synced from Beads: lettatoolsselector-8ix\n\n---\nHuly Issue: LTSEL-184","created_at":"2025-12-29T20:21:37Z"}]}
{"id":"lettatoolsselector-ib6n","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:16.370960044Z","updated_at":"2025-12-29T20:56:16.370960044Z","comments":[{"id":773,"issue_id":"lettatoolsselector-ib6n","author":"root","text":"Synced from Beads: lettatoolsselector-dj2\n\n---\nHuly Issue: LTSEL-125","created_at":"2025-12-29T20:56:16Z"}]}
{"id":"lettatoolsselector-ic3s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:47.065972741Z","updated_at":"2025-12-29T20:34:47.065972741Z","comments":[{"id":594,"issue_id":"lettatoolsselector-ic3s","author":"root","text":"Synced from Beads: lettatoolsselector-aru\n\n---\nHuly Issue: LTSEL-160","created_at":"2025-12-29T20:34:47Z"}]}
{"id":"lettatoolsselector-icvf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:53.33154214Z","updated_at":"2025-12-29T20:36:53.33154214Z","comments":[{"id":620,"issue_id":"lettatoolsselector-icvf","author":"root","text":"Synced from Beads: lettatoolsselector-53h\n\n---\nHuly Issue: LTSEL-156","created_at":"2025-12-29T20:36:53Z"}]}
{"id":"lettatoolsselector-ier","title":"[Refactor] Phase 6: Dependency injection and app factory","description":"Implement dependency injection and Flask app factory pattern for testability.\n\n## Depends On\n- lettatoolsselector-sbw (Phase 5: Route blueprints)\n\n## Goals\n1. Make services injectable for testing\n2. Create app factory for different configurations\n3. Establish clear initialization order\n\n## Implementation\n\n### App Factory (`app.py`)\n```python\ndef create_app(config: AppConfig = None) -\u003e Flask:\n    app = Flask(__name__)\n    \n    # Load config\n    config = config or load_config_from_env()\n    app.config.from_object(config)\n    \n    # Initialize clients\n    weaviate_client = init_weaviate(config.weaviate)\n    letta_client = init_letta(config.letta)\n    reranker_client = init_reranker(config.reranker)\n    \n    # Initialize services\n    search_service = SearchService(weaviate_client, reranker_client)\n    agent_service = AgentService(letta_client, config.webhook_url)\n    tool_manager = ToolManager(letta_client, weaviate_client, search_service)\n    \n    # Store in app context\n    app.services = ServiceContainer(\n        search=search_service,\n        agent=agent_service,\n        tools=tool_manager\n    )\n    \n    # Register blueprints\n    from routes import tools_bp, config_bp, health_bp, ...\n    app.register_blueprint(tools_bp)\n    app.register_blueprint(config_bp)\n    ...\n    \n    return app\n```\n\n### Service Container\n```python\n@dataclass\nclass ServiceContainer:\n    search: SearchService\n    agent: AgentService\n    tools: ToolManager\n    cache: CacheService\n    \ndef get_services() -\u003e ServiceContainer:\n    return current_app.services\n```\n\n### Route Handler Pattern\n```python\n@tools_bp.route('/attach', methods=['POST'])\nasync def attach_tools():\n    services = get_services()\n    request_data = AttachRequest.from_json(request.json)\n    \n    result = await services.tools.attach_tools_for_query(\n        agent_id=request_data.agent_id,\n        query=request_data.query,\n        ...\n    )\n    \n    return jsonify(result.to_dict())\n```\n\n### Testing Pattern\n```python\ndef test_attach_tools():\n    # Create mock services\n    mock_tool_manager = MockToolManager()\n    mock_tool_manager.attach_tools_for_query.return_value = AttachResponse(...)\n    \n    # Create app with mocks\n    app = create_app(config=TestConfig())\n    app.services.tools = mock_tool_manager\n    \n    # Test\n    with app.test_client() as client:\n        response = client.post('/api/v1/tools/attach', json={...})\n        assert response.status_code == 200\n```\n\n## Acceptance Criteria\n- [ ] App factory pattern implemented\n- [ ] ServiceContainer holds all services\n- [ ] Routes use get_services() helper\n- [ ] Tests can inject mock services\n- [ ] Configuration is centralized\n- [ ] All tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:38:36.125814136Z","updated_at":"2025-12-29T19:11:19.37715482Z","closed_at":"2025-12-29T19:11:19.37715482Z","close_reason":"Phase 6 complete: app_factory with full blueprint registration, main.py entry point created, 389 tests passing"}
{"id":"lettatoolsselector-ih97","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:34.537892943Z","updated_at":"2025-12-29T20:33:34.537892943Z","comments":[{"id":579,"issue_id":"lettatoolsselector-ih97","author":"root","text":"Synced from Beads: lettatoolsselector-x82\n\n---\nHuly Issue: LTSEL-159","created_at":"2025-12-29T20:33:34Z"}]}
{"id":"lettatoolsselector-ihru","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:42.148406672Z","updated_at":"2025-12-29T20:20:42.148406672Z","comments":[{"id":426,"issue_id":"lettatoolsselector-ihru","author":"root","text":"Synced from Beads: lettatoolsselector-bte\n\n---\nHuly Issue: LTSEL-197","created_at":"2025-12-29T20:20:42Z"}]}
{"id":"lettatoolsselector-ii0p","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:31:22.111803789Z","updated_at":"2025-12-29T20:31:22.111803789Z","comments":[{"id":556,"issue_id":"lettatoolsselector-ii0p","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T20:31:22Z"}]}
{"id":"lettatoolsselector-iicd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:33.718549911Z","updated_at":"2025-12-29T20:24:33.718549911Z","comments":[{"id":472,"issue_id":"lettatoolsselector-iicd","author":"root","text":"Synced from Beads: lettatoolsselector-au5\n\n---\nHuly Issue: LTSEL-178","created_at":"2025-12-29T20:24:33Z"}]}
{"id":"lettatoolsselector-iivq","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:50:11.007736015Z","updated_at":"2025-12-29T20:50:11.007736015Z","comments":[{"id":715,"issue_id":"lettatoolsselector-iivq","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T20:50:11Z"}]}
{"id":"lettatoolsselector-ijgb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:06.441638427Z","updated_at":"2025-12-29T20:11:06.441638427Z","comments":[{"id":321,"issue_id":"lettatoolsselector-ijgb","author":"root","text":"Synced from Beads: lettatoolsselector-8hp\n\n---\nHuly Issue: LTSEL-203","created_at":"2025-12-29T20:11:06Z"}]}
{"id":"lettatoolsselector-il3j","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:04.943668866Z","updated_at":"2025-12-29T20:57:04.943668866Z","comments":[{"id":783,"issue_id":"lettatoolsselector-il3j","author":"root","text":"Synced from Beads: lettatoolsselector-5mj\n\n---\nHuly Issue: LTSEL-123","created_at":"2025-12-29T20:57:05Z"}]}
{"id":"lettatoolsselector-im2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:10:04.984351411Z","updated_at":"2025-12-29T20:10:04.984351411Z","comments":[{"id":312,"issue_id":"lettatoolsselector-im2","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T20:10:05Z"}]}
{"id":"lettatoolsselector-iovq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:09.36267139Z","updated_at":"2025-12-29T20:13:09.36267139Z","comments":[{"id":343,"issue_id":"lettatoolsselector-iovq","author":"root","text":"Synced from Beads: lettatoolsselector-le1\n\n---\nHuly Issue: LTSEL-198","created_at":"2025-12-29T20:13:09Z"}]}
{"id":"lettatoolsselector-iphd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:27.568286427Z","updated_at":"2025-12-29T20:27:27.568286427Z","comments":[{"id":514,"issue_id":"lettatoolsselector-iphd","author":"root","text":"Synced from Beads: lettatoolsselector-l5y\n\n---\nHuly Issue: LTSEL-179","created_at":"2025-12-29T20:27:27Z"}]}
{"id":"lettatoolsselector-iqik","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:57.251512473Z","updated_at":"2025-12-29T20:17:57.251512473Z","comments":[{"id":395,"issue_id":"lettatoolsselector-iqik","author":"root","text":"Synced from Beads: lettatoolsselector-iji\n\n---\nHuly Issue: LTSEL-191","created_at":"2025-12-29T20:17:57Z"}]}
{"id":"lettatoolsselector-iu0l","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:56.7523972Z","updated_at":"2025-12-29T20:32:56.7523972Z","comments":[{"id":572,"issue_id":"lettatoolsselector-iu0l","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:32:57Z"}]}
{"id":"lettatoolsselector-iual","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:10.554974914Z","updated_at":"2025-12-29T20:33:10.554974914Z","comments":[{"id":577,"issue_id":"lettatoolsselector-iual","author":"root","text":"Synced from Beads: lettatoolsselector-eln\n\n---\nHuly Issue: LTSEL-174","created_at":"2025-12-29T20:33:10Z"}]}
{"id":"lettatoolsselector-iv9b","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:46:40.853588708Z","updated_at":"2025-12-29T20:46:40.853588708Z","comments":[{"id":692,"issue_id":"lettatoolsselector-iv9b","author":"root","text":"Synced from Beads: lettatoolsselector-xyd\n\n---\nHuly Issue: LTSEL-149","created_at":"2025-12-29T20:46:41Z"}]}
{"id":"lettatoolsselector-ixc2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:57.698493563Z","updated_at":"2025-12-29T20:11:57.698493563Z","comments":[{"id":331,"issue_id":"lettatoolsselector-ixc2","author":"root","text":"Synced from Beads: lettatoolsselector-6gk\n\n---\nHuly Issue: LTSEL-210","created_at":"2025-12-29T20:11:58Z"}]}
{"id":"lettatoolsselector-j25z","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:02.512648289Z","updated_at":"2025-12-29T20:16:02.512648289Z","comments":[{"id":373,"issue_id":"lettatoolsselector-j25z","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T20:16:02Z"}]}
{"id":"lettatoolsselector-j40m","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:39.80014246Z","updated_at":"2025-12-29T20:20:39.80014246Z","comments":[{"id":423,"issue_id":"lettatoolsselector-j40m","author":"root","text":"Synced from Beads: lettatoolsselector-bpa\n\n---\nHuly Issue: LTSEL-183","created_at":"2025-12-29T20:20:40Z"}]}
{"id":"lettatoolsselector-j7f9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:30.468681579Z","updated_at":"2025-12-29T20:48:30.468681579Z","comments":[{"id":705,"issue_id":"lettatoolsselector-j7f9","author":"root","text":"Synced from Beads: lettatoolsselector-m03\n\n---\nHuly Issue: LTSEL-70","created_at":"2025-12-29T20:48:30Z"}]}
{"id":"lettatoolsselector-j88c","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:01.163250808Z","updated_at":"2025-12-29T20:22:01.163250808Z","comments":[{"id":442,"issue_id":"lettatoolsselector-j88c","author":"root","text":"Synced from Beads: lettatoolsselector-bpa\n\n---\nHuly Issue: LTSEL-183","created_at":"2025-12-29T20:22:01Z"}]}
{"id":"lettatoolsselector-j9z3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:09.217665717Z","updated_at":"2025-12-29T20:15:09.217665717Z","comments":[{"id":364,"issue_id":"lettatoolsselector-j9z3","author":"root","text":"Synced from Beads: lettatoolsselector-toy\n\n---\nHuly Issue: LTSEL-194","created_at":"2025-12-29T20:15:09Z"}]}
{"id":"lettatoolsselector-jai0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:42.182175774Z","updated_at":"2025-12-29T20:15:42.182175774Z","comments":[{"id":372,"issue_id":"lettatoolsselector-jai0","author":"root","text":"Synced from Beads: lettatoolsselector-vnx\n\n---\nHuly Issue: LTSEL-207","created_at":"2025-12-29T20:15:42Z"}]}
{"id":"lettatoolsselector-jawh","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:59.802412867Z","updated_at":"2025-12-29T20:19:59.802412867Z","comments":[{"id":415,"issue_id":"lettatoolsselector-jawh","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T20:20:00Z"}]}
{"id":"lettatoolsselector-jc31","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:03.90388161Z","updated_at":"2025-12-29T20:54:03.90388161Z","comments":[{"id":751,"issue_id":"lettatoolsselector-jc31","author":"root","text":"Synced from Beads: lettatoolsselector-6t5\n\n---\nHuly Issue: LTSEL-139","created_at":"2025-12-29T20:54:04Z"}]}
{"id":"lettatoolsselector-jcb9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:27.402918185Z","updated_at":"2025-12-29T20:54:27.402918185Z","comments":[{"id":754,"issue_id":"lettatoolsselector-jcb9","author":"root","text":"Synced from Beads: lettatoolsselector-sh9\n\n---\nHuly Issue: LTSEL-129","created_at":"2025-12-29T20:54:27Z"}]}
{"id":"lettatoolsselector-jcjc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:58.105472654Z","updated_at":"2025-12-29T20:25:58.105472654Z","comments":[{"id":493,"issue_id":"lettatoolsselector-jcjc","author":"root","text":"Synced from Beads: lettatoolsselector-joa\n\n---\nHuly Issue: LTSEL-187","created_at":"2025-12-29T20:25:58Z"}]}
{"id":"lettatoolsselector-jcpe","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:28.017195693Z","updated_at":"2025-12-29T20:36:28.017195693Z","comments":[{"id":613,"issue_id":"lettatoolsselector-jcpe","author":"root","text":"Synced from Beads: lettatoolsselector-omu\n\n---\nHuly Issue: LTSEL-157","created_at":"2025-12-29T20:36:28Z"}]}
{"id":"lettatoolsselector-jh3","title":"[Perf] Use dict-based O(1) lookup for tool filtering","description":"## Problem\n`_filter_mcp_results()` performs O(n*m) linear search looking up each result in the tools cache.\n\n**Location:** `routes/tools.py:144-168`\n\n```python\n# Line 150 - O(n) lookup per result\ncached_tool = next((t for t in tools_cache if t.get('name') == tool_name), None)\n```\n\n## Impact\n- **Latency:** 10-50ms with 500+ tools in cache and 50 results (25,000+ comparisons)\n- **Priority:** MEDIUM-HIGH - easy fix with good payoff\n\n## Solution\nConvert `tools_cache` to a dictionary keyed by name at cache load time:\n\n```python\n# In ToolCacheService or at cache load time\n_tool_cache_by_name: Dict[str, dict] = {}\n\nasync def read_tool_cache(self, force_reload=False):\n    tools = await self._load_cache()\n    self._tool_cache_by_name = {t.get('name'): t for t in tools}\n    return tools\n\n# In _filter_mcp_results - O(1) lookup\ncached_tool = cache_service.get_tool_by_name(tool_name)\n```\n\n## Acceptance Criteria\n- [ ] ToolCacheService maintains name-indexed dict\n- [ ] `_filter_mcp_results()` uses O(1) dict lookup\n- [ ] Dict rebuilt on cache refresh\n- [ ] All unit tests pass\n- [ ] Add benchmark test comparing old vs new performance","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T01:49:55.722342789Z","updated_at":"2025-12-29T17:51:45.149742746Z","closed_at":"2025-12-29T17:51:45.149742746Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-jjx","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:54:23.006956448Z","updated_at":"2025-12-29T19:54:23.006956448Z","comments":[{"id":254,"issue_id":"lettatoolsselector-jjx","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T19:54:23Z"}]}
{"id":"lettatoolsselector-jorj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:55:25.081884554Z","updated_at":"2025-12-29T20:55:25.081884554Z","comments":[{"id":764,"issue_id":"lettatoolsselector-jorj","author":"root","text":"Synced from Beads: lettatoolsselector-iym\n\n---\nHuly Issue: LTSEL-135","created_at":"2025-12-29T20:55:25Z"}]}
{"id":"lettatoolsselector-jql","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:28.165403794Z","updated_at":"2025-12-29T18:56:32.145572895Z","closed_at":"2025-12-29T18:56:32.145572895Z","close_reason":"Duplicate of lettatoolsselector-vly (performance test)","comments":[{"id":13,"issue_id":"lettatoolsselector-jql","author":"node","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2025-12-22T23:46:28Z"}]}
{"id":"lettatoolsselector-jqvo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:09.284183157Z","updated_at":"2025-12-29T20:34:09.284183157Z","comments":[{"id":588,"issue_id":"lettatoolsselector-jqvo","author":"root","text":"Synced from Beads: lettatoolsselector-4tv\n\n---\nHuly Issue: LTSEL-167","created_at":"2025-12-29T20:34:09Z"}]}
{"id":"lettatoolsselector-jw5f","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:00.939289349Z","updated_at":"2025-12-29T20:11:00.939289349Z","comments":[{"id":320,"issue_id":"lettatoolsselector-jw5f","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T20:11:01Z"}]}
{"id":"lettatoolsselector-jwg7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:50:38.967014977Z","updated_at":"2025-12-29T20:50:38.967014977Z","comments":[{"id":724,"issue_id":"lettatoolsselector-jwg7","author":"root","text":"Synced from Beads: lettatoolsselector-6t5\n\n---\nHuly Issue: LTSEL-139","created_at":"2025-12-29T20:50:39Z"}]}
{"id":"lettatoolsselector-jwyb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:09.768619908Z","updated_at":"2025-12-29T20:15:09.768619908Z","comments":[{"id":365,"issue_id":"lettatoolsselector-jwyb","author":"root","text":"Synced from Beads: lettatoolsselector-bte\n\n---\nHuly Issue: LTSEL-197","created_at":"2025-12-29T20:15:10Z"}]}
{"id":"lettatoolsselector-jzl","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:54:42.138028411Z","updated_at":"2025-12-29T19:54:42.138028411Z","comments":[{"id":257,"issue_id":"lettatoolsselector-jzl","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T19:54:42Z"}]}
{"id":"lettatoolsselector-k77j","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:45:35.537796443Z","updated_at":"2025-12-29T20:45:35.537796443Z","comments":[{"id":687,"issue_id":"lettatoolsselector-k77j","author":"root","text":"Synced from Beads: lettatoolsselector-4pp\n\n---\nHuly Issue: LTSEL-151","created_at":"2025-12-29T20:45:35Z"}]}
{"id":"lettatoolsselector-k909","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:38.398022523Z","updated_at":"2025-12-29T20:28:38.398022523Z","comments":[{"id":527,"issue_id":"lettatoolsselector-k909","author":"root","text":"Synced from Beads: lettatoolsselector-22q\n\n---\nHuly Issue: LTSEL-170","created_at":"2025-12-29T20:28:38Z"}]}
{"id":"lettatoolsselector-kclr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:07.118390934Z","updated_at":"2025-12-29T20:16:07.118390934Z","comments":[{"id":377,"issue_id":"lettatoolsselector-kclr","author":"root","text":"Synced from Beads: lettatoolsselector-7yx\n\n---\nHuly Issue: LTSEL-206","created_at":"2025-12-29T20:16:07Z"}]}
{"id":"lettatoolsselector-kf7","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.088411302Z","updated_at":"2025-12-29T18:56:12.157849446Z","closed_at":"2025-12-29T18:56:12.157849446Z","close_reason":"Duplicate of closed lettatoolsselector-trs","comments":[{"id":1,"issue_id":"lettatoolsselector-kf7","author":"node","text":"## Problem\n\nTool selector API has MAX_TOTAL_TOOLS=20 but only enforces it loosely. Agents like Meridian accumulated 44 tools because pruning doesn't run proactively.\n\n## Solution\n\nBefore attaching new tools, prune existing tools to make room within the limit.\n\n## Acceptance Criteria\n\n- [ ] Before any attach operation, fetch current tool count\n- [ ] If current + new \u003e MAX_TOTAL_TOOLS, detach lowest-scored tools first\n- [ ] Protected tools are never detached (use PROTECTED_TOOLS env var)\n- [ ] Return detailed response showing what was pruned and why\n- [ ] Log pruning decisions for debugging\n\n## Technical Notes\n\n- Pruning order: oldest first, then lowest relevance score\n- Consider keeping tools attached in last 24h as \"recent\" protection\n- MAX_TOTAL_TOOLS is now 20\n\n---\nHuly Issue: LTSEL-7","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-kh4c","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:59.430551259Z","updated_at":"2025-12-29T20:26:59.430551259Z","comments":[{"id":507,"issue_id":"lettatoolsselector-kh4c","author":"root","text":"Synced from Beads: lettatoolsselector-72a\n\n---\nHuly Issue: LTSEL-185","created_at":"2025-12-29T20:26:59Z"}]}
{"id":"lettatoolsselector-khyx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:12.237964599Z","updated_at":"2025-12-29T20:23:12.237964599Z","comments":[{"id":456,"issue_id":"lettatoolsselector-khyx","author":"root","text":"Synced from Beads: lettatoolsselector-vn0\n\n---\nHuly Issue: LTSEL-192","created_at":"2025-12-29T20:23:12Z"}]}
{"id":"lettatoolsselector-kijy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:44:25.584954092Z","updated_at":"2025-12-29T20:44:25.584954092Z","comments":[{"id":676,"issue_id":"lettatoolsselector-kijy","author":"root","text":"Synced from Beads: lettatoolsselector-xyd\n\n---\nHuly Issue: LTSEL-149","created_at":"2025-12-29T20:44:25Z"}]}
{"id":"lettatoolsselector-kjgm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:24.185602306Z","updated_at":"2025-12-29T20:58:24.185602306Z","comments":[{"id":796,"issue_id":"lettatoolsselector-kjgm","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-60","created_at":"2025-12-29T20:58:24Z"}]}
{"id":"lettatoolsselector-kjvm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:45.903391991Z","updated_at":"2025-12-29T20:23:45.903391991Z","comments":[{"id":463,"issue_id":"lettatoolsselector-kjvm","author":"root","text":"Synced from Beads: lettatoolsselector-iji\n\n---\nHuly Issue: LTSEL-191","created_at":"2025-12-29T20:23:46Z"}]}
{"id":"lettatoolsselector-ko3j","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:22.543457687Z","updated_at":"2025-12-29T20:18:22.543457687Z","comments":[{"id":399,"issue_id":"lettatoolsselector-ko3j","author":"root","text":"Synced from Beads: lettatoolsselector-zzl\n\n---\nHuly Issue: LTSEL-190","created_at":"2025-12-29T20:18:22Z"}]}
{"id":"lettatoolsselector-ko3v","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:56.469792322Z","updated_at":"2025-12-29T20:37:56.469792322Z","comments":[{"id":629,"issue_id":"lettatoolsselector-ko3v","author":"root","text":"Synced from Beads: lettatoolsselector-4pp\n\n---\nHuly Issue: LTSEL-151","created_at":"2025-12-29T20:37:56Z"}]}
{"id":"lettatoolsselector-koep","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:52:33.230082439Z","updated_at":"2025-12-29T20:52:33.230082439Z","comments":[{"id":737,"issue_id":"lettatoolsselector-koep","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:52:33Z"}]}
{"id":"lettatoolsselector-kp8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:05:41.501617526Z","updated_at":"2025-12-29T20:05:41.501617526Z","comments":[{"id":276,"issue_id":"lettatoolsselector-kp8","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:05:41Z"}]}
{"id":"lettatoolsselector-kurl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:41:07.798661186Z","updated_at":"2025-12-29T20:41:07.798661186Z","comments":[{"id":656,"issue_id":"lettatoolsselector-kurl","author":"root","text":"Synced from Beads: lettatoolsselector-aru\n\n---\nHuly Issue: LTSEL-160","created_at":"2025-12-29T20:41:08Z"}]}
{"id":"lettatoolsselector-kutx","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:37.677498108Z","updated_at":"2025-12-29T20:23:37.677498108Z","comments":[{"id":458,"issue_id":"lettatoolsselector-kutx","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:23:37Z"}]}
{"id":"lettatoolsselector-kwbu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:25.859684086Z","updated_at":"2025-12-29T20:27:25.859684086Z","comments":[{"id":512,"issue_id":"lettatoolsselector-kwbu","author":"root","text":"Synced from Beads: lettatoolsselector-r2m\n\n---\nHuly Issue: LTSEL-169","created_at":"2025-12-29T20:27:26Z"}]}
{"id":"lettatoolsselector-ky4u","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:13.058645933Z","updated_at":"2025-12-29T20:27:13.058645933Z","comments":[{"id":509,"issue_id":"lettatoolsselector-ky4u","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:27:13Z"}]}
{"id":"lettatoolsselector-l32y","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:17.314445517Z","updated_at":"2025-12-29T20:56:17.314445517Z","comments":[{"id":774,"issue_id":"lettatoolsselector-l32y","author":"root","text":"Synced from Beads: lettatoolsselector-gei\n\n---\nHuly Issue: LTSEL-133","created_at":"2025-12-29T20:56:17Z"}]}
{"id":"lettatoolsselector-l41","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:47:26.098986812Z","updated_at":"2025-12-29T19:47:26.098986812Z","comments":[{"id":234,"issue_id":"lettatoolsselector-l41","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T19:47:26Z"}]}
{"id":"lettatoolsselector-l4vc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:01.146778396Z","updated_at":"2025-12-29T20:30:01.146778396Z","comments":[{"id":545,"issue_id":"lettatoolsselector-l4vc","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T20:30:01Z"}]}
{"id":"lettatoolsselector-l8n4","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:50.687346377Z","updated_at":"2025-12-29T20:26:50.687346377Z","comments":[{"id":500,"issue_id":"lettatoolsselector-l8n4","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:26:50Z"}]}
{"id":"lettatoolsselector-lan","title":"[Refactor] Phase 4: Extract service layer - AgentService","description":"Extract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService (`services/agent_service.py`)\n\nMove these from api_server.py:\n\n| Function | Lines | Responsibility |\n|----------|-------|----------------|\n| `fetch_agent_info()` | 828-847 | Get agent name/details |\n| `fetch_agent_tools()` | 849-867 | Get agent's current tools |\n| `register_tool()` | 869-896 | Register tool with Letta |\n| `_send_trigger_message()` | 898-974 | Send trigger message to agent |\n| `trigger_agent_loop()` | 1037-1081 | Spawn background trigger |\n| `_emit_matrix_bridge_webhook()` | 976-1035 | Notify Matrix bridge |\n\n### Interface\n```python\nclass AgentService:\n    def __init__(self, letta_client, webhook_url: Optional[str] = None):\n        self.letta = letta_client\n        self.webhook_url = webhook_url\n    \n    async def get_agent_info(self, agent_id: str) -\u003e AgentInfo:\n        ...\n    \n    async def get_agent_tools(self, agent_id: str) -\u003e AgentToolSet:\n        ...\n    \n    async def register_tool(self, tool_name: str, server_name: str) -\u003e Tool:\n        ...\n    \n    async def trigger_loop(\n        self,\n        agent_id: str,\n        attached_tools: List[Tool],\n        query: Optional[str] = None\n    ) -\u003e TriggerResult:\n        ...\n    \n    async def notify_webhook(\n        self,\n        agent_id: str,\n        run_id: str,\n        tools: List[str],\n        query: str\n    ) -\u003e bool:\n        ...\n```\n\n### Consolidate with letta_sdk_client.py\nConsider merging functionality from `letta_sdk_client.py` into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:37:54.612565801Z","updated_at":"2025-12-29T19:02:08.719539925Z","closed_at":"2025-12-29T19:02:08.719539925Z","close_reason":"AgentService extracted to agent_service.py (384 lines)"}
{"id":"lettatoolsselector-lbnz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:00.819243214Z","updated_at":"2025-12-29T20:17:00.819243214Z","comments":[{"id":385,"issue_id":"lettatoolsselector-lbnz","author":"root","text":"Synced from Beads: lettatoolsselector-zzl\n\n---\nHuly Issue: LTSEL-190","created_at":"2025-12-29T20:17:01Z"}]}
{"id":"lettatoolsselector-le5b","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:41.616988759Z","updated_at":"2025-12-29T20:13:41.616988759Z","comments":[{"id":349,"issue_id":"lettatoolsselector-le5b","author":"root","text":"Synced from Beads: lettatoolsselector-8pi\n\n---\nHuly Issue: LTSEL-200","created_at":"2025-12-29T20:13:41Z"}]}
{"id":"lettatoolsselector-lfqi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:31.889690725Z","updated_at":"2025-12-29T20:37:31.889690725Z","comments":[{"id":627,"issue_id":"lettatoolsselector-lfqi","author":"root","text":"## Purpose\n\nGuard against regression where pagination is forgotten and only partial tools returned.\n\n## Test Scenario\n\n1. Mock Letta API to return 10 tools per page (3 pages total = 30 tools)\n2. Call list_agent_tools(agent_id)\n3. Assert: Returns all 30 tools\n4. Assert: Makes correct number of API calls\n\n## Acceptance Criteria\n\n- [ ] Test uses mocked responses (no real API)\n- [ ] Covers edge cases: 0 tools, exactly 1 page, multiple pages\n- [ ] Fails if fewer tools returned than expected\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock or responses library\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-21","created_at":"2025-12-29T20:37:32Z"}]}
{"id":"lettatoolsselector-lguy","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:41.634580166Z","updated_at":"2025-12-29T20:34:41.634580166Z","comments":[{"id":591,"issue_id":"lettatoolsselector-lguy","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:34:41Z"}]}
{"id":"lettatoolsselector-ltsw","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:55.091328516Z","updated_at":"2025-12-29T20:48:55.091328516Z","comments":[{"id":708,"issue_id":"lettatoolsselector-ltsw","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:48:55Z"}]}
{"id":"lettatoolsselector-lx7l","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:09.870340718Z","updated_at":"2025-12-29T20:33:09.870340718Z","comments":[{"id":576,"issue_id":"lettatoolsselector-lx7l","author":"root","text":"Synced from Beads: lettatoolsselector-r2m\n\n---\nHuly Issue: LTSEL-169","created_at":"2025-12-29T20:33:10Z"}]}
{"id":"lettatoolsselector-ly48","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:02.038215707Z","updated_at":"2025-12-29T20:54:02.038215707Z","comments":[{"id":749,"issue_id":"lettatoolsselector-ly48","author":"root","text":"Synced from Beads: lettatoolsselector-i3k\n\n---\nHuly Issue: LTSEL-127","created_at":"2025-12-29T20:54:02Z"}]}
{"id":"lettatoolsselector-m3jh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:05.07431809Z","updated_at":"2025-12-29T20:21:05.07431809Z","comments":[{"id":431,"issue_id":"lettatoolsselector-m3jh","author":"root","text":"Synced from Beads: lettatoolsselector-iji\n\n---\nHuly Issue: LTSEL-191","created_at":"2025-12-29T20:21:05Z"}]}
{"id":"lettatoolsselector-m6kn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:39.831469747Z","updated_at":"2025-12-29T20:56:39.831469747Z","comments":[{"id":778,"issue_id":"lettatoolsselector-m6kn","author":"root","text":"Synced from Beads: lettatoolsselector-y0e\n\n---\nHuly Issue: LTSEL-124","created_at":"2025-12-29T20:56:40Z"}]}
{"id":"lettatoolsselector-m7cg","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:26.542454776Z","updated_at":"2025-12-29T20:58:26.542454776Z","comments":[{"id":799,"issue_id":"lettatoolsselector-m7cg","author":"root","text":"Synced from Beads: lettatoolsselector-gei\n\n---\nHuly Issue: LTSEL-133","created_at":"2025-12-29T20:58:26Z"}]}
{"id":"lettatoolsselector-m7ws","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:45.825138344Z","updated_at":"2025-12-29T20:19:45.825138344Z","comments":[{"id":413,"issue_id":"lettatoolsselector-m7ws","author":"root","text":"Synced from Beads: lettatoolsselector-toy\n\n---\nHuly Issue: LTSEL-194","created_at":"2025-12-29T20:19:46Z"}]}
{"id":"lettatoolsselector-m97q","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:48.980631203Z","updated_at":"2025-12-29T20:27:48.980631203Z","comments":[{"id":516,"issue_id":"lettatoolsselector-m97q","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:27:49Z"}]}
{"id":"lettatoolsselector-mdfn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:25.889199786Z","updated_at":"2025-12-29T20:35:25.889199786Z","comments":[{"id":602,"issue_id":"lettatoolsselector-mdfn","author":"root","text":"Synced from Beads: lettatoolsselector-tow\n\n---\nHuly Issue: LTSEL-165","created_at":"2025-12-29T20:35:26Z"}]}
{"id":"lettatoolsselector-mdm","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:57:42.889843661Z","updated_at":"2025-12-29T19:57:42.889843661Z","comments":[{"id":268,"issue_id":"lettatoolsselector-mdm","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T19:57:43Z"}]}
{"id":"lettatoolsselector-mgk","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:10.40752372Z","updated_at":"2025-12-29T20:09:10.40752372Z","comments":[{"id":302,"issue_id":"lettatoolsselector-mgk","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T20:09:10Z"}]}
{"id":"lettatoolsselector-mj5r","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:03.974140675Z","updated_at":"2025-12-29T20:30:03.974140675Z","comments":[{"id":547,"issue_id":"lettatoolsselector-mj5r","author":"root","text":"Synced from Beads: lettatoolsselector-4tv\n\n---\nHuly Issue: LTSEL-167","created_at":"2025-12-29T20:30:04Z"}]}
{"id":"lettatoolsselector-mmx8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:00.216003546Z","updated_at":"2025-12-29T20:33:00.216003546Z","comments":[{"id":573,"issue_id":"lettatoolsselector-mmx8","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T20:33:00Z"}]}
{"id":"lettatoolsselector-mna","title":"[Observability] Add Prometheus metrics to tool selector API","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:28:00.852182385Z","updated_at":"2025-12-23T03:28:00.852182385Z","comments":[{"id":54,"issue_id":"lettatoolsselector-mna","author":"node","text":"Synced from Beads: lettatoolsselector-sxk\n\n---\nHuly Issue: LTSEL-30","created_at":"2025-12-23T03:28:01Z"}]}
{"id":"lettatoolsselector-mq7l","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:00.453749562Z","updated_at":"2025-12-29T20:22:00.453749562Z","comments":[{"id":441,"issue_id":"lettatoolsselector-mq7l","author":"root","text":"Synced from Beads: lettatoolsselector-sk8\n\n---\nHuly Issue: LTSEL-180","created_at":"2025-12-29T20:22:00Z"}]}
{"id":"lettatoolsselector-msav","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:58.084947599Z","updated_at":"2025-12-29T20:58:58.084947599Z","comments":[{"id":803,"issue_id":"lettatoolsselector-msav","author":"root","text":"Synced from Beads: lettatoolsselector-xei\n\n---\nHuly Issue: LTSEL-126","created_at":"2025-12-29T20:58:58Z"}]}
{"id":"lettatoolsselector-msbo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:06.987496139Z","updated_at":"2025-12-29T20:11:06.987496139Z","comments":[{"id":322,"issue_id":"lettatoolsselector-msbo","author":"root","text":"Synced from Beads: lettatoolsselector-ajz\n\n---\nHuly Issue: LTSEL-205","created_at":"2025-12-29T20:11:07Z"}]}
{"id":"lettatoolsselector-msbq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:18.563366399Z","updated_at":"2025-12-29T20:35:18.563366399Z","comments":[{"id":601,"issue_id":"lettatoolsselector-msbq","author":"root","text":"Synced from Beads: lettatoolsselector-x82\n\n---\nHuly Issue: LTSEL-159","created_at":"2025-12-29T20:35:18Z"}]}
{"id":"lettatoolsselector-mtk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:48.571395977Z","updated_at":"2025-12-29T20:09:48.571395977Z","comments":[{"id":311,"issue_id":"lettatoolsselector-mtk","author":"root","text":"Synced from Beads: lettatoolsselector-ylm\n\n---\nHuly Issue: LTSEL-215","created_at":"2025-12-29T20:09:48Z"}]}
{"id":"lettatoolsselector-mtk3","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:51:11.77597563Z","updated_at":"2025-12-29T20:51:11.77597563Z","comments":[{"id":725,"issue_id":"lettatoolsselector-mtk3","author":"root","text":"Synced from Beads: lettatoolsselector-nlt\n\n---\nHuly Issue: LTSEL-34","created_at":"2025-12-29T20:51:12Z"}]}
{"id":"lettatoolsselector-mtoe","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:02.05339633Z","updated_at":"2025-12-29T20:42:02.05339633Z","comments":[{"id":660,"issue_id":"lettatoolsselector-mtoe","author":"root","text":"Synced from Beads: lettatoolsselector-x82\n\n---\nHuly Issue: LTSEL-159","created_at":"2025-12-29T20:42:02Z"}]}
{"id":"lettatoolsselector-mu4","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.527463806Z","updated_at":"2025-12-29T18:56:09.363003933Z","closed_at":"2025-12-29T18:56:09.363003933Z","close_reason":"Duplicate of closed lettatoolsselector-cvy","comments":[{"id":4,"issue_id":"lettatoolsselector-mu4","author":"node","text":"## Problem\n\nNo audit trail for tool changes. Debugging requires scraping logs from multiple containers.\n\n## Solution\n\nEmit structured events to a queue/stream whenever tools are attached or detached.\n\n## Acceptance Criteria\n\n- [ ] Event schema: {timestamp, agent_id, tool_id, tool_name, action, reason, source}\n- [ ] Events emitted from tool selector API on every attach/detach\n- [ ] Events written to Redis Stream or similar (low overhead)\n- [ ] Events include correlation ID for tracing webhook -\u003e attach flow\n\n## Technical Notes\n\n- Use Redis Streams for simplicity (XADD)\n- Keep 7 days of events by default\n- Consider also writing to structured log for Loki ingestion\n\n---\nHuly Issue: LTSEL-11","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-mz0l","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:57.168601306Z","updated_at":"2025-12-29T20:58:57.168601306Z","comments":[{"id":802,"issue_id":"lettatoolsselector-mz0l","author":"root","text":"Synced from Beads: lettatoolsselector-h52\n\n---\nHuly Issue: LTSEL-118","created_at":"2025-12-29T20:58:57Z"}]}
{"id":"lettatoolsselector-n5il","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:04.224005791Z","updated_at":"2025-12-29T20:21:04.224005791Z","comments":[{"id":430,"issue_id":"lettatoolsselector-n5il","author":"root","text":"Synced from Beads: lettatoolsselector-72a\n\n---\nHuly Issue: LTSEL-185","created_at":"2025-12-29T20:21:04Z"}]}
{"id":"lettatoolsselector-n6cz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:32.964382509Z","updated_at":"2025-12-29T20:24:32.964382509Z","comments":[{"id":471,"issue_id":"lettatoolsselector-n6cz","author":"root","text":"Synced from Beads: lettatoolsselector-8o8\n\n---\nHuly Issue: LTSEL-175","created_at":"2025-12-29T20:24:33Z"}]}
{"id":"lettatoolsselector-nav","title":"[Refactor] Phase 2: Extract service layer - ToolManager","description":"Extract tool management logic into a dedicated ToolManager service.\n\n## Status: In Progress\n- [x] Phase 1 complete: models.py created\n- [x] attach_tool, detach_tool, process_tools moved to tool_manager.py\n- [x] api_server.py delegates to tool_manager\n- [ ] _perform_tool_pruning extraction (see sub-issues)\n\n## Sub-Issues (Remaining Work)\n1. **lettatoolsselector-pmp**: Extract fetch_agent_tools to tool_manager\n2. **lettatoolsselector-9yr**: Extract config module for tool limits\n3. **lettatoolsselector-a6c**: Add search_tools callback to tool_manager\n4. **lettatoolsselector-c05**: Extract _perform_tool_pruning to tool_manager\n\n## Completed Functions\n\n| Function | Status | Location |\n|----------|--------|----------|\n| `attach_tool()` | Done | tool_manager.py |\n| `detach_tool()` | Done | tool_manager.py |\n| `process_tools()` | Done | tool_manager.py |\n| `is_letta_core_tool()` | Done | models.py |\n| `_perform_tool_pruning()` | Pending | See lettatoolsselector-c05 |\n| `process_matching_tool()` | Pending | Needs analysis |\n\n## Acceptance Criteria\n- [x] ToolManager module created (tool_manager.py)\n- [x] Core tool operations moved (attach/detach/process)\n- [x] api_server.py uses tool_manager\n- [x] Unit tests updated for tool_manager.configure()\n- [ ] _perform_tool_pruning moved\n- [ ] All 296+ unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:37:24.489690949Z","updated_at":"2025-12-29T19:02:06.853530882Z","closed_at":"2025-12-29T19:02:06.853530882Z","close_reason":"ToolManager extracted to tool_manager.py (727 lines)"}
{"id":"lettatoolsselector-navt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:53.421676978Z","updated_at":"2025-12-29T20:25:53.421676978Z","comments":[{"id":489,"issue_id":"lettatoolsselector-navt","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:25:53Z"}]}
{"id":"lettatoolsselector-nf7c","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:27.269204409Z","updated_at":"2025-12-29T20:24:27.269204409Z","comments":[{"id":469,"issue_id":"lettatoolsselector-nf7c","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T20:24:27Z"}]}
{"id":"lettatoolsselector-nfrb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:21.983899222Z","updated_at":"2025-12-29T20:18:21.983899222Z","comments":[{"id":398,"issue_id":"lettatoolsselector-nfrb","author":"root","text":"Synced from Beads: lettatoolsselector-h76\n\n---\nHuly Issue: LTSEL-188","created_at":"2025-12-29T20:18:22Z"}]}
{"id":"lettatoolsselector-ni61","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:31.53775454Z","updated_at":"2025-12-29T20:48:31.53775454Z","comments":[{"id":706,"issue_id":"lettatoolsselector-ni61","author":"root","text":"Synced from Beads: lettatoolsselector-7mg\n\n---\nHuly Issue: LTSEL-144","created_at":"2025-12-29T20:48:31Z"}]}
{"id":"lettatoolsselector-njyt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:38.671074316Z","updated_at":"2025-12-29T20:21:38.671074316Z","comments":[{"id":439,"issue_id":"lettatoolsselector-njyt","author":"root","text":"Synced from Beads: lettatoolsselector-rc8\n\n---\nHuly Issue: LTSEL-195","created_at":"2025-12-29T20:21:38Z"}]}
{"id":"lettatoolsselector-nnnl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:52:13.017615187Z","updated_at":"2025-12-29T20:52:13.017615187Z","comments":[{"id":733,"issue_id":"lettatoolsselector-nnnl","author":"root","text":"Synced from Beads: lettatoolsselector-lv2\n\n---\nHuly Issue: LTSEL-131","created_at":"2025-12-29T20:52:13Z"}]}
{"id":"lettatoolsselector-np74","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:49.623106829Z","updated_at":"2025-12-29T20:27:49.623106829Z","comments":[{"id":517,"issue_id":"lettatoolsselector-np74","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:27:49Z"}]}
{"id":"lettatoolsselector-npo3","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:27.810156766Z","updated_at":"2025-12-29T20:25:27.810156766Z","comments":[{"id":481,"issue_id":"lettatoolsselector-npo3","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T20:25:28Z"}]}
{"id":"lettatoolsselector-nrvq","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:47:08.42436127Z","updated_at":"2025-12-29T20:47:08.42436127Z","comments":[{"id":693,"issue_id":"lettatoolsselector-nrvq","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:47:08Z"}]}
{"id":"lettatoolsselector-nuq6","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:01.85746804Z","updated_at":"2025-12-29T20:29:01.85746804Z","comments":[{"id":531,"issue_id":"lettatoolsselector-nuq6","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T20:29:02Z"}]}
{"id":"lettatoolsselector-nx7w","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:59.091606503Z","updated_at":"2025-12-29T20:35:59.091606503Z","comments":[{"id":607,"issue_id":"lettatoolsselector-nx7w","author":"root","text":"Synced from Beads: lettatoolsselector-kne\n\n---\nHuly Issue: LTSEL-158","created_at":"2025-12-29T20:35:59Z"}]}
{"id":"lettatoolsselector-nygp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:12.740674043Z","updated_at":"2025-12-29T20:19:12.740674043Z","comments":[{"id":409,"issue_id":"lettatoolsselector-nygp","author":"root","text":"Synced from Beads: lettatoolsselector-rc8\n\n---\nHuly Issue: LTSEL-195","created_at":"2025-12-29T20:19:13Z"}]}
{"id":"lettatoolsselector-o1be","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:19.99919051Z","updated_at":"2025-12-29T20:30:19.99919051Z","comments":[{"id":550,"issue_id":"lettatoolsselector-o1be","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T20:30:20Z"}]}
{"id":"lettatoolsselector-o2cb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:37.640436744Z","updated_at":"2025-12-29T20:22:37.640436744Z","comments":[{"id":449,"issue_id":"lettatoolsselector-o2cb","author":"root","text":"Synced from Beads: lettatoolsselector-n9f\n\n---\nHuly Issue: LTSEL-182","created_at":"2025-12-29T20:22:37Z"}]}
{"id":"lettatoolsselector-o2ix","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:40:37.98964581Z","updated_at":"2025-12-29T20:40:37.98964581Z","comments":[{"id":651,"issue_id":"lettatoolsselector-o2ix","author":"root","text":"Synced from Beads: lettatoolsselector-53h\n\n---\nHuly Issue: LTSEL-156","created_at":"2025-12-29T20:40:38Z"}]}
{"id":"lettatoolsselector-o5f8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:01.621026006Z","updated_at":"2025-12-29T20:33:01.621026006Z","comments":[{"id":574,"issue_id":"lettatoolsselector-o5f8","author":"root","text":"Synced from Beads: lettatoolsselector-aru\n\n---\nHuly Issue: LTSEL-160","created_at":"2025-12-29T20:33:01Z"}]}
{"id":"lettatoolsselector-o6h7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:36.591234399Z","updated_at":"2025-12-29T20:29:36.591234399Z","comments":[{"id":539,"issue_id":"lettatoolsselector-o6h7","author":"root","text":"Synced from Beads: lettatoolsselector-tow\n\n---\nHuly Issue: LTSEL-165","created_at":"2025-12-29T20:29:36Z"}]}
{"id":"lettatoolsselector-o754","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:58.70223494Z","updated_at":"2025-12-29T20:37:58.70223494Z","comments":[{"id":632,"issue_id":"lettatoolsselector-o754","author":"root","text":"Synced from Beads: lettatoolsselector-tow\n\n---\nHuly Issue: LTSEL-165","created_at":"2025-12-29T20:37:59Z"}]}
{"id":"lettatoolsselector-o7ac","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:40.822614818Z","updated_at":"2025-12-29T20:15:40.822614818Z","comments":[{"id":370,"issue_id":"lettatoolsselector-o7ac","author":"root","text":"Synced from Beads: lettatoolsselector-t11\n\n---\nHuly Issue: LTSEL-196","created_at":"2025-12-29T20:15:41Z"}]}
{"id":"lettatoolsselector-oags","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:32.837715909Z","updated_at":"2025-12-29T20:25:32.837715909Z","comments":[{"id":485,"issue_id":"lettatoolsselector-oags","author":"root","text":"Synced from Beads: lettatoolsselector-h76\n\n---\nHuly Issue: LTSEL-188","created_at":"2025-12-29T20:25:33Z"}]}
{"id":"lettatoolsselector-oblh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:05.582119517Z","updated_at":"2025-12-29T20:28:05.582119517Z","comments":[{"id":522,"issue_id":"lettatoolsselector-oblh","author":"root","text":"Synced from Beads: lettatoolsselector-bpa\n\n---\nHuly Issue: LTSEL-183","created_at":"2025-12-29T20:28:05Z"}]}
{"id":"lettatoolsselector-oc2t","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:48.667980119Z","updated_at":"2025-12-29T20:12:48.667980119Z","comments":[{"id":341,"issue_id":"lettatoolsselector-oc2t","author":"root","text":"Synced from Beads: lettatoolsselector-zxm\n\n---\nHuly Issue: LTSEL-213","created_at":"2025-12-29T20:12:48Z"}]}
{"id":"lettatoolsselector-odq8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:40.141654648Z","updated_at":"2025-12-29T20:14:40.141654648Z","comments":[{"id":357,"issue_id":"lettatoolsselector-odq8","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T20:14:40Z"}]}
{"id":"lettatoolsselector-oe3y","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:54.740499036Z","updated_at":"2025-12-29T20:58:54.740499036Z","comments":[{"id":800,"issue_id":"lettatoolsselector-oe3y","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:58:55Z"}]}
{"id":"lettatoolsselector-of8w","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:22.469019432Z","updated_at":"2025-12-29T20:42:22.469019432Z","comments":[{"id":664,"issue_id":"lettatoolsselector-of8w","author":"root","text":"Synced from Beads: lettatoolsselector-kne\n\n---\nHuly Issue: LTSEL-158","created_at":"2025-12-29T20:42:22Z"}]}
{"id":"lettatoolsselector-oh0y","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:43:28.132207175Z","updated_at":"2025-12-29T20:43:28.132207175Z","comments":[{"id":671,"issue_id":"lettatoolsselector-oh0y","author":"root","text":"Synced from Beads: lettatoolsselector-53h\n\n---\nHuly Issue: LTSEL-156","created_at":"2025-12-29T20:43:28Z"}]}
{"id":"lettatoolsselector-ojfw","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:24.077303352Z","updated_at":"2025-12-29T20:54:24.077303352Z","comments":[{"id":752,"issue_id":"lettatoolsselector-ojfw","author":"root","text":"Synced from Beads: lettatoolsselector-fw6\n\n---\nHuly Issue: LTSEL-70","created_at":"2025-12-29T20:54:24Z"}]}
{"id":"lettatoolsselector-olpa","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:31:30.311885776Z","updated_at":"2025-12-29T20:31:30.311885776Z","comments":[{"id":559,"issue_id":"lettatoolsselector-olpa","author":"root","text":"Synced from Beads: lettatoolsselector-c33\n\n---\nHuly Issue: LTSEL-172","created_at":"2025-12-29T20:31:30Z"}]}
{"id":"lettatoolsselector-omxb","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:34.357585823Z","updated_at":"2025-12-29T20:28:34.357585823Z","comments":[{"id":525,"issue_id":"lettatoolsselector-omxb","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T20:28:34Z"}]}
{"id":"lettatoolsselector-opzv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:10.069212616Z","updated_at":"2025-12-29T20:23:10.069212616Z","comments":[{"id":453,"issue_id":"lettatoolsselector-opzv","author":"root","text":"Synced from Beads: lettatoolsselector-au5\n\n---\nHuly Issue: LTSEL-178","created_at":"2025-12-29T20:23:10Z"}]}
{"id":"lettatoolsselector-osh5","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:44:45.066377675Z","updated_at":"2025-12-29T20:44:45.066377675Z","comments":[{"id":680,"issue_id":"lettatoolsselector-osh5","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:44:45Z"}]}
{"id":"lettatoolsselector-ou7o","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:40.600412016Z","updated_at":"2025-12-29T20:30:40.600412016Z","comments":[{"id":555,"issue_id":"lettatoolsselector-ou7o","author":"root","text":"Synced from Beads: lettatoolsselector-au5\n\n---\nHuly Issue: LTSEL-178","created_at":"2025-12-29T20:30:40Z"}]}
{"id":"lettatoolsselector-oyjk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:10.740388658Z","updated_at":"2025-12-29T20:13:10.740388658Z","comments":[{"id":345,"issue_id":"lettatoolsselector-oyjk","author":"root","text":"Synced from Beads: lettatoolsselector-vnx\n\n---\nHuly Issue: LTSEL-207","created_at":"2025-12-29T20:13:11Z"}]}
{"id":"lettatoolsselector-p5jr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:20.825021659Z","updated_at":"2025-12-29T20:42:20.825021659Z","comments":[{"id":662,"issue_id":"lettatoolsselector-p5jr","author":"root","text":"Synced from Beads: lettatoolsselector-t4d\n\n---\nHuly Issue: LTSEL-146","created_at":"2025-12-29T20:42:21Z"}]}
{"id":"lettatoolsselector-p978","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:00.381684722Z","updated_at":"2025-12-29T20:58:00.381684722Z","comments":[{"id":794,"issue_id":"lettatoolsselector-p978","author":"root","text":"Synced from Beads: lettatoolsselector-qkj\n\n---\nHuly Issue: LTSEL-134","created_at":"2025-12-29T20:58:00Z"}]}
{"id":"lettatoolsselector-pa7b","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:55:41.921282431Z","updated_at":"2025-12-29T20:55:41.921282431Z","comments":[{"id":766,"issue_id":"lettatoolsselector-pa7b","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T20:55:42Z"}]}
{"id":"lettatoolsselector-pah","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:06:35.982425134Z","updated_at":"2025-12-29T20:06:35.982425134Z","comments":[{"id":281,"issue_id":"lettatoolsselector-pah","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T20:06:36Z"}]}
{"id":"lettatoolsselector-pg7g","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:31.533922872Z","updated_at":"2025-12-29T20:16:31.533922872Z","comments":[{"id":379,"issue_id":"lettatoolsselector-pg7g","author":"root","text":"Synced from Beads: lettatoolsselector-iji\n\n---\nHuly Issue: LTSEL-191","created_at":"2025-12-29T20:16:31Z"}]}
{"id":"lettatoolsselector-pgvo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:16.848591445Z","updated_at":"2025-12-29T21:00:16.848591445Z","comments":[{"id":815,"issue_id":"lettatoolsselector-pgvo","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-113","created_at":"2025-12-29T21:00:17Z"}]}
{"id":"lettatoolsselector-pih","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","description":"## Problem\nThe `/attach` endpoint calls `fetch_agent_tools()` twice - once at start, and again after pre-attach pruning.\n\n**Location:** `routes/tools.py:371-374, 527-543`\n\n```python\n# Line 371-374 - First fetch\nagent_name, current_agent_tools = await asyncio.gather(\n    _agent_service.fetch_agent_info(agent_id),\n    _tool_manager.fetch_agent_tools(agent_id)\n)\n\n# Line 528 - Redundant re-fetch after pruning\ncurrent_agent_tools = await _tool_manager.fetch_agent_tools(agent_id)\n```\n\n## Impact\n- **Latency:** 100-300ms wasted per attach request (extra Letta API call)\n- **Priority:** HIGH - common operation\n\n## Solution\nModify `perform_tool_pruning()` to return the updated tools list instead of requiring a re-fetch:\n\n```python\n# In tool_manager.py\nasync def perform_tool_pruning(...) -\u003e dict:\n    # ... pruning logic ...\n    return {\n        'success': True,\n        'details': {...},\n        'remaining_tools': remaining_tools  # Add this\n    }\n\n# In routes/tools.py\nprune_result = await _tool_manager.perform_tool_pruning(...)\nif prune_result.get('success'):\n    current_agent_tools = prune_result.get('remaining_tools', [])\n```\n\n## Acceptance Criteria\n- [ ] `perform_tool_pruning()` returns remaining tools\n- [ ] Attach endpoint uses returned tools instead of re-fetching\n- [ ] Only one `fetch_agent_tools()` call per attach request\n- [ ] All unit tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:49:30.385615524Z","updated_at":"2025-12-29T15:34:13.386981036Z","closed_at":"2025-12-29T15:34:13.386981036Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-pjl","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:52:01.152043496Z","updated_at":"2025-12-29T19:52:01.152043496Z","comments":[{"id":249,"issue_id":"lettatoolsselector-pjl","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T19:52:01Z"}]}
{"id":"lettatoolsselector-pmp","title":"[Refactor] Extract fetch_agent_tools to tool_manager","description":"## Summary\nExtract `fetch_agent_tools` function to `tool_manager.py` to support `_perform_tool_pruning` extraction.\n\n## Current Location\n- `api_server.py:612-630`\n\n## Dependencies\n- Uses `USE_LETTA_SDK`, `get_letta_sdk_client()`, `http_session`, `LETTA_URL`, `HEADERS`\n- All these are already configured via `tool_manager.configure()`\n\n## Implementation\n1. Add `fetch_agent_tools()` to `tool_manager.py`\n2. Update `api_server.py` to delegate to `tool_manager.fetch_agent_tools()`\n3. Add unit tests\n\n## Acceptance Criteria\n- [ ] Function moved to tool_manager.py\n- [ ] api_server.py delegates to tool_manager\n- [ ] Unit tests pass\n- [ ] Integration tests pass\n\n## Parent Issue\nlettatoolsselector-nav","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:51:39.444968342Z","updated_at":"2025-12-29T19:03:27.4731106Z","closed_at":"2025-12-29T19:03:27.4731106Z","close_reason":"Already extracted: fetch_agent_tools in tool_manager.py:93"}
{"id":"lettatoolsselector-pmzt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:38:33.331303103Z","updated_at":"2025-12-29T20:38:33.331303103Z","comments":[{"id":635,"issue_id":"lettatoolsselector-pmzt","author":"root","text":"Synced from Beads: lettatoolsselector-aru\n\n---\nHuly Issue: LTSEL-160","created_at":"2025-12-29T20:38:33Z"}]}
{"id":"lettatoolsselector-pp8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:07:28.915387991Z","updated_at":"2025-12-29T20:07:28.915387991Z","comments":[{"id":287,"issue_id":"lettatoolsselector-pp8","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T20:07:29Z"}]}
{"id":"lettatoolsselector-ppg","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.934324694Z","updated_at":"2025-12-29T18:55:58.960199725Z","closed_at":"2025-12-29T18:55:58.960199725Z","close_reason":"Duplicate of closed lettatoolsselector-d0t"}
{"id":"lettatoolsselector-ppnk","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:12.509215021Z","updated_at":"2025-12-29T20:27:12.509215021Z","comments":[{"id":508,"issue_id":"lettatoolsselector-ppnk","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:27:12Z"}]}
{"id":"lettatoolsselector-pqfv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:53:14.091674012Z","updated_at":"2025-12-29T20:53:14.091674012Z","comments":[{"id":742,"issue_id":"lettatoolsselector-pqfv","author":"root","text":"Synced from Beads: lettatoolsselector-sh9\n\n---\nHuly Issue: LTSEL-129","created_at":"2025-12-29T20:53:14Z"}]}
{"id":"lettatoolsselector-pxlh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:45:11.045871736Z","updated_at":"2025-12-29T20:45:11.045871736Z","comments":[{"id":683,"issue_id":"lettatoolsselector-pxlh","author":"root","text":"Synced from Beads: lettatoolsselector-08q\n\n---\nHuly Issue: LTSEL-147","created_at":"2025-12-29T20:45:11Z"}]}
{"id":"lettatoolsselector-q3a4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:03.025012088Z","updated_at":"2025-12-29T20:54:03.025012088Z","comments":[{"id":750,"issue_id":"lettatoolsselector-q3a4","author":"root","text":"Synced from Beads: lettatoolsselector-88a\n\n---\nHuly Issue: LTSEL-130","created_at":"2025-12-29T20:54:03Z"}]}
{"id":"lettatoolsselector-q6vf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:52:14.727393415Z","updated_at":"2025-12-29T20:52:14.727393415Z","comments":[{"id":735,"issue_id":"lettatoolsselector-q6vf","author":"root","text":"Synced from Beads: lettatoolsselector-m03\n\n---\nHuly Issue: LTSEL-70","created_at":"2025-12-29T20:52:15Z"}]}
{"id":"lettatoolsselector-qane","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:16.073108559Z","updated_at":"2025-12-29T21:00:16.073108559Z","comments":[{"id":814,"issue_id":"lettatoolsselector-qane","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-110","created_at":"2025-12-29T21:00:16Z"}]}
{"id":"lettatoolsselector-qecp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:26.651062231Z","updated_at":"2025-12-29T20:27:26.651062231Z","comments":[{"id":513,"issue_id":"lettatoolsselector-qecp","author":"root","text":"Synced from Beads: lettatoolsselector-c33\n\n---\nHuly Issue: LTSEL-172","created_at":"2025-12-29T20:27:26Z"}]}
{"id":"lettatoolsselector-qfpf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:36.979753352Z","updated_at":"2025-12-29T20:22:36.979753352Z","comments":[{"id":448,"issue_id":"lettatoolsselector-qfpf","author":"root","text":"Synced from Beads: lettatoolsselector-l5y\n\n---\nHuly Issue: LTSEL-179","created_at":"2025-12-29T20:22:37Z"}]}
{"id":"lettatoolsselector-qgt","title":"[Refactor] Master: api_server.py modularization roadmap","description":"Master tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n| Phase | Issue | Description | Priority |\n|-------|-------|-------------|----------|\n| 0 | lettatoolsselector-642 | Test coverage for critical paths | P1 |\n| 1 | lettatoolsselector-869 | Extract data models and types | P2 |\n| 2 | lettatoolsselector-nav | Extract ToolManager service | P2 |\n| 3 | lettatoolsselector-4w9 | Extract SearchService | P2 |\n| 4 | lettatoolsselector-lan | Extract AgentService | P2 |\n| 5 | lettatoolsselector-sbw | Extract route blueprints | P2 |\n| 6 | lettatoolsselector-ier | Dependency injection \u0026 app factory | P2 |\n\n## Dependency Graph\n```\nPhase 0 (Tests)\n    \n    \nPhase 1 (Models)\n    \n    \n                        \nPhase 2    Phase 3    Phase 4\n(Tools)    (Search)   (Agent)\n                        \n    \n               \n               \n          Phase 5 (Routes)\n               \n               \n          Phase 6 (DI/Factory)\n```\n\n## Success Metrics\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-28T19:38:55.088312878Z","updated_at":"2025-12-29T19:11:20.606173254Z","closed_at":"2025-12-29T19:11:20.606173254Z","close_reason":"Refactor complete: api_server.py modularized - services extracted, 14 blueprints, app_factory pattern"}
{"id":"lettatoolsselector-qn44","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:57.235626078Z","updated_at":"2025-12-29T20:20:57.235626078Z","comments":[{"id":428,"issue_id":"lettatoolsselector-qn44","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:20:57Z"}]}
{"id":"lettatoolsselector-qp60","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:40.753315356Z","updated_at":"2025-12-29T20:23:40.753315356Z","comments":[{"id":459,"issue_id":"lettatoolsselector-qp60","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T20:23:41Z"}]}
{"id":"lettatoolsselector-qq7z","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:49:51.93777504Z","updated_at":"2025-12-29T20:49:51.93777504Z","comments":[{"id":714,"issue_id":"lettatoolsselector-qq7z","author":"root","text":"Synced from Beads: lettatoolsselector-egp\n\n---\nHuly Issue: LTSEL-141","created_at":"2025-12-29T20:49:52Z"}]}
{"id":"lettatoolsselector-qqrn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:57.121145293Z","updated_at":"2025-12-29T20:26:57.121145293Z","comments":[{"id":504,"issue_id":"lettatoolsselector-qqrn","author":"root","text":"Synced from Beads: lettatoolsselector-22q\n\n---\nHuly Issue: LTSEL-170","created_at":"2025-12-29T20:26:57Z"}]}
{"id":"lettatoolsselector-qtqf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:59:49.759153286Z","updated_at":"2025-12-29T20:59:49.759153286Z","comments":[{"id":813,"issue_id":"lettatoolsselector-qtqf","author":"root","text":"Synced from Beads: lettatoolsselector-sh9\n\n---\nHuly Issue: LTSEL-129","created_at":"2025-12-29T20:59:50Z"}]}
{"id":"lettatoolsselector-r248","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:30.059285335Z","updated_at":"2025-12-29T20:57:30.059285335Z","comments":[{"id":787,"issue_id":"lettatoolsselector-r248","author":"root","text":"Synced from Beads: lettatoolsselector-80w\n\n---\nHuly Issue: LTSEL-122","created_at":"2025-12-29T20:57:30Z"}]}
{"id":"lettatoolsselector-r31r","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:05.725713867Z","updated_at":"2025-12-29T20:39:05.725713867Z","comments":[{"id":638,"issue_id":"lettatoolsselector-r31r","author":"root","text":"Synced from Beads: lettatoolsselector-xj7\n\n---\nHuly Issue: LTSEL-152","created_at":"2025-12-29T20:39:06Z"}]}
{"id":"lettatoolsselector-r3e9","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:27.057416203Z","updated_at":"2025-12-29T20:48:27.057416203Z","comments":[{"id":703,"issue_id":"lettatoolsselector-r3e9","author":"root","text":"Synced from Beads: lettatoolsselector-fw6\n\n---\nHuly Issue: LTSEL-70","created_at":"2025-12-29T20:48:27Z"}]}
{"id":"lettatoolsselector-r3ga","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:19.853378466Z","updated_at":"2025-12-29T20:12:19.853378466Z","comments":[{"id":334,"issue_id":"lettatoolsselector-r3ga","author":"root","text":"Synced from Beads: lettatoolsselector-8hp\n\n---\nHuly Issue: LTSEL-203","created_at":"2025-12-29T20:12:20Z"}]}
{"id":"lettatoolsselector-r62e","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:41.517780646Z","updated_at":"2025-12-29T20:56:41.517780646Z","comments":[{"id":780,"issue_id":"lettatoolsselector-r62e","author":"root","text":"Synced from Beads: lettatoolsselector-w33\n\n---\nHuly Issue: LTSEL-138","created_at":"2025-12-29T20:56:41Z"}]}
{"id":"lettatoolsselector-rcdr","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:30.102131894Z","updated_at":"2025-12-29T20:33:30.102131894Z","comments":[{"id":578,"issue_id":"lettatoolsselector-rcdr","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T20:33:30Z"}]}
{"id":"lettatoolsselector-rcqy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:40:38.74161349Z","updated_at":"2025-12-29T20:40:38.74161349Z","comments":[{"id":652,"issue_id":"lettatoolsselector-rcqy","author":"root","text":"Synced from Beads: lettatoolsselector-2bc\n\n---\nHuly Issue: LTSEL-161","created_at":"2025-12-29T20:40:39Z"}]}
{"id":"lettatoolsselector-rdt5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:59:47.783408204Z","updated_at":"2025-12-29T20:59:47.783408204Z","comments":[{"id":811,"issue_id":"lettatoolsselector-rdt5","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-60","created_at":"2025-12-29T20:59:48Z"}]}
{"id":"lettatoolsselector-rgcw","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:04.113045635Z","updated_at":"2025-12-29T20:32:04.113045635Z","comments":[{"id":563,"issue_id":"lettatoolsselector-rgcw","author":"root","text":"Synced from Beads: lettatoolsselector-dlg\n\n---\nHuly Issue: LTSEL-164","created_at":"2025-12-29T20:32:04Z"}]}
{"id":"lettatoolsselector-rknm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:28.859168359Z","updated_at":"2025-12-29T20:39:28.859168359Z","comments":[{"id":644,"issue_id":"lettatoolsselector-rknm","author":"root","text":"Synced from Beads: lettatoolsselector-ar6\n\n---\nHuly Issue: LTSEL-162","created_at":"2025-12-29T20:39:29Z"}]}
{"id":"lettatoolsselector-rl3","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:08:51.316053165Z","updated_at":"2025-12-29T20:08:51.316053165Z","comments":[{"id":299,"issue_id":"lettatoolsselector-rl3","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T20:08:51Z"}]}
{"id":"lettatoolsselector-rn2q","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:45:34.917488399Z","updated_at":"2025-12-29T20:45:34.917488399Z","comments":[{"id":686,"issue_id":"lettatoolsselector-rn2q","author":"root","text":"Synced from Beads: lettatoolsselector-t4d\n\n---\nHuly Issue: LTSEL-146","created_at":"2025-12-29T20:45:35Z"}]}
{"id":"lettatoolsselector-ro5q","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:55:45.820246483Z","updated_at":"2025-12-29T20:55:45.820246483Z","comments":[{"id":769,"issue_id":"lettatoolsselector-ro5q","author":"root","text":"Synced from Beads: lettatoolsselector-qkj\n\n---\nHuly Issue: LTSEL-134","created_at":"2025-12-29T20:55:46Z"}]}
{"id":"lettatoolsselector-ruer","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:23.829433256Z","updated_at":"2025-12-29T20:18:23.829433256Z","comments":[{"id":401,"issue_id":"lettatoolsselector-ruer","author":"root","text":"Synced from Beads: lettatoolsselector-mfj\n\n---\nHuly Issue: LTSEL-202","created_at":"2025-12-29T20:18:24Z"}]}
{"id":"lettatoolsselector-rwx7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:52:32.400658438Z","updated_at":"2025-12-29T20:52:32.400658438Z","comments":[{"id":736,"issue_id":"lettatoolsselector-rwx7","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T20:52:32Z"}]}
{"id":"lettatoolsselector-rxb9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:53:38.371465484Z","updated_at":"2025-12-29T20:53:38.371465484Z","comments":[{"id":746,"issue_id":"lettatoolsselector-rxb9","author":"root","text":"Synced from Beads: lettatoolsselector-5j1\n\n---\nHuly Issue: LTSEL-128","created_at":"2025-12-29T20:53:38Z"}]}
{"id":"lettatoolsselector-rzz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:47.848556541Z","updated_at":"2025-12-29T20:09:47.848556541Z","comments":[{"id":310,"issue_id":"lettatoolsselector-rzz","author":"root","text":"Synced from Beads: lettatoolsselector-b2i\n\n---\nHuly Issue: LTSEL-208","created_at":"2025-12-29T20:09:48Z"}]}
{"id":"lettatoolsselector-s0x","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:53:50.741228444Z","updated_at":"2025-12-29T19:53:50.741228444Z","comments":[{"id":253,"issue_id":"lettatoolsselector-s0x","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T19:53:51Z"}]}
{"id":"lettatoolsselector-s302","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:20.731722157Z","updated_at":"2025-12-29T20:27:20.731722157Z","comments":[{"id":511,"issue_id":"lettatoolsselector-s302","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:27:21Z"}]}
{"id":"lettatoolsselector-s3eu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:46.927625437Z","updated_at":"2025-12-29T20:18:46.927625437Z","comments":[{"id":404,"issue_id":"lettatoolsselector-s3eu","author":"root","text":"Synced from Beads: lettatoolsselector-t11\n\n---\nHuly Issue: LTSEL-196","created_at":"2025-12-29T20:18:47Z"}]}
{"id":"lettatoolsselector-s3vn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:55:46.541656Z","updated_at":"2025-12-29T20:55:46.541656Z","comments":[{"id":770,"issue_id":"lettatoolsselector-s3vn","author":"root","text":"Synced from Beads: lettatoolsselector-cic\n\n---\nHuly Issue: LTSEL-140","created_at":"2025-12-29T20:55:46Z"}]}
{"id":"lettatoolsselector-s4nk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:38:34.002060509Z","updated_at":"2025-12-29T20:38:34.002060509Z","comments":[{"id":636,"issue_id":"lettatoolsselector-s4nk","author":"root","text":"Synced from Beads: lettatoolsselector-dlg\n\n---\nHuly Issue: LTSEL-164","created_at":"2025-12-29T20:38:34Z"}]}
{"id":"lettatoolsselector-s6cv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:43:26.618847014Z","updated_at":"2025-12-29T20:43:26.618847014Z","comments":[{"id":669,"issue_id":"lettatoolsselector-s6cv","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-100","created_at":"2025-12-29T20:43:26Z"}]}
{"id":"lettatoolsselector-saou","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:58.033010578Z","updated_at":"2025-12-29T20:37:58.033010578Z","comments":[{"id":631,"issue_id":"lettatoolsselector-saou","author":"root","text":"Synced from Beads: lettatoolsselector-2bc\n\n---\nHuly Issue: LTSEL-161","created_at":"2025-12-29T20:37:58Z"}]}
{"id":"lettatoolsselector-sbw","title":"[Refactor] Phase 5: Extract route handlers into blueprints","description":"Split the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint (`routes/tools.py`) - 6 routes\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint (`routes/config.py`) - ~40 routes\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint (`routes/search.py`) - ~8 routes\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint (`routes/benchmark.py`) - ~8 routes\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint (`routes/reranker.py`) - ~6 routes\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint (`routes/maintenance.py`) - ~10 routes\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint (`routes/health.py`) - 2 routes\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint (`routes/cost_control.py`) - ~8 routes\n- /api/v1/cost-control/*\n\n## File Structure\n```\nlettaaugment-source/\n routes/\n    __init__.py\n    tools.py\n    config.py\n    search.py\n    benchmark.py\n    reranker.py\n    maintenance.py\n    health.py\n    cost_control.py\n app.py  # Flask app with blueprints registered\n main.py # Entry point\n```\n\n## Acceptance Criteria\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:38:13.931841496Z","updated_at":"2025-12-29T19:02:09.785532515Z","closed_at":"2025-12-29T19:02:09.785532515Z","close_reason":"All routes extracted to 14 blueprints in routes/"}
{"id":"lettatoolsselector-sfmy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:40:37.216121624Z","updated_at":"2025-12-29T20:40:37.216121624Z","comments":[{"id":650,"issue_id":"lettatoolsselector-sfmy","author":"root","text":"Synced from Beads: lettatoolsselector-xyd\n\n---\nHuly Issue: LTSEL-149","created_at":"2025-12-29T20:40:37Z"}]}
{"id":"lettatoolsselector-sqyi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:00.521050501Z","updated_at":"2025-12-29T20:42:00.521050501Z","comments":[{"id":658,"issue_id":"lettatoolsselector-sqyi","author":"root","text":"Synced from Beads: lettatoolsselector-08q\n\n---\nHuly Issue: LTSEL-147","created_at":"2025-12-29T20:42:00Z"}]}
{"id":"lettatoolsselector-swb7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:47.080303313Z","updated_at":"2025-12-29T20:42:47.080303313Z","comments":[{"id":666,"issue_id":"lettatoolsselector-swb7","author":"root","text":"Synced from Beads: lettatoolsselector-7mg\n\n---\nHuly Issue: LTSEL-144","created_at":"2025-12-29T20:42:47Z"}]}
{"id":"lettatoolsselector-swdu","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:34.03947067Z","updated_at":"2025-12-29T20:20:34.03947067Z","comments":[{"id":421,"issue_id":"lettatoolsselector-swdu","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:20:34Z"}]}
{"id":"lettatoolsselector-sws7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:12.203036854Z","updated_at":"2025-12-29T20:14:12.203036854Z","comments":[{"id":354,"issue_id":"lettatoolsselector-sws7","author":"root","text":"Synced from Beads: lettatoolsselector-ajz\n\n---\nHuly Issue: LTSEL-205","created_at":"2025-12-29T20:14:12Z"}]}
{"id":"lettatoolsselector-sxue","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:02.964923906Z","updated_at":"2025-12-29T20:22:02.964923906Z","comments":[{"id":444,"issue_id":"lettatoolsselector-sxue","author":"root","text":"Synced from Beads: lettatoolsselector-toy\n\n---\nHuly Issue: LTSEL-194","created_at":"2025-12-29T20:22:03Z"}]}
{"id":"lettatoolsselector-sy8e","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:10.821972477Z","updated_at":"2025-12-29T20:14:10.821972477Z","comments":[{"id":352,"issue_id":"lettatoolsselector-sy8e","author":"root","text":"Synced from Beads: lettatoolsselector-t11\n\n---\nHuly Issue: LTSEL-196","created_at":"2025-12-29T20:14:11Z"}]}
{"id":"lettatoolsselector-syt2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:11.423757401Z","updated_at":"2025-12-29T20:19:11.423757401Z","comments":[{"id":407,"issue_id":"lettatoolsselector-syt2","author":"root","text":"Synced from Beads: lettatoolsselector-ux4\n\n---\nHuly Issue: LTSEL-186","created_at":"2025-12-29T20:19:11Z"}]}
{"id":"lettatoolsselector-t2rc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:00.634823821Z","updated_at":"2025-12-29T20:20:00.634823821Z","comments":[{"id":416,"issue_id":"lettatoolsselector-t2rc","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:20:00Z"}]}
{"id":"lettatoolsselector-t2xl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:57.573516728Z","updated_at":"2025-12-29T20:48:57.573516728Z","comments":[{"id":709,"issue_id":"lettatoolsselector-t2xl","author":"root","text":"Synced from Beads: lettatoolsselector-6t5\n\n---\nHuly Issue: LTSEL-139","created_at":"2025-12-29T20:48:58Z"}]}
{"id":"lettatoolsselector-t31","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:17.59970268Z","updated_at":"2025-12-29T20:09:17.59970268Z","comments":[{"id":305,"issue_id":"lettatoolsselector-t31","author":"root","text":"Synced from Beads: lettatoolsselector-kl5\n\n---\nHuly Issue: LTSEL-209","created_at":"2025-12-29T20:09:17Z"}]}
{"id":"lettatoolsselector-t48","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:40.949263095Z","updated_at":"2025-12-29T20:09:40.949263095Z","comments":[{"id":307,"issue_id":"lettatoolsselector-t48","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T20:09:41Z"}]}
{"id":"lettatoolsselector-t4bq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:24.665506887Z","updated_at":"2025-12-29T20:37:24.665506887Z","comments":[{"id":626,"issue_id":"lettatoolsselector-t4bq","author":"root","text":"Synced from Beads: lettatoolsselector-f4x\n\n---\nHuly Issue: LTSEL-155","created_at":"2025-12-29T20:37:24Z"}]}
{"id":"lettatoolsselector-t5at","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:32.257676686Z","updated_at":"2025-12-29T20:25:32.257676686Z","comments":[{"id":484,"issue_id":"lettatoolsselector-t5at","author":"root","text":"Synced from Beads: lettatoolsselector-bpa\n\n---\nHuly Issue: LTSEL-183","created_at":"2025-12-29T20:25:32Z"}]}
{"id":"lettatoolsselector-t5ls","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:29.376093685Z","updated_at":"2025-12-29T20:21:29.376093685Z","comments":[{"id":433,"issue_id":"lettatoolsselector-t5ls","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:21:29Z"}]}
{"id":"lettatoolsselector-t5tr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:01.455948623Z","updated_at":"2025-12-29T20:17:01.455948623Z","comments":[{"id":386,"issue_id":"lettatoolsselector-t5tr","author":"root","text":"Synced from Beads: lettatoolsselector-88g\n\n---\nHuly Issue: LTSEL-193","created_at":"2025-12-29T20:17:01Z"}]}
{"id":"lettatoolsselector-t75d","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:08.680336945Z","updated_at":"2025-12-29T20:20:08.680336945Z","comments":[{"id":419,"issue_id":"lettatoolsselector-t75d","author":"root","text":"Synced from Beads: lettatoolsselector-88g\n\n---\nHuly Issue: LTSEL-193","created_at":"2025-12-29T20:20:08Z"}]}
{"id":"lettatoolsselector-t7g","title":"[Perf] Use persistent HTTP client for reranker calls","description":"## Problem\nUses synchronous `httpx.post()` which creates a new TCP connection per reranker request.\n\n**Location:** `weaviate_tool_search_with_reranking.py:274, 294`\n\n```python\n# Line 294\nresponse = httpx.post(RERANKER_URL, json=payload, timeout=RERANKER_TIMEOUT)\n```\n\n## Impact\n- **Latency:** 10-50ms per call in TCP connection overhead\n- **Priority:** MEDIUM - affects every reranked search\n\n## Solution\nUse a persistent `httpx.Client` with connection pooling:\n\n```python\n# Module-level persistent client\n_reranker_client: httpx.Client = None\n\ndef get_reranker_client() -\u003e httpx.Client:\n    global _reranker_client\n    if _reranker_client is None:\n        _reranker_client = httpx.Client(\n            timeout=RERANKER_TIMEOUT,\n            limits=httpx.Limits(max_keepalive_connections=10, max_connections=20)\n        )\n    return _reranker_client\n\ndef rerank_results(...):\n    client = get_reranker_client()\n    response = client.post(RERANKER_URL, json=payload)\n    # ...\n\n# Cleanup on shutdown\ndef close_reranker_client():\n    global _reranker_client\n    if _reranker_client:\n        _reranker_client.close()\n        _reranker_client = None\n```\n\n## Acceptance Criteria\n- [ ] Persistent httpx.Client used for reranker\n- [ ] Connection pooling configured\n- [ ] Client closed on app shutdown\n- [ ] All unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T01:50:08.273877005Z","updated_at":"2025-12-29T16:46:01.37443623Z","closed_at":"2025-12-29T16:46:01.37443623Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-tad","title":"[Refactor] Migrate config handlers to config blueprint","description":"## Goal\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819  \n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T00:42:57.262348909Z","updated_at":"2025-12-29T15:40:09.842988049Z","closed_at":"2025-12-29T15:40:09.842988049Z","close_reason":"Closed","labels":["refactor","services-layer"]}
{"id":"lettatoolsselector-tbpd","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:52.237655239Z","updated_at":"2025-12-29T20:35:52.237655239Z","comments":[{"id":604,"issue_id":"lettatoolsselector-tbpd","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:35:52Z"}]}
{"id":"lettatoolsselector-tife","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:39.048252309Z","updated_at":"2025-12-29T20:56:39.048252309Z","comments":[{"id":777,"issue_id":"lettatoolsselector-tife","author":"root","text":"Synced from Beads: lettatoolsselector-eyc\n\n---\nHuly Issue: LTSEL-121","created_at":"2025-12-29T20:56:39Z"}]}
{"id":"lettatoolsselector-tjbd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:26.636062473Z","updated_at":"2025-12-29T20:39:26.636062473Z","comments":[{"id":641,"issue_id":"lettatoolsselector-tjbd","author":"root","text":"Synced from Beads: lettatoolsselector-6p9\n\n---\nHuly Issue: LTSEL-148","created_at":"2025-12-29T20:39:26Z"}]}
{"id":"lettatoolsselector-tqn0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:35.621921353Z","updated_at":"2025-12-29T20:24:35.621921353Z","comments":[{"id":474,"issue_id":"lettatoolsselector-tqn0","author":"root","text":"Synced from Beads: lettatoolsselector-wtn\n\n---\nHuly Issue: LTSEL-57","created_at":"2025-12-29T20:24:35Z"}]}
{"id":"lettatoolsselector-tre8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:47:41.898516307Z","updated_at":"2025-12-29T20:47:41.898516307Z","comments":[{"id":697,"issue_id":"lettatoolsselector-tre8","author":"root","text":"Synced from Beads: lettatoolsselector-mam\n\n---\nHuly Issue: LTSEL-142","created_at":"2025-12-29T20:47:42Z"}]}
{"id":"lettatoolsselector-trs","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:03.021140072Z","updated_at":"2025-12-23T03:23:03.364825813Z","closed_at":"2025-12-23T03:23:03.364825813Z","close_reason":"Closed","comments":[{"id":25,"issue_id":"lettatoolsselector-trs","author":"node","text":"## Problem\n\nTool selector API has MAX_TOTAL_TOOLS=20 but only enforces it loosely. Agents like Meridian accumulated 44 tools because pruning doesn't run proactively.\n\n## Solution\n\nBefore attaching new tools, prune existing tools to make room within the limit.\n\n## Acceptance Criteria\n\n- [ ] Before any attach operation, fetch current tool count\n- [ ] If current + new \u003e MAX_TOTAL_TOOLS, detach lowest-scored tools first\n- [ ] Protected tools are never detached (use PROTECTED_TOOLS env var)\n- [ ] Return detailed response showing what was pruned and why\n- [ ] Log pruning decisions for debugging\n\n## Technical Notes\n\n- Pruning order: oldest first, then lowest relevance score\n- Consider keeping tools attached in last 24h as \"recent\" protection\n- MAX_TOTAL_TOOLS is now 20\n\n---\nHuly Issue: LTSEL-7","created_at":"2025-12-23T03:23:03Z"}]}
{"id":"lettatoolsselector-tzr","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.069185687Z","updated_at":"2025-12-29T18:56:05.16470506Z","closed_at":"2025-12-29T18:56:05.16470506Z","close_reason":"Duplicate of closed lettatoolsselector-b1t","comments":[{"id":8,"issue_id":"lettatoolsselector-tzr","author":"node","text":"## Problem\n\nWebhook receiver and tool selector have different ideas about what fields are required, what keep_tools means, and how limits work.\n\n## Solution\n\nDefine a formal contract (JSON schema or Pydantic model) that both sides adhere to.\n\n## Acceptance Criteria\n\n- [ ] Document payload schema: query, agent_id, keep_tools, limit, min_score, protected_tools\n- [ ] Document response schema: success, attached, detached, preserved, errors\n- [ ] Document behavior: what happens when limits are exceeded, how protected tools work\n- [ ] Version the contract (v1) to allow future evolution\n- [ ] Both repos reference the same contract documentation\n\n## Technical Notes\n\n- Consider using OpenAPI/Swagger for formal spec\n- Publish contract in shared docs location or SDK repo\n\n---\nHuly Issue: LTSEL-9","created_at":"2025-12-22T23:46:27Z"}]}
{"id":"lettatoolsselector-u30o","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:54.294626054Z","updated_at":"2025-12-29T20:48:54.294626054Z","comments":[{"id":707,"issue_id":"lettatoolsselector-u30o","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:48:54Z"}]}
{"id":"lettatoolsselector-u3c9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:15.575827157Z","updated_at":"2025-12-29T20:56:15.575827157Z","comments":[{"id":772,"issue_id":"lettatoolsselector-u3c9","author":"root","text":"Synced from Beads: lettatoolsselector-80w\n\n---\nHuly Issue: LTSEL-122","created_at":"2025-12-29T20:56:15Z"}]}
{"id":"lettatoolsselector-u8n6","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:47.230450142Z","updated_at":"2025-12-29T20:36:47.230450142Z","comments":[{"id":616,"issue_id":"lettatoolsselector-u8n6","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T20:36:47Z"}]}
{"id":"lettatoolsselector-ubk","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.486559568Z","updated_at":"2025-12-29T18:56:02.155671516Z","closed_at":"2025-12-29T18:56:02.155671516Z","close_reason":"Duplicate of closed lettatoolsselector-ubl","comments":[{"id":11,"issue_id":"lettatoolsselector-ubk","author":"node","text":"## Problem\n\nIn  function (), there was a bug where detachment results could be incorrectly mapped to tool IDs due to set-to-list conversion happening twice.\n\n### Root Cause\n\n\n\nWhile Python 3.7+ maintains insertion order for sets in practice, converting a set to a list twice creates potential for mismatched mappings between async task results and tool IDs.\n\n## Impact\n\n- **Actual detachment operations worked correctly** - tools were being detached properly\n- **Logging/reporting was potentially incorrect** - wrong tool IDs could be logged as success/failure\n- **Debugging confusion** - audit logs may have shown incorrect tool names for detach operations\n\n## Solution\n\nConvert the set to a list **once** and reuse it:\n\n\n\n## Status\n\n**Fixed** - Applied to  lines 1208-1217. Container restarted to apply changes.\n\n## Related\n\n- Similar pattern in  function was already correct (iterates over list directly)\n- Relates to LTSEL-6 (SDK migration) and LTSEL-11 (structured events for attach/detach)\n\n---\nHuly Issue: LTSEL-27","created_at":"2025-12-22T23:46:27Z"}]}
{"id":"lettatoolsselector-ubl","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:10.726358617Z","updated_at":"2025-12-23T03:23:11.118829205Z","closed_at":"2025-12-23T03:23:11.118829205Z","close_reason":"Closed","comments":[{"id":35,"issue_id":"lettatoolsselector-ubl","author":"node","text":"## Problem\n\nIn  function (), there was a bug where detachment results could be incorrectly mapped to tool IDs due to set-to-list conversion happening twice.\n\n### Root Cause\n\n\n\nWhile Python 3.7+ maintains insertion order for sets in practice, converting a set to a list twice creates potential for mismatched mappings between async task results and tool IDs.\n\n## Impact\n\n- **Actual detachment operations worked correctly** - tools were being detached properly\n- **Logging/reporting was potentially incorrect** - wrong tool IDs could be logged as success/failure\n- **Debugging confusion** - audit logs may have shown incorrect tool names for detach operations\n\n## Solution\n\nConvert the set to a list **once** and reuse it:\n\n\n\n## Status\n\n**Fixed** - Applied to  lines 1208-1217. Container restarted to apply changes.\n\n## Related\n\n- Similar pattern in  function was already correct (iterates over list directly)\n- Relates to LTSEL-6 (SDK migration) and LTSEL-11 (structured events for attach/detach)\n\n---\nHuly Issue: LTSEL-27","created_at":"2025-12-23T03:23:10Z"}]}
{"id":"lettatoolsselector-ufs","title":"[Perf] Reduce excessive logging in hot paths","description":"## Problem\nDEBUG and INFO level logs on every request, even in production. String formatting happens regardless of log level.\n\n**Location:** Throughout `routes/tools.py`, `tool_manager.py`\n\n```python\n# Line 205 in routes/tools.py\nlogger.info(\"Received request for /api/v1/tools/search\")\n\n# Line 247\nlogger.info(f\"Search: {len(results)} total, {len(filtered_results)} after MCP filtering\")\n```\n\n## Impact\n- **Latency:** 1-5ms cumulative per request in string formatting and I/O\n- **Priority:** LOW-MEDIUM\n\n## Solution\nUse lazy formatting and reduce INFO logs in hot paths:\n\n```python\n# Use lazy formatting\nlogger.debug(\"Search: %d total, %d after filtering\", len(results), len(filtered_results))\n\n# Or check level before formatting\nif logger.isEnabledFor(logging.DEBUG):\n    logger.debug(f\"Search: {len(results)} total, {len(filtered_results)} after MCP filtering\")\n```\n\n## Guidelines\n- Request entry/exit: DEBUG level (not INFO)\n- Errors: ERROR level\n- Significant events (attach/prune success): INFO level\n- Detailed diagnostics: DEBUG level\n\n## Acceptance Criteria\n- [ ] Hot path logs reduced to DEBUG level\n- [ ] Lazy formatting used where appropriate\n- [ ] No string formatting when log level disabled\n- [ ] All unit tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T01:50:34.202369804Z","updated_at":"2025-12-29T19:31:33.274637168Z","closed_at":"2025-12-29T19:31:33.274637168Z","close_reason":"Converted hot path logs from INFO to DEBUG, used lazy formatting (logger.debug with %s placeholders)","labels":["performance"]}
{"id":"lettatoolsselector-uhzq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:01.397154489Z","updated_at":"2025-12-29T20:42:01.397154489Z","comments":[{"id":659,"issue_id":"lettatoolsselector-uhzq","author":"root","text":"Synced from Beads: lettatoolsselector-3dk\n\n---\nHuly Issue: LTSEL-154","created_at":"2025-12-29T20:42:01Z"}]}
{"id":"lettatoolsselector-ujom","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:40.877191253Z","updated_at":"2025-12-29T20:20:40.877191253Z","comments":[{"id":424,"issue_id":"lettatoolsselector-ujom","author":"root","text":"Synced from Beads: lettatoolsselector-ux4\n\n---\nHuly Issue: LTSEL-186","created_at":"2025-12-29T20:20:41Z"}]}
{"id":"lettatoolsselector-ulk2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:50:35.091713625Z","updated_at":"2025-12-29T20:50:35.091713625Z","comments":[{"id":721,"issue_id":"lettatoolsselector-ulk2","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:50:35Z"}]}
{"id":"lettatoolsselector-umf7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:46:06.485569973Z","updated_at":"2025-12-29T20:46:06.485569973Z","comments":[{"id":688,"issue_id":"lettatoolsselector-umf7","author":"root","text":"Synced from Beads: lettatoolsselector-7mg\n\n---\nHuly Issue: LTSEL-144","created_at":"2025-12-29T20:46:06Z"}]}
{"id":"lettatoolsselector-unm4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:11.300085145Z","updated_at":"2025-12-29T20:13:11.300085145Z","comments":[{"id":346,"issue_id":"lettatoolsselector-unm4","author":"root","text":"Synced from Beads: lettatoolsselector-6pf\n\n---\nHuly Issue: LTSEL-212","created_at":"2025-12-29T20:13:11Z"}]}
{"id":"lettatoolsselector-upr0","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:34.898994576Z","updated_at":"2025-12-29T20:20:34.898994576Z","comments":[{"id":422,"issue_id":"lettatoolsselector-upr0","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:20:35Z"}]}
{"id":"lettatoolsselector-uu56","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:44.157453724Z","updated_at":"2025-12-29T20:14:44.157453724Z","comments":[{"id":360,"issue_id":"lettatoolsselector-uu56","author":"root","text":"Synced from Beads: lettatoolsselector-mwv\n\n---\nHuly Issue: LTSEL-102","created_at":"2025-12-29T20:14:44Z"}]}
{"id":"lettatoolsselector-uvxz","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:23.086320568Z","updated_at":"2025-12-29T20:11:23.086320568Z","comments":[{"id":324,"issue_id":"lettatoolsselector-uvxz","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T20:11:23Z"}]}
{"id":"lettatoolsselector-uwkj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:30.251362768Z","updated_at":"2025-12-29T20:25:30.251362768Z","comments":[{"id":482,"issue_id":"lettatoolsselector-uwkj","author":"root","text":"Synced from Beads: lettatoolsselector-z62\n\n---\nHuly Issue: LTSEL-173","created_at":"2025-12-29T20:25:30Z"}]}
{"id":"lettatoolsselector-uwn2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:56.341508259Z","updated_at":"2025-12-29T20:11:56.341508259Z","comments":[{"id":329,"issue_id":"lettatoolsselector-uwn2","author":"root","text":"Synced from Beads: lettatoolsselector-12y\n\n---\nHuly Issue: LTSEL-201","created_at":"2025-12-29T20:11:56Z"}]}
{"id":"lettatoolsselector-uxwp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:51:18.444414809Z","updated_at":"2025-12-29T20:51:18.444414809Z","comments":[{"id":728,"issue_id":"lettatoolsselector-uxwp","author":"root","text":"Synced from Beads: lettatoolsselector-qkj\n\n---\nHuly Issue: LTSEL-134","created_at":"2025-12-29T20:51:18Z"}]}
{"id":"lettatoolsselector-v11g","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:36.913106417Z","updated_at":"2025-12-29T20:33:36.913106417Z","comments":[{"id":582,"issue_id":"lettatoolsselector-v11g","author":"root","text":"Synced from Beads: lettatoolsselector-z62\n\n---\nHuly Issue: LTSEL-173","created_at":"2025-12-29T20:33:37Z"}]}
{"id":"lettatoolsselector-v1l","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","description":"The `get_letta_sdk_client` function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-28T17:13:20.013706888Z","updated_at":"2025-12-29T19:21:56.470371504Z","closed_at":"2025-12-29T19:21:56.470371504Z","close_reason":"Fixed: initialized get_letta_sdk_client to None before conditional import"}
{"id":"lettatoolsselector-v3e","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:50:48.237266515Z","updated_at":"2025-12-29T19:50:48.237266515Z","comments":[{"id":243,"issue_id":"lettatoolsselector-v3e","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T19:50:48Z"}]}
{"id":"lettatoolsselector-v66","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:06.562903106Z","updated_at":"2025-12-23T03:23:06.933264976Z","closed_at":"2025-12-23T03:23:06.933264976Z","close_reason":"Closed","comments":[{"id":30,"issue_id":"lettatoolsselector-v66","author":"node","text":"## Purpose\n\nRegression guard to ensure tool limits are enforced end-to-end.\n\n## Test Scenario\n\n1. Create test agent with MAX_TOTAL_TOOLS-1 tools attached\n2. Trigger webhook with query that matches 5 tools\n3. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS after operation\n4. Assert: Response includes pruned tools if any were removed\n\n## Acceptance Criteria\n\n- [ ] Test runs in CI on every PR\n- [ ] Uses real tool selector API (integration test)\n- [ ] Cleans up test agent after run\n- [ ] Fails if agent exceeds limit\n\n## Technical Notes\n\n- Use pytest with fixtures for agent setup/teardown\n- May need test-specific MAX_TOTAL_TOOLS value (e.g., 5) for fast testing\n- Tag as \n\n---\nHuly Issue: LTSEL-19","created_at":"2025-12-23T03:23:06Z"}]}
{"id":"lettatoolsselector-v75x","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:23.916184704Z","updated_at":"2025-12-29T20:37:23.916184704Z","comments":[{"id":625,"issue_id":"lettatoolsselector-v75x","author":"root","text":"Synced from Beads: lettatoolsselector-xj7\n\n---\nHuly Issue: LTSEL-152","created_at":"2025-12-29T20:37:24Z"}]}
{"id":"lettatoolsselector-v7h4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:26.443377735Z","updated_at":"2025-12-29T20:54:26.443377735Z","comments":[{"id":753,"issue_id":"lettatoolsselector-v7h4","author":"root","text":"Synced from Beads: lettatoolsselector-xei\n\n---\nHuly Issue: LTSEL-126","created_at":"2025-12-29T20:54:26Z"}]}
{"id":"lettatoolsselector-v9jm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:05.666295054Z","updated_at":"2025-12-29T20:30:05.666295054Z","comments":[{"id":549,"issue_id":"lettatoolsselector-v9jm","author":"root","text":"Synced from Beads: lettatoolsselector-l5y\n\n---\nHuly Issue: LTSEL-179","created_at":"2025-12-29T20:30:05Z"}]}
{"id":"lettatoolsselector-vac0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:31:31.229509382Z","updated_at":"2025-12-29T20:31:31.229509382Z","comments":[{"id":560,"issue_id":"lettatoolsselector-vac0","author":"root","text":"Synced from Beads: lettatoolsselector-2md\n\n---\nHuly Issue: LTSEL-177","created_at":"2025-12-29T20:31:31Z"}]}
{"id":"lettatoolsselector-vc5","title":"[Test] Contract test: Tool selector API returns valid response","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:15.201745315Z","updated_at":"2025-12-23T03:23:15.201745315Z","comments":[{"id":39,"issue_id":"lettatoolsselector-vc5","author":"node","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2025-12-23T03:23:15Z"}]}
{"id":"lettatoolsselector-vdf","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T19:54:23.647971749Z","updated_at":"2025-12-29T19:54:23.647971749Z","comments":[{"id":255,"issue_id":"lettatoolsselector-vdf","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T19:54:23Z"}]}
{"id":"lettatoolsselector-vly","title":"[Test] Performance test: Tool attachment under load","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:13.917942507Z","updated_at":"2025-12-23T03:23:13.917942507Z","comments":[{"id":37,"issue_id":"lettatoolsselector-vly","author":"node","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2025-12-23T03:23:14Z"}]}
{"id":"lettatoolsselector-vmrc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:53:40.036470503Z","updated_at":"2025-12-29T20:53:40.036470503Z","comments":[{"id":748,"issue_id":"lettatoolsselector-vmrc","author":"root","text":"Synced from Beads: lettatoolsselector-cic\n\n---\nHuly Issue: LTSEL-140","created_at":"2025-12-29T20:53:40Z"}]}
{"id":"lettatoolsselector-vnck","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:48:02.516508095Z","updated_at":"2025-12-29T20:48:02.516508095Z","comments":[{"id":699,"issue_id":"lettatoolsselector-vnck","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T20:48:02Z"}]}
{"id":"lettatoolsselector-vnid","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:42.868463201Z","updated_at":"2025-12-29T20:13:42.868463201Z","comments":[{"id":351,"issue_id":"lettatoolsselector-vnid","author":"root","text":"Synced from Beads: lettatoolsselector-vwd\n\n---\nHuly Issue: LTSEL-211","created_at":"2025-12-29T20:13:43Z"}]}
{"id":"lettatoolsselector-vode","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:54.586401926Z","updated_at":"2025-12-29T20:16:54.586401926Z","comments":[{"id":384,"issue_id":"lettatoolsselector-vode","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T20:16:54Z"}]}
{"id":"lettatoolsselector-vr72","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:44.495371272Z","updated_at":"2025-12-29T20:19:44.495371272Z","comments":[{"id":411,"issue_id":"lettatoolsselector-vr72","author":"root","text":"Synced from Beads: lettatoolsselector-72a\n\n---\nHuly Issue: LTSEL-185","created_at":"2025-12-29T20:19:44Z"}]}
{"id":"lettatoolsselector-vu4","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.3962366Z","updated_at":"2025-12-29T18:56:10.311815852Z","closed_at":"2025-12-29T18:56:10.311815852Z","close_reason":"Duplicate of closed lettatoolsselector-09g","comments":[{"id":3,"issue_id":"lettatoolsselector-vu4","author":"node","text":"## Problem\n\nTool selector has its own  and  that duplicate SDK functionality.\n\n## Solution\n\nReplace local implementations with SDK imports.\n\n## Acceptance Criteria\n\n- [ ] Add  to \n- [ ] Replace  helpers with SDK imports\n- [ ] Replace  with SDK imports\n- [ ] All existing tests still pass\n- [ ] No functional changes to tool selection behavior\n\n## Technical Notes\n\n- Worker service models may need adjustment\n- Keep API-specific logic in the repo, move generic logic to SDK\n\n---\nHuly Issue: LTSEL-6","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-vwop","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:56.955289572Z","updated_at":"2025-12-29T20:11:56.955289572Z","comments":[{"id":330,"issue_id":"lettatoolsselector-vwop","author":"root","text":"Synced from Beads: lettatoolsselector-71n\n\n---\nHuly Issue: LTSEL-204","created_at":"2025-12-29T20:11:57Z"}]}
{"id":"lettatoolsselector-w0o1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:46.389280448Z","updated_at":"2025-12-29T20:19:46.389280448Z","comments":[{"id":414,"issue_id":"lettatoolsselector-w0o1","author":"root","text":"Synced from Beads: lettatoolsselector-qh2\n\n---\nHuly Issue: LTSEL-199","created_at":"2025-12-29T20:19:46Z"}]}
{"id":"lettatoolsselector-w2d2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:18.495428718Z","updated_at":"2025-12-29T21:00:18.495428718Z","comments":[{"id":817,"issue_id":"lettatoolsselector-w2d2","author":"root","text":"Synced from Beads: lettatoolsselector-5j1\n\n---\nHuly Issue: LTSEL-128","created_at":"2025-12-29T21:00:18Z"}]}
{"id":"lettatoolsselector-w4s5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:10.599591855Z","updated_at":"2025-12-29T20:15:10.599591855Z","comments":[{"id":366,"issue_id":"lettatoolsselector-w4s5","author":"root","text":"Synced from Beads: lettatoolsselector-71n\n\n---\nHuly Issue: LTSEL-204","created_at":"2025-12-29T20:15:10Z"}]}
{"id":"lettatoolsselector-w6w0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:57:06.554933731Z","updated_at":"2025-12-29T20:57:06.554933731Z","comments":[{"id":785,"issue_id":"lettatoolsselector-w6w0","author":"root","text":"Synced from Beads: lettatoolsselector-7ka\n\n---\nHuly Issue: LTSEL-136","created_at":"2025-12-29T20:57:06Z"}]}
{"id":"lettatoolsselector-w72s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:43:27.444006562Z","updated_at":"2025-12-29T20:43:27.444006562Z","comments":[{"id":670,"issue_id":"lettatoolsselector-w72s","author":"root","text":"Synced from Beads: lettatoolsselector-4pp\n\n---\nHuly Issue: LTSEL-151","created_at":"2025-12-29T20:43:27Z"}]}
{"id":"lettatoolsselector-w8un","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:58.724620259Z","updated_at":"2025-12-29T20:39:58.724620259Z","comments":[{"id":648,"issue_id":"lettatoolsselector-w8un","author":"root","text":"## Purpose\n\nGuard against regression where pagination is forgotten and only partial tools returned.\n\n## Test Scenario\n\n1. Mock Letta API to return 10 tools per page (3 pages total = 30 tools)\n2. Call list_agent_tools(agent_id)\n3. Assert: Returns all 30 tools\n4. Assert: Makes correct number of API calls\n\n## Acceptance Criteria\n\n- [ ] Test uses mocked responses (no real API)\n- [ ] Covers edge cases: 0 tools, exactly 1 page, multiple pages\n- [ ] Fails if fewer tools returned than expected\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock or responses library\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-21","created_at":"2025-12-29T20:39:59Z"}]}
{"id":"lettatoolsselector-wbgx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:39.844562139Z","updated_at":"2025-12-29T20:30:39.844562139Z","comments":[{"id":554,"issue_id":"lettatoolsselector-wbgx","author":"root","text":"Synced from Beads: lettatoolsselector-z62\n\n---\nHuly Issue: LTSEL-173","created_at":"2025-12-29T20:30:40Z"}]}
{"id":"lettatoolsselector-wcbg","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:39.103434263Z","updated_at":"2025-12-29T20:32:39.103434263Z","comments":[{"id":568,"issue_id":"lettatoolsselector-wcbg","author":"root","text":"Synced from Beads: lettatoolsselector-2bc\n\n---\nHuly Issue: LTSEL-161","created_at":"2025-12-29T20:32:39Z"}]}
{"id":"lettatoolsselector-wg3m","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:05.798935942Z","updated_at":"2025-12-29T20:21:05.798935942Z","comments":[{"id":432,"issue_id":"lettatoolsselector-wg3m","author":"root","text":"Synced from Beads: lettatoolsselector-t11\n\n---\nHuly Issue: LTSEL-196","created_at":"2025-12-29T20:21:06Z"}]}
{"id":"lettatoolsselector-wjvx","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:50:34.377064208Z","updated_at":"2025-12-29T20:50:34.377064208Z","comments":[{"id":720,"issue_id":"lettatoolsselector-wjvx","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T20:50:34Z"}]}
{"id":"lettatoolsselector-wlj","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","description":"## Goal\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n### Core Evaluation (4)\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\nMay need services/evaluation.py for:\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T00:43:06.516457468Z","updated_at":"2025-12-29T01:21:05.512504219Z","closed_at":"2025-12-29T01:21:05.512504219Z","close_reason":"Migrated all 7 evaluation handlers and 12 helper functions to routes/evaluation.py. Blueprint is now fully self-contained (878 lines). api_server.py reduced to 2,408 lines with only 4 handlers remaining.","labels":["refactor","services-layer"]}
{"id":"lettatoolsselector-wu66","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:50:38.185257153Z","updated_at":"2025-12-29T20:50:38.185257153Z","comments":[{"id":723,"issue_id":"lettatoolsselector-wu66","author":"root","text":"Synced from Beads: lettatoolsselector-iym\n\n---\nHuly Issue: LTSEL-135","created_at":"2025-12-29T20:50:38Z"}]}
{"id":"lettatoolsselector-wuqn","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:17.240200585Z","updated_at":"2025-12-29T20:37:17.240200585Z","comments":[{"id":623,"issue_id":"lettatoolsselector-wuqn","author":"root","text":"Synced from Beads: lettatoolsselector-nlt\n\n---\nHuly Issue: LTSEL-34","created_at":"2025-12-29T20:37:17Z"}]}
{"id":"lettatoolsselector-wvnz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:40:36.402923257Z","updated_at":"2025-12-29T20:40:36.402923257Z","comments":[{"id":649,"issue_id":"lettatoolsselector-wvnz","author":"root","text":"Synced from Beads: lettatoolsselector-t4d\n\n---\nHuly Issue: LTSEL-146","created_at":"2025-12-29T20:40:36Z"}]}
{"id":"lettatoolsselector-wwk5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:32.643985785Z","updated_at":"2025-12-29T20:26:32.643985785Z","comments":[{"id":497,"issue_id":"lettatoolsselector-wwk5","author":"root","text":"Synced from Beads: lettatoolsselector-eln\n\n---\nHuly Issue: LTSEL-174","created_at":"2025-12-29T20:26:32Z"}]}
{"id":"lettatoolsselector-wy3j","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:58.107670149Z","updated_at":"2025-12-29T20:24:58.107670149Z","comments":[{"id":480,"issue_id":"lettatoolsselector-wy3j","author":"root","text":"Synced from Beads: lettatoolsselector-0do\n\n---\nHuly Issue: LTSEL-189","created_at":"2025-12-29T20:24:58Z"}]}
{"id":"lettatoolsselector-x0j","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:09.617990903Z","updated_at":"2025-12-23T03:23:09.966249296Z","closed_at":"2025-12-23T03:23:09.966249296Z","close_reason":"Closed","comments":[{"id":34,"issue_id":"lettatoolsselector-x0j","author":"node","text":"## Problem\n\nProtected tools (find_agents, find_tools) logic only exists in webhook receiver. Tool selector API should also respect protected tools during pruning.\n\n## Solution\n\nAdd PROTECTED_TOOLS env var to tool selector API and respect it during all detach operations.\n\n## Acceptance Criteria\n\n- [ ] PROTECTED_TOOLS env var (comma-separated tool names)\n- [ ] Before any detach, check if tool is protected\n- [ ] Never detach protected tools even if over limit\n- [ ] Warn if agent is over limit but can't prune due to protected tools\n- [ ] Document protected tools in compose.yaml\n\n## Technical Notes\n\n- Default protected tools: find_agents, find_tools, send_message\n- Allow override via env var\n- Lookup by name, not ID (IDs can change)\n\n---\nHuly Issue: LTSEL-10","created_at":"2025-12-23T03:23:09Z"}]}
{"id":"lettatoolsselector-x1mt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:58:56.370215855Z","updated_at":"2025-12-29T20:58:56.370215855Z","comments":[{"id":801,"issue_id":"lettatoolsselector-x1mt","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-113","created_at":"2025-12-29T20:58:56Z"}]}
{"id":"lettatoolsselector-x1pr","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:18.017398762Z","updated_at":"2025-12-29T20:37:18.017398762Z","comments":[{"id":624,"issue_id":"lettatoolsselector-x1pr","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T20:37:18Z"}]}
{"id":"lettatoolsselector-x32u","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:02.659269677Z","updated_at":"2025-12-29T20:21:02.659269677Z","comments":[{"id":429,"issue_id":"lettatoolsselector-x32u","author":"root","text":"Synced from Beads: lettatoolsselector-n9f\n\n---\nHuly Issue: LTSEL-182","created_at":"2025-12-29T20:21:02Z"}]}
{"id":"lettatoolsselector-x8xu","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:53:11.439352133Z","updated_at":"2025-12-29T20:53:11.439352133Z","comments":[{"id":741,"issue_id":"lettatoolsselector-x8xu","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T20:53:11Z"}]}
{"id":"lettatoolsselector-x90o","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:02.265621176Z","updated_at":"2025-12-29T20:17:02.265621176Z","comments":[{"id":387,"issue_id":"lettatoolsselector-x90o","author":"root","text":"Synced from Beads: lettatoolsselector-8pi\n\n---\nHuly Issue: LTSEL-200","created_at":"2025-12-29T20:17:02Z"}]}
{"id":"lettatoolsselector-xdbc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:54:57.208538155Z","updated_at":"2025-12-29T20:54:57.208538155Z","comments":[{"id":760,"issue_id":"lettatoolsselector-xdbc","author":"root","text":"Synced from Beads: lettatoolsselector-7ka\n\n---\nHuly Issue: LTSEL-136","created_at":"2025-12-29T20:54:57Z"}]}
{"id":"lettatoolsselector-xde","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.198050175Z","updated_at":"2025-12-29T18:56:04.103258369Z","closed_at":"2025-12-29T18:56:04.103258369Z","close_reason":"Duplicate of closed lettatoolsselector-07p","comments":[{"id":9,"issue_id":"lettatoolsselector-xde","author":"node","text":"## Problem\n\nCurrent health endpoint only returns basic status. No way to quickly check if tool management is working correctly.\n\n## Solution\n\nEnhance health endpoint to include tool state summary.\n\n## Acceptance Criteria\n\n- [ ] Health endpoint returns: status, version, config summary\n- [ ] Include: MAX_TOTAL_TOOLS, PROTECTED_TOOLS list\n- [ ] Include: total_agents_tracked, agents_over_limit count\n- [ ] Include: last_attach_timestamp, last_prune_timestamp\n- [ ] Separate deep health check for dependencies (Letta API, Weaviate)\n\n## Technical Notes\n\n- Keep lightweight for frequent polling\n- Deep health check on separate endpoint (/health/deep)\n\n---\nHuly Issue: LTSEL-14","created_at":"2025-12-22T23:46:27Z"}]}
{"id":"lettatoolsselector-xesd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:57.501862396Z","updated_at":"2025-12-29T20:25:57.501862396Z","comments":[{"id":492,"issue_id":"lettatoolsselector-xesd","author":"root","text":"Synced from Beads: lettatoolsselector-n9f\n\n---\nHuly Issue: LTSEL-182","created_at":"2025-12-29T20:25:57Z"}]}
{"id":"lettatoolsselector-xetb","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:35.296974223Z","updated_at":"2025-12-29T20:56:35.296974223Z","comments":[{"id":776,"issue_id":"lettatoolsselector-xetb","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:56:35Z"}]}
{"id":"lettatoolsselector-xfvm","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:44:42.542258897Z","updated_at":"2025-12-29T20:44:42.542258897Z","comments":[{"id":678,"issue_id":"lettatoolsselector-xfvm","author":"root","text":"Synced from Beads: lettatoolsselector-nlt\n\n---\nHuly Issue: LTSEL-34","created_at":"2025-12-29T20:44:42Z"}]}
{"id":"lettatoolsselector-xllt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:55.138037907Z","updated_at":"2025-12-29T20:26:55.138037907Z","comments":[{"id":503,"issue_id":"lettatoolsselector-xllt","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T20:26:55Z"}]}
{"id":"lettatoolsselector-xly4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:27.255627999Z","updated_at":"2025-12-29T20:36:27.255627999Z","comments":[{"id":612,"issue_id":"lettatoolsselector-xly4","author":"root","text":"Synced from Beads: lettatoolsselector-3dk\n\n---\nHuly Issue: LTSEL-154","created_at":"2025-12-29T20:36:27Z"}]}
{"id":"lettatoolsselector-xot6","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:28.66557668Z","updated_at":"2025-12-29T20:16:28.66557668Z","comments":[{"id":378,"issue_id":"lettatoolsselector-xot6","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T20:16:28Z"}]}
{"id":"lettatoolsselector-xoz","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:18.051512948Z","updated_at":"2025-12-29T19:44:55.709740225Z","closed_at":"2025-12-29T19:44:55.709740225Z","close_reason":"docs/OPERATIONAL_RUNBOOKS.md already exists with comprehensive coverage of 8 operational procedures including tool limits, protected tools, pruning, debugging, health checks, audit logs, sync, and restarts.","comments":[{"id":43,"issue_id":"lettatoolsselector-xoz","author":"node","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2025-12-23T03:23:18Z"}]}
{"id":"lettatoolsselector-xtwj","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:56.096281462Z","updated_at":"2025-12-29T20:29:56.096281462Z","comments":[{"id":544,"issue_id":"lettatoolsselector-xtwj","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:29:56Z"}]}
{"id":"lettatoolsselector-xxx","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.358861104Z","updated_at":"2025-12-29T18:56:03.117446775Z","closed_at":"2025-12-29T18:56:03.117446775Z","close_reason":"Duplicate of closed lettatoolsselector-x0j","comments":[{"id":10,"issue_id":"lettatoolsselector-xxx","author":"node","text":"## Problem\n\nProtected tools (find_agents, find_tools) logic only exists in webhook receiver. Tool selector API should also respect protected tools during pruning.\n\n## Solution\n\nAdd PROTECTED_TOOLS env var to tool selector API and respect it during all detach operations.\n\n## Acceptance Criteria\n\n- [ ] PROTECTED_TOOLS env var (comma-separated tool names)\n- [ ] Before any detach, check if tool is protected\n- [ ] Never detach protected tools even if over limit\n- [ ] Warn if agent is over limit but can't prune due to protected tools\n- [ ] Document protected tools in compose.yaml\n\n## Technical Notes\n\n- Default protected tools: find_agents, find_tools, send_message\n- Allow override via env var\n- Lookup by name, not ID (IDs can change)\n\n---\nHuly Issue: LTSEL-10","created_at":"2025-12-22T23:46:27Z"}]}
{"id":"lettatoolsselector-y1e5","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:12.234370365Z","updated_at":"2025-12-29T20:35:12.234370365Z","comments":[{"id":597,"issue_id":"lettatoolsselector-y1e5","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:35:12Z"}]}
{"id":"lettatoolsselector-yalx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:31.897526958Z","updated_at":"2025-12-29T20:26:31.897526958Z","comments":[{"id":496,"issue_id":"lettatoolsselector-yalx","author":"root","text":"Synced from Beads: lettatoolsselector-9k9\n\n---\nHuly Issue: LTSEL-171","created_at":"2025-12-29T20:26:32Z"}]}
{"id":"lettatoolsselector-yamd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:39.474854702Z","updated_at":"2025-12-29T20:22:39.474854702Z","comments":[{"id":451,"issue_id":"lettatoolsselector-yamd","author":"root","text":"Synced from Beads: lettatoolsselector-88g\n\n---\nHuly Issue: LTSEL-193","created_at":"2025-12-29T20:22:39Z"}]}
{"id":"lettatoolsselector-yczo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:18.074275948Z","updated_at":"2025-12-29T20:56:18.074275948Z","comments":[{"id":775,"issue_id":"lettatoolsselector-yczo","author":"root","text":"Synced from Beads: lettatoolsselector-6t5\n\n---\nHuly Issue: LTSEL-139","created_at":"2025-12-29T20:56:18Z"}]}
{"id":"lettatoolsselector-ye76","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:45.005172464Z","updated_at":"2025-12-29T20:34:45.005172464Z","comments":[{"id":592,"issue_id":"lettatoolsselector-ye76","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T20:34:45Z"}]}
{"id":"lettatoolsselector-ykta","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:30.451421252Z","updated_at":"2025-12-29T20:28:30.451421252Z","comments":[{"id":523,"issue_id":"lettatoolsselector-ykta","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T20:28:30Z"}]}
{"id":"lettatoolsselector-ylpz","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:59:22.312743896Z","updated_at":"2025-12-29T20:59:22.312743896Z","comments":[{"id":805,"issue_id":"lettatoolsselector-ylpz","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:59:22Z"}]}
{"id":"lettatoolsselector-ym9g","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:04.960025363Z","updated_at":"2025-12-29T20:39:04.960025363Z","comments":[{"id":637,"issue_id":"lettatoolsselector-ym9g","author":"root","text":"Synced from Beads: lettatoolsselector-xyd\n\n---\nHuly Issue: LTSEL-149","created_at":"2025-12-29T20:39:05Z"}]}
{"id":"lettatoolsselector-yo1c","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:56.895875805Z","updated_at":"2025-12-29T20:28:56.895875805Z","comments":[{"id":530,"issue_id":"lettatoolsselector-yo1c","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T20:28:57Z"}]}
{"id":"lettatoolsselector-ypvi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:59:48.954671908Z","updated_at":"2025-12-29T20:59:48.954671908Z","comments":[{"id":812,"issue_id":"lettatoolsselector-ypvi","author":"root","text":"Synced from Beads: lettatoolsselector-y0e\n\n---\nHuly Issue: LTSEL-124","created_at":"2025-12-29T20:59:49Z"}]}
{"id":"lettatoolsselector-yqsb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:46:07.085970695Z","updated_at":"2025-12-29T20:46:07.085970695Z","comments":[{"id":689,"issue_id":"lettatoolsselector-yqsb","author":"root","text":"Synced from Beads: lettatoolsselector-tqp\n\n---\nHuly Issue: LTSEL-150","created_at":"2025-12-29T20:46:07Z"}]}
{"id":"lettatoolsselector-yvrk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:44:48.278286995Z","updated_at":"2025-12-29T20:44:48.278286995Z","comments":[{"id":681,"issue_id":"lettatoolsselector-yvrk","author":"root","text":"Synced from Beads: lettatoolsselector-6p9\n\n---\nHuly Issue: LTSEL-148","created_at":"2025-12-29T20:44:48Z"}]}
{"id":"lettatoolsselector-yxla","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:21.681542392Z","updated_at":"2025-12-29T20:42:21.681542392Z","comments":[{"id":663,"issue_id":"lettatoolsselector-yxla","author":"root","text":"Synced from Beads: lettatoolsselector-yc7\n\n---\nHuly Issue: LTSEL-153","created_at":"2025-12-29T20:42:22Z"}]}
{"id":"lettatoolsselector-zbdc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:55:23.277880534Z","updated_at":"2025-12-29T20:55:23.277880534Z","comments":[{"id":762,"issue_id":"lettatoolsselector-zbdc","author":"root","text":"Synced from Beads: lettatoolsselector-y0e\n\n---\nHuly Issue: LTSEL-124","created_at":"2025-12-29T20:55:23Z"}]}
{"id":"lettatoolsselector-zfqe","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:37.163288715Z","updated_at":"2025-12-29T20:32:37.163288715Z","comments":[{"id":567,"issue_id":"lettatoolsselector-zfqe","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T20:32:37Z"}]}
{"id":"lettatoolsselector-zgks","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:52.95157691Z","updated_at":"2025-12-29T21:00:52.95157691Z","comments":[{"id":821,"issue_id":"lettatoolsselector-zgks","author":"root","text":"Synced from Beads: lettatoolsselector-i3k\n\n---\nHuly Issue: LTSEL-127","created_at":"2025-12-29T21:00:53Z"}]}
{"id":"lettatoolsselector-zji3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:57.983909518Z","updated_at":"2025-12-29T20:17:57.983909518Z","comments":[{"id":396,"issue_id":"lettatoolsselector-zji3","author":"root","text":"Synced from Beads: lettatoolsselector-le1\n\n---\nHuly Issue: LTSEL-198","created_at":"2025-12-29T20:17:58Z"}]}
{"id":"lettatoolsselector-znk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:10:09.601399511Z","updated_at":"2025-12-29T20:10:09.601399511Z","comments":[{"id":315,"issue_id":"lettatoolsselector-znk","author":"root","text":"Synced from Beads: lettatoolsselector-4c0\n\n---\nHuly Issue: LTSEL-214","created_at":"2025-12-29T20:10:09Z"}]}
{"id":"lettatoolsselector-zpdu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:58.306366834Z","updated_at":"2025-12-29T20:11:58.306366834Z","comments":[{"id":332,"issue_id":"lettatoolsselector-zpdu","author":"root","text":"Synced from Beads: lettatoolsselector-ylm\n\n---\nHuly Issue: LTSEL-215","created_at":"2025-12-29T20:11:58Z"}]}
{"id":"lettatoolsselector-zrpi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:57.906595069Z","updated_at":"2025-12-29T20:39:57.906595069Z","comments":[{"id":647,"issue_id":"lettatoolsselector-zrpi","author":"root","text":"Synced from Beads: lettatoolsselector-omu\n\n---\nHuly Issue: LTSEL-157","created_at":"2025-12-29T20:39:58Z"}]}
{"id":"lettatoolsselector-zs7p","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:16.326140723Z","updated_at":"2025-12-29T20:35:16.326140723Z","comments":[{"id":599,"issue_id":"lettatoolsselector-zs7p","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T20:35:16Z"}]}
{"id":"lettatoolsselector-zste","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:48.553450033Z","updated_at":"2025-12-29T20:34:48.553450033Z","comments":[{"id":596,"issue_id":"lettatoolsselector-zste","author":"root","text":"Synced from Beads: lettatoolsselector-9k9\n\n---\nHuly Issue: LTSEL-171","created_at":"2025-12-29T20:34:48Z"}]}
{"id":"lettatoolsselector-zt8a","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:36.415362485Z","updated_at":"2025-12-29T20:21:36.415362485Z","comments":[{"id":436,"issue_id":"lettatoolsselector-zt8a","author":"root","text":"Synced from Beads: lettatoolsselector-9xp\n\n---\nHuly Issue: LTSEL-181","created_at":"2025-12-29T20:21:36Z"}]}
{"id":"lettatoolsselector-zwj6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:38.940969738Z","updated_at":"2025-12-29T20:29:38.940969738Z","comments":[{"id":542,"issue_id":"lettatoolsselector-zwj6","author":"root","text":"Synced from Beads: lettatoolsselector-sk8\n\n---\nHuly Issue: LTSEL-180","created_at":"2025-12-29T20:29:39Z"}]}
{"id":"lettatoolsselector-zyph","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:39.263154877Z","updated_at":"2025-12-29T20:28:39.263154877Z","comments":[{"id":528,"issue_id":"lettatoolsselector-zyph","author":"root","text":"Synced from Beads: lettatoolsselector-2md\n\n---\nHuly Issue: LTSEL-177","created_at":"2025-12-29T20:28:39Z"}]}
