{"id":"lettatoolsselector-003l7","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:22:02.751514319Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:22:03.348336464Z","closed_at":"2026-01-02T20:22:03.348336464Z","close_reason":"Closed","comments":[{"id":4099,"issue_id":"lettatoolsselector-003l7","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T20:22:03Z"}]}
{"id":"lettatoolsselector-00fr0","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:42:23.33884591Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:42:23.97437317Z","closed_at":"2026-01-02T19:42:23.97437317Z","close_reason":"Closed","comments":[{"id":4007,"issue_id":"lettatoolsselector-00fr0","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T19:42:23Z"}]}
{"id":"lettatoolsselector-015wo","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:03:04.347071287Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:04.831884653Z","closed_at":"2026-01-02T20:03:04.831884653Z","close_reason":"Closed"}
{"id":"lettatoolsselector-01iik","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:02:58.41613721Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:59.039166556Z","closed_at":"2026-01-02T12:02:59.039166556Z","close_reason":"Closed","comments":[{"id":3285,"issue_id":"lettatoolsselector-01iik","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T12:02:58Z"}]}
{"id":"lettatoolsselector-02kz","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:40.874168308Z","updated_at":"2025-12-30T04:12:55.665476115Z","comments":[{"id":1161,"issue_id":"lettatoolsselector-02kz","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-31T05:59:05Z"}]}
{"id":"lettatoolsselector-02ou5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:35.756458602Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:35.756458602Z","comments":[{"id":2049,"issue_id":"lettatoolsselector-02ou5","author":"root","text":"Synced from Beads: lettatoolsselector-v4x9\n\n---\nHuly Issue: LTSEL-266","created_at":"2026-01-02T03:29:35Z"}]}
{"id":"lettatoolsselector-02ut","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:18:03.717639061Z","updated_at":"2025-12-30T01:53:44.983812579Z","comments":[{"id":985,"issue_id":"lettatoolsselector-02ut","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T21:18:04Z"}]}
{"id":"lettatoolsselector-04i2h","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:22:57.461398863Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:57.974414428Z","closed_at":"2026-01-02T09:22:57.974414428Z","close_reason":"Closed","comments":[{"id":2977,"issue_id":"lettatoolsselector-04i2h","author":"root","text":"Synced from Huly: LTSEL-236","created_at":"2026-01-02T09:22:57Z"}]}
{"id":"lettatoolsselector-04q1o","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:48.093064408Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:48.452198008Z","closed_at":"2026-01-02T03:06:48.452198008Z","close_reason":"Closed","comments":[{"id":1567,"issue_id":"lettatoolsselector-04q1o","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T03:06:48Z"}]}
{"id":"lettatoolsselector-050ep","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:33:10.419930237Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:33:11.074295367Z","closed_at":"2026-01-02T18:33:11.074295367Z","close_reason":"Closed","comments":[{"id":3876,"issue_id":"lettatoolsselector-050ep","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T18:33:10Z"}]}
{"id":"lettatoolsselector-05z","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:50:01.164165877Z","updated_at":"2025-12-29T22:14:55.641534968Z","closed_at":"2025-12-29T21:33:32.023026169Z","close_reason":"Duplicate","comments":[{"id":241,"issue_id":"lettatoolsselector-05z","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T19:50:01Z"}]}
{"id":"lettatoolsselector-062h","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:04.84348385Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:05.072302552Z","closed_at":"2026-01-02T01:25:05.072302552Z","close_reason":"Closed"}
{"id":"lettatoolsselector-06cc9","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:34.274530477Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:34.855315599Z","closed_at":"2026-01-02T14:29:34.855315599Z","close_reason":"Closed","comments":[{"id":3447,"issue_id":"lettatoolsselector-06cc9","author":"root","text":"Synced from Huly: LTSEL-39","created_at":"2026-01-02T14:29:34Z"}]}
{"id":"lettatoolsselector-06d","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.226044359Z","updated_at":"2025-12-29T18:56:11.266224726Z","closed_at":"2025-12-29T18:56:11.266224726Z","close_reason":"Duplicate of closed lettatoolsselector-14s","comments":[{"id":2,"issue_id":"lettatoolsselector-06d","author":"node","text":"## Problem\n\nWebhook receiver has its own tool management code that will drift from the SDK.\n\n## Solution\n\nReplace local implementations with SDK imports.\n\n## Acceptance Criteria\n\n- [ ] Add  to \n- [ ] Replace  functions with SDK imports\n- [ ] Replace  API calls with SDK helpers\n- [ ] All existing tests still pass\n- [ ] No functional changes to webhook behavior\n\n## Technical Notes\n\n- This is a refactor, not a feature change\n- May need to keep some webhook-specific wrappers\n\n---\nHuly Issue: LTSEL-5","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-06do","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:08.243396347Z","updated_at":"2025-12-30T01:57:25.262740339Z","comments":[{"id":1016,"issue_id":"lettatoolsselector-06do","author":"root","text":"Synced from Beads: lettatoolsselector-1kj\n\n---\nHuly Issue: LTSEL-76","created_at":"2025-12-29T21:22:08Z"}]}
{"id":"lettatoolsselector-06hq1","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:11:22.786381433Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:11:23.414029985Z","closed_at":"2026-01-02T16:11:23.414029985Z","close_reason":"Closed","comments":[{"id":3642,"issue_id":"lettatoolsselector-06hq1","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T16:11:23Z"}]}
{"id":"lettatoolsselector-06irt","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:04:56.965155837Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:04:57.558359882Z","closed_at":"2026-01-02T17:04:57.558359882Z","close_reason":"Closed","comments":[{"id":3706,"issue_id":"lettatoolsselector-06irt","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T17:04:57Z"}]}
{"id":"lettatoolsselector-06txv","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:14:39.30864789Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:14:39.933508559Z","closed_at":"2026-01-02T22:14:39.933508559Z","close_reason":"Closed","comments":[{"id":4292,"issue_id":"lettatoolsselector-06txv","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T22:14:39Z"}]}
{"id":"lettatoolsselector-07p","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:09.047844161Z","updated_at":"2025-12-23T03:23:09.420110481Z","closed_at":"2025-12-23T03:23:09.420110481Z","close_reason":"Closed","comments":[{"id":33,"issue_id":"lettatoolsselector-07p","author":"node","text":"## Problem\n\nCurrent health endpoint only returns basic status. No way to quickly check if tool management is working correctly.\n\n## Solution\n\nEnhance health endpoint to include tool state summary.\n\n## Acceptance Criteria\n\n- [ ] Health endpoint returns: status, version, config summary\n- [ ] Include: MAX_TOTAL_TOOLS, PROTECTED_TOOLS list\n- [ ] Include: total_agents_tracked, agents_over_limit count\n- [ ] Include: last_attach_timestamp, last_prune_timestamp\n- [ ] Separate deep health check for dependencies (Letta API, Weaviate)\n\n## Technical Notes\n\n- Keep lightweight for frequent polling\n- Deep health check on separate endpoint (/health/deep)\n\n---\nHuly Issue: LTSEL-14","created_at":"2025-12-23T03:23:09Z"}]}
{"id":"lettatoolsselector-083nr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:35.323864016Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:35.323864016Z","comments":[{"id":2048,"issue_id":"lettatoolsselector-083nr","author":"root","text":"Synced from Beads: lettatoolsselector-8qmw\n\n---\nHuly Issue: LTSEL-267","created_at":"2026-01-02T03:29:35Z"}]}
{"id":"lettatoolsselector-084ow","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:38.346083541Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:38.878256214Z","closed_at":"2026-01-02T07:02:38.878256214Z","close_reason":"Closed","comments":[{"id":2658,"issue_id":"lettatoolsselector-084ow","author":"root","text":"Synced from Huly: LTSEL-28","created_at":"2026-01-02T07:02:38Z"}]}
{"id":"lettatoolsselector-08bab","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:57:31.316873922Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:31.69440956Z","closed_at":"2026-01-02T09:57:31.69440956Z","close_reason":"Closed"}
{"id":"lettatoolsselector-08rtr","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:44.608780514Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:45.057312341Z","closed_at":"2026-01-02T05:40:45.057312341Z","close_reason":"Closed","comments":[{"id":2459,"issue_id":"lettatoolsselector-08rtr","author":"root","text":"Synced from Huly: LTSEL-46","created_at":"2026-01-02T05:40:44Z"}]}
{"id":"lettatoolsselector-08znz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:44.405763503Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:44.405763503Z","comments":[{"id":1940,"issue_id":"lettatoolsselector-08znz","author":"root","text":"Synced from Beads: lettatoolsselector-u4rf\n\n---\nHuly Issue: LTSEL-383","created_at":"2026-01-02T03:28:44Z"}]}
{"id":"lettatoolsselector-092lh","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:30:44.89769751Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:30:45.561765598Z","closed_at":"2026-01-02T21:30:45.561765598Z","close_reason":"Closed","comments":[{"id":4228,"issue_id":"lettatoolsselector-092lh","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T21:30:45Z"}]}
{"id":"lettatoolsselector-0936z","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:23:26.370789117Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:26.860323305Z","closed_at":"2026-01-02T15:23:26.860323305Z","close_reason":"Closed"}
{"id":"lettatoolsselector-099kj","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:54.974082067Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:55.515193302Z","closed_at":"2026-01-02T05:59:55.515193302Z","close_reason":"Closed","comments":[{"id":2511,"issue_id":"lettatoolsselector-099kj","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T05:59:55Z"}]}
{"id":"lettatoolsselector-09g","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:04.520360479Z","updated_at":"2025-12-23T03:23:04.874634818Z","closed_at":"2025-12-23T03:23:04.874634818Z","close_reason":"Closed","comments":[{"id":27,"issue_id":"lettatoolsselector-09g","author":"node","text":"## Problem\n\nTool selector has its own  and  that duplicate SDK functionality.\n\n## Solution\n\nReplace local implementations with SDK imports.\n\n## Acceptance Criteria\n\n- [ ] Add  to \n- [ ] Replace  helpers with SDK imports\n- [ ] Replace  with SDK imports\n- [ ] All existing tests still pass\n- [ ] No functional changes to tool selection behavior\n\n## Technical Notes\n\n- Worker service models may need adjustment\n- Keep API-specific logic in the repo, move generic logic to SDK\n\n---\nHuly Issue: LTSEL-6","created_at":"2025-12-23T03:23:04Z"}]}
{"id":"lettatoolsselector-09lji","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:40:16.638764935Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:17.115981819Z","closed_at":"2026-01-02T04:40:17.115981819Z","close_reason":"Closed","comments":[{"id":2436,"issue_id":"lettatoolsselector-09lji","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T04:40:16Z"}]}
{"id":"lettatoolsselector-09r8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:31.002622716Z","updated_at":"2025-12-29T21:33:42.697148367Z","closed_at":"2025-12-29T21:33:42.697148367Z","close_reason":"Duplicate","comments":[{"id":524,"issue_id":"lettatoolsselector-09r8","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:28:31Z"}]}
{"id":"lettatoolsselector-09tgp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:00.185709998Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:00.185709998Z","comments":[{"id":1974,"issue_id":"lettatoolsselector-09tgp","author":"root","text":"Synced from Beads: lettatoolsselector-wutv\n\n---\nHuly Issue: LTSEL-343","created_at":"2026-01-02T03:29:00Z"}]}
{"id":"lettatoolsselector-0a3uy","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:35.878033181Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:36.425736721Z","closed_at":"2026-01-02T06:17:36.425736721Z","close_reason":"Closed","comments":[{"id":2551,"issue_id":"lettatoolsselector-0a3uy","author":"root","text":"Synced from Huly: LTSEL-45","created_at":"2026-01-02T06:17:36Z"}]}
{"id":"lettatoolsselector-0a91i","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:51:44.22307353Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:44.635007278Z","closed_at":"2026-01-02T18:51:44.635007278Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0atzz","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:03:04.484803135Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:05.075670324Z","closed_at":"2026-01-02T07:03:05.075670324Z","close_reason":"Closed","comments":[{"id":2677,"issue_id":"lettatoolsselector-0atzz","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T07:03:04Z"}]}
{"id":"lettatoolsselector-0avrj","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:21:04.91139837Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:21:05.604707541Z","closed_at":"2026-01-02T22:21:05.604707541Z","close_reason":"Closed","comments":[{"id":4318,"issue_id":"lettatoolsselector-0avrj","author":"root","text":"Synced from Huly: LTSEL-230","created_at":"2026-01-02T22:21:05Z"}]}
{"id":"lettatoolsselector-0axnw","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:37:07.201088696Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:07.683773764Z","closed_at":"2026-01-02T06:37:07.683773764Z","close_reason":"Closed","comments":[{"id":2629,"issue_id":"lettatoolsselector-0axnw","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T06:37:07Z"}]}
{"id":"lettatoolsselector-0bdiq","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:35:45.182587116Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:35:45.828604083Z","closed_at":"2026-01-02T11:35:45.828604083Z","close_reason":"Closed","comments":[{"id":3232,"issue_id":"lettatoolsselector-0bdiq","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T11:35:45Z"}]}
{"id":"lettatoolsselector-0bmn9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:15.596615765Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:15.596615765Z","comments":[{"id":2005,"issue_id":"lettatoolsselector-0bmn9","author":"root","text":"Synced from Beads: lettatoolsselector-mrm7\n\n---\nHuly Issue: LTSEL-310","created_at":"2026-01-02T03:29:15Z"}]}
{"id":"lettatoolsselector-0bnze","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:53:50.047736318Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:53:50.611708811Z","closed_at":"2026-01-02T12:53:50.611708811Z","close_reason":"Closed","comments":[{"id":3302,"issue_id":"lettatoolsselector-0bnze","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T12:53:50Z"}]}
{"id":"lettatoolsselector-0cai7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:53.613022674Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:53.613022674Z","comments":[{"id":1960,"issue_id":"lettatoolsselector-0cai7","author":"root","text":"Synced from Beads: lettatoolsselector-hklk\n\n---\nHuly Issue: LTSEL-359","created_at":"2026-01-02T03:28:53Z"}]}
{"id":"lettatoolsselector-0czi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:02:35.223517465Z","updated_at":"2025-12-30T04:14:04.879079014Z","comments":[{"id":832,"issue_id":"lettatoolsselector-0czi","author":"root","text":"Synced from Beads: lettatoolsselector-mwe\n\n---\nHuly Issue: LTSEL-108","created_at":"2025-12-29T21:02:35Z"}]}
{"id":"lettatoolsselector-0d0x1","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:07.670755015Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:08.281675472Z","closed_at":"2026-01-02T07:24:08.281675472Z","close_reason":"Closed","comments":[{"id":2717,"issue_id":"lettatoolsselector-0d0x1","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T07:24:08Z"}]}
{"id":"lettatoolsselector-0d4nj","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:46.903186366Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:47.456503908Z","closed_at":"2026-01-02T06:17:47.456503908Z","close_reason":"Closed","comments":[{"id":2560,"issue_id":"lettatoolsselector-0d4nj","author":"root","text":"Synced from Huly: LTSEL-33","created_at":"2026-01-02T06:17:47Z"}]}
{"id":"lettatoolsselector-0d4pj","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:02.692587784Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:03.211000415Z","closed_at":"2026-01-02T04:20:03.211000415Z","close_reason":"Closed","comments":[{"id":2354,"issue_id":"lettatoolsselector-0d4pj","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T04:20:03Z"}]}
{"id":"lettatoolsselector-0dc8","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:48.166400658Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:48.556808029Z","closed_at":"2026-01-02T02:19:48.556808029Z","close_reason":"Closed","comments":[{"id":1289,"issue_id":"lettatoolsselector-0dc8","author":"root","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2026-01-02T02:19:48Z"}]}
{"id":"lettatoolsselector-0dkz","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:10.083832524Z","updated_at":"2025-12-29T21:33:26.400525723Z","closed_at":"2025-12-29T21:33:26.400525723Z","close_reason":"Duplicate","comments":[{"id":532,"issue_id":"lettatoolsselector-0dkz","author":"root","text":"Synced from Beads: lettatoolsselector-4lx\n\n---\nHuly Issue: LTSEL-166","created_at":"2025-12-29T20:29:10Z"}]}
{"id":"lettatoolsselector-0dptr","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:24:14.280250215Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:14.69183853Z","closed_at":"2026-01-02T07:24:14.69183853Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0e3t","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:15.352427156Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:15.684731147Z","closed_at":"2026-01-02T02:35:15.684731147Z","close_reason":"Closed","comments":[{"id":1345,"issue_id":"lettatoolsselector-0e3t","author":"root","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2026-01-02T02:35:15Z"}]}
{"id":"lettatoolsselector-0etcf","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:24.915910981Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:25.397431192Z","closed_at":"2026-01-02T07:43:25.397431192Z","close_reason":"Closed","comments":[{"id":2769,"issue_id":"lettatoolsselector-0etcf","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T07:43:25Z"}]}
{"id":"lettatoolsselector-0f1vy","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:57:12.730226797Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:57:13.465244432Z","closed_at":"2026-01-02T20:57:13.465244432Z","close_reason":"Closed","comments":[{"id":4166,"issue_id":"lettatoolsselector-0f1vy","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T20:57:13Z"}]}
{"id":"lettatoolsselector-0f8cx","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:11:49.046064759Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:11:49.677825071Z","closed_at":"2026-01-02T16:11:49.677825071Z","close_reason":"Closed","comments":[{"id":3648,"issue_id":"lettatoolsselector-0f8cx","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T16:11:49Z"}]}
{"id":"lettatoolsselector-0ff7y","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:40.015165817Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:40.574665548Z","closed_at":"2026-01-02T07:24:40.574665548Z","close_reason":"Closed","comments":[{"id":2730,"issue_id":"lettatoolsselector-0ff7y","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T07:24:40Z"}]}
{"id":"lettatoolsselector-0fv2b","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:08.366829834Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:08.880580355Z","closed_at":"2026-01-02T11:09:08.880580355Z","close_reason":"Closed","comments":[{"id":3165,"issue_id":"lettatoolsselector-0fv2b","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T11:09:08Z"}]}
{"id":"lettatoolsselector-0g6","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.711027378Z","updated_at":"2025-12-29T18:56:01.217907727Z","closed_at":"2025-12-29T18:56:01.217907727Z","close_reason":"Duplicate of closed lettatoolsselector-b8l"}
{"id":"lettatoolsselector-0gmf","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:25.350464818Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:25.731015774Z","closed_at":"2026-01-02T02:35:25.731015774Z","close_reason":"Closed","comments":[{"id":1355,"issue_id":"lettatoolsselector-0gmf","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T02:35:25Z"}]}
{"id":"lettatoolsselector-0gn2v","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:28.155366206Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:28.725173337Z","closed_at":"2026-01-02T15:46:28.725173337Z","close_reason":"Closed","comments":[{"id":3601,"issue_id":"lettatoolsselector-0gn2v","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T15:46:28Z"}]}
{"id":"lettatoolsselector-0gpj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:53.601077899Z","updated_at":"2025-12-30T04:12:02.871298162Z","comments":[{"id":907,"issue_id":"lettatoolsselector-0gpj","author":"root","text":"Synced from Beads: lettatoolsselector-0ye\n\n---\nHuly Issue: LTSEL-92","created_at":"2025-12-29T21:09:54Z"}]}
{"id":"lettatoolsselector-0h4yv","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:03:29.515722406Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:03:30.13128437Z","closed_at":"2026-01-02T15:03:30.13128437Z","close_reason":"Closed","comments":[{"id":3525,"issue_id":"lettatoolsselector-0h4yv","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T15:03:29Z"}]}
{"id":"lettatoolsselector-0hkbg","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:31:16.18829903Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:31:16.733077965Z","closed_at":"2026-01-02T14:31:16.733077965Z","close_reason":"Closed","comments":[{"id":3462,"issue_id":"lettatoolsselector-0hkbg","author":"root","text":"Synced from Huly: LTSEL-243","created_at":"2026-01-02T14:31:16Z"}]}
{"id":"lettatoolsselector-0hnli","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:15:52.694964142Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:15:53.332102762Z","closed_at":"2026-01-02T22:15:53.332102762Z","close_reason":"Closed","comments":[{"id":4303,"issue_id":"lettatoolsselector-0hnli","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T22:15:53Z"}]}
{"id":"lettatoolsselector-0hy8g","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:25:03.554654451Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:25:04.312075081Z","closed_at":"2026-01-02T19:25:04.312075081Z","close_reason":"Closed","comments":[{"id":3952,"issue_id":"lettatoolsselector-0hy8g","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T19:25:04Z"}]}
{"id":"lettatoolsselector-0hz11","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:31.646615186Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:32.239340588Z","closed_at":"2026-01-02T06:37:32.239340588Z","close_reason":"Closed","comments":[{"id":2643,"issue_id":"lettatoolsselector-0hz11","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T06:37:32Z"}]}
{"id":"lettatoolsselector-0i596","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:03:12.635647683Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:03:13.136364492Z","closed_at":"2026-01-02T12:03:13.136364492Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0inw1","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:30:39.981345831Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:30:40.648640535Z","closed_at":"2026-01-02T14:30:40.648640535Z","close_reason":"Closed","comments":[{"id":3456,"issue_id":"lettatoolsselector-0inw1","author":"root","text":"Synced from Huly: LTSEL-13","created_at":"2026-01-02T14:30:40Z"}]}
{"id":"lettatoolsselector-0isao","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:49:10.207218556Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:49:10.649315268Z","closed_at":"2026-01-02T21:49:10.649315268Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0iz3o","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:45.342691913Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:45.342691913Z","comments":[{"id":1805,"issue_id":"lettatoolsselector-0iz3o","author":"root","text":"Synced from Beads: lettatoolsselector-yqsb\n\n---\nHuly Issue: LTSEL-564","created_at":"2026-01-02T03:27:45Z"}]}
{"id":"lettatoolsselector-0j9c5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:50.014357076Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:50.014357076Z","comments":[{"id":1816,"issue_id":"lettatoolsselector-0j9c5","author":"root","text":"Synced from Beads: lettatoolsselector-wu66\n\n---\nHuly Issue: LTSEL-544","created_at":"2026-01-02T03:27:50Z"}]}
{"id":"lettatoolsselector-0jgk","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:18.434390146Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:18.7936368Z","closed_at":"2026-01-02T03:06:18.7936368Z","close_reason":"Closed","comments":[{"id":1533,"issue_id":"lettatoolsselector-0jgk","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T03:06:18Z"}]}
{"id":"lettatoolsselector-0jp7v","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T19:39:45.293845107Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:45.694721319Z","closed_at":"2026-01-02T19:39:45.694721319Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0jrjx","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:49:32.540594892Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:49:33.242851091Z","closed_at":"2026-01-02T21:49:33.242851091Z","close_reason":"Closed","comments":[{"id":4268,"issue_id":"lettatoolsselector-0jrjx","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T21:49:33Z"}]}
{"id":"lettatoolsselector-0kac1","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:15:54.681671851Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:15:55.289415332Z","closed_at":"2026-01-02T16:15:55.289415332Z","close_reason":"Closed","comments":[{"id":3664,"issue_id":"lettatoolsselector-0kac1","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T16:15:55Z"}]}
{"id":"lettatoolsselector-0kedp","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:30:18.66455247Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:30:19.361825504Z","closed_at":"2026-01-02T21:30:19.361825504Z","close_reason":"Closed","comments":[{"id":4226,"issue_id":"lettatoolsselector-0kedp","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T21:30:19Z"}]}
{"id":"lettatoolsselector-0kte0","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:31.851696313Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:31.851696313Z","comments":[{"id":2192,"issue_id":"lettatoolsselector-0kte0","author":"root","text":"Synced from Huly: LTSEL-680","created_at":"2026-01-02T03:43:32Z"}]}
{"id":"lettatoolsselector-0l1rx","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:23:31.258968403Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:23:32.024678574Z","closed_at":"2026-01-02T21:23:32.024678574Z","close_reason":"Closed","comments":[{"id":4209,"issue_id":"lettatoolsselector-0l1rx","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T21:23:31Z"}]}
{"id":"lettatoolsselector-0lv3s","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:37:10.87037946Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:11.175375627Z","closed_at":"2026-01-02T06:37:11.175375627Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0m0qx","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T19:39:41.88343824Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:42.491650576Z","closed_at":"2026-01-02T19:39:42.491650576Z","close_reason":"Closed","comments":[{"id":3990,"issue_id":"lettatoolsselector-0m0qx","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T19:39:42Z"}]}
{"id":"lettatoolsselector-0m16h","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:21:53.096366969Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:53.625415915Z","closed_at":"2026-01-02T09:21:53.625415915Z","close_reason":"Closed","comments":[{"id":2959,"issue_id":"lettatoolsselector-0m16h","author":"root","text":"Synced from Huly: LTSEL-242","created_at":"2026-01-02T09:21:53Z"}]}
{"id":"lettatoolsselector-0m5y5","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:30:07.389720465Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:30:07.960682611Z","closed_at":"2026-01-02T14:30:07.960682611Z","close_reason":"Closed","comments":[{"id":3452,"issue_id":"lettatoolsselector-0m5y5","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T14:30:07Z"}]}
{"id":"lettatoolsselector-0m76v","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:22:57.792465399Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:22:58.420187761Z","closed_at":"2026-01-02T21:22:58.420187761Z","close_reason":"Closed","comments":[{"id":4203,"issue_id":"lettatoolsselector-0m76v","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T21:22:58Z"}]}
{"id":"lettatoolsselector-0ml9n","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:02:51.369020146Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:51.847619742Z","closed_at":"2026-01-02T07:02:51.847619742Z","close_reason":"Closed","comments":[{"id":2669,"issue_id":"lettatoolsselector-0ml9n","author":"root","text":"Synced from Huly: LTSEL-241","created_at":"2026-01-02T07:02:51Z"}]}
{"id":"lettatoolsselector-0n3ht","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T10:36:33.453888854Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:33.79452542Z","closed_at":"2026-01-02T10:36:33.79452542Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0n4xg","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:51.768157477Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:51.768157477Z","comments":[{"id":2218,"issue_id":"lettatoolsselector-0n4xg","author":"root","text":"Synced from Huly: LTSEL-614","created_at":"2026-01-02T03:43:52Z"}]}
{"id":"lettatoolsselector-0n7cw","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:39:24.614731335Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:25.226447826Z","closed_at":"2026-01-02T19:39:25.226447826Z","close_reason":"Closed","comments":[{"id":3986,"issue_id":"lettatoolsselector-0n7cw","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T19:39:24Z"}]}
{"id":"lettatoolsselector-0n82r","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:21:03.52777693Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:04.068165565Z","closed_at":"2026-01-02T15:21:04.068165565Z","close_reason":"Closed","comments":[{"id":3551,"issue_id":"lettatoolsselector-0n82r","author":"root","text":"Synced from Huly: LTSEL-16","created_at":"2026-01-02T15:21:03Z"}]}
{"id":"lettatoolsselector-0nnh4","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:41:13.52755508Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:13.81342505Z","closed_at":"2026-01-02T04:41:13.81342505Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0oqm","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:22.384066607Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:22.736187695Z","closed_at":"2026-01-02T03:06:22.736187695Z","close_reason":"Closed","comments":[{"id":1540,"issue_id":"lettatoolsselector-0oqm","author":"root","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2026-01-02T03:06:22Z"}]}
{"id":"lettatoolsselector-0oycg","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:41:10.119731587Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:10.398909065Z","closed_at":"2026-01-02T04:41:10.398909065Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0p6fc","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:55:27.540358481Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:55:28.324433188Z","closed_at":"2026-01-02T21:55:28.324433188Z","close_reason":"Closed","comments":[{"id":4279,"issue_id":"lettatoolsselector-0p6fc","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T21:55:28Z"}]}
{"id":"lettatoolsselector-0p7kw","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:38:06.445565713Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:38:06.994298691Z","closed_at":"2026-01-02T10:38:06.994298691Z","close_reason":"Closed","comments":[{"id":3106,"issue_id":"lettatoolsselector-0p7kw","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T10:38:06Z"}]}
{"id":"lettatoolsselector-0ric8","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:56:56.923697072Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:56:57.492074139Z","closed_at":"2026-01-02T17:56:57.492074139Z","close_reason":"Closed","comments":[{"id":3817,"issue_id":"lettatoolsselector-0ric8","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T17:56:57Z"}]}
{"id":"lettatoolsselector-0sz0n","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:50.299808437Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:50.299808437Z","comments":[{"id":1953,"issue_id":"lettatoolsselector-0sz0n","author":"root","text":"Synced from Beads: lettatoolsselector-w08v\n\n---\nHuly Issue: LTSEL-368","created_at":"2026-01-02T03:28:50Z"}]}
{"id":"lettatoolsselector-0t0g","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:56.04089792Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:56.387688501Z","closed_at":"2026-01-02T01:24:56.387688501Z","close_reason":"Closed","comments":[{"id":1229,"issue_id":"lettatoolsselector-0t0g","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T01:24:56Z"}]}
{"id":"lettatoolsselector-0tt8j","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:39:47.976932937Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:48.687349318Z","closed_at":"2026-01-02T19:39:48.687349318Z","close_reason":"Closed","comments":[{"id":3991,"issue_id":"lettatoolsselector-0tt8j","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T19:39:48Z"}]}
{"id":"lettatoolsselector-0u20z","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:24:16.618151707Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:24:17.236083796Z","closed_at":"2026-01-02T18:24:17.236083796Z","close_reason":"Closed","comments":[{"id":3826,"issue_id":"lettatoolsselector-0u20z","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T18:24:16Z"}]}
{"id":"lettatoolsselector-0u75f","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:23:08.623080762Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:23:09.287184204Z","closed_at":"2026-01-02T21:23:09.287184204Z","close_reason":"Closed","comments":[{"id":4205,"issue_id":"lettatoolsselector-0u75f","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T21:23:09Z"}]}
{"id":"lettatoolsselector-0uo6h","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:11.953607203Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:12.589436518Z","closed_at":"2026-01-02T12:54:12.589436518Z","close_reason":"Closed","comments":[{"id":3308,"issue_id":"lettatoolsselector-0uo6h","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T12:54:12Z"}]}
{"id":"lettatoolsselector-0utjh","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:04:28.631450175Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:04:29.474297993Z","closed_at":"2026-01-02T12:04:29.474297993Z","close_reason":"Closed","comments":[{"id":3296,"issue_id":"lettatoolsselector-0utjh","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T12:04:29Z"}]}
{"id":"lettatoolsselector-0uup","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T02:35:18.837812107Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:19.106452571Z","closed_at":"2026-01-02T02:35:19.106452571Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0uvjg","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:03:28.744136538Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:03:29.307433944Z","closed_at":"2026-01-02T17:03:29.307433944Z","close_reason":"Closed","comments":[{"id":3704,"issue_id":"lettatoolsselector-0uvjg","author":"root","text":"Synced from Huly: LTSEL-229","created_at":"2026-01-02T17:03:29Z"}]}
{"id":"lettatoolsselector-0v1hv","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T19:21:51.782997056Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:21:52.419031792Z","closed_at":"2026-01-02T19:21:52.419031792Z","close_reason":"Closed","comments":[{"id":3944,"issue_id":"lettatoolsselector-0v1hv","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T19:21:52Z"}]}
{"id":"lettatoolsselector-0vmr4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:11.689329498Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:11.689329498Z","comments":[{"id":1998,"issue_id":"lettatoolsselector-0vmr4","author":"root","text":"Synced from Beads: lettatoolsselector-ipnk\n\n---\nHuly Issue: LTSEL-317","created_at":"2026-01-02T03:29:11Z"}]}
{"id":"lettatoolsselector-0vn","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:52:22.116307641Z","updated_at":"2025-12-29T21:33:45.525450659Z","closed_at":"2025-12-29T21:33:45.525450659Z","close_reason":"Duplicate","comments":[{"id":251,"issue_id":"lettatoolsselector-0vn","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T19:52:22Z"}]}
{"id":"lettatoolsselector-0vsp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:16:53.837972606Z","updated_at":"2025-12-30T01:51:50.306709624Z","comments":[{"id":977,"issue_id":"lettatoolsselector-0vsp","author":"root","text":"Synced from Beads: lettatoolsselector-b0j\n\n---\nHuly Issue: LTSEL-80","created_at":"2025-12-29T21:16:54Z"}]}
{"id":"lettatoolsselector-0vvt5","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:48:53.481953968Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:48:54.171517837Z","closed_at":"2026-01-02T18:48:54.171517837Z","close_reason":"Closed","comments":[{"id":3879,"issue_id":"lettatoolsselector-0vvt5","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T18:48:53Z"}]}
{"id":"lettatoolsselector-0wuap","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:18.684791118Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:18.684791118Z","comments":[{"id":2100,"issue_id":"lettatoolsselector-0wuap","author":"root","text":"Synced from Beads: lettatoolsselector-2e52\n\n\n\n---\nHuly Issue: LTSEL-251","created_at":"2026-01-02T03:30:18Z"}]}
{"id":"lettatoolsselector-0x5m","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:12.84881895Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:13.350073778Z","closed_at":"2026-01-02T02:35:13.350073778Z","close_reason":"Closed","comments":[{"id":1341,"issue_id":"lettatoolsselector-0x5m","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T02:35:13Z"}]}
{"id":"lettatoolsselector-0x87","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:30.958968087Z","updated_at":"2025-12-30T01:47:23.309104317Z","comments":[{"id":953,"issue_id":"lettatoolsselector-0x87","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-84","created_at":"2025-12-29T21:14:31Z"}]}
{"id":"lettatoolsselector-0x91z","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:02:31.210740515Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:31.706458408Z","closed_at":"2026-01-02T12:02:31.706458408Z","close_reason":"Closed"}
{"id":"lettatoolsselector-0xr1p","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:54:36.680156954Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:54:37.308352347Z","closed_at":"2026-01-02T17:54:37.308352347Z","close_reason":"Closed","comments":[{"id":3806,"issue_id":"lettatoolsselector-0xr1p","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T17:54:37Z"}]}
{"id":"lettatoolsselector-0xu29","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:50:53.162326859Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:50:53.869259209Z","closed_at":"2026-01-02T21:50:53.869259209Z","close_reason":"Closed","comments":[{"id":4270,"issue_id":"lettatoolsselector-0xu29","author":"root","text":"Synced from Huly: LTSEL-234","created_at":"2026-01-02T21:50:53Z"}]}
{"id":"lettatoolsselector-0xvwi","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:51:05.347076659Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:51:05.920738472Z","closed_at":"2026-01-02T15:51:05.920738472Z","close_reason":"Closed","comments":[{"id":3619,"issue_id":"lettatoolsselector-0xvwi","author":"root","text":"Synced from Huly: LTSEL-53","created_at":"2026-01-02T15:51:05Z"}]}
{"id":"lettatoolsselector-0y6vn","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:10.457716557Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:10.92174131Z","closed_at":"2026-01-02T04:20:10.92174131Z","close_reason":"Closed","comments":[{"id":2364,"issue_id":"lettatoolsselector-0y6vn","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T04:20:10Z"}]}
{"id":"lettatoolsselector-0yha2","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:23.68295607Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:24.520315822Z","closed_at":"2026-01-02T22:39:24.520315822Z","close_reason":"Closed","comments":[{"id":4342,"issue_id":"lettatoolsselector-0yha2","author":"root","text":"Synced from Huly: LTSEL-43","created_at":"2026-01-02T22:39:24Z"}]}
{"id":"lettatoolsselector-10f29","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:45.617375486Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:46.203493594Z","closed_at":"2026-01-02T10:57:46.203493594Z","close_reason":"Closed","comments":[{"id":3118,"issue_id":"lettatoolsselector-10f29","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T10:57:45Z"}]}
{"id":"lettatoolsselector-10w4z","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:56:45.32947433Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:45.935518318Z","closed_at":"2026-01-02T08:56:45.935518318Z","close_reason":"Closed","comments":[{"id":2910,"issue_id":"lettatoolsselector-10w4z","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T08:56:45Z"}]}
{"id":"lettatoolsselector-119t","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:58.193232705Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:58.64297088Z","closed_at":"2026-01-02T02:20:58.64297088Z","close_reason":"Closed","comments":[{"id":1317,"issue_id":"lettatoolsselector-119t","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T02:20:58Z"}]}
{"id":"lettatoolsselector-11qln","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:44:02.493563077Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:44:03.134236048Z","closed_at":"2026-01-02T22:44:03.134236048Z","close_reason":"Closed","comments":[{"id":4364,"issue_id":"lettatoolsselector-11qln","author":"root","text":"Synced from Huly: LTSEL-234","created_at":"2026-01-02T22:44:02Z"}]}
{"id":"lettatoolsselector-12uh","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:20:27.306919481Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:27.651197395Z","closed_at":"2026-01-02T02:20:27.651197395Z","close_reason":"Closed","comments":[{"id":1303,"issue_id":"lettatoolsselector-12uh","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T02:20:27Z"}]}
{"id":"lettatoolsselector-12xa3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:48.241685125Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:48.241685125Z","comments":[{"id":1812,"issue_id":"lettatoolsselector-12xa3","author":"root","text":"Synced from Beads: lettatoolsselector-t2xl\n\n---\nHuly Issue: LTSEL-552","created_at":"2026-01-02T03:27:48Z"}]}
{"id":"lettatoolsselector-133ow","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:19.121212323Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:19.121212323Z","comments":[{"id":2101,"issue_id":"lettatoolsselector-133ow","author":"root","text":"Synced from Beads: lettatoolsselector-kwbu\n\n\n\n---\nHuly Issue: LTSEL-251","created_at":"2026-01-02T03:30:19Z"}]}
{"id":"lettatoolsselector-13r58","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:59.077053534Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:59.531400486Z","closed_at":"2026-01-02T05:59:59.531400486Z","close_reason":"Closed","comments":[{"id":2516,"issue_id":"lettatoolsselector-13r58","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T05:59:59Z"}]}
{"id":"lettatoolsselector-13zr0","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:19.091673017Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:19.76589667Z","closed_at":"2026-01-02T19:38:19.76589667Z","close_reason":"Closed","comments":[{"id":3972,"issue_id":"lettatoolsselector-13zr0","author":"root","text":"Synced from Huly: LTSEL-45","created_at":"2026-01-02T19:38:19Z"}]}
{"id":"lettatoolsselector-13zz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:26:09.795013941Z","updated_at":"2025-12-30T02:00:35.248139906Z","comments":[{"id":1036,"issue_id":"lettatoolsselector-13zz","author":"root","text":"Synced from Beads: lettatoolsselector-4dj\n\n---\nHuly Issue: LTSEL-68","created_at":"2025-12-29T21:26:10Z"}]}
{"id":"lettatoolsselector-140","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:06:00.24394217Z","updated_at":"2025-12-29T21:33:44.905798434Z","closed_at":"2025-12-29T21:33:44.905798434Z","close_reason":"Duplicate","comments":[{"id":278,"issue_id":"lettatoolsselector-140","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T20:06:00Z"}]}
{"id":"lettatoolsselector-145t0","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:35.401976959Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:35.993445197Z","closed_at":"2026-01-02T08:02:35.993445197Z","close_reason":"Closed","comments":[{"id":2809,"issue_id":"lettatoolsselector-145t0","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T08:02:35Z"}]}
{"id":"lettatoolsselector-146mx","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:26:53.521501566Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:26:54.116204515Z","closed_at":"2026-01-02T18:26:54.116204515Z","close_reason":"Closed","comments":[{"id":3847,"issue_id":"lettatoolsselector-146mx","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T18:26:53Z"}]}
{"id":"lettatoolsselector-147qj","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:00:19.123591Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:19.439075102Z","closed_at":"2026-01-02T06:00:19.439075102Z","close_reason":"Closed"}
{"id":"lettatoolsselector-14aq0","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:58:46.600800686Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:47.148850585Z","closed_at":"2026-01-02T09:58:47.148850585Z","close_reason":"Closed","comments":[{"id":3067,"issue_id":"lettatoolsselector-14aq0","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T09:58:46Z"}]}
{"id":"lettatoolsselector-14s","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:03.941511875Z","updated_at":"2025-12-23T03:23:04.323825275Z","closed_at":"2025-12-23T03:23:04.323825275Z","close_reason":"Closed","comments":[{"id":26,"issue_id":"lettatoolsselector-14s","author":"node","text":"## Problem\n\nWebhook receiver has its own tool management code that will drift from the SDK.\n\n## Solution\n\nReplace local implementations with SDK imports.\n\n## Acceptance Criteria\n\n- [ ] Add  to \n- [ ] Replace  functions with SDK imports\n- [ ] Replace  API calls with SDK helpers\n- [ ] All existing tests still pass\n- [ ] No functional changes to webhook behavior\n\n## Technical Notes\n\n- This is a refactor, not a feature change\n- May need to keep some webhook-specific wrappers\n\n---\nHuly Issue: LTSEL-5","created_at":"2025-12-23T03:23:04Z"}]}
{"id":"lettatoolsselector-161qe","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:52.17887076Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:52.650100398Z","closed_at":"2026-01-02T05:40:52.650100398Z","close_reason":"Closed","comments":[{"id":2469,"issue_id":"lettatoolsselector-161qe","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T05:40:52Z"}]}
{"id":"lettatoolsselector-163pr","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:48:58.268371368Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:48:58.912182217Z","closed_at":"2026-01-02T18:48:58.912182217Z","close_reason":"Closed","comments":[{"id":3881,"issue_id":"lettatoolsselector-163pr","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T18:48:58Z"}]}
{"id":"lettatoolsselector-16v9a","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:36.41444612Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:36.928739766Z","closed_at":"2026-01-02T07:42:36.928739766Z","close_reason":"Closed","comments":[{"id":2754,"issue_id":"lettatoolsselector-16v9a","author":"root","text":"Synced from Huly: LTSEL-28","created_at":"2026-01-02T07:42:36Z"}]}
{"id":"lettatoolsselector-17brw","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T11:34:22.419565399Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:22.970081926Z","closed_at":"2026-01-02T11:34:22.970081926Z","close_reason":"Closed","comments":[{"id":3228,"issue_id":"lettatoolsselector-17brw","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T11:34:22Z"}]}
{"id":"lettatoolsselector-17hm9","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:47:50.940357871Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:47:51.570850246Z","closed_at":"2026-01-02T15:47:51.570850246Z","close_reason":"Closed","comments":[{"id":3609,"issue_id":"lettatoolsselector-17hm9","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T15:47:51Z"}]}
{"id":"lettatoolsselector-185c6","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:55:44.193790703Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:55:44.944849392Z","closed_at":"2026-01-02T21:55:44.944849392Z","close_reason":"Closed","comments":[{"id":4282,"issue_id":"lettatoolsselector-185c6","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T21:55:44Z"}]}
{"id":"lettatoolsselector-18frb","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:54:36.232720082Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:54:36.62884367Z","closed_at":"2026-01-02T18:54:36.62884367Z","close_reason":"Closed"}
{"id":"lettatoolsselector-18ii8","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:48.163227233Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:48.590370969Z","closed_at":"2026-01-02T04:20:48.590370969Z","close_reason":"Closed","comments":[{"id":2387,"issue_id":"lettatoolsselector-18ii8","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T04:20:48Z"}]}
{"id":"lettatoolsselector-18ofu","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:40.859239219Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:41.349036293Z","closed_at":"2026-01-02T07:02:41.349036293Z","close_reason":"Closed","comments":[{"id":2661,"issue_id":"lettatoolsselector-18ofu","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T07:02:41Z"}]}
{"id":"lettatoolsselector-18qfx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:42.920347159Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:42.920347159Z","comments":[{"id":1800,"issue_id":"lettatoolsselector-18qfx","author":"root","text":"Synced from Beads: lettatoolsselector-718i\n\n---\nHuly Issue: LTSEL-573","created_at":"2026-01-02T03:27:43Z"}]}
{"id":"lettatoolsselector-18uc7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:48.502873435Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:48.502873435Z","comments":[{"id":2211,"issue_id":"lettatoolsselector-18uc7","author":"root","text":"Synced from Beads: lettatoolsselector-a97e\n\n---\nHuly Issue: LTSEL-630","created_at":"2026-01-02T03:43:48Z"}]}
{"id":"lettatoolsselector-19c","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:28.355127429Z","updated_at":"2025-12-29T18:56:30.045132541Z","closed_at":"2025-12-29T18:56:30.045132541Z","close_reason":"Duplicate of lettatoolsselector-vc5 (API contract test)","comments":[{"id":15,"issue_id":"lettatoolsselector-19c","author":"node","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2025-12-22T23:46:28Z"}]}
{"id":"lettatoolsselector-19fbk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:30.528229871Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:30.528229871Z","comments":[{"id":1771,"issue_id":"lettatoolsselector-19fbk","author":"root","text":"Synced from Beads: lettatoolsselector-icvf\n\n---\nHuly Issue: LTSEL-607","created_at":"2026-01-02T03:27:30Z"}]}
{"id":"lettatoolsselector-19msf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:27.947530168Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:27.947530168Z","comments":[{"id":2031,"issue_id":"lettatoolsselector-19msf","author":"root","text":"Synced from Beads: lettatoolsselector-4wnv\n\n---\nHuly Issue: LTSEL-284","created_at":"2026-01-02T03:29:28Z"}]}
{"id":"lettatoolsselector-1a9wj","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:31:01.811727265Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:02.243332402Z","closed_at":"2026-01-02T03:31:02.243332402Z","close_reason":"Closed","comments":[{"id":2121,"issue_id":"lettatoolsselector-1a9wj","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T03:31:02Z"}]}
{"id":"lettatoolsselector-1ai9d","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:48.415236013Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:49.227307736Z","closed_at":"2026-01-02T22:39:49.227307736Z","close_reason":"Closed","comments":[{"id":4349,"issue_id":"lettatoolsselector-1ai9d","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T22:39:48Z"}]}
{"id":"lettatoolsselector-1ar9n","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:27:31.188914105Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:27:31.795349071Z","closed_at":"2026-01-02T15:27:31.795349071Z","close_reason":"Closed","comments":[{"id":3581,"issue_id":"lettatoolsselector-1ar9n","author":"root","text":"Synced from Huly: LTSEL-236","created_at":"2026-01-02T15:27:31Z"}]}
{"id":"lettatoolsselector-1b8np","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:28.212473213Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:28.212473213Z","comments":[{"id":2273,"issue_id":"lettatoolsselector-1b8np","author":"root","text":"Synced from Huly: LTSEL-393","created_at":"2026-01-02T03:45:28Z"}]}
{"id":"lettatoolsselector-1cif0","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T12:02:27.398391782Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:27.971472258Z","closed_at":"2026-01-02T12:02:27.971472258Z","close_reason":"Closed","comments":[{"id":3280,"issue_id":"lettatoolsselector-1cif0","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T12:02:27Z"}]}
{"id":"lettatoolsselector-1d2nu","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:08.52402079Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:08.52402079Z","comments":[{"id":2172,"issue_id":"lettatoolsselector-1d2nu","author":"root","text":"Synced from Beads: lettatoolsselector-ylpz\n\n---\nHuly Issue: LTSEL-771","created_at":"2026-01-02T03:43:08Z"}]}
{"id":"lettatoolsselector-1d5n4","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:54:33.196260052Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:54:35.241443897Z","closed_at":"2026-01-02T21:54:35.241443897Z","close_reason":"Closed","comments":[{"id":4275,"issue_id":"lettatoolsselector-1d5n4","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T21:54:34Z"}]}
{"id":"lettatoolsselector-1dm6p","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:35.366649512Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:35.83475315Z","closed_at":"2026-01-02T07:42:35.83475315Z","close_reason":"Closed","comments":[{"id":2753,"issue_id":"lettatoolsselector-1dm6p","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T07:42:35Z"}]}
{"id":"lettatoolsselector-1dwwj","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:54:55.820765442Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:54:56.236585106Z","closed_at":"2026-01-02T21:54:56.236585106Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1et7","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:26.325573823Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:26.645796989Z","closed_at":"2026-01-02T01:08:26.645796989Z","close_reason":"Closed","comments":[{"id":1182,"issue_id":"lettatoolsselector-1et7","author":"root","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2026-01-02T01:08:26Z"}]}
{"id":"lettatoolsselector-1exyy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:54.546615548Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:54.546615548Z","comments":[{"id":1962,"issue_id":"lettatoolsselector-1exyy","author":"root","text":"Synced from Beads: lettatoolsselector-rpq1\n\n---\nHuly Issue: LTSEL-357","created_at":"2026-01-02T03:28:54Z"}]}
{"id":"lettatoolsselector-1f05w","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:58:33.141541307Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:33.747958599Z","closed_at":"2026-01-02T14:58:33.747958599Z","close_reason":"Closed","comments":[{"id":3508,"issue_id":"lettatoolsselector-1f05w","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T14:58:33Z"}]}
{"id":"lettatoolsselector-1f1mi","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:04.579037766Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:05.00860047Z","closed_at":"2026-01-02T04:39:05.00860047Z","close_reason":"Closed","comments":[{"id":2404,"issue_id":"lettatoolsselector-1f1mi","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T04:39:04Z"}]}
{"id":"lettatoolsselector-1fxa7","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:02:39.380970531Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:02:41.329433687Z","closed_at":"2026-01-02T21:02:41.329433687Z","close_reason":"Closed","comments":[{"id":4185,"issue_id":"lettatoolsselector-1fxa7","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T21:02:41Z"}]}
{"id":"lettatoolsselector-1g7pd","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:35:57.063250735Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:35:57.453206431Z","closed_at":"2026-01-02T11:35:57.453206431Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1gb2l","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:20:23.416898599Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:23.866753429Z","closed_at":"2026-01-02T04:20:23.866753429Z","close_reason":"Closed","comments":[{"id":2379,"issue_id":"lettatoolsselector-1gb2l","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T04:20:23Z"}]}
{"id":"lettatoolsselector-1gnox","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:57.99602194Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:57.99602194Z","comments":[{"id":1969,"issue_id":"lettatoolsselector-1gnox","author":"root","text":"Synced from Beads: lettatoolsselector-9zt8\n\n---\nHuly Issue: LTSEL-348","created_at":"2026-01-02T03:28:58Z"}]}
{"id":"lettatoolsselector-1gvda","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:54.082054272Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:54.082054272Z","comments":[{"id":1961,"issue_id":"lettatoolsselector-1gvda","author":"root","text":"Synced from Beads: lettatoolsselector-d3de\n\n---\nHuly Issue: LTSEL-358","created_at":"2026-01-02T03:28:54Z"}]}
{"id":"lettatoolsselector-1h9m1","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:00.888907769Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:01.461307264Z","closed_at":"2026-01-02T08:02:01.461307264Z","close_reason":"Closed","comments":[{"id":2795,"issue_id":"lettatoolsselector-1h9m1","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T08:02:01Z"}]}
{"id":"lettatoolsselector-1hd3r","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:24:48.559657537Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:24:48.959102294Z","closed_at":"2026-01-02T19:24:48.959102294Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1i0zn","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:59.314730842Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:59.92210517Z","closed_at":"2026-01-02T03:30:59.92210517Z","close_reason":"Closed","comments":[{"id":2119,"issue_id":"lettatoolsselector-1i0zn","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T03:30:59Z"}]}
{"id":"lettatoolsselector-1i3j","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:20:33.990936464Z","updated_at":"2025-12-30T01:56:22.162522369Z","comments":[{"id":1006,"issue_id":"lettatoolsselector-1i3j","author":"root","text":"Synced from Beads: lettatoolsselector-5na\n\n---\nHuly Issue: LTSEL-82","created_at":"2025-12-29T21:20:34Z"}]}
{"id":"lettatoolsselector-1i4o4","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:31:00.314196138Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:00.73911262Z","closed_at":"2026-01-02T03:31:00.73911262Z","close_reason":"Closed","comments":[{"id":2120,"issue_id":"lettatoolsselector-1i4o4","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T03:31:00Z"}]}
{"id":"lettatoolsselector-1jkd","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:12.290018917Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:12.654104546Z","closed_at":"2026-01-02T02:35:12.654104546Z","close_reason":"Closed","comments":[{"id":1340,"issue_id":"lettatoolsselector-1jkd","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T02:35:12Z"}]}
{"id":"lettatoolsselector-1jo1c","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:22.445205042Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:23.022066293Z","closed_at":"2026-01-02T15:46:23.022066293Z","close_reason":"Closed","comments":[{"id":3600,"issue_id":"lettatoolsselector-1jo1c","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T15:46:22Z"}]}
{"id":"lettatoolsselector-1jpff","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:58:01.259777999Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:01.836605785Z","closed_at":"2026-01-02T14:58:01.836605785Z","close_reason":"Closed","comments":[{"id":3500,"issue_id":"lettatoolsselector-1jpff","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T14:58:01Z"}]}
{"id":"lettatoolsselector-1jsz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:33.427051502Z","updated_at":"2025-12-30T01:48:18.850260578Z","comments":[{"id":956,"issue_id":"lettatoolsselector-1jsz","author":"root","text":"Synced from Beads: lettatoolsselector-w50\n\n---\nHuly Issue: LTSEL-97","created_at":"2025-12-29T21:14:33Z"}]}
{"id":"lettatoolsselector-1jt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:56:23.834094584Z","updated_at":"2025-12-29T21:33:45.206406276Z","closed_at":"2025-12-29T21:33:45.206406276Z","close_reason":"Duplicate","comments":[{"id":262,"issue_id":"lettatoolsselector-1jt","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T19:56:24Z"}]}
{"id":"lettatoolsselector-1k50p","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:08:55.715608234Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:08:56.251573883Z","closed_at":"2026-01-02T14:08:56.251573883Z","close_reason":"Closed","comments":[{"id":3416,"issue_id":"lettatoolsselector-1k50p","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T14:08:56Z"}]}
{"id":"lettatoolsselector-1kat5","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:59:37.436555133Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:59:37.816435276Z","closed_at":"2026-01-02T14:59:37.816435276Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1ko8","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:30.882427971Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:31.235387317Z","closed_at":"2026-01-02T02:35:31.235387317Z","close_reason":"Closed","comments":[{"id":1361,"issue_id":"lettatoolsselector-1ko8","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T02:35:31Z"}]}
{"id":"lettatoolsselector-1l5av","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:22.786611558Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:23.431299827Z","closed_at":"2026-01-02T17:50:23.431299827Z","close_reason":"Closed","comments":[{"id":3780,"issue_id":"lettatoolsselector-1l5av","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T17:50:23Z"}]}
{"id":"lettatoolsselector-1lqk","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:47:21.616892862Z","updated_at":"2025-12-29T21:33:22.680853543Z","closed_at":"2025-12-29T21:33:22.680853543Z","close_reason":"Duplicate","comments":[{"id":695,"issue_id":"lettatoolsselector-1lqk","author":"root","text":"Synced from Beads: lettatoolsselector-6p9\n\n---\nHuly Issue: LTSEL-148","created_at":"2025-12-29T20:47:21Z"}]}
{"id":"lettatoolsselector-1lrx","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:29.728656994Z","updated_at":"2025-12-29T21:33:42.462747168Z","closed_at":"2025-12-29T21:33:42.462747168Z","close_reason":"Duplicate","comments":[{"id":537,"issue_id":"lettatoolsselector-1lrx","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:29:30Z"}]}
{"id":"lettatoolsselector-1ma0b","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:57:27.266036795Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:27.785864403Z","closed_at":"2026-01-02T08:57:27.785864403Z","close_reason":"Closed","comments":[{"id":2922,"issue_id":"lettatoolsselector-1ma0b","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T08:57:27Z"}]}
{"id":"lettatoolsselector-1mhs","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:08:37.450743725Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:37.766345394Z","closed_at":"2026-01-02T01:08:37.766345394Z","close_reason":"Closed","comments":[{"id":1198,"issue_id":"lettatoolsselector-1mhs","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T01:08:37Z"}]}
{"id":"lettatoolsselector-1mocs","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:02.300891473Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:02.866272338Z","closed_at":"2026-01-02T13:36:02.866272338Z","close_reason":"Closed","comments":[{"id":3348,"issue_id":"lettatoolsselector-1mocs","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T13:36:02Z"}]}
{"id":"lettatoolsselector-1mojy","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:37.198722242Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:37.477998753Z","closed_at":"2026-01-02T03:30:37.477998753Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1n6g","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:05:07.018846563Z","updated_at":"2025-12-30T04:11:56.227848393Z","comments":[{"id":861,"issue_id":"lettatoolsselector-1n6g","author":"root","text":"Synced from Beads: lettatoolsselector-h52\n\n---\nHuly Issue: LTSEL-118","created_at":"2025-12-29T21:05:07Z"}]}
{"id":"lettatoolsselector-1ni8","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:55.506817444Z","updated_at":"2025-12-29T21:33:27.136644788Z","closed_at":"2025-12-29T21:33:27.136644788Z","close_reason":"Duplicate","comments":[{"id":490,"issue_id":"lettatoolsselector-1ni8","author":"root","text":"Synced from Beads: lettatoolsselector-c33\n\n---\nHuly Issue: LTSEL-172","created_at":"2025-12-29T20:25:55Z"}]}
{"id":"lettatoolsselector-1nigo","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:48.700903041Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:49.291149637Z","closed_at":"2026-01-02T14:57:49.291149637Z","close_reason":"Closed","comments":[{"id":3495,"issue_id":"lettatoolsselector-1nigo","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T14:57:49Z"}]}
{"id":"lettatoolsselector-1nk6x","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:14.039448796Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:14.039448796Z","comments":[{"id":1872,"issue_id":"lettatoolsselector-1nk6x","author":"root","text":"Synced from Beads: lettatoolsselector-zh1i\n\n---\nHuly Issue: LTSEL-478","created_at":"2026-01-02T03:28:14Z"}]}
{"id":"lettatoolsselector-1nqk1","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:03:08.67061942Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:03:09.215099418Z","closed_at":"2026-01-02T12:03:09.215099418Z","close_reason":"Closed","comments":[{"id":3289,"issue_id":"lettatoolsselector-1nqk1","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T12:03:09Z"}]}
{"id":"lettatoolsselector-1nt0","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:26.337055688Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:26.776895107Z","closed_at":"2026-01-02T02:19:26.776895107Z","close_reason":"Closed","comments":[{"id":1273,"issue_id":"lettatoolsselector-1nt0","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T02:19:26Z"}]}
{"id":"lettatoolsselector-1nv67","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:58:39.045771935Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:39.697468008Z","closed_at":"2026-01-02T14:58:39.697468008Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1ny5","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:31:28.298907297Z","updated_at":"2025-12-29T21:33:25.94289577Z","closed_at":"2025-12-29T21:33:25.94289577Z","close_reason":"Duplicate","comments":[{"id":557,"issue_id":"lettatoolsselector-1ny5","author":"root","text":"Synced from Beads: lettatoolsselector-ar6\n\n---\nHuly Issue: LTSEL-162","created_at":"2025-12-29T20:31:28Z"}]}
{"id":"lettatoolsselector-1o45c","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:09:33.875749721Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:34.272779292Z","closed_at":"2026-01-02T14:09:34.272779292Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1o6","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:50:48.802458764Z","updated_at":"2025-12-29T21:33:45.719112906Z","closed_at":"2025-12-29T21:33:45.719112906Z","close_reason":"Duplicate","comments":[{"id":244,"issue_id":"lettatoolsselector-1o6","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T19:50:49Z"}]}
{"id":"lettatoolsselector-1om7m","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:22.967816681Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:23.503146736Z","closed_at":"2026-01-02T09:40:23.503146736Z","close_reason":"Closed","comments":[{"id":2994,"issue_id":"lettatoolsselector-1om7m","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T09:40:23Z"}]}
{"id":"lettatoolsselector-1os4","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:00.936007202Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:01.269681349Z","closed_at":"2026-01-02T01:25:01.269681349Z","close_reason":"Closed","comments":[{"id":1237,"issue_id":"lettatoolsselector-1os4","author":"root","text":"Synced from Beads: lettatoolsselector-sxk\n\n---\nHuly Issue: LTSEL-30","created_at":"2026-01-02T01:25:01Z"}]}
{"id":"lettatoolsselector-1ozxo","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:49:54.531262761Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:49:55.208556778Z","closed_at":"2026-01-02T23:49:55.208556778Z","close_reason":"Closed","comments":[{"id":4391,"issue_id":"lettatoolsselector-1ozxo","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T23:49:54Z"}]}
{"id":"lettatoolsselector-1p3do","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:46.111317521Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:46.568912697Z","closed_at":"2026-01-02T05:40:46.568912697Z","close_reason":"Closed","comments":[{"id":2461,"issue_id":"lettatoolsselector-1p3do","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T05:40:46Z"}]}
{"id":"lettatoolsselector-1p9or","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:30.278051304Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:30.746422785Z","closed_at":"2026-01-02T06:37:30.746422785Z","close_reason":"Closed","comments":[{"id":2642,"issue_id":"lettatoolsselector-1p9or","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T06:37:30Z"}]}
{"id":"lettatoolsselector-1ppe3","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:15.35874928Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:15.781455517Z","closed_at":"2026-01-02T04:20:15.781455517Z","close_reason":"Closed","comments":[{"id":2370,"issue_id":"lettatoolsselector-1ppe3","author":"root","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2026-01-02T04:20:15Z"}]}
{"id":"lettatoolsselector-1q8bm","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:51:37.051700669Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:51:37.701406771Z","closed_at":"2026-01-02T15:51:37.701406771Z","close_reason":"Closed","comments":[{"id":3625,"issue_id":"lettatoolsselector-1q8bm","author":"root","text":"Synced from Huly: LTSEL-49","created_at":"2026-01-02T15:51:37Z"}]}
{"id":"lettatoolsselector-1qbz4","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:09:28.737774404Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:29.288744124Z","closed_at":"2026-01-02T14:09:29.288744124Z","close_reason":"Closed","comments":[{"id":3421,"issue_id":"lettatoolsselector-1qbz4","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T14:09:29Z"}]}
{"id":"lettatoolsselector-1qikf","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:04:02.437156323Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:04:03.021940444Z","closed_at":"2026-01-02T08:04:03.021940444Z","close_reason":"Closed","comments":[{"id":2830,"issue_id":"lettatoolsselector-1qikf","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T08:04:02Z"}]}
{"id":"lettatoolsselector-1qpvi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:23.407215449Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:23.407215449Z","comments":[{"id":1893,"issue_id":"lettatoolsselector-1qpvi","author":"root","text":"Synced from Beads: lettatoolsselector-jxct\n\n---\nHuly Issue: LTSEL-446","created_at":"2026-01-02T03:28:23Z"}]}
{"id":"lettatoolsselector-1r6fz","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:44:31.472284884Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:44:31.988377129Z","closed_at":"2026-01-02T09:44:31.988377129Z","close_reason":"Closed","comments":[{"id":3020,"issue_id":"lettatoolsselector-1r6fz","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T09:44:31Z"}]}
{"id":"lettatoolsselector-1rdxb","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:00:46.0150079Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:00:46.579614376Z","closed_at":"2026-01-02T12:00:46.579614376Z","close_reason":"Closed","comments":[{"id":3274,"issue_id":"lettatoolsselector-1rdxb","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T12:00:46Z"}]}
{"id":"lettatoolsselector-1ruqz","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:58:44.698347616Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:58:45.2318848Z","closed_at":"2026-01-02T11:58:45.2318848Z","close_reason":"Closed","comments":[{"id":3253,"issue_id":"lettatoolsselector-1ruqz","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T11:58:45Z"}]}
{"id":"lettatoolsselector-1sa2a","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:55:54.407345367Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:55:55.16101515Z","closed_at":"2026-01-02T09:55:55.16101515Z","close_reason":"Closed","comments":[{"id":3044,"issue_id":"lettatoolsselector-1sa2a","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T09:55:54Z"}]}
{"id":"lettatoolsselector-1sih4","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:19:59.667235635Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:00.129305775Z","closed_at":"2026-01-02T04:20:00.129305775Z","close_reason":"Closed","comments":[{"id":2350,"issue_id":"lettatoolsselector-1sih4","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T04:19:59Z"}]}
{"id":"lettatoolsselector-1te8w","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:07.28443548Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:07.802923792Z","closed_at":"2026-01-02T10:36:07.802923792Z","close_reason":"Closed","comments":[{"id":3082,"issue_id":"lettatoolsselector-1te8w","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T10:36:07Z"}]}
{"id":"lettatoolsselector-1u7lc","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:29:00.22096438Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:29:00.834253924Z","closed_at":"2026-01-02T19:29:00.834253924Z","close_reason":"Closed","comments":[{"id":3964,"issue_id":"lettatoolsselector-1u7lc","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T19:29:00Z"}]}
{"id":"lettatoolsselector-1u9ef","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:03:02.955387323Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:03.284707473Z","closed_at":"2026-01-02T07:03:03.284707473Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1ub1f","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:51.750113726Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:52.258637069Z","closed_at":"2026-01-02T10:57:52.258637069Z","close_reason":"Closed","comments":[{"id":3123,"issue_id":"lettatoolsselector-1ub1f","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T10:57:52Z"}]}
{"id":"lettatoolsselector-1ukl","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:06.57508542Z","updated_at":"2025-12-29T21:33:29.852517093Z","closed_at":"2025-12-29T21:33:29.852517093Z","close_reason":"Duplicate","comments":[{"id":376,"issue_id":"lettatoolsselector-1ukl","author":"root","text":"Synced from Beads: lettatoolsselector-mfj\n\n---\nHuly Issue: LTSEL-202","created_at":"2025-12-29T20:16:06Z"}]}
{"id":"lettatoolsselector-1ultq","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:45:59.31461132Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:45:59.903309529Z","closed_at":"2026-01-02T15:45:59.903309529Z","close_reason":"Closed","comments":[{"id":3593,"issue_id":"lettatoolsselector-1ultq","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T15:45:59Z"}]}
{"id":"lettatoolsselector-1unh","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:25:18.172224864Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:18.398361753Z","closed_at":"2026-01-02T01:25:18.398361753Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1vb","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:28.451265395Z","updated_at":"2025-12-29T18:56:28.974741759Z","closed_at":"2025-12-29T18:56:28.974741759Z","close_reason":"Duplicate of lettatoolsselector-5l3 (webhook contract test)","comments":[{"id":16,"issue_id":"lettatoolsselector-1vb","author":"node","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2025-12-22T23:46:28Z"}]}
{"id":"lettatoolsselector-1vky4","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:04.543167358Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:05.108810141Z","closed_at":"2026-01-02T08:55:05.108810141Z","close_reason":"Closed","comments":[{"id":2893,"issue_id":"lettatoolsselector-1vky4","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T08:55:04Z"}]}
{"id":"lettatoolsselector-1vrjr","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:04:41.949166738Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:04:42.745764781Z","closed_at":"2026-01-02T21:04:42.745764781Z","close_reason":"Closed","comments":[{"id":4191,"issue_id":"lettatoolsselector-1vrjr","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T21:04:42Z"}]}
{"id":"lettatoolsselector-1vwys","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:19:23.333795738Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:19:23.985139258Z","closed_at":"2026-01-02T20:19:23.985139258Z","close_reason":"Closed","comments":[{"id":4081,"issue_id":"lettatoolsselector-1vwys","author":"root","text":"Synced from Huly: LTSEL-220","created_at":"2026-01-02T20:19:23Z"}]}
{"id":"lettatoolsselector-1w1oo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:52.106253981Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:52.106253981Z","comments":[{"id":1957,"issue_id":"lettatoolsselector-1w1oo","author":"root","text":"Synced from Beads: lettatoolsselector-b5e9\n\n---\nHuly Issue: LTSEL-363","created_at":"2026-01-02T03:28:52Z"}]}
{"id":"lettatoolsselector-1w8ns","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:32.021973163Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:32.021973163Z","comments":[{"id":1913,"issue_id":"lettatoolsselector-1w8ns","author":"root","text":"Synced from Beads: lettatoolsselector-elle\n\n---\nHuly Issue: LTSEL-420","created_at":"2026-01-02T03:28:32Z"}]}
{"id":"lettatoolsselector-1wtia","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:00:26.408541521Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:26.724414722Z","closed_at":"2026-01-02T06:00:26.724414722Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1wxni","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:11.094972022Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:11.662762278Z","closed_at":"2026-01-02T08:55:11.662762278Z","close_reason":"Closed","comments":[{"id":2895,"issue_id":"lettatoolsselector-1wxni","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T08:55:11Z"}]}
{"id":"lettatoolsselector-1xa","title":"[Perf] Add connection wait with timeout to Weaviate pool","description":"## Problem\n`_acquire_connection()` raises exception immediately if no connections available instead of waiting.\n\n**Location:** `weaviate_client_manager.py:408-425`\n\n```python\n# Line 425\nraise Exception(\"No connections available in pool\")\n```\n\n## Impact\n- Under load, requests fail instead of queuing\n- **Priority:** LOW - only affects high concurrency\n\n## Solution\nImplement connection wait with timeout:\n\n```python\nasync def _acquire_connection(self, timeout: float = 5.0) -\u003e WeaviateConnection:\n    \"\"\"Acquire connection with wait timeout.\"\"\"\n    start = time.time()\n    \n    while time.time() - start \u003c timeout:\n        # Try to get available connection\n        for conn in self._pool:\n            if not conn.in_use:\n                conn.in_use = True\n                return conn\n        \n        # Wait briefly before retry\n        await asyncio.sleep(0.05)\n    \n    raise TimeoutError(f\"No connection available after {timeout}s\")\n```\n\n## Acceptance Criteria\n- [ ] Connections wait with configurable timeout\n- [ ] Timeout raises appropriate exception\n- [ ] Metrics for connection wait time\n- [ ] All unit tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T01:51:11.704316045Z","updated_at":"2025-12-29T19:41:48.059663755Z","closed_at":"2025-12-29T19:41:48.059663755Z","close_reason":"Implemented connection wait with timeout using threading.Condition. Added acquire_timeout config (default 5s), wait metrics, and notify on release.","labels":["performance"]}
{"id":"lettatoolsselector-1xd7","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:52.460585733Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:52.805076527Z","closed_at":"2026-01-02T01:24:52.805076527Z","close_reason":"Closed","comments":[{"id":1223,"issue_id":"lettatoolsselector-1xd7","author":"root","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2026-01-02T01:24:52Z"}]}
{"id":"lettatoolsselector-1xtww","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:35.054393876Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:35.054393876Z","comments":[{"id":1920,"issue_id":"lettatoolsselector-1xtww","author":"root","text":"Synced from Beads: lettatoolsselector-vy7v\n\n---\nHuly Issue: LTSEL-410","created_at":"2026-01-02T03:28:35Z"}]}
{"id":"lettatoolsselector-1y3g","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:04.610834317Z","updated_at":"2025-12-30T01:46:28.241253898Z","comments":[{"id":947,"issue_id":"lettatoolsselector-1y3g","author":"root","text":"Synced from Beads: lettatoolsselector-fw6\n\n---\nHuly Issue: LTSEL-70","created_at":"2025-12-29T21:14:05Z"}]}
{"id":"lettatoolsselector-1y97","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:35:24.808761309Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:25.151400722Z","closed_at":"2026-01-02T02:35:25.151400722Z","close_reason":"Closed","comments":[{"id":1354,"issue_id":"lettatoolsselector-1y97","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T02:35:24Z"}]}
{"id":"lettatoolsselector-1yhtx","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:54:55.358933095Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:54:55.735043761Z","closed_at":"2026-01-02T17:54:55.735043761Z","close_reason":"Closed"}
{"id":"lettatoolsselector-1yijo","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:30.617494006Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:31.256578525Z","closed_at":"2026-01-02T08:55:31.256578525Z","close_reason":"Closed","comments":[{"id":2900,"issue_id":"lettatoolsselector-1yijo","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T08:55:30Z"}]}
{"id":"lettatoolsselector-1yltn","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:01.837934794Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:02.275035769Z","closed_at":"2026-01-02T03:47:02.275035769Z","close_reason":"Closed","comments":[{"id":2299,"issue_id":"lettatoolsselector-1yltn","author":"root","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2026-01-02T03:47:02Z"}]}
{"id":"lettatoolsselector-1zkf","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:04.406011235Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:04.814237202Z","closed_at":"2026-01-02T02:20:04.814237202Z","close_reason":"Closed","comments":[{"id":1298,"issue_id":"lettatoolsselector-1zkf","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T02:20:04Z"}]}
{"id":"lettatoolsselector-1zls5","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:51:14.115944921Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:51:14.695220729Z","closed_at":"2026-01-02T17:51:14.695220729Z","close_reason":"Closed","comments":[{"id":3792,"issue_id":"lettatoolsselector-1zls5","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T17:51:14Z"}]}
{"id":"lettatoolsselector-20aey","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:10.760033525Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:10.760033525Z","comments":[{"id":1996,"issue_id":"lettatoolsselector-20aey","author":"root","text":"Synced from Beads: lettatoolsselector-y24v\n\n---\nHuly Issue: LTSEL-320","created_at":"2026-01-02T03:29:10Z"}]}
{"id":"lettatoolsselector-20eij","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:20.646957534Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:20.646957534Z","comments":[{"id":1887,"issue_id":"lettatoolsselector-20eij","author":"root","text":"Synced from Beads: lettatoolsselector-687z\n\n---\nHuly Issue: LTSEL-457","created_at":"2026-01-02T03:28:20Z"}]}
{"id":"lettatoolsselector-218dl","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:23:18.206259586Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:18.580592092Z","closed_at":"2026-01-02T15:23:18.580592092Z","close_reason":"Closed"}
{"id":"lettatoolsselector-22ma4","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:19:36.134596342Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:36.70225808Z","closed_at":"2026-01-02T06:19:36.70225808Z","close_reason":"Closed","comments":[{"id":2597,"issue_id":"lettatoolsselector-22ma4","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T06:19:36Z"}]}
{"id":"lettatoolsselector-22z6x","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:00:02.802118968Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:00:03.398383766Z","closed_at":"2026-01-02T20:00:03.398383766Z","close_reason":"Closed","comments":[{"id":4036,"issue_id":"lettatoolsselector-22z6x","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T20:00:03Z"}]}
{"id":"lettatoolsselector-23h8u","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:56:18.04120823Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:56:18.393785399Z","closed_at":"2026-01-02T09:56:18.393785399Z","close_reason":"Closed"}
{"id":"lettatoolsselector-23psd","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:22:52.508643426Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:22:53.006178564Z","closed_at":"2026-01-02T08:22:53.006178564Z","close_reason":"Closed","comments":[{"id":2874,"issue_id":"lettatoolsselector-23psd","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T08:22:52Z"}]}
{"id":"lettatoolsselector-2490b","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:41:37.753054292Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:38.38926783Z","closed_at":"2026-01-02T20:41:38.38926783Z","close_reason":"Closed","comments":[{"id":4136,"issue_id":"lettatoolsselector-2490b","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T20:41:38Z"}]}
{"id":"lettatoolsselector-24z","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:17.158269365Z","updated_at":"2025-12-29T18:56:27.621840582Z","closed_at":"2025-12-29T18:56:27.621840582Z","close_reason":"Duplicate of lettatoolsselector-2a2 (unit test protected tools)","comments":[{"id":41,"issue_id":"lettatoolsselector-24z","author":"node","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2025-12-23T03:23:17Z"}]}
{"id":"lettatoolsselector-25m1s","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:26:29.425379288Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:26:30.074425062Z","closed_at":"2026-01-02T22:26:30.074425062Z","close_reason":"Closed","comments":[{"id":4331,"issue_id":"lettatoolsselector-25m1s","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T22:26:29Z"}]}
{"id":"lettatoolsselector-25y2k","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:55:20.471749145Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:55:21.119467073Z","closed_at":"2026-01-02T12:55:21.119467073Z","close_reason":"Closed","comments":[{"id":3316,"issue_id":"lettatoolsselector-25y2k","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T12:55:20Z"}]}
{"id":"lettatoolsselector-25yc5","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:53:10.984747192Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:53:11.62520151Z","closed_at":"2026-01-02T17:53:11.62520151Z","close_reason":"Closed","comments":[{"id":3803,"issue_id":"lettatoolsselector-25yc5","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T17:53:11Z"}]}
{"id":"lettatoolsselector-267s4","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:56:49.521518073Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:50.050080306Z","closed_at":"2026-01-02T08:56:50.050080306Z","close_reason":"Closed","comments":[{"id":2912,"issue_id":"lettatoolsselector-267s4","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T08:56:49Z"}]}
{"id":"lettatoolsselector-26eks","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:08.034848927Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:08.562655113Z","closed_at":"2026-01-02T08:55:08.562655113Z","close_reason":"Closed","comments":[{"id":2894,"issue_id":"lettatoolsselector-26eks","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T08:55:08Z"}]}
{"id":"lettatoolsselector-27c0","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:12.010440084Z","updated_at":"2025-12-29T21:33:28.876734732Z","closed_at":"2025-12-29T21:33:28.876734732Z","close_reason":"Duplicate","comments":[{"id":408,"issue_id":"lettatoolsselector-27c0","author":"root","text":"Synced from Beads: lettatoolsselector-0do\n\n---\nHuly Issue: LTSEL-189","created_at":"2025-12-29T20:19:12Z"}]}
{"id":"lettatoolsselector-27shb","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:25.680188545Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:26.112352982Z","closed_at":"2026-01-02T04:39:26.112352982Z","close_reason":"Closed","comments":[{"id":2414,"issue_id":"lettatoolsselector-27shb","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T04:39:25Z"}]}
{"id":"lettatoolsselector-287i2","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:27:34.965834882Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:27:35.754179744Z","closed_at":"2026-01-02T21:27:35.754179744Z","close_reason":"Closed","comments":[{"id":4222,"issue_id":"lettatoolsselector-287i2","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T21:27:35Z"}]}
{"id":"lettatoolsselector-28me9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:59.653549677Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:59.653549677Z","comments":[{"id":1839,"issue_id":"lettatoolsselector-28me9","author":"root","text":"Synced from Beads: lettatoolsselector-ro5q\n\n---\nHuly Issue: LTSEL-513","created_at":"2026-01-02T03:27:59Z"}]}
{"id":"lettatoolsselector-28mpi","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:00:59.265826681Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:00:59.843917913Z","closed_at":"2026-01-02T12:00:59.843917913Z","close_reason":"Closed","comments":[{"id":3277,"issue_id":"lettatoolsselector-28mpi","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T12:00:59Z"}]}
{"id":"lettatoolsselector-28osu","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:49:06.96978058Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:49:07.440761513Z","closed_at":"2026-01-02T21:49:07.440761513Z","close_reason":"Closed"}
{"id":"lettatoolsselector-294a9","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:25:00.647242154Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:25:01.081205544Z","closed_at":"2026-01-02T19:25:01.081205544Z","close_reason":"Closed"}
{"id":"lettatoolsselector-29o8f","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T05:41:00.599976829Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:00.901082988Z","closed_at":"2026-01-02T05:41:00.901082988Z","close_reason":"Closed"}
{"id":"lettatoolsselector-2a1aa","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:20:50.444174824Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:20:51.056113685Z","closed_at":"2026-01-02T20:20:51.056113685Z","close_reason":"Closed","comments":[{"id":4086,"issue_id":"lettatoolsselector-2a1aa","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T20:20:50Z"}]}
{"id":"lettatoolsselector-2a2","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:27:59.540444503Z","updated_at":"2025-12-29T18:05:50.910353848-05:00","closed_at":"2025-12-29T18:05:50.910353848-05:00","close_reason":"ensure_protected_tools function implemented with 9 unit tests","comments":[{"id":50,"issue_id":"lettatoolsselector-2a2","author":"node","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2025-12-23T03:27:59Z"}]}
{"id":"lettatoolsselector-2ap4o","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:20.510098189Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:21.180532336Z","closed_at":"2026-01-02T20:38:21.180532336Z","close_reason":"Closed","comments":[{"id":4112,"issue_id":"lettatoolsselector-2ap4o","author":"root","text":"Synced from Huly: LTSEL-43","created_at":"2026-01-02T20:38:20Z"}]}
{"id":"lettatoolsselector-2ap4z","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:03:18.794210039Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:03:19.399496283Z","closed_at":"2026-01-02T15:03:19.399496283Z","close_reason":"Closed","comments":[{"id":3523,"issue_id":"lettatoolsselector-2ap4z","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T15:03:19Z"}]}
{"id":"lettatoolsselector-2azkj","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:24:12.023858991Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:24:13.911901627Z","closed_at":"2026-01-02T18:24:13.911901627Z","close_reason":"Closed","comments":[{"id":3825,"issue_id":"lettatoolsselector-2azkj","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T18:24:13Z"}]}
{"id":"lettatoolsselector-2b3rc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:25.145248976Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:25.145248976Z","comments":[{"id":1897,"issue_id":"lettatoolsselector-2b3rc","author":"root","text":"Synced from Beads: lettatoolsselector-puew\n\n---\nHuly Issue: LTSEL-441","created_at":"2026-01-02T03:28:25Z"}]}
{"id":"lettatoolsselector-2bq1k","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:29:32.056098605Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:32.744665094Z","closed_at":"2026-01-02T18:29:32.744665094Z","close_reason":"Closed","comments":[{"id":3859,"issue_id":"lettatoolsselector-2bq1k","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T18:29:32Z"}]}
{"id":"lettatoolsselector-2bw3s","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:23:29.639725588Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:23:30.28958055Z","closed_at":"2026-01-02T22:23:30.28958055Z","close_reason":"Closed","comments":[{"id":4323,"issue_id":"lettatoolsselector-2bw3s","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T22:23:30Z"}]}
{"id":"lettatoolsselector-2bwgc","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:53.202545792Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:53.899085643Z","closed_at":"2026-01-02T20:38:53.899085643Z","close_reason":"Closed","comments":[{"id":4121,"issue_id":"lettatoolsselector-2bwgc","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T20:38:53Z"}]}
{"id":"lettatoolsselector-2bxwm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:47.825217932Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:47.825217932Z","comments":[{"id":1811,"issue_id":"lettatoolsselector-2bxwm","author":"root","text":"Synced from Beads: lettatoolsselector-ni61\n\n---\nHuly Issue: LTSEL-555","created_at":"2026-01-02T03:27:48Z"}]}
{"id":"lettatoolsselector-2c6hx","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:11.287099883Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:11.718577638Z","closed_at":"2026-01-02T03:30:11.718577638Z","close_reason":"Closed","comments":[{"id":2095,"issue_id":"lettatoolsselector-2c6hx","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-101","created_at":"2026-01-02T03:30:11Z"}]}
{"id":"lettatoolsselector-2ca3u","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:52:08.080322157Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:52:08.464619975Z","closed_at":"2026-01-02T18:52:08.464619975Z","close_reason":"Closed"}
{"id":"lettatoolsselector-2cjk7","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:04:13.599358709Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:04:14.24640768Z","closed_at":"2026-01-02T12:04:14.24640768Z","close_reason":"Closed","comments":[{"id":3292,"issue_id":"lettatoolsselector-2cjk7","author":"root","text":"Synced from Huly: LTSEL-48","created_at":"2026-01-02T12:04:13Z"}]}
{"id":"lettatoolsselector-2ctfc","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:02:55.354392635Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:56.02120187Z","closed_at":"2026-01-02T07:02:56.02120187Z","close_reason":"Closed","comments":[{"id":2672,"issue_id":"lettatoolsselector-2ctfc","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T07:02:55Z"}]}
{"id":"lettatoolsselector-2cxcs","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:42.565142402Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:42.565142402Z","comments":[{"id":1936,"issue_id":"lettatoolsselector-2cxcs","author":"root","text":"Synced from Beads: lettatoolsselector-8dlw\n\n---\nHuly Issue: LTSEL-389","created_at":"2026-01-02T03:28:42Z"}]}
{"id":"lettatoolsselector-2dhu4","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:59:41.172631828Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:41.522996968Z","closed_at":"2026-01-02T10:59:41.522996968Z","close_reason":"Closed"}
{"id":"lettatoolsselector-2djo3","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:17.237414091Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:17.656041428Z","closed_at":"2026-01-02T03:47:17.656041428Z","close_reason":"Closed","comments":[{"id":2314,"issue_id":"lettatoolsselector-2djo3","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T03:47:17Z"}]}
{"id":"lettatoolsselector-2dq4b","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:03:05.379526967Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:05.889618404Z","closed_at":"2026-01-02T07:03:05.889618404Z","close_reason":"Closed","comments":[{"id":2678,"issue_id":"lettatoolsselector-2dq4b","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T07:03:05Z"}]}
{"id":"lettatoolsselector-2e52","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:07:28.920085192Z","updated_at":"2025-12-30T04:14:15.983076596Z","comments":[{"id":881,"issue_id":"lettatoolsselector-2e52","author":"root","text":"Synced from Beads: lettatoolsselector-mnp\n\n---\nHuly Issue: LTSEL-99","created_at":"2025-12-29T21:07:29Z"}]}
{"id":"lettatoolsselector-2ecy8","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:21:31.554246165Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:31.916430022Z","closed_at":"2026-01-02T09:21:31.916430022Z","close_reason":"Closed"}
{"id":"lettatoolsselector-2ej1h","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:52:42.441815048Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:52:43.090671744Z","closed_at":"2026-01-02T17:52:43.090671744Z","close_reason":"Closed","comments":[{"id":3801,"issue_id":"lettatoolsselector-2ej1h","author":"root","text":"Synced from Huly: LTSEL-222","created_at":"2026-01-02T17:52:42Z"}]}
{"id":"lettatoolsselector-2eo54","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:33:56.194013413Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:33:56.854701591Z","closed_at":"2026-01-02T21:33:56.854701591Z","close_reason":"Closed","comments":[{"id":4235,"issue_id":"lettatoolsselector-2eo54","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T21:33:56Z"}]}
{"id":"lettatoolsselector-2eond","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:30.03276281Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:30.672291378Z","closed_at":"2026-01-02T17:50:30.672291378Z","close_reason":"Closed","comments":[{"id":3782,"issue_id":"lettatoolsselector-2eond","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T17:50:30Z"}]}
{"id":"lettatoolsselector-2ezw1","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:34:07.636235763Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:34:08.079976164Z","closed_at":"2026-01-02T21:34:08.079976164Z","close_reason":"Closed"}
{"id":"lettatoolsselector-2f2xi","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:15:28.600938039Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:15:30.48643389Z","closed_at":"2026-01-02T20:15:30.48643389Z","close_reason":"Closed","comments":[{"id":4059,"issue_id":"lettatoolsselector-2f2xi","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T20:15:30Z"}]}
{"id":"lettatoolsselector-2fcva","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:49:44.243149796Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:49:44.810312183Z","closed_at":"2026-01-02T15:49:44.810312183Z","close_reason":"Closed","comments":[{"id":3612,"issue_id":"lettatoolsselector-2fcva","author":"root","text":"Synced from Huly: LTSEL-245","created_at":"2026-01-02T15:49:44Z"}]}
{"id":"lettatoolsselector-2g32i","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:06:58.234877509Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:06:58.846341871Z","closed_at":"2026-01-02T17:06:58.846341871Z","close_reason":"Closed","comments":[{"id":3719,"issue_id":"lettatoolsselector-2g32i","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T17:06:58Z"}]}
{"id":"lettatoolsselector-2h31","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:08.240230021Z","updated_at":"2025-12-29T21:33:25.201003206Z","closed_at":"2025-12-29T21:33:25.201003206Z","close_reason":"Duplicate","comments":[{"id":587,"issue_id":"lettatoolsselector-2h31","author":"root","text":"Synced from Beads: lettatoolsselector-2bc\n\n---\nHuly Issue: LTSEL-161","created_at":"2025-12-29T20:34:08Z"}]}
{"id":"lettatoolsselector-2hfzu","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:09:09.158432281Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:09.709181651Z","closed_at":"2026-01-02T14:09:09.709181651Z","close_reason":"Closed","comments":[{"id":3420,"issue_id":"lettatoolsselector-2hfzu","author":"root","text":"Synced from Huly: LTSEL-217","created_at":"2026-01-02T14:09:09Z"}]}
{"id":"lettatoolsselector-2hhox","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:58:20.60799887Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:21.204273946Z","closed_at":"2026-01-02T14:58:21.204273946Z","close_reason":"Closed","comments":[{"id":3507,"issue_id":"lettatoolsselector-2hhox","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T14:58:20Z"}]}
{"id":"lettatoolsselector-2ho6t","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T11:11:11.277251585Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:11.829841491Z","closed_at":"2026-01-02T11:11:11.829841491Z","close_reason":"Closed","comments":[{"id":3189,"issue_id":"lettatoolsselector-2ho6t","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T11:11:11Z"}]}
{"id":"lettatoolsselector-2iaog","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:23:26.308500123Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:23:27.00632613Z","closed_at":"2026-01-02T22:23:27.00632613Z","close_reason":"Closed","comments":[{"id":4322,"issue_id":"lettatoolsselector-2iaog","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T22:23:26Z"}]}
{"id":"lettatoolsselector-2j72","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:18:36.498358717Z","updated_at":"2025-12-30T04:12:13.661004091Z","comments":[{"id":993,"issue_id":"lettatoolsselector-2j72","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-85","created_at":"2025-12-29T21:18:36Z"}]}
{"id":"lettatoolsselector-2jgpx","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:50:59.431779769Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:00.071849292Z","closed_at":"2026-01-02T18:51:00.071849292Z","close_reason":"Closed","comments":[{"id":3893,"issue_id":"lettatoolsselector-2jgpx","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T18:50:59Z"}]}
{"id":"lettatoolsselector-2k8l","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:22.097731353Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:22.460015129Z","closed_at":"2026-01-02T02:35:22.460015129Z","close_reason":"Closed","comments":[{"id":1353,"issue_id":"lettatoolsselector-2k8l","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T02:35:22Z"}]}
{"id":"lettatoolsselector-2kjhb","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:21:02.201701839Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:02.75969002Z","closed_at":"2026-01-02T15:21:02.75969002Z","close_reason":"Closed","comments":[{"id":3550,"issue_id":"lettatoolsselector-2kjhb","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T15:21:02Z"}]}
{"id":"lettatoolsselector-2lbf","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:06.531863219Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:06.87116281Z","closed_at":"2026-01-02T02:19:06.87116281Z","close_reason":"Closed","comments":[{"id":1268,"issue_id":"lettatoolsselector-2lbf","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T02:19:06Z"}]}
{"id":"lettatoolsselector-2lkkh","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:32:35.220566256Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:32:35.907076048Z","closed_at":"2026-01-02T14:32:35.907076048Z","close_reason":"Closed","comments":[{"id":3467,"issue_id":"lettatoolsselector-2lkkh","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T14:32:35Z"}]}
{"id":"lettatoolsselector-2lms","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:15:55.069290504Z","updated_at":"2025-12-30T01:50:57.511123168Z","comments":[{"id":970,"issue_id":"lettatoolsselector-2lms","author":"root","text":"Synced from Beads: lettatoolsselector-th4\n\n---\nHuly Issue: LTSEL-94","created_at":"2025-12-29T21:15:55Z"}]}
{"id":"lettatoolsselector-2lnf","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:08:48.062642242Z","updated_at":"2025-12-30T04:14:19.02061337Z","comments":[{"id":895,"issue_id":"lettatoolsselector-2lnf","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T21:08:48Z"}]}
{"id":"lettatoolsselector-2lsww","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:21:51.427331857Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:52.021982877Z","closed_at":"2026-01-02T09:21:52.021982877Z","close_reason":"Closed","comments":[{"id":2958,"issue_id":"lettatoolsselector-2lsww","author":"root","text":"Synced from Huly: LTSEL-245","created_at":"2026-01-02T09:21:51Z"}]}
{"id":"lettatoolsselector-2mj6q","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:42.190768385Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:42.750268908Z","closed_at":"2026-01-02T14:57:42.750268908Z","close_reason":"Closed","comments":[{"id":3493,"issue_id":"lettatoolsselector-2mj6q","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T14:57:42Z"}]}
{"id":"lettatoolsselector-2n75e","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:48.979615241Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:48.979615241Z","comments":[{"id":1950,"issue_id":"lettatoolsselector-2n75e","author":"root","text":"Synced from Beads: lettatoolsselector-d667\n\n---\nHuly Issue: LTSEL-371","created_at":"2026-01-02T03:28:49Z"}]}
{"id":"lettatoolsselector-2nlg","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:56.24600428Z","updated_at":"2025-12-29T21:33:43.815225091Z","closed_at":"2025-12-29T21:33:43.815225091Z","close_reason":"Duplicate","comments":[{"id":427,"issue_id":"lettatoolsselector-2nlg","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:20:56Z"}]}
{"id":"lettatoolsselector-2o3lz","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:01.360894362Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:02.959784019Z","closed_at":"2026-01-02T14:29:02.959784019Z","close_reason":"Closed","comments":[{"id":3437,"issue_id":"lettatoolsselector-2o3lz","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T14:29:02Z"}]}
{"id":"lettatoolsselector-2o5xp","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:58:43.708888048Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:44.52165297Z","closed_at":"2026-01-02T14:58:44.52165297Z","close_reason":"Closed","comments":[{"id":3511,"issue_id":"lettatoolsselector-2o5xp","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T14:58:44Z"}]}
{"id":"lettatoolsselector-2o7q","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:19.555028273Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:19.90723298Z","closed_at":"2026-01-02T03:06:19.90723298Z","close_reason":"Closed","comments":[{"id":1535,"issue_id":"lettatoolsselector-2o7q","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T03:06:19Z"}]}
{"id":"lettatoolsselector-2ossw","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:05.009281132Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:05.009281132Z","comments":[{"id":2225,"issue_id":"lettatoolsselector-2ossw","author":"root","text":"Synced from Beads: lettatoolsselector-6t7r\n\n---\nHuly Issue: LTSEL-580","created_at":"2026-01-02T03:44:05Z"}]}
{"id":"lettatoolsselector-2pc4s","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:00:09.305662482Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:00:09.881322071Z","closed_at":"2026-01-02T13:00:09.881322071Z","close_reason":"Closed","comments":[{"id":3340,"issue_id":"lettatoolsselector-2pc4s","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T13:00:09Z"}]}
{"id":"lettatoolsselector-2pg7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:21.012004047Z","updated_at":"2025-12-30T02:06:48.263325989Z","comments":[{"id":921,"issue_id":"lettatoolsselector-2pg7","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T21:11:21Z"}]}
{"id":"lettatoolsselector-2pg89","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:22:59.296863638Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:59.833834865Z","closed_at":"2026-01-02T09:22:59.833834865Z","close_reason":"Closed","comments":[{"id":2978,"issue_id":"lettatoolsselector-2pg89","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T09:22:59Z"}]}
{"id":"lettatoolsselector-2po6z","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:26:56.127457441Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:26:56.739954388Z","closed_at":"2026-01-02T18:26:56.739954388Z","close_reason":"Closed","comments":[{"id":3848,"issue_id":"lettatoolsselector-2po6z","author":"root","text":"Synced from Huly: LTSEL-247","created_at":"2026-01-02T18:26:56Z"}]}
{"id":"lettatoolsselector-2pv2c","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:27:26.777908065Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:27:27.194675714Z","closed_at":"2026-01-02T18:27:27.194675714Z","close_reason":"Closed"}
{"id":"lettatoolsselector-2q3u7","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:03:02.102632477Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:03:02.677007093Z","closed_at":"2026-01-02T15:03:02.677007093Z","close_reason":"Closed","comments":[{"id":3521,"issue_id":"lettatoolsselector-2q3u7","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T15:03:02Z"}]}
{"id":"lettatoolsselector-2q9la","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:13.027192078Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:13.544766357Z","closed_at":"2026-01-02T11:59:13.544766357Z","close_reason":"Closed","comments":[{"id":3261,"issue_id":"lettatoolsselector-2q9la","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T11:59:13Z"}]}
{"id":"lettatoolsselector-2rm7u","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:53:29.125765919Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:53:29.721844374Z","closed_at":"2026-01-02T15:53:29.721844374Z","close_reason":"Closed","comments":[{"id":3631,"issue_id":"lettatoolsselector-2rm7u","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T15:53:29Z"}]}
{"id":"lettatoolsselector-2st2r","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:42:46.797479251Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:42:47.230735983Z","closed_at":"2026-01-02T04:42:47.230735983Z","close_reason":"Closed","comments":[{"id":2454,"issue_id":"lettatoolsselector-2st2r","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T04:42:47Z"}]}
{"id":"lettatoolsselector-2su22","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:56:01.707492437Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:02.071251734Z","closed_at":"2026-01-02T08:56:02.071251734Z","close_reason":"Closed"}
{"id":"lettatoolsselector-2temc","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:33.356033389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:33.876774741Z","closed_at":"2026-01-02T07:02:33.876774741Z","close_reason":"Closed","comments":[{"id":2652,"issue_id":"lettatoolsselector-2temc","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T07:02:33Z"}]}
{"id":"lettatoolsselector-2tjh","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:40.353527486Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:40.674428669Z","closed_at":"2026-01-02T01:08:40.674428669Z","close_reason":"Closed","comments":[{"id":1202,"issue_id":"lettatoolsselector-2tjh","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T01:08:40Z"}]}
{"id":"lettatoolsselector-2u0gy","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:48:14.634350744Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:15.1737533Z","closed_at":"2026-01-02T03:48:15.1737533Z","close_reason":"Closed","comments":[{"id":2330,"issue_id":"lettatoolsselector-2u0gy","author":"root","text":"Synced from Huly: LTSEL-53","created_at":"2026-01-02T03:48:14Z"}]}
{"id":"lettatoolsselector-2unpe","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:48:18.583554096Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:19.121695867Z","closed_at":"2026-01-02T03:48:19.121695867Z","close_reason":"Closed","comments":[{"id":2334,"issue_id":"lettatoolsselector-2unpe","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T03:48:18Z"}]}
{"id":"lettatoolsselector-2urc1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:43.320728998Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:43.320728998Z","comments":[{"id":1801,"issue_id":"lettatoolsselector-2urc1","author":"root","text":"Synced from Beads: lettatoolsselector-kijy\n\n---\nHuly Issue: LTSEL-571","created_at":"2026-01-02T03:27:43Z"}]}
{"id":"lettatoolsselector-2vp9v","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:57:39.097456595Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:57:39.752604725Z","closed_at":"2026-01-02T20:57:39.752604725Z","close_reason":"Closed","comments":[{"id":4171,"issue_id":"lettatoolsselector-2vp9v","author":"root","text":"Synced from Huly: LTSEL-13","created_at":"2026-01-02T20:57:39Z"}]}
{"id":"lettatoolsselector-2wypt","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:00.575291746Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:01.069108021Z","closed_at":"2026-01-02T03:30:01.069108021Z","close_reason":"Closed","comments":[{"id":2082,"issue_id":"lettatoolsselector-2wypt","author":"root","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2026-01-02T03:30:00Z"}]}
{"id":"lettatoolsselector-2xofu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:49.082115208Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:49.082115208Z","comments":[{"id":1814,"issue_id":"lettatoolsselector-2xofu","author":"root","text":"Synced from Beads: lettatoolsselector-i93i\n\n---\nHuly Issue: LTSEL-550","created_at":"2026-01-02T03:27:49Z"}]}
{"id":"lettatoolsselector-2yif8","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:25:05.466854685Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:25:06.110784584Z","closed_at":"2026-01-02T15:25:06.110784584Z","close_reason":"Closed","comments":[{"id":3571,"issue_id":"lettatoolsselector-2yif8","author":"root","text":"Synced from Huly: LTSEL-53","created_at":"2026-01-02T15:25:05Z"}]}
{"id":"lettatoolsselector-2z44","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:20.689078821Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:21.046733391Z","closed_at":"2026-01-02T03:06:21.046733391Z","close_reason":"Closed","comments":[{"id":1537,"issue_id":"lettatoolsselector-2z44","author":"root","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2026-01-02T03:06:20Z"}]}
{"id":"lettatoolsselector-2zq9l","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:37.067023424Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:37.607641468Z","closed_at":"2026-01-02T06:36:37.607641468Z","close_reason":"Closed","comments":[{"id":2605,"issue_id":"lettatoolsselector-2zq9l","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T06:36:37Z"}]}
{"id":"lettatoolsselector-302bu","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:35:59.259554734Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:35:59.80914899Z","closed_at":"2026-01-02T13:35:59.80914899Z","close_reason":"Closed","comments":[{"id":3346,"issue_id":"lettatoolsselector-302bu","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T13:35:59Z"}]}
{"id":"lettatoolsselector-30h99","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:45.196853599Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:45.784459508Z","closed_at":"2026-01-02T14:57:45.784459508Z","close_reason":"Closed","comments":[{"id":3494,"issue_id":"lettatoolsselector-30h99","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T14:57:45Z"}]}
{"id":"lettatoolsselector-31an3","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:22:37.818444624Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:22:38.447961445Z","closed_at":"2026-01-02T21:22:38.447961445Z","close_reason":"Closed","comments":[{"id":4199,"issue_id":"lettatoolsselector-31an3","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T21:22:38Z"}]}
{"id":"lettatoolsselector-31sy","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:52.597823919Z","updated_at":"2025-12-29T21:33:24.595207785Z","closed_at":"2025-12-29T21:33:24.595207785Z","close_reason":"Duplicate","comments":[{"id":619,"issue_id":"lettatoolsselector-31sy","author":"root","text":"Synced from Beads: lettatoolsselector-yc7\n\n---\nHuly Issue: LTSEL-153","created_at":"2025-12-29T20:36:52Z"}]}
{"id":"lettatoolsselector-32bsr","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:26:41.999495823Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:26:42.706733157Z","closed_at":"2026-01-02T19:26:42.706733157Z","close_reason":"Closed","comments":[{"id":3960,"issue_id":"lettatoolsselector-32bsr","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T19:26:42Z"}]}
{"id":"lettatoolsselector-32fje","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:39.987972063Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:40.505146723Z","closed_at":"2026-01-02T11:33:40.505146723Z","close_reason":"Closed","comments":[{"id":3211,"issue_id":"lettatoolsselector-32fje","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T11:33:40Z"}]}
{"id":"lettatoolsselector-32fz","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:02.00906709Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:02.347501759Z","closed_at":"2026-01-02T01:25:02.347501759Z","close_reason":"Closed","comments":[{"id":1239,"issue_id":"lettatoolsselector-32fz","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T01:25:02Z"}]}
{"id":"lettatoolsselector-32pm3","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:57:57.837861551Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:57:58.465737283Z","closed_at":"2026-01-02T20:57:58.465737283Z","close_reason":"Closed","comments":[{"id":4172,"issue_id":"lettatoolsselector-32pm3","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T20:57:58Z"}]}
{"id":"lettatoolsselector-332pf","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:02:54.929107348Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:55.654936186Z","closed_at":"2026-01-02T08:02:55.654936186Z","close_reason":"Closed","comments":[{"id":2816,"issue_id":"lettatoolsselector-332pf","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T08:02:55Z"}]}
{"id":"lettatoolsselector-338xs","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:42:00.46103612Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:42:00.996361258Z","closed_at":"2026-01-02T09:42:00.996361258Z","close_reason":"Closed","comments":[{"id":3010,"issue_id":"lettatoolsselector-338xs","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T09:42:00Z"}]}
{"id":"lettatoolsselector-338y","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:35:34.73326667Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:34.950925246Z","closed_at":"2026-01-02T02:35:34.950925246Z","close_reason":"Closed"}
{"id":"lettatoolsselector-33d","title":"[Refactor] Migrate safety handlers to safety blueprint","description":"## Goal\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\nThese handlers interact with:\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T00:43:22.309752565Z","updated_at":"2025-12-29T01:06:15.70343165Z","closed_at":"2025-12-29T01:06:15.70343165Z","close_reason":"Closed","labels":["refactor","services-layer"]}
{"id":"lettatoolsselector-33dvc","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:48.676118917Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:49.430746887Z","closed_at":"2026-01-02T08:54:49.430746887Z","close_reason":"Closed","comments":[{"id":2887,"issue_id":"lettatoolsselector-33dvc","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T08:54:49Z"}]}
{"id":"lettatoolsselector-33hyo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:33.363611112Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:33.363611112Z","comments":[{"id":1778,"issue_id":"lettatoolsselector-33hyo","author":"root","text":"Synced from Beads: lettatoolsselector-d98z\n\n---\nHuly Issue: LTSEL-598","created_at":"2026-01-02T03:27:33Z"}]}
{"id":"lettatoolsselector-33jkd","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:24.818721754Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:25.336591767Z","closed_at":"2026-01-02T09:54:25.336591767Z","close_reason":"Closed","comments":[{"id":3026,"issue_id":"lettatoolsselector-33jkd","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T09:54:25Z"}]}
{"id":"lettatoolsselector-33k7h","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:21:18.707977448Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:21:19.35076644Z","closed_at":"2026-01-02T22:21:19.35076644Z","close_reason":"Closed","comments":[{"id":4321,"issue_id":"lettatoolsselector-33k7h","author":"root","text":"Synced from Huly: LTSEL-221","created_at":"2026-01-02T22:21:19Z"}]}
{"id":"lettatoolsselector-33tdk","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:30.261289273Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:30.705918945Z","closed_at":"2026-01-02T06:00:30.705918945Z","close_reason":"Closed","comments":[{"id":2545,"issue_id":"lettatoolsselector-33tdk","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T06:00:30Z"}]}
{"id":"lettatoolsselector-344t","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:17.837069809Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:18.224522788Z","closed_at":"2026-01-02T03:06:18.224522788Z","close_reason":"Closed","comments":[{"id":1532,"issue_id":"lettatoolsselector-344t","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T03:06:18Z"}]}
{"id":"lettatoolsselector-34ufw","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:00:14.149114723Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:14.637655718Z","closed_at":"2026-01-02T06:00:14.637655718Z","close_reason":"Closed","comments":[{"id":2530,"issue_id":"lettatoolsselector-34ufw","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T06:00:14Z"}]}
{"id":"lettatoolsselector-35124","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:41:18.898886502Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:41:19.302348285Z","closed_at":"2026-01-02T19:41:19.302348285Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3567b","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:24:42.072382784Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:42.594104534Z","closed_at":"2026-01-02T07:24:42.594104534Z","close_reason":"Closed","comments":[{"id":2732,"issue_id":"lettatoolsselector-3567b","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T07:24:42Z"}]}
{"id":"lettatoolsselector-359ct","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:54:32.646105492Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:54:33.380799006Z","closed_at":"2026-01-02T18:54:33.380799006Z","close_reason":"Closed","comments":[{"id":3906,"issue_id":"lettatoolsselector-359ct","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T18:54:33Z"}]}
{"id":"lettatoolsselector-35e","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:19.20176836Z","updated_at":"2025-12-29T18:56:24.150553096Z","closed_at":"2025-12-29T18:56:24.150553096Z","close_reason":"Duplicate of lettatoolsselector-5vu (config validation CI)","comments":[{"id":45,"issue_id":"lettatoolsselector-35e","author":"node","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2025-12-23T03:23:19Z"}]}
{"id":"lettatoolsselector-35v4d","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:00:05.628685228Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:00:06.283636156Z","closed_at":"2026-01-02T13:00:06.283636156Z","close_reason":"Closed","comments":[{"id":3339,"issue_id":"lettatoolsselector-35v4d","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T13:00:06Z"}]}
{"id":"lettatoolsselector-36qf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:52.092468003Z","updated_at":"2025-12-30T01:49:00.503834564Z","comments":[{"id":960,"issue_id":"lettatoolsselector-36qf","author":"root","text":"Synced from Beads: lettatoolsselector-w50\n\n---\nHuly Issue: LTSEL-96","created_at":"2025-12-29T21:14:52Z"}]}
{"id":"lettatoolsselector-36qk2","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:32.428787091Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:32.957835047Z","closed_at":"2026-01-02T11:59:32.957835047Z","close_reason":"Closed","comments":[{"id":3266,"issue_id":"lettatoolsselector-36qk2","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T11:59:32Z"}]}
{"id":"lettatoolsselector-36tv6","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:22:56.887241363Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:22:57.542627671Z","closed_at":"2026-01-02T08:22:57.542627671Z","close_reason":"Closed","comments":[{"id":2875,"issue_id":"lettatoolsselector-36tv6","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T08:22:57Z"}]}
{"id":"lettatoolsselector-36x7a","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:14:53.311964258Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:14:53.924591351Z","closed_at":"2026-01-02T22:14:53.924591351Z","close_reason":"Closed","comments":[{"id":4295,"issue_id":"lettatoolsselector-36x7a","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T22:14:53Z"}]}
{"id":"lettatoolsselector-37a6g","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:51.681356155Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:51.681356155Z","comments":[{"id":1956,"issue_id":"lettatoolsselector-37a6g","author":"root","text":"Synced from Beads: lettatoolsselector-q3fn\n\n---\nHuly Issue: LTSEL-364","created_at":"2026-01-02T03:28:51Z"}]}
{"id":"lettatoolsselector-37d9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:23:33.761866305Z","updated_at":"2025-12-30T01:59:10.340570632Z","comments":[{"id":1026,"issue_id":"lettatoolsselector-37d9","author":"root","text":"Synced from Beads: lettatoolsselector-563\n\n---\nHuly Issue: LTSEL-79","created_at":"2025-12-29T21:23:34Z"}]}
{"id":"lettatoolsselector-37z32","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:09.370719462Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:10.311132408Z","closed_at":"2026-01-02T08:20:10.311132408Z","close_reason":"Closed","comments":[{"id":2842,"issue_id":"lettatoolsselector-37z32","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T08:20:09Z"}]}
{"id":"lettatoolsselector-380sa","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:32:38.147190604Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:32:38.527771679Z","closed_at":"2026-01-02T14:32:38.527771679Z","close_reason":"Closed"}
{"id":"lettatoolsselector-382ue","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:57:09.111305502Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:57:09.728002382Z","closed_at":"2026-01-02T18:57:09.728002382Z","close_reason":"Closed","comments":[{"id":3912,"issue_id":"lettatoolsselector-382ue","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T18:57:09Z"}]}
{"id":"lettatoolsselector-38hcz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:56.741489456Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:56.741489456Z","comments":[{"id":1832,"issue_id":"lettatoolsselector-38hcz","author":"root","text":"Synced from Beads: lettatoolsselector-jcb9\n\n---\nHuly Issue: LTSEL-522","created_at":"2026-01-02T03:27:56Z"}]}
{"id":"lettatoolsselector-38qv1","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:45:26.101150671Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:45:26.851760691Z","closed_at":"2026-01-02T20:45:26.851760691Z","close_reason":"Closed","comments":[{"id":4149,"issue_id":"lettatoolsselector-38qv1","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T20:45:26Z"}]}
{"id":"lettatoolsselector-38u33","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:09:06.977890573Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:07.542098689Z","closed_at":"2026-01-02T14:09:07.542098689Z","close_reason":"Closed","comments":[{"id":3419,"issue_id":"lettatoolsselector-38u33","author":"root","text":"Synced from Huly: LTSEL-242","created_at":"2026-01-02T14:09:07Z"}]}
{"id":"lettatoolsselector-39wp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:30:41.884514541Z","updated_at":"2025-12-30T02:04:59.295349715Z","comments":[{"id":1056,"issue_id":"lettatoolsselector-39wp","author":"root","text":"Synced from Beads: lettatoolsselector-m03\n\n---\nHuly Issue: LTSEL-71","created_at":"2025-12-29T21:30:42Z"}]}
{"id":"lettatoolsselector-3ajz5","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:02:24.381959809Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:24.841881556Z","closed_at":"2026-01-02T12:02:24.841881556Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3atbd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:30.998725966Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:30.998725966Z","comments":[{"id":2038,"issue_id":"lettatoolsselector-3atbd","author":"root","text":"Synced from Beads: lettatoolsselector-5hl3\n\n---\nHuly Issue: LTSEL-277","created_at":"2026-01-02T03:29:31Z"}]}
{"id":"lettatoolsselector-3bccm","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:57:03.042449868Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:03.685998763Z","closed_at":"2026-01-02T08:57:03.685998763Z","close_reason":"Closed","comments":[{"id":2915,"issue_id":"lettatoolsselector-3bccm","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T08:57:03Z"}]}
{"id":"lettatoolsselector-3bdkf","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:44.541982383Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:45.054652968Z","closed_at":"2026-01-02T07:24:45.054652968Z","close_reason":"Closed","comments":[{"id":2734,"issue_id":"lettatoolsselector-3bdkf","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T07:24:44Z"}]}
{"id":"lettatoolsselector-3c3lu","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:46.835231684Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:47.343418584Z","closed_at":"2026-01-02T06:36:47.343418584Z","close_reason":"Closed","comments":[{"id":2609,"issue_id":"lettatoolsselector-3c3lu","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T06:36:47Z"}]}
{"id":"lettatoolsselector-3drpm","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:22:26.032881789Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:27.462733408Z","closed_at":"2026-01-02T09:22:27.462733408Z","close_reason":"Closed","comments":[{"id":2966,"issue_id":"lettatoolsselector-3drpm","author":"root","text":"Synced from Huly: LTSEL-53","created_at":"2026-01-02T09:22:27Z"}]}
{"id":"lettatoolsselector-3duj4","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:35.641275607Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:35.641275607Z","comments":[{"id":2194,"issue_id":"lettatoolsselector-3duj4","author":"root","text":"Synced from Beads: lettatoolsselector-ghos\n\n---\nHuly Issue: LTSEL-670","created_at":"2026-01-02T03:43:35Z"}]}
{"id":"lettatoolsselector-3dyp","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:04.237163376Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:04.62293303Z","closed_at":"2026-01-02T01:25:04.62293303Z","close_reason":"Closed","comments":[{"id":1241,"issue_id":"lettatoolsselector-3dyp","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T01:25:04Z"}]}
{"id":"lettatoolsselector-3ep1n","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:32.968046754Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:32.968046754Z","comments":[{"id":1777,"issue_id":"lettatoolsselector-3ep1n","author":"root","text":"Synced from Beads: lettatoolsselector-o754\n\n---\nHuly Issue: LTSEL-599","created_at":"2026-01-02T03:27:33Z"}]}
{"id":"lettatoolsselector-3ez0z","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:09.186186832Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:09.682200101Z","closed_at":"2026-01-02T06:00:09.682200101Z","close_reason":"Closed","comments":[{"id":2526,"issue_id":"lettatoolsselector-3ez0z","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T06:00:09Z"}]}
{"id":"lettatoolsselector-3ffbw","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T10:58:29.527140616Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:30.070421733Z","closed_at":"2026-01-02T10:58:30.070421733Z","close_reason":"Closed","comments":[{"id":3137,"issue_id":"lettatoolsselector-3ffbw","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T10:58:29Z"}]}
{"id":"lettatoolsselector-3fjh","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:12.633785425Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:12.993701872Z","closed_at":"2026-01-02T03:06:12.993701872Z","close_reason":"Closed","comments":[{"id":1523,"issue_id":"lettatoolsselector-3fjh","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T03:06:12Z"}]}
{"id":"lettatoolsselector-3fs9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:04:00.931595111Z","updated_at":"2025-12-30T04:11:33.251390272Z","comments":[{"id":849,"issue_id":"lettatoolsselector-3fs9","author":"root","text":"Synced from Beads: lettatoolsselector-mwv\n\n---\nHuly Issue: LTSEL-103","created_at":"2025-12-29T21:04:01Z"}]}
{"id":"lettatoolsselector-3g3gt","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:58:14.54219845Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:15.130911226Z","closed_at":"2026-01-02T10:58:15.130911226Z","close_reason":"Closed","comments":[{"id":3131,"issue_id":"lettatoolsselector-3g3gt","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T10:58:14Z"}]}
{"id":"lettatoolsselector-3g7wf","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:24:24.309648577Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:24.918042225Z","closed_at":"2026-01-02T07:24:24.918042225Z","close_reason":"Closed","comments":[{"id":2724,"issue_id":"lettatoolsselector-3g7wf","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T07:24:24Z"}]}
{"id":"lettatoolsselector-3h6r","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:17.513757196Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:17.931566422Z","closed_at":"2026-01-02T02:35:17.931566422Z","close_reason":"Closed","comments":[{"id":1349,"issue_id":"lettatoolsselector-3h6r","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T02:35:17Z"}]}
{"id":"lettatoolsselector-3h8eb","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T04:20:21.598305322Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:21.874817366Z","closed_at":"2026-01-02T04:20:21.874817366Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3hmco","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:04:23.664575823Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:04:24.469336733Z","closed_at":"2026-01-02T12:04:24.469336733Z","close_reason":"Closed","comments":[{"id":3293,"issue_id":"lettatoolsselector-3hmco","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T12:04:24Z"}]}
{"id":"lettatoolsselector-3ij5w","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:16.759225155Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:17.202670933Z","closed_at":"2026-01-02T04:20:17.202670933Z","close_reason":"Closed","comments":[{"id":2372,"issue_id":"lettatoolsselector-3ij5w","author":"root","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2026-01-02T04:20:17Z"}]}
{"id":"lettatoolsselector-3iy","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:07.521149427Z","updated_at":"2025-12-23T03:23:07.879876339Z","closed_at":"2025-12-23T03:23:07.879876339Z","close_reason":"Closed","comments":[{"id":31,"issue_id":"lettatoolsselector-3iy","author":"node","text":"## Problem\n\nTool selector has multiple compose files (compose.yaml, docker-compose.yml, compose-with-reranker.yaml) and an .env file. Changes require editing multiple places.\n\n## Solution\n\nConsolidate to single compose.yaml with environment-specific overrides via .env.\n\n## Acceptance Criteria\n\n- [ ] Single compose.yaml as source of truth\n- [ ] .env.example checked into repo with all variables documented\n- [ ] .env (not checked in) for local overrides\n- [ ] Remove deprecated docker-compose.yml\n- [ ] CI validates .env.example has all required vars\n\n## Technical Notes\n\n- Use compose profiles for optional services (reranker, etc.)\n- Document which vars are required vs optional\n- Add validation script to check env completeness\n\n---\nHuly Issue: LTSEL-15","created_at":"2025-12-23T03:23:07Z"}]}
{"id":"lettatoolsselector-3j00","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:24.294817629Z","updated_at":"2025-12-29T21:33:29.346262728Z","closed_at":"2025-12-29T21:33:29.346262728Z","close_reason":"Duplicate","comments":[{"id":390,"issue_id":"lettatoolsselector-3j00","author":"root","text":"Synced from Beads: lettatoolsselector-vn0\n\n---\nHuly Issue: LTSEL-192","created_at":"2025-12-29T20:17:24Z"}]}
{"id":"lettatoolsselector-3j6l","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:08:37.050944633Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:37.258862276Z","closed_at":"2026-01-02T01:08:37.258862276Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3jrz4","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:06.745585816Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:06.745585816Z","comments":[{"id":2171,"issue_id":"lettatoolsselector-3jrz4","author":"root","text":"Synced from Beads: lettatoolsselector-oe3y\n\n---\nHuly Issue: LTSEL-773","created_at":"2026-01-02T03:43:06Z"}]}
{"id":"lettatoolsselector-3k044","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:48.534335434Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:49.038432643Z","closed_at":"2026-01-02T06:36:49.038432643Z","close_reason":"Closed","comments":[{"id":2611,"issue_id":"lettatoolsselector-3k044","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T06:36:48Z"}]}
{"id":"lettatoolsselector-3kxdk","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:12.596440753Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:13.108026561Z","closed_at":"2026-01-02T09:21:13.108026561Z","close_reason":"Closed","comments":[{"id":2943,"issue_id":"lettatoolsselector-3kxdk","author":"root","text":"Synced from Huly: LTSEL-22","created_at":"2026-01-02T09:21:12Z"}]}
{"id":"lettatoolsselector-3m7ya","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:56:10.400091929Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:56:10.918632284Z","closed_at":"2026-01-02T09:56:10.918632284Z","close_reason":"Closed","comments":[{"id":3046,"issue_id":"lettatoolsselector-3m7ya","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T09:56:10Z"}]}
{"id":"lettatoolsselector-3mci","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:19.002261727Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:19.344743192Z","closed_at":"2026-01-02T03:06:19.344743192Z","close_reason":"Closed","comments":[{"id":1534,"issue_id":"lettatoolsselector-3mci","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T03:06:19Z"}]}
{"id":"lettatoolsselector-3mjox","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:49:21.943771239Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:49:22.603205903Z","closed_at":"2026-01-02T22:49:22.603205903Z","close_reason":"Closed","comments":[{"id":4377,"issue_id":"lettatoolsselector-3mjox","author":"root","text":"Synced from Huly: LTSEL-238","created_at":"2026-01-02T22:49:22Z"}]}
{"id":"lettatoolsselector-3mwbx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:17.208515136Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:17.208515136Z","comments":[{"id":1879,"issue_id":"lettatoolsselector-3mwbx","author":"root","text":"Synced from Beads: lettatoolsselector-t3y2\n\n---\nHuly Issue: LTSEL-470","created_at":"2026-01-02T03:28:17Z"}]}
{"id":"lettatoolsselector-3mz1k","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:52:29.695544632Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:52:30.138424146Z","closed_at":"2026-01-02T17:52:30.138424146Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3n1rz","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:47.274534566Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:47.870460177Z","closed_at":"2026-01-02T17:50:47.870460177Z","close_reason":"Closed","comments":[{"id":3787,"issue_id":"lettatoolsselector-3n1rz","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T17:50:47Z"}]}
{"id":"lettatoolsselector-3n3ow","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:19:32.129370585Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:19:32.566164197Z","closed_at":"2026-01-02T20:19:32.566164197Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3n9kf","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:20:56.113272259Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:20:56.701040994Z","closed_at":"2026-01-02T09:20:56.701040994Z","close_reason":"Closed","comments":[{"id":2931,"issue_id":"lettatoolsselector-3n9kf","author":"root","text":"Synced from Huly: LTSEL-45","created_at":"2026-01-02T09:20:56Z"}]}
{"id":"lettatoolsselector-3nabk","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:18:50.710094977Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:51.180204705Z","closed_at":"2026-01-02T06:18:51.180204705Z","close_reason":"Closed","comments":[{"id":2578,"issue_id":"lettatoolsselector-3nabk","author":"root","text":"Synced from Huly: LTSEL-242","created_at":"2026-01-02T06:18:50Z"}]}
{"id":"lettatoolsselector-3nhx0","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:26:11.204357796Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:26:11.634275425Z","closed_at":"2026-01-02T21:26:11.634275425Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3nsgn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:36.176590957Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:36.176590957Z","comments":[{"id":2050,"issue_id":"lettatoolsselector-3nsgn","author":"root","text":"Synced from Beads: lettatoolsselector-yft2\n\n---\nHuly Issue: LTSEL-265","created_at":"2026-01-02T03:29:36Z"}]}
{"id":"lettatoolsselector-3nw","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","description":"## Problem\nEach call to `search_tools_with_reranking()` creates a new Weaviate client via `init_client()`, including TCP/gRPC connection establishment.\n\n**Location:** `weaviate_tool_search_with_reranking.py:204-208, 331-335`\n\n```python\n# Line 204\nclient = init_client()  # Creates new client EVERY search!\n```\n\n## Impact\n- **Latency:** 50-200ms per search in connection overhead\n- **Priority:** CRITICAL - affects every search request\n\n## Solution\nUse the existing `WeaviateClientManager` connection pool from `weaviate_client_manager.py`:\n\n```python\nfrom weaviate_client_manager import get_client_manager\n\ndef search_tools_with_reranking(...):\n    manager = get_client_manager()\n    with manager.get_client() as client:\n        # perform search\n```\n\n## Acceptance Criteria\n- [ ] `search_tools()` uses connection pool\n- [ ] `search_tools_with_reranking()` uses connection pool\n- [ ] No new Weaviate clients created per request\n- [ ] Connection pool metrics logged on startup\n- [ ] All unit tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:49:05.951470743Z","updated_at":"2025-12-29T15:40:23.078098729Z","closed_at":"2025-12-29T15:40:23.078098729Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-3o1o","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T01:25:08.926746034Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:09.36978965Z","closed_at":"2026-01-02T01:25:09.36978965Z","close_reason":"Closed","comments":[{"id":1246,"issue_id":"lettatoolsselector-3o1o","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T01:25:09Z"}]}
{"id":"lettatoolsselector-3omfc","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:06:54.362268356Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:06:54.92026826Z","closed_at":"2026-01-02T17:06:54.92026826Z","close_reason":"Closed","comments":[{"id":3717,"issue_id":"lettatoolsselector-3omfc","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T17:06:54Z"}]}
{"id":"lettatoolsselector-3ooeq","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:06.237174562Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:06.237174562Z","comments":[{"id":2226,"issue_id":"lettatoolsselector-3ooeq","author":"root","text":"Synced from Beads: lettatoolsselector-he3x\n\n---\nHuly Issue: LTSEL-578","created_at":"2026-01-02T03:44:06Z"}]}
{"id":"lettatoolsselector-3opv5","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:55:28.655534269Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:55:29.164900266Z","closed_at":"2026-01-02T18:55:29.164900266Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3os7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:08:52.314160574Z","updated_at":"2025-12-30T04:14:20.137115314Z","comments":[{"id":899,"issue_id":"lettatoolsselector-3os7","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-109","created_at":"2025-12-29T21:08:52Z"}]}
{"id":"lettatoolsselector-3p1s","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:32.26735709Z","updated_at":"2025-12-29T21:33:42.214925134Z","closed_at":"2025-12-29T21:33:42.214925134Z","close_reason":"Duplicate","comments":[{"id":566,"issue_id":"lettatoolsselector-3p1s","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:32:32Z"}]}
{"id":"lettatoolsselector-3p4eu","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:55:40.313373614Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:55:40.728681757Z","closed_at":"2026-01-02T21:55:40.728681757Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3pbdn","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:37:12.242328596Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:12.703200293Z","closed_at":"2026-01-02T06:37:12.703200293Z","close_reason":"Closed","comments":[{"id":2633,"issue_id":"lettatoolsselector-3pbdn","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T06:37:12Z"}]}
{"id":"lettatoolsselector-3pg46","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:39:02.419703253Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:39:02.936725951Z","closed_at":"2026-01-02T10:39:02.936725951Z","close_reason":"Closed","comments":[{"id":3110,"issue_id":"lettatoolsselector-3pg46","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T10:39:02Z"}]}
{"id":"lettatoolsselector-3q1vt","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:26:17.734128852Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:26:18.339977471Z","closed_at":"2026-01-02T18:26:18.339977471Z","close_reason":"Closed","comments":[{"id":3846,"issue_id":"lettatoolsselector-3q1vt","author":"root","text":"Synced from Huly: LTSEL-218","created_at":"2026-01-02T18:26:18Z"}]}
{"id":"lettatoolsselector-3q8ek","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T10:36:31.755617195Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:32.26688919Z","closed_at":"2026-01-02T10:36:32.26688919Z","close_reason":"Closed","comments":[{"id":3092,"issue_id":"lettatoolsselector-3q8ek","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T10:36:32Z"}]}
{"id":"lettatoolsselector-3qag5","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:52.004415835Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:52.520675475Z","closed_at":"2026-01-02T07:23:52.520675475Z","close_reason":"Closed","comments":[{"id":2707,"issue_id":"lettatoolsselector-3qag5","author":"root","text":"Synced from Huly: LTSEL-22","created_at":"2026-01-02T07:23:52Z"}]}
{"id":"lettatoolsselector-3qbw1","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:54.72589759Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:55.272203742Z","closed_at":"2026-01-02T09:21:55.272203742Z","close_reason":"Closed","comments":[{"id":2960,"issue_id":"lettatoolsselector-3qbw1","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T09:21:55Z"}]}
{"id":"lettatoolsselector-3qk3f","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:21:16.929828848Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:17.355369098Z","closed_at":"2026-01-02T04:21:17.355369098Z","close_reason":"Closed","comments":[{"id":2395,"issue_id":"lettatoolsselector-3qk3f","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T04:21:17Z"}]}
{"id":"lettatoolsselector-3ql3y","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:31:16.126071729Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:31:16.752447247Z","closed_at":"2026-01-02T17:31:16.752447247Z","close_reason":"Closed","comments":[{"id":3766,"issue_id":"lettatoolsselector-3ql3y","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T17:31:16Z"}]}
{"id":"lettatoolsselector-3qpjt","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:55.221706875Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:55.709956989Z","closed_at":"2026-01-02T05:40:55.709956989Z","close_reason":"Closed","comments":[{"id":2473,"issue_id":"lettatoolsselector-3qpjt","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T05:40:55Z"}]}
{"id":"lettatoolsselector-3qstx","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:47.562414706Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:47.991125555Z","closed_at":"2026-01-02T03:29:47.991125555Z","close_reason":"Closed","comments":[{"id":2067,"issue_id":"lettatoolsselector-3qstx","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T03:29:47Z"}]}
{"id":"lettatoolsselector-3r369","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:30:43.833099164Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:44.219681291Z","closed_at":"2026-01-02T03:30:44.219681291Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3r3f","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:59.735398697Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:00.074518097Z","closed_at":"2026-01-02T01:25:00.074518097Z","close_reason":"Closed","comments":[{"id":1235,"issue_id":"lettatoolsselector-3r3f","author":"root","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2026-01-02T01:24:59Z"}]}
{"id":"lettatoolsselector-3rmm3","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:55.063682349Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:55.063682349Z","comments":[{"id":2224,"issue_id":"lettatoolsselector-3rmm3","author":"root","text":"Synced from Beads: lettatoolsselector-x1pr\n\n---\nHuly Issue: LTSEL-603","created_at":"2026-01-02T03:43:55Z"}]}
{"id":"lettatoolsselector-3s14m","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:09:43.823523884Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:44.362712235Z","closed_at":"2026-01-02T14:09:44.362712235Z","close_reason":"Closed","comments":[{"id":3423,"issue_id":"lettatoolsselector-3s14m","author":"root","text":"Synced from Huly: LTSEL-53","created_at":"2026-01-02T14:09:44Z"}]}
{"id":"lettatoolsselector-3s6de","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:37:34.104609876Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:37:34.655436772Z","closed_at":"2026-01-02T11:37:34.655436772Z","close_reason":"Closed","comments":[{"id":3249,"issue_id":"lettatoolsselector-3s6de","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T11:37:34Z"}]}
{"id":"lettatoolsselector-3sb4j","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:11:13.373643894Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:13.730617938Z","closed_at":"2026-01-02T11:11:13.730617938Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3sev8","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:50:57.708757298Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:50:58.440791074Z","closed_at":"2026-01-02T21:50:58.440791074Z","close_reason":"Closed","comments":[{"id":4271,"issue_id":"lettatoolsselector-3sev8","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T21:50:58Z"}]}
{"id":"lettatoolsselector-3sg73","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:49:15.315677266Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:49:15.957037313Z","closed_at":"2026-01-02T21:49:15.957037313Z","close_reason":"Closed","comments":[{"id":4266,"issue_id":"lettatoolsselector-3sg73","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T21:49:15Z"}]}
{"id":"lettatoolsselector-3sg8o","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:14.460776882Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:15.069722321Z","closed_at":"2026-01-02T14:29:15.069722321Z","close_reason":"Closed","comments":[{"id":3441,"issue_id":"lettatoolsselector-3sg8o","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T14:29:14Z"}]}
{"id":"lettatoolsselector-3tf5","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:37.161624734Z","updated_at":"2025-12-29T21:33:43.523167132Z","closed_at":"2025-12-29T21:33:43.523167132Z","close_reason":"Duplicate","comments":[{"id":457,"issue_id":"lettatoolsselector-3tf5","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T20:23:37Z"}]}
{"id":"lettatoolsselector-3tnhk","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:27:00.01843274Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:27:00.656466541Z","closed_at":"2026-01-02T18:27:00.656466541Z","close_reason":"Closed","comments":[{"id":3849,"issue_id":"lettatoolsselector-3tnhk","author":"root","text":"Synced from Huly: LTSEL-246","created_at":"2026-01-02T18:27:00Z"}]}
{"id":"lettatoolsselector-3txl","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:25.793335292Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:26.119165105Z","closed_at":"2026-01-02T01:08:26.119165105Z","close_reason":"Closed","comments":[{"id":1181,"issue_id":"lettatoolsselector-3txl","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T01:08:25Z"}]}
{"id":"lettatoolsselector-3um6l","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:44.759446669Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:44.759446669Z","comments":[{"id":1804,"issue_id":"lettatoolsselector-3um6l","author":"root","text":"Synced from Beads: lettatoolsselector-k77j\n\n---\nHuly Issue: LTSEL-565","created_at":"2026-01-02T03:27:45Z"}]}
{"id":"lettatoolsselector-3uph","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:19:58.524435903Z","updated_at":"2025-12-30T01:56:03.575834154Z","comments":[{"id":1003,"issue_id":"lettatoolsselector-3uph","author":"root","text":"Synced from Beads: lettatoolsselector-5na\n\n---\nHuly Issue: LTSEL-83","created_at":"2025-12-29T21:19:58Z"}]}
{"id":"lettatoolsselector-3vinz","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:13.880132022Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:14.439044338Z","closed_at":"2026-01-02T15:46:14.439044338Z","close_reason":"Closed","comments":[{"id":3598,"issue_id":"lettatoolsselector-3vinz","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T15:46:14Z"}]}
{"id":"lettatoolsselector-3vqtn","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:02:54.261954874Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:54.886236461Z","closed_at":"2026-01-02T07:02:54.886236461Z","close_reason":"Closed","comments":[{"id":2671,"issue_id":"lettatoolsselector-3vqtn","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T07:02:54Z"}]}
{"id":"lettatoolsselector-3vw6c","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:52.006556235Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:52.566450586Z","closed_at":"2026-01-02T06:17:52.566450586Z","close_reason":"Closed","comments":[{"id":2563,"issue_id":"lettatoolsselector-3vw6c","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T06:17:52Z"}]}
{"id":"lettatoolsselector-3x3p","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:01:34.291572583Z","updated_at":"2025-12-30T04:14:02.830256279Z","comments":[{"id":823,"issue_id":"lettatoolsselector-3x3p","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-109","created_at":"2025-12-29T21:01:34Z"}]}
{"id":"lettatoolsselector-3x3pr","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:19.404268864Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:19.930108795Z","closed_at":"2026-01-02T11:59:19.930108795Z","close_reason":"Closed","comments":[{"id":3263,"issue_id":"lettatoolsselector-3x3pr","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T11:59:19Z"}]}
{"id":"lettatoolsselector-3xecd","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:26:53.048536083Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:26:53.673734718Z","closed_at":"2026-01-02T17:26:53.673734718Z","close_reason":"Closed","comments":[{"id":3747,"issue_id":"lettatoolsselector-3xecd","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T17:26:53Z"}]}
{"id":"lettatoolsselector-3xeu","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:03.097794352Z","updated_at":"2025-12-29T21:33:26.64398571Z","closed_at":"2025-12-29T21:33:26.64398571Z","close_reason":"Duplicate","comments":[{"id":519,"issue_id":"lettatoolsselector-3xeu","author":"root","text":"Synced from Beads: lettatoolsselector-x6v\n\n---\nHuly Issue: LTSEL-168","created_at":"2025-12-29T20:28:03Z"}]}
{"id":"lettatoolsselector-3xr0g","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T04:40:04.341766879Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:04.633475781Z","closed_at":"2026-01-02T04:40:04.633475781Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3y2m1","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:21:33.606404918Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:34.164535219Z","closed_at":"2026-01-02T15:21:34.164535219Z","close_reason":"Closed","comments":[{"id":3560,"issue_id":"lettatoolsselector-3y2m1","author":"root","text":"Synced from Huly: LTSEL-241","created_at":"2026-01-02T15:21:33Z"}]}
{"id":"lettatoolsselector-3y9k","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:20.131844768Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:20.479418136Z","closed_at":"2026-01-02T03:06:20.479418136Z","close_reason":"Closed","comments":[{"id":1536,"issue_id":"lettatoolsselector-3y9k","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T03:06:20Z"}]}
{"id":"lettatoolsselector-3yad","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:46.209143424Z","updated_at":"2025-12-29T21:33:28.989256228Z","closed_at":"2025-12-29T21:33:28.989256228Z","close_reason":"Duplicate","comments":[{"id":403,"issue_id":"lettatoolsselector-3yad","author":"root","text":"Synced from Beads: lettatoolsselector-wtn\n\n---\nHuly Issue: LTSEL-57","created_at":"2025-12-29T20:18:46Z"}]}
{"id":"lettatoolsselector-3ycwf","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:57.788807176Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:58.460606708Z","closed_at":"2026-01-02T07:23:58.460606708Z","close_reason":"Closed","comments":[{"id":2712,"issue_id":"lettatoolsselector-3ycwf","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T07:23:58Z"}]}
{"id":"lettatoolsselector-3z7b","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:29.503215364Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:29.788322889Z","closed_at":"2026-01-02T02:20:29.788322889Z","close_reason":"Closed"}
{"id":"lettatoolsselector-3ziou","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:51.368243787Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:51.786388766Z","closed_at":"2026-01-02T03:29:51.786388766Z","close_reason":"Closed","comments":[{"id":2071,"issue_id":"lettatoolsselector-3ziou","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T03:29:51Z"}]}
{"id":"lettatoolsselector-3zlrk","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:02:49.771278307Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:50.284947856Z","closed_at":"2026-01-02T07:02:50.284947856Z","close_reason":"Closed","comments":[{"id":2668,"issue_id":"lettatoolsselector-3zlrk","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T07:02:50Z"}]}
{"id":"lettatoolsselector-3zngk","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:20:30.821867754Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:20:31.529104509Z","closed_at":"2026-01-02T22:20:31.529104509Z","close_reason":"Closed","comments":[{"id":4315,"issue_id":"lettatoolsselector-3zngk","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T22:20:31Z"}]}
{"id":"lettatoolsselector-40n99","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:27.568237176Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:27.925960314Z","closed_at":"2026-01-02T10:59:27.925960314Z","close_reason":"Closed"}
{"id":"lettatoolsselector-40r","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:07:29.584607116Z","updated_at":"2025-12-29T21:33:44.825022696Z","closed_at":"2025-12-29T21:33:44.825022696Z","close_reason":"Duplicate","comments":[{"id":288,"issue_id":"lettatoolsselector-40r","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:07:29Z"}]}
{"id":"lettatoolsselector-418","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:18.823169301Z","updated_at":"2025-12-29T18:56:25.289903875Z","closed_at":"2025-12-29T18:56:25.289903875Z","close_reason":"Duplicate of lettatoolsselector-7rj (deploy script)","comments":[{"id":44,"issue_id":"lettatoolsselector-418","author":"node","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2025-12-23T03:23:19Z"}]}
{"id":"lettatoolsselector-41aui","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:42:42.421706347Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:42:43.060503813Z","closed_at":"2026-01-02T20:42:43.060503813Z","close_reason":"Closed","comments":[{"id":4142,"issue_id":"lettatoolsselector-41aui","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T20:42:42Z"}]}
{"id":"lettatoolsselector-41hl","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:56.588007093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:56.933702865Z","closed_at":"2026-01-02T01:24:56.933702865Z","close_reason":"Closed","comments":[{"id":1230,"issue_id":"lettatoolsselector-41hl","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T01:24:56Z"}]}
{"id":"lettatoolsselector-41mp","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:28.235500508Z","updated_at":"2025-12-29T21:33:23.921142022Z","closed_at":"2025-12-29T21:33:23.921142022Z","close_reason":"Duplicate","comments":[{"id":643,"issue_id":"lettatoolsselector-41mp","author":"root","text":"Synced from Beads: lettatoolsselector-kne\n\n---\nHuly Issue: LTSEL-158","created_at":"2025-12-29T20:39:28Z"}]}
{"id":"lettatoolsselector-4206m","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:58:23.931564591Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:24.471416475Z","closed_at":"2026-01-02T09:58:24.471416475Z","close_reason":"Closed","comments":[{"id":3064,"issue_id":"lettatoolsselector-4206m","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T09:58:24Z"}]}
{"id":"lettatoolsselector-4258","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:08:24.0366961Z","updated_at":"2025-12-30T04:12:00.909489576Z","comments":[{"id":893,"issue_id":"lettatoolsselector-4258","author":"root","text":"Synced from Beads: lettatoolsselector-jnc\n\n---\nHuly Issue: LTSEL-105","created_at":"2025-12-29T21:08:24Z"}]}
{"id":"lettatoolsselector-428q","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:24.584415903Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:24.975838166Z","closed_at":"2026-01-02T01:08:24.975838166Z","close_reason":"Closed","comments":[{"id":1179,"issue_id":"lettatoolsselector-428q","author":"root","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2026-01-02T01:08:24Z"}]}
{"id":"lettatoolsselector-42gsr","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:39:13.701876842Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:14.364408036Z","closed_at":"2026-01-02T19:39:14.364408036Z","close_reason":"Closed","comments":[{"id":3984,"issue_id":"lettatoolsselector-42gsr","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T19:39:14Z"}]}
{"id":"lettatoolsselector-42lhy","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:17.458166638Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:18.049209618Z","closed_at":"2026-01-02T15:46:18.049209618Z","close_reason":"Closed","comments":[{"id":3599,"issue_id":"lettatoolsselector-42lhy","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T15:46:17Z"}]}
{"id":"lettatoolsselector-42n","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:51:28.31119505Z","updated_at":"2025-12-29T21:33:45.664836168Z","closed_at":"2025-12-29T21:33:45.664836168Z","close_reason":"Duplicate","comments":[{"id":246,"issue_id":"lettatoolsselector-42n","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T19:51:28Z"}]}
{"id":"lettatoolsselector-42vle","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:21:11.81525279Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:12.515525476Z","closed_at":"2026-01-02T08:21:12.515525476Z","close_reason":"Closed","comments":[{"id":2859,"issue_id":"lettatoolsselector-42vle","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T08:21:12Z"}]}
{"id":"lettatoolsselector-43k1d","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:51:51.98116749Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:52.658277906Z","closed_at":"2026-01-02T18:51:52.658277906Z","close_reason":"Closed","comments":[{"id":3900,"issue_id":"lettatoolsselector-43k1d","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T18:51:52Z"}]}
{"id":"lettatoolsselector-43wh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:03:33.2984387Z","updated_at":"2025-12-30T04:11:31.401023372Z","comments":[{"id":842,"issue_id":"lettatoolsselector-43wh","author":"root","text":"Synced from Beads: lettatoolsselector-jnc\n\n---\nHuly Issue: LTSEL-104","created_at":"2025-12-29T21:03:33Z"}]}
{"id":"lettatoolsselector-43zdr","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:07:37.815995258Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:07:38.541405816Z","closed_at":"2026-01-02T21:07:38.541405816Z","close_reason":"Closed","comments":[{"id":4196,"issue_id":"lettatoolsselector-43zdr","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T21:07:38Z"}]}
{"id":"lettatoolsselector-449yq","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:47:43.303595639Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:43.776689049Z","closed_at":"2026-01-02T03:47:43.776689049Z","close_reason":"Closed","comments":[{"id":2323,"issue_id":"lettatoolsselector-449yq","author":"root","text":"Synced from Huly: LTSEL-239","created_at":"2026-01-02T03:47:43Z"}]}
{"id":"lettatoolsselector-44eb","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:35.040584665Z","updated_at":"2025-12-29T21:33:27.433866516Z","closed_at":"2025-12-29T21:33:27.433866516Z","close_reason":"Duplicate","comments":[{"id":473,"issue_id":"lettatoolsselector-44eb","author":"root","text":"Synced from Beads: lettatoolsselector-72a\n\n---\nHuly Issue: LTSEL-185","created_at":"2025-12-29T20:24:35Z"}]}
{"id":"lettatoolsselector-44jiz","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:58:20.757942317Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:21.29205923Z","closed_at":"2026-01-02T09:58:21.29205923Z","close_reason":"Closed","comments":[{"id":3063,"issue_id":"lettatoolsselector-44jiz","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T09:58:21Z"}]}
{"id":"lettatoolsselector-44ryh","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:10:53.94296258Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:10:54.483471098Z","closed_at":"2026-01-02T14:10:54.483471098Z","close_reason":"Closed","comments":[{"id":3433,"issue_id":"lettatoolsselector-44ryh","author":"root","text":"Synced from Huly: LTSEL-233","created_at":"2026-01-02T14:10:54Z"}]}
{"id":"lettatoolsselector-44t8p","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:42:04.74663684Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:42:05.16525913Z","closed_at":"2026-01-02T19:42:05.16525913Z","close_reason":"Closed"}
{"id":"lettatoolsselector-44wn","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:23.586404086Z","updated_at":"2025-12-29T21:33:29.374056167Z","closed_at":"2025-12-29T21:33:29.374056167Z","close_reason":"Duplicate","comments":[{"id":389,"issue_id":"lettatoolsselector-44wn","author":"root","text":"Synced from Beads: lettatoolsselector-wtn\n\n---\nHuly Issue: LTSEL-57","created_at":"2025-12-29T20:17:23Z"}]}
{"id":"lettatoolsselector-4560z","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:40.728144715Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:40.728144715Z","comments":[{"id":1932,"issue_id":"lettatoolsselector-4560z","author":"root","text":"Synced from Beads: lettatoolsselector-qaxh\n\n---\nHuly Issue: LTSEL-395","created_at":"2026-01-02T03:28:40Z"}]}
{"id":"lettatoolsselector-46hru","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:03.286912863Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:03.755626494Z","closed_at":"2026-01-02T06:00:03.755626494Z","close_reason":"Closed","comments":[{"id":2521,"issue_id":"lettatoolsselector-46hru","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T06:00:03Z"}]}
{"id":"lettatoolsselector-46k","title":"[Code Quality] Fix type annotation errors in api_server.py","description":"The api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\nFunctions return `None` but type hints expect a specific type:\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables  \nVariables that might not be defined in all code paths:\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\nDeclared types don't match actual implementations:\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior  \n- [ ] No runtime behavior changes\n- [ ] Tests still pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-28T17:12:59.527538844Z","updated_at":"2025-12-29T19:21:55.149577816Z","closed_at":"2025-12-29T19:21:55.149577816Z","close_reason":"Fixed: removed duplicate functions, fixed async stubs, added type ignore for import conflicts - 0 pyright errors"}
{"id":"lettatoolsselector-474ku","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:30.92089375Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:30.92089375Z","comments":[{"id":1772,"issue_id":"lettatoolsselector-474ku","author":"root","text":"Synced from Beads: lettatoolsselector-1fv5\n\n---\nHuly Issue: LTSEL-606","created_at":"2026-01-02T03:27:31Z"}]}
{"id":"lettatoolsselector-47fxc","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:22.782528747Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:23.329242512Z","closed_at":"2026-01-02T14:05:23.329242512Z","close_reason":"Closed","comments":[{"id":3398,"issue_id":"lettatoolsselector-47fxc","author":"root","text":"Synced from Huly: LTSEL-37","created_at":"2026-01-02T14:05:23Z"}]}
{"id":"lettatoolsselector-47qke","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:48.834685726Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:49.413911424Z","closed_at":"2026-01-02T11:59:49.413911424Z","close_reason":"Closed","comments":[{"id":3270,"issue_id":"lettatoolsselector-47qke","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T11:59:49Z"}]}
{"id":"lettatoolsselector-48hui","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:32.140263764Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:32.140263764Z","comments":[{"id":1775,"issue_id":"lettatoolsselector-48hui","author":"root","text":"Synced from Beads: lettatoolsselector-9vy7\n\n---\nHuly Issue: LTSEL-601","created_at":"2026-01-02T03:27:32Z"}]}
{"id":"lettatoolsselector-48rn","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:07.932469249Z","updated_at":"2025-12-29T21:33:28.638553412Z","closed_at":"2025-12-29T21:33:28.638553412Z","close_reason":"Duplicate","comments":[{"id":418,"issue_id":"lettatoolsselector-48rn","author":"root","text":"Synced from Beads: lettatoolsselector-joa\n\n---\nHuly Issue: LTSEL-187","created_at":"2025-12-29T20:20:08Z"}]}
{"id":"lettatoolsselector-48xej","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:09.215889811Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:09.515559321Z","closed_at":"2026-01-02T05:41:09.515559321Z","close_reason":"Closed"}
{"id":"lettatoolsselector-49251","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:58.276111974Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:58.804750968Z","closed_at":"2026-01-02T05:59:58.804750968Z","close_reason":"Closed","comments":[{"id":2515,"issue_id":"lettatoolsselector-49251","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T05:59:58Z"}]}
{"id":"lettatoolsselector-493n3","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:03:03.278501603Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:03:03.912503831Z","closed_at":"2026-01-02T12:03:03.912503831Z","close_reason":"Closed","comments":[{"id":3286,"issue_id":"lettatoolsselector-493n3","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T12:03:03Z"}]}
{"id":"lettatoolsselector-494vt","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:03.489038357Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:04.145670191Z","closed_at":"2026-01-02T18:25:04.145670191Z","close_reason":"Closed","comments":[{"id":3833,"issue_id":"lettatoolsselector-494vt","author":"root","text":"Synced from Huly: LTSEL-41","created_at":"2026-01-02T18:25:03Z"}]}
{"id":"lettatoolsselector-49hiv","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T11:10:18.159579893Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:10:18.733446448Z","closed_at":"2026-01-02T11:10:18.733446448Z","close_reason":"Closed","comments":[{"id":3183,"issue_id":"lettatoolsselector-49hiv","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T11:10:18Z"}]}
{"id":"lettatoolsselector-4ar74","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:53.408731053Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:54.057914603Z","closed_at":"2026-01-02T19:38:54.057914603Z","close_reason":"Closed","comments":[{"id":3980,"issue_id":"lettatoolsselector-4ar74","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T19:38:53Z"}]}
{"id":"lettatoolsselector-4atm","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:32.477590573Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:32.851253514Z","closed_at":"2026-01-02T02:35:32.851253514Z","close_reason":"Closed","comments":[{"id":1363,"issue_id":"lettatoolsselector-4atm","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T02:35:32Z"}]}
{"id":"lettatoolsselector-4b467","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:42:29.372772231Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:42:30.013226594Z","closed_at":"2026-01-02T20:42:30.013226594Z","close_reason":"Closed","comments":[{"id":4140,"issue_id":"lettatoolsselector-4b467","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T20:42:29Z"}]}
{"id":"lettatoolsselector-4bdk","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:26.843691547Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:27.194162999Z","closed_at":"2026-01-02T01:08:27.194162999Z","close_reason":"Closed","comments":[{"id":1183,"issue_id":"lettatoolsselector-4bdk","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T01:08:27Z"}]}
{"id":"lettatoolsselector-4bq0y","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:37:11.894680523Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:37:12.519228908Z","closed_at":"2026-01-02T19:37:12.519228908Z","close_reason":"Closed","comments":[{"id":3969,"issue_id":"lettatoolsselector-4bq0y","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T19:37:12Z"}]}
{"id":"lettatoolsselector-4c1li","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:32.324517699Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:32.683594258Z","closed_at":"2026-01-02T10:59:32.683594258Z","close_reason":"Closed"}
{"id":"lettatoolsselector-4cjhm","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:29:40.565389081Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:40.957169304Z","closed_at":"2026-01-02T17:29:40.957169304Z","close_reason":"Closed"}
{"id":"lettatoolsselector-4cmwq","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:20:36.105034472Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:36.396971612Z","closed_at":"2026-01-02T04:20:36.396971612Z","close_reason":"Closed"}
{"id":"lettatoolsselector-4cwp1","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:03.23028971Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:03.684033848Z","closed_at":"2026-01-02T03:47:03.684033848Z","close_reason":"Closed","comments":[{"id":2301,"issue_id":"lettatoolsselector-4cwp1","author":"root","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2026-01-02T03:47:03Z"}]}
{"id":"lettatoolsselector-4czt","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:18.348683151Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:18.676374491Z","closed_at":"2026-01-02T01:08:18.676374491Z","close_reason":"Closed","comments":[{"id":1168,"issue_id":"lettatoolsselector-4czt","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T01:08:18Z"}]}
{"id":"lettatoolsselector-4d5eu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:21.548964Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:21.548964Z","comments":[{"id":1889,"issue_id":"lettatoolsselector-4d5eu","author":"root","text":"Synced from Beads: lettatoolsselector-pnew\n\n---\nHuly Issue: LTSEL-454","created_at":"2026-01-02T03:28:21Z"}]}
{"id":"lettatoolsselector-4egdj","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:11:50.271001387Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:50.80808264Z","closed_at":"2026-01-02T11:11:50.80808264Z","close_reason":"Closed","comments":[{"id":3194,"issue_id":"lettatoolsselector-4egdj","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T11:11:50Z"}]}
{"id":"lettatoolsselector-4etrq","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:36:58.327653491Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:58.661096982Z","closed_at":"2026-01-02T06:36:58.661096982Z","close_reason":"Closed"}
{"id":"lettatoolsselector-4fg4","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:57.42854128Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:57.933188011Z","closed_at":"2026-01-02T02:20:57.933188011Z","close_reason":"Closed","comments":[{"id":1316,"issue_id":"lettatoolsselector-4fg4","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T02:20:57Z"}]}
{"id":"lettatoolsselector-4fjlj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:08.577041747Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:08.577041747Z","comments":[{"id":1992,"issue_id":"lettatoolsselector-4fjlj","author":"root","text":"Synced from Beads: lettatoolsselector-1i3j\n\n---\nHuly Issue: LTSEL-324","created_at":"2026-01-02T03:29:08Z"}]}
{"id":"lettatoolsselector-4g01x","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:36.483649685Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:36.483649685Z","comments":[{"id":1923,"issue_id":"lettatoolsselector-4g01x","author":"root","text":"Synced from Beads: lettatoolsselector-asci\n\n---\nHuly Issue: LTSEL-406","created_at":"2026-01-02T03:28:36Z"}]}
{"id":"lettatoolsselector-4g89c","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:12:03.612290116Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:12:04.135757864Z","closed_at":"2026-01-02T11:12:04.135757864Z","close_reason":"Closed","comments":[{"id":3199,"issue_id":"lettatoolsselector-4g89c","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T11:12:03Z"}]}
{"id":"lettatoolsselector-4gak4","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:57:57.005887582Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:57:57.614683263Z","closed_at":"2026-01-02T19:57:57.614683263Z","close_reason":"Closed","comments":[{"id":4019,"issue_id":"lettatoolsselector-4gak4","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T19:57:57Z"}]}
{"id":"lettatoolsselector-4godl","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:39:18.611120169Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:18.968983684Z","closed_at":"2026-01-02T13:39:18.968983684Z","close_reason":"Closed"}
{"id":"lettatoolsselector-4gogi","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T13:39:07.20381728Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:07.635154819Z","closed_at":"2026-01-02T13:39:07.635154819Z","close_reason":"Closed"}
{"id":"lettatoolsselector-4gri4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:40.289648799Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:40.289648799Z","comments":[{"id":1931,"issue_id":"lettatoolsselector-4gri4","author":"root","text":"Synced from Beads: lettatoolsselector-qbgt\n\n---\nHuly Issue: LTSEL-396","created_at":"2026-01-02T03:28:40Z"}]}
{"id":"lettatoolsselector-4gv1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:51.323124074Z","updated_at":"2025-12-30T04:14:01.962894288Z","comments":[{"id":819,"issue_id":"lettatoolsselector-4gv1","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-112","created_at":"2025-12-29T21:00:51Z"}]}
{"id":"lettatoolsselector-4hes3","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:07.719211715Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:08.399355124Z","closed_at":"2026-01-02T20:38:08.399355124Z","close_reason":"Closed","comments":[{"id":4108,"issue_id":"lettatoolsselector-4hes3","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T20:38:08Z"}]}
{"id":"lettatoolsselector-4hn31","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:38.789179184Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:39.336089395Z","closed_at":"2026-01-02T11:09:39.336089395Z","close_reason":"Closed","comments":[{"id":3177,"issue_id":"lettatoolsselector-4hn31","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T11:09:39Z"}]}
{"id":"lettatoolsselector-4hwpm","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:18:41.93794886Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:42.240854485Z","closed_at":"2026-01-02T06:18:42.240854485Z","close_reason":"Closed"}
{"id":"lettatoolsselector-4i6ew","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:52.804006874Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:53.352279828Z","closed_at":"2026-01-02T08:54:53.352279828Z","close_reason":"Closed","comments":[{"id":2889,"issue_id":"lettatoolsselector-4i6ew","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T08:54:53Z"}]}
{"id":"lettatoolsselector-4iil7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:38.409461243Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:38.409461243Z","comments":[{"id":1927,"issue_id":"lettatoolsselector-4iil7","author":"root","text":"Synced from Beads: lettatoolsselector-jdh0\n\n---\nHuly Issue: LTSEL-401","created_at":"2026-01-02T03:28:38Z"}]}
{"id":"lettatoolsselector-4isq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:16:19.798292616Z","updated_at":"2025-12-30T01:51:25.215645722Z","comments":[{"id":974,"issue_id":"lettatoolsselector-4isq","author":"root","text":"Synced from Beads: lettatoolsselector-an3\n\n---\nHuly Issue: LTSEL-89","created_at":"2025-12-29T21:16:20Z"}]}
{"id":"lettatoolsselector-4j1q","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:18:05.676754432Z","updated_at":"2025-12-30T01:54:01.338201922Z","comments":[{"id":987,"issue_id":"lettatoolsselector-4j1q","author":"root","text":"Synced from Beads: lettatoolsselector-leh\n\n---\nHuly Issue: LTSEL-81","created_at":"2025-12-29T21:18:06Z"}]}
{"id":"lettatoolsselector-4jp3w","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:23.925575972Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:24.445569763Z","closed_at":"2026-01-02T10:59:24.445569763Z","close_reason":"Closed","comments":[{"id":3142,"issue_id":"lettatoolsselector-4jp3w","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T10:59:24Z"}]}
{"id":"lettatoolsselector-4k4hv","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:32:41.48918976Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:32:42.121187063Z","closed_at":"2026-01-02T14:32:42.121187063Z","close_reason":"Closed","comments":[{"id":3468,"issue_id":"lettatoolsselector-4k4hv","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T14:32:41Z"}]}
{"id":"lettatoolsselector-4kbg2","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:25.667018784Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:26.13830714Z","closed_at":"2026-01-02T07:42:26.13830714Z","close_reason":"Closed","comments":[{"id":2743,"issue_id":"lettatoolsselector-4kbg2","author":"root","text":"Synced from Huly: LTSEL-46","created_at":"2026-01-02T07:42:25Z"}]}
{"id":"lettatoolsselector-4khm","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:58.342447077Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:58.832775125Z","closed_at":"2026-01-02T01:24:58.832775125Z","close_reason":"Closed","comments":[{"id":1233,"issue_id":"lettatoolsselector-4khm","author":"root","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2026-01-02T01:24:58Z"}]}
{"id":"lettatoolsselector-4mezl","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:59:09.962378837Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:10.574884494Z","closed_at":"2026-01-02T19:59:10.574884494Z","close_reason":"Closed","comments":[{"id":4029,"issue_id":"lettatoolsselector-4mezl","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T19:59:10Z"}]}
{"id":"lettatoolsselector-4mfkz","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:05.189251413Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:05.770392413Z","closed_at":"2026-01-02T08:02:05.770392413Z","close_reason":"Closed","comments":[{"id":2797,"issue_id":"lettatoolsselector-4mfkz","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T08:02:05Z"}]}
{"id":"lettatoolsselector-4mj2p","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:57:40.742536398Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:57:41.405655365Z","closed_at":"2026-01-02T18:57:41.405655365Z","close_reason":"Closed","comments":[{"id":3916,"issue_id":"lettatoolsselector-4mj2p","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T18:57:41Z"}]}
{"id":"lettatoolsselector-4ne8q","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:23.757808975Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:23.757808975Z","comments":[{"id":2182,"issue_id":"lettatoolsselector-4ne8q","author":"root","text":"Synced from Huly: LTSEL-724","created_at":"2026-01-02T03:43:23Z"}]}
{"id":"lettatoolsselector-4o2y0","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:51:35.012475531Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:51:35.540568588Z","closed_at":"2026-01-02T21:51:35.540568588Z","close_reason":"Closed"}
{"id":"lettatoolsselector-4og7h","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:24:43.247319141Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:24:43.88162479Z","closed_at":"2026-01-02T18:24:43.88162479Z","close_reason":"Closed","comments":[{"id":3832,"issue_id":"lettatoolsselector-4og7h","author":"root","text":"Synced from Huly: LTSEL-42","created_at":"2026-01-02T18:24:43Z"}]}
{"id":"lettatoolsselector-4oy08","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:16.114771705Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:16.114771705Z","comments":[{"id":2006,"issue_id":"lettatoolsselector-4oy08","author":"root","text":"Synced from Beads: lettatoolsselector-losm\n\n---\nHuly Issue: LTSEL-309","created_at":"2026-01-02T03:29:16Z"}]}
{"id":"lettatoolsselector-4p9c","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:44.685901003Z","updated_at":"2025-12-30T03:29:54.868642031Z","comments":[{"id":361,"issue_id":"lettatoolsselector-4p9c","author":"root","text":"Synced from Beads: lettatoolsselector-kl5\n\n---\nHuly Issue: LTSEL-209","created_at":"2025-12-29T20:14:44Z"}]}
{"id":"lettatoolsselector-4pg5w","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:19:45.456978026Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:19:46.209863727Z","closed_at":"2026-01-02T20:19:46.209863727Z","close_reason":"Closed","comments":[{"id":4083,"issue_id":"lettatoolsselector-4pg5w","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T20:19:45Z"}]}
{"id":"lettatoolsselector-4pm66","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:12:51.649784649Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:12:52.254527764Z","closed_at":"2026-01-02T11:12:52.254527764Z","close_reason":"Closed","comments":[{"id":3202,"issue_id":"lettatoolsselector-4pm66","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T11:12:52Z"}]}
{"id":"lettatoolsselector-4q7p","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:45.647455166Z","updated_at":"2025-12-29T21:33:29.016668643Z","closed_at":"2025-12-29T21:33:29.016668643Z","close_reason":"Duplicate","comments":[{"id":402,"issue_id":"lettatoolsselector-4q7p","author":"root","text":"Synced from Beads: lettatoolsselector-joa\n\n---\nHuly Issue: LTSEL-187","created_at":"2025-12-29T20:18:45Z"}]}
{"id":"lettatoolsselector-4qre5","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:18:49.497771177Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:50.283996339Z","closed_at":"2026-01-02T06:18:50.283996339Z","close_reason":"Closed","comments":[{"id":2577,"issue_id":"lettatoolsselector-4qre5","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T06:18:50Z"}]}
{"id":"lettatoolsselector-4qrv8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:12.489782602Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:12.489782602Z","comments":[{"id":2229,"issue_id":"lettatoolsselector-4qrv8","author":"root","text":"Synced from Beads: lettatoolsselector-xfvm\n\n---\nHuly Issue: LTSEL-570","created_at":"2026-01-02T03:44:12Z"}]}
{"id":"lettatoolsselector-4r2cc","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:57:41.279430321Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:57:41.902817879Z","closed_at":"2026-01-02T19:57:41.902817879Z","close_reason":"Closed","comments":[{"id":4015,"issue_id":"lettatoolsselector-4r2cc","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T19:57:41Z"}]}
{"id":"lettatoolsselector-4r5x9","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:04:46.438267839Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:04:46.961905259Z","closed_at":"2026-01-02T14:04:46.961905259Z","close_reason":"Closed","comments":[{"id":3388,"issue_id":"lettatoolsselector-4r5x9","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T14:04:46Z"}]}
{"id":"lettatoolsselector-4rkmc","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:50.113366101Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:50.539845298Z","closed_at":"2026-01-02T04:39:50.539845298Z","close_reason":"Closed","comments":[{"id":2429,"issue_id":"lettatoolsselector-4rkmc","author":"root","text":"Synced from Huly: LTSEL-30","created_at":"2026-01-02T04:39:50Z"}]}
{"id":"lettatoolsselector-4rm4","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:01.674244653Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:02.038373655Z","closed_at":"2026-01-02T02:35:02.038373655Z","close_reason":"Closed","comments":[{"id":1322,"issue_id":"lettatoolsselector-4rm4","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T02:35:01Z"}]}
{"id":"lettatoolsselector-4rnv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:20:32.928680942Z","updated_at":"2025-12-30T01:56:15.836826217Z","comments":[{"id":1005,"issue_id":"lettatoolsselector-4rnv","author":"root","text":"Synced from Beads: lettatoolsselector-1kj\n\n---\nHuly Issue: LTSEL-76","created_at":"2025-12-29T21:20:33Z"}]}
{"id":"lettatoolsselector-4rsd8","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:43:39.732717804Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:43:40.107210048Z","closed_at":"2026-01-02T09:43:40.107210048Z","close_reason":"Closed"}
{"id":"lettatoolsselector-4rvw","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:02:08.653008462Z","updated_at":"2025-12-30T04:11:49.156740407Z","comments":[{"id":829,"issue_id":"lettatoolsselector-4rvw","author":"root","text":"Synced from Beads: lettatoolsselector-2iz\n\n---\nHuly Issue: LTSEL-120","created_at":"2025-12-29T21:02:08Z"}]}
{"id":"lettatoolsselector-4s3nz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:27.375060086Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:27.375060086Z","comments":[{"id":1902,"issue_id":"lettatoolsselector-4s3nz","author":"root","text":"Synced from Beads: lettatoolsselector-zc1i\n\n---\nHuly Issue: LTSEL-435","created_at":"2026-01-02T03:28:27Z"}]}
{"id":"lettatoolsselector-4s86w","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:13.971839533Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:14.415736688Z","closed_at":"2026-01-02T03:30:14.415736688Z","close_reason":"Closed","comments":[{"id":2097,"issue_id":"lettatoolsselector-4s86w","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T03:30:14Z"}]}
{"id":"lettatoolsselector-4smgj","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:37:03.014627504Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:37:04.880707051Z","closed_at":"2026-01-02T19:37:04.880707051Z","close_reason":"Closed","comments":[{"id":3968,"issue_id":"lettatoolsselector-4smgj","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T19:37:04Z"}]}
{"id":"lettatoolsselector-4sun3","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:45.135262603Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:45.733385249Z","closed_at":"2026-01-02T06:36:45.733385249Z","close_reason":"Closed","comments":[{"id":2607,"issue_id":"lettatoolsselector-4sun3","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T06:36:45Z"}]}
{"id":"lettatoolsselector-4sxv","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T02:20:23.977646869Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:24.648107308Z","closed_at":"2026-01-02T02:20:24.648107308Z","close_reason":"Closed","comments":[{"id":1301,"issue_id":"lettatoolsselector-4sxv","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T02:20:24Z"}]}
{"id":"lettatoolsselector-4t4g","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:46.959962595Z","updated_at":"2025-12-30T02:08:15.396089009Z","comments":[{"id":927,"issue_id":"lettatoolsselector-4t4g","author":"root","text":"Synced from Beads: lettatoolsselector-dg2\n\n---\nHuly Issue: LTSEL-88","created_at":"2025-12-29T21:11:47Z"}]}
{"id":"lettatoolsselector-4teiz","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:55.553532999Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:55.908158184Z","closed_at":"2026-01-02T03:06:55.908158184Z","close_reason":"Closed","comments":[{"id":1577,"issue_id":"lettatoolsselector-4teiz","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T03:06:55Z"}]}
{"id":"lettatoolsselector-4thb7","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:26:09.089724246Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:26:09.800900717Z","closed_at":"2026-01-02T17:26:09.800900717Z","close_reason":"Closed","comments":[{"id":3742,"issue_id":"lettatoolsselector-4thb7","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T17:26:09Z"}]}
{"id":"lettatoolsselector-4tje7","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:58:46.727417557Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:58:47.350186159Z","closed_at":"2026-01-02T19:58:47.350186159Z","close_reason":"Closed","comments":[{"id":4025,"issue_id":"lettatoolsselector-4tje7","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T19:58:47Z"}]}
{"id":"lettatoolsselector-4tm","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:12.941728881Z","updated_at":"2025-12-23T03:23:13.332563419Z","closed_at":"2025-12-23T03:23:13.332563419Z","close_reason":"Closed","comments":[{"id":36,"issue_id":"lettatoolsselector-4tm","author":"node","text":"## Problem\n\nTool management logic is duplicated across webhook-receiver and tool-selector repos, causing drift and inconsistent behavior.\n\n## Solution\n\nCreate a shared Python package  that can be installed in both repos.\n\n## Acceptance Criteria\n\n- [ ] Package scaffold with  and proper versioning\n- [ ] Package published to private PyPI or installable via git+https\n- [ ] Basic CI/CD pipeline for testing and publishing\n- [ ] README with installation and usage instructions\n\n## Technical Notes\n\n- Use  layout for clean imports\n- Target Python 3.11+\n- Include type hints throughout\n\n---\nHuly Issue: LTSEL-1","created_at":"2025-12-23T03:23:13Z"}]}
{"id":"lettatoolsselector-4tqlc","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:16.043687559Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:16.478545035Z","closed_at":"2026-01-02T04:20:16.478545035Z","close_reason":"Closed","comments":[{"id":2371,"issue_id":"lettatoolsselector-4tqlc","author":"root","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2026-01-02T04:20:16Z"}]}
{"id":"lettatoolsselector-4v518","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:57:15.836225615Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:16.341700057Z","closed_at":"2026-01-02T08:57:16.341700057Z","close_reason":"Closed","comments":[{"id":2921,"issue_id":"lettatoolsselector-4v518","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T08:57:16Z"}]}
{"id":"lettatoolsselector-4v645","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:49:18.967780099Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:49:19.713025435Z","closed_at":"2026-01-02T23:49:19.713025435Z","close_reason":"Closed","comments":[{"id":4385,"issue_id":"lettatoolsselector-4v645","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T23:49:19Z"}]}
{"id":"lettatoolsselector-4veb","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:19.741532025Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:20.117907739Z","closed_at":"2026-01-02T02:35:20.117907739Z","close_reason":"Closed","comments":[{"id":1351,"issue_id":"lettatoolsselector-4veb","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T02:35:19Z"}]}
{"id":"lettatoolsselector-4vusa","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:36:22.433924104Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:23.004512839Z","closed_at":"2026-01-02T11:36:23.004512839Z","close_reason":"Closed","comments":[{"id":3238,"issue_id":"lettatoolsselector-4vusa","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T11:36:22Z"}]}
{"id":"lettatoolsselector-4vwt5","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T04:20:20.32992849Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:20.778121103Z","closed_at":"2026-01-02T04:20:20.778121103Z","close_reason":"Closed","comments":[{"id":2377,"issue_id":"lettatoolsselector-4vwt5","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T04:20:20Z"}]}
{"id":"lettatoolsselector-4w2q","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:00.472987592Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:00.905590358Z","closed_at":"2026-01-02T02:35:00.905590358Z","close_reason":"Closed","comments":[{"id":1320,"issue_id":"lettatoolsselector-4w2q","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T02:35:00Z"}]}
{"id":"lettatoolsselector-4w49","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:44.704529014Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:45.044671129Z","closed_at":"2026-01-02T01:24:45.044671129Z","close_reason":"Closed","comments":[{"id":1210,"issue_id":"lettatoolsselector-4w49","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T01:24:44Z"}]}
{"id":"lettatoolsselector-4w9","title":"[Refactor] Phase 3: Extract service layer - SearchService","description":"Extract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService (`services/search_service.py`)\n\nMove/consolidate these:\n\n| Source | Function | Responsibility |\n|--------|----------|----------------|\n| api_server.py | `unified_tool_search()` | Unified search interface |\n| weaviate_tool_search_with_reranking.py | `search_tools()` | Weaviate search |\n| weaviate_tool_search_with_reranking.py | `search_tools_with_reranking()` | Search + rerank |\n\n### Interface\n```python\nclass SearchService:\n    def __init__(\n        self, \n        weaviate_client,\n        reranker_config: RerankerConfig,\n        expansion_config: ExpansionConfig\n    ):\n        self.weaviate = weaviate_client\n        self.reranker = reranker_config\n        self.expansion = expansion_config\n    \n    async def search(\n        self,\n        query: str,\n        limit: int = 10,\n        min_score: float = 0.0,\n        enable_reranking: bool = True,\n        enable_expansion: bool = True\n    ) -\u003e List[ToolSearchResult]:\n        ...\n    \n    async def rerank(\n        self,\n        query: str,\n        documents: List[str],\n        top_k: int = 10\n    ) -\u003e List[RerankResult]:\n        ...\n    \n    def expand_query(self, query: str) -\u003e ExpandedQuery:\n        ...\n```\n\n### Reranker Abstraction\n```python\nclass RerankerClient(Protocol):\n    async def rerank(self, query: str, documents: List[str], top_k: int) -\u003e List[RerankResult]:\n        ...\n\nclass VLLMReranker(RerankerClient):\n    # http://100.81.139.20:11435/v1/rerank\n    ...\n\nclass OllamaReranker(RerankerClient):\n    # http://ollama-reranker-adapter:8080/rerank\n    ...\n```\n\n## Acceptance Criteria\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:37:39.506134951Z","updated_at":"2025-12-29T19:02:07.732528849Z","closed_at":"2025-12-29T19:02:07.732528849Z","close_reason":"SearchService extracted to search_service.py (615 lines)"}
{"id":"lettatoolsselector-4wnv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:29:36.411136906Z","updated_at":"2025-12-30T02:03:28.284793673Z","comments":[{"id":1051,"issue_id":"lettatoolsselector-4wnv","author":"root","text":"Synced from Beads: lettatoolsselector-cgd\n\n---\nHuly Issue: LTSEL-73","created_at":"2025-12-29T21:29:36Z"}]}
{"id":"lettatoolsselector-4wxk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:17.24685709Z","updated_at":"2025-12-30T04:14:21.453466022Z","comments":[{"id":904,"issue_id":"lettatoolsselector-4wxk","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-109","created_at":"2025-12-29T21:09:17Z"}]}
{"id":"lettatoolsselector-4xbq8","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:45:49.811795583Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:45:50.368013924Z","closed_at":"2026-01-02T15:45:50.368013924Z","close_reason":"Closed","comments":[{"id":3590,"issue_id":"lettatoolsselector-4xbq8","author":"root","text":"Synced from Huly: LTSEL-43","created_at":"2026-01-02T15:45:50Z"}]}
{"id":"lettatoolsselector-4xf0g","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:11.054795519Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:11.627082491Z","closed_at":"2026-01-02T14:29:11.627082491Z","close_reason":"Closed","comments":[{"id":3440,"issue_id":"lettatoolsselector-4xf0g","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T14:29:11Z"}]}
{"id":"lettatoolsselector-4xjel","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:55.091918333Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:55.637832116Z","closed_at":"2026-01-02T14:57:55.637832116Z","close_reason":"Closed","comments":[{"id":3497,"issue_id":"lettatoolsselector-4xjel","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T14:57:55Z"}]}
{"id":"lettatoolsselector-4xui","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:27:23.276267844Z","updated_at":"2025-12-30T02:01:47.644243125Z","comments":[{"id":1040,"issue_id":"lettatoolsselector-4xui","author":"root","text":"Synced from Beads: lettatoolsselector-ksi\n\n---\nHuly Issue: LTSEL-64","created_at":"2025-12-29T21:27:23Z"}]}
{"id":"lettatoolsselector-4xw9d","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:58:19.125723526Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:19.714252149Z","closed_at":"2026-01-02T14:58:19.714252149Z","close_reason":"Closed","comments":[{"id":3506,"issue_id":"lettatoolsselector-4xw9d","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T14:58:19Z"}]}
{"id":"lettatoolsselector-4y1mn","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:51:47.267840566Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:51:47.832375572Z","closed_at":"2026-01-02T15:51:47.832375572Z","close_reason":"Closed","comments":[{"id":3628,"issue_id":"lettatoolsselector-4y1mn","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T15:51:47Z"}]}
{"id":"lettatoolsselector-4y1zf","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:24:53.207426408Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:24:53.786119661Z","closed_at":"2026-01-02T19:24:53.786119661Z","close_reason":"Closed","comments":[{"id":3949,"issue_id":"lettatoolsselector-4y1zf","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T19:24:53Z"}]}
{"id":"lettatoolsselector-4yayi","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T05:41:17.579645726Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:18.064579469Z","closed_at":"2026-01-02T05:41:18.064579469Z","close_reason":"Closed","comments":[{"id":2491,"issue_id":"lettatoolsselector-4yayi","author":"root","text":"Synced from Huly: LTSEL-228","created_at":"2026-01-02T05:41:17Z"}]}
{"id":"lettatoolsselector-4yj7m","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:33.672251037Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:34.23194024Z","closed_at":"2026-01-02T15:20:34.23194024Z","close_reason":"Closed","comments":[{"id":3538,"issue_id":"lettatoolsselector-4yj7m","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T15:20:34Z"}]}
{"id":"lettatoolsselector-4z89g","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:28.731056446Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:28.731056446Z","comments":[{"id":2274,"issue_id":"lettatoolsselector-4z89g","author":"root","text":"Synced from Beads: lettatoolsselector-8rdg\n\n---\nHuly Issue: LTSEL-392","created_at":"2026-01-02T03:45:28Z"}]}
{"id":"lettatoolsselector-4zdiz","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:25.707871928Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:26.263767799Z","closed_at":"2026-01-02T09:21:26.263767799Z","close_reason":"Closed","comments":[{"id":2947,"issue_id":"lettatoolsselector-4zdiz","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T09:21:26Z"}]}
{"id":"lettatoolsselector-4zt9","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:47.617354375Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:47.957618388Z","closed_at":"2026-01-02T02:19:47.957618388Z","close_reason":"Closed","comments":[{"id":1288,"issue_id":"lettatoolsselector-4zt9","author":"root","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2026-01-02T02:19:47Z"}]}
{"id":"lettatoolsselector-4zzdy","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:44.461193354Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:44.822969204Z","closed_at":"2026-01-02T03:06:44.822969204Z","close_reason":"Closed","comments":[{"id":1564,"issue_id":"lettatoolsselector-4zzdy","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T03:06:44Z"}]}
{"id":"lettatoolsselector-50es","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:05.517127648Z","updated_at":"2025-12-29T21:33:27.560576775Z","closed_at":"2025-12-29T21:33:27.560576775Z","close_reason":"Duplicate","comments":[{"id":467,"issue_id":"lettatoolsselector-50es","author":"root","text":"Synced from Beads: lettatoolsselector-ux4\n\n---\nHuly Issue: LTSEL-186","created_at":"2025-12-29T20:24:05Z"}]}
{"id":"lettatoolsselector-50t3s","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:21:32.025617784Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:32.392727652Z","closed_at":"2026-01-02T15:21:32.392727652Z","close_reason":"Closed"}
{"id":"lettatoolsselector-51cv7","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:23:19.800456378Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:20.416728818Z","closed_at":"2026-01-02T15:23:20.416728818Z","close_reason":"Closed","comments":[{"id":3567,"issue_id":"lettatoolsselector-51cv7","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T15:23:20Z"}]}
{"id":"lettatoolsselector-51lj2","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:10.062169628Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:10.373787186Z","closed_at":"2026-01-02T06:00:10.373787186Z","close_reason":"Closed"}
{"id":"lettatoolsselector-52frf","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:52.224328074Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:52.224328074Z","comments":[{"id":2219,"issue_id":"lettatoolsselector-52frf","author":"root","text":"Synced from Beads: lettatoolsselector-1zc8\n\n---\nHuly Issue: LTSEL-613","created_at":"2026-01-02T03:43:52Z"}]}
{"id":"lettatoolsselector-52rvx","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:54:26.75671481Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:54:27.32653616Z","closed_at":"2026-01-02T17:54:27.32653616Z","close_reason":"Closed","comments":[{"id":3804,"issue_id":"lettatoolsselector-52rvx","author":"root","text":"Synced from Huly: LTSEL-239","created_at":"2026-01-02T17:54:27Z"}]}
{"id":"lettatoolsselector-534","title":"[Perf] Queue audit events for async background processing","description":"## Problem\nAudit events are emitted synchronously in the request path, adding latency to every attach/prune operation.\n\n**Location:** `routes/tools.py:557-603, 700-754`\n\n```python\n# Line 557-603\nif _emit_batch_event_func and _audit_action_class and _audit_source_class:\n    # ... emit events synchronously ...\n```\n\n## Impact\n- **Latency:** 1-10ms per request\n- **Priority:** LOW-MEDIUM\n\n## Solution\nQueue audit events for background processing:\n\n```python\nimport asyncio\nfrom collections import deque\n\n_audit_queue: deque = deque(maxsize=10000)\n_audit_task: asyncio.Task = None\n\ndef queue_audit_event(event: dict):\n    \"\"\"Queue event for background processing.\"\"\"\n    try:\n        _audit_queue.append(event)\n    except:\n        logger.warning(\"Audit queue full, dropping event\")\n\nasync def _process_audit_queue():\n    \"\"\"Background task to process audit events.\"\"\"\n    while True:\n        if _audit_queue:\n            event = _audit_queue.popleft()\n            try:\n                await _emit_event_async(event)\n            except Exception as e:\n                logger.error(f\"Failed to emit audit event: {e}\")\n        else:\n            await asyncio.sleep(0.1)\n\nasync def start_audit_processor():\n    global _audit_task\n    _audit_task = asyncio.create_task(_process_audit_queue())\n```\n\n## Acceptance Criteria\n- [ ] Audit events queued instead of sync emission\n- [ ] Background task processes queue\n- [ ] Queue overflow handling (drop oldest or warn)\n- [ ] Graceful shutdown flushes queue\n- [ ] All unit tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T01:50:47.407351837Z","updated_at":"2025-12-29T19:34:43.068258037Z","closed_at":"2025-12-29T19:34:43.068258037Z","close_reason":"Added async queue for audit events with background processor, start/stop lifecycle hooks, graceful shutdown with flush","labels":["performance"]}
{"id":"lettatoolsselector-539an","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:08.391334484Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:08.964215149Z","closed_at":"2026-01-02T03:47:08.964215149Z","close_reason":"Closed","comments":[{"id":2306,"issue_id":"lettatoolsselector-539an","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T03:47:08Z"}]}
{"id":"lettatoolsselector-53mkk","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:07:11.865839836Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:07:12.436873828Z","closed_at":"2026-01-02T17:07:12.436873828Z","close_reason":"Closed","comments":[{"id":3722,"issue_id":"lettatoolsselector-53mkk","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T17:07:12Z"}]}
{"id":"lettatoolsselector-53tp1","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:42:46.625354718Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:42:47.289638936Z","closed_at":"2026-01-02T09:42:47.289638936Z","close_reason":"Closed","comments":[{"id":3012,"issue_id":"lettatoolsselector-53tp1","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T09:42:46Z"}]}
{"id":"lettatoolsselector-54072","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:25:01.464231711Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:25:02.183706113Z","closed_at":"2026-01-02T21:25:02.183706113Z","close_reason":"Closed","comments":[{"id":4217,"issue_id":"lettatoolsselector-54072","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T21:25:01Z"}]}
{"id":"lettatoolsselector-54ig6","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:57:58.898635885Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:59.465309619Z","closed_at":"2026-01-02T08:57:59.465309619Z","close_reason":"Closed","comments":[{"id":2926,"issue_id":"lettatoolsselector-54ig6","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T08:57:59Z"}]}
{"id":"lettatoolsselector-54yfv","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:50.240461941Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:50.72507268Z","closed_at":"2026-01-02T05:59:50.72507268Z","close_reason":"Closed","comments":[{"id":2505,"issue_id":"lettatoolsselector-54yfv","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T05:59:50Z"}]}
{"id":"lettatoolsselector-55lb","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:08.921671272Z","updated_at":"2025-12-29T21:33:25.43166982Z","closed_at":"2025-12-29T21:33:25.43166982Z","close_reason":"Duplicate","comments":[{"id":575,"issue_id":"lettatoolsselector-55lb","author":"root","text":"Synced from Beads: lettatoolsselector-ar6\n\n---\nHuly Issue: LTSEL-162","created_at":"2025-12-29T20:33:09Z"}]}
{"id":"lettatoolsselector-55lpc","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:45:02.123592193Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:45:02.758206669Z","closed_at":"2026-01-02T19:45:02.758206669Z","close_reason":"Closed","comments":[{"id":4011,"issue_id":"lettatoolsselector-55lpc","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T19:45:02Z"}]}
{"id":"lettatoolsselector-55nw5","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:10.702274296Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:11.330941569Z","closed_at":"2026-01-02T20:38:11.330941569Z","close_reason":"Closed","comments":[{"id":4109,"issue_id":"lettatoolsselector-55nw5","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T20:38:11Z"}]}
{"id":"lettatoolsselector-55zuh","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:56:21.163190674Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:56:21.5360662Z","closed_at":"2026-01-02T09:56:21.5360662Z","close_reason":"Closed"}
{"id":"lettatoolsselector-560ff","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:40:14.406181852Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:40:15.047244102Z","closed_at":"2026-01-02T22:40:15.047244102Z","close_reason":"Closed","comments":[{"id":4354,"issue_id":"lettatoolsselector-560ff","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T22:40:14Z"}]}
{"id":"lettatoolsselector-56rhi","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:19:10.586249033Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:11.007935039Z","closed_at":"2026-01-02T06:19:11.007935039Z","close_reason":"Closed"}
{"id":"lettatoolsselector-56sws","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:24:42.742526882Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:24:43.344588519Z","closed_at":"2026-01-02T20:24:43.344588519Z","close_reason":"Closed","comments":[{"id":4104,"issue_id":"lettatoolsselector-56sws","author":"root","text":"Synced from Huly: LTSEL-235","created_at":"2026-01-02T20:24:43Z"}]}
{"id":"lettatoolsselector-57f5","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:20:36.529411514Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:36.975061556Z","closed_at":"2026-01-02T02:20:36.975061556Z","close_reason":"Closed","comments":[{"id":1307,"issue_id":"lettatoolsselector-57f5","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T02:20:36Z"}]}
{"id":"lettatoolsselector-57s6u","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:03.86729302Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:04.538520971Z","closed_at":"2026-01-02T20:16:04.538520971Z","close_reason":"Closed","comments":[{"id":4066,"issue_id":"lettatoolsselector-57s6u","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T20:16:04Z"}]}
{"id":"lettatoolsselector-57wyk","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:46.043420592Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:46.043420592Z","comments":[{"id":2206,"issue_id":"lettatoolsselector-57wyk","author":"root","text":"Synced from Huly: LTSEL-645","created_at":"2026-01-02T03:43:46Z"}]}
{"id":"lettatoolsselector-581al","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:50:42.795364655Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:50:43.447376129Z","closed_at":"2026-01-02T23:50:43.447376129Z","close_reason":"Closed","comments":[{"id":4393,"issue_id":"lettatoolsselector-581al","author":"root","text":"Synced from Huly: LTSEL-40","created_at":"2026-01-02T23:50:43Z"}]}
{"id":"lettatoolsselector-58kvu","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:15.263801814Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:15.68624588Z","closed_at":"2026-01-02T03:30:15.68624588Z","close_reason":"Closed","comments":[{"id":2098,"issue_id":"lettatoolsselector-58kvu","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T03:30:15Z"}]}
{"id":"lettatoolsselector-58p54","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:13.439293697Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:13.439293697Z","comments":[{"id":2001,"issue_id":"lettatoolsselector-58p54","author":"root","text":"Synced from Beads: lettatoolsselector-fufs\n\n---\nHuly Issue: LTSEL-314","created_at":"2026-01-02T03:29:13Z"}]}
{"id":"lettatoolsselector-59zc","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:05.004748584Z","updated_at":"2025-12-29T21:33:25.655418072Z","closed_at":"2025-12-29T21:33:25.655418072Z","close_reason":"Duplicate","comments":[{"id":564,"issue_id":"lettatoolsselector-59zc","author":"root","text":"Synced from Beads: lettatoolsselector-9k9\n\n---\nHuly Issue: LTSEL-171","created_at":"2025-12-29T20:32:05Z"}]}
{"id":"lettatoolsselector-5a6q7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:32.72142278Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:32.72142278Z","comments":[{"id":2042,"issue_id":"lettatoolsselector-5a6q7","author":"root","text":"Synced from Beads: lettatoolsselector-dzqn\n\n---\nHuly Issue: LTSEL-273","created_at":"2026-01-02T03:29:32Z"}]}
{"id":"lettatoolsselector-5aaqv","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:58:00.399111512Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:58:01.105138304Z","closed_at":"2026-01-02T20:58:01.105138304Z","close_reason":"Closed","comments":[{"id":4173,"issue_id":"lettatoolsselector-5aaqv","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T20:58:00Z"}]}
{"id":"lettatoolsselector-5ah8z","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:42:29.377697492Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:42:30.103756968Z","closed_at":"2026-01-02T19:42:30.103756968Z","close_reason":"Closed","comments":[{"id":4008,"issue_id":"lettatoolsselector-5ah8z","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T19:42:29Z"}]}
{"id":"lettatoolsselector-5aif9","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:14:35.67011356Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:14:36.391037562Z","closed_at":"2026-01-02T22:14:36.391037562Z","close_reason":"Closed","comments":[{"id":4291,"issue_id":"lettatoolsselector-5aif9","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T22:14:36Z"}]}
{"id":"lettatoolsselector-5ako","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:24.073427755Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:24.432097178Z","closed_at":"2026-01-02T03:06:24.432097178Z","close_reason":"Closed","comments":[{"id":1543,"issue_id":"lettatoolsselector-5ako","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T03:06:24Z"}]}
{"id":"lettatoolsselector-5azbs","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:55.528109341Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:56.141831591Z","closed_at":"2026-01-02T09:40:56.141831591Z","close_reason":"Closed","comments":[{"id":3000,"issue_id":"lettatoolsselector-5azbs","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T09:40:55Z"}]}
{"id":"lettatoolsselector-5b9i6","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:50:36.761204793Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:50:37.496544556Z","closed_at":"2026-01-02T23:50:37.496544556Z","close_reason":"Closed","comments":[{"id":4392,"issue_id":"lettatoolsselector-5b9i6","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T23:50:37Z"}]}
{"id":"lettatoolsselector-5bc0n","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:35:50.825902043Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:35:51.357415795Z","closed_at":"2026-01-02T10:35:51.357415795Z","close_reason":"Closed","comments":[{"id":3071,"issue_id":"lettatoolsselector-5bc0n","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T10:35:51Z"}]}
{"id":"lettatoolsselector-5bzv9","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:00.882153662Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:01.654485818Z","closed_at":"2026-01-02T08:55:01.654485818Z","close_reason":"Closed","comments":[{"id":2892,"issue_id":"lettatoolsselector-5bzv9","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T08:55:01Z"}]}
{"id":"lettatoolsselector-5cdy7","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:07:09.858666299Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:07:10.299325815Z","closed_at":"2026-01-02T17:07:10.299325815Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5cmnp","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:48.753006794Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:49.17382894Z","closed_at":"2026-01-02T03:47:49.17382894Z","close_reason":"Closed","comments":[{"id":2326,"issue_id":"lettatoolsselector-5cmnp","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T03:47:48Z"}]}
{"id":"lettatoolsselector-5cscf","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:10.061228975Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:10.701856631Z","closed_at":"2026-01-02T21:48:10.701856631Z","close_reason":"Closed","comments":[{"id":4256,"issue_id":"lettatoolsselector-5cscf","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T21:48:10Z"}]}
{"id":"lettatoolsselector-5csxh","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:48:48.992049618Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:48:49.766213264Z","closed_at":"2026-01-02T22:48:49.766213264Z","close_reason":"Closed","comments":[{"id":4374,"issue_id":"lettatoolsselector-5csxh","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T22:48:49Z"}]}
{"id":"lettatoolsselector-5epvi","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:07.853619343Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:07.853619343Z","comments":[{"id":2266,"issue_id":"lettatoolsselector-5epvi","author":"root","text":"Synced from Beads: lettatoolsselector-78x2\n\n---\nHuly Issue: LTSEL-422","created_at":"2026-01-02T03:45:08Z"}]}
{"id":"lettatoolsselector-5f8ai","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:42:49.832436648Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:50.184451267Z","closed_at":"2026-01-02T07:42:50.184451267Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5fhyf","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:00:56.375489063Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:00:56.907077686Z","closed_at":"2026-01-02T12:00:56.907077686Z","close_reason":"Closed","comments":[{"id":3276,"issue_id":"lettatoolsselector-5fhyf","author":"root","text":"Synced from Huly: LTSEL-243","created_at":"2026-01-02T12:00:56Z"}]}
{"id":"lettatoolsselector-5fji1","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:41:45.923065114Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:41:47.450310652Z","closed_at":"2026-01-02T13:41:47.450310652Z","close_reason":"Closed","comments":[{"id":3383,"issue_id":"lettatoolsselector-5fji1","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T13:41:47Z"}]}
{"id":"lettatoolsselector-5fnof","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:58:37.433435426Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:58:37.970750237Z","closed_at":"2026-01-02T12:58:37.970750237Z","close_reason":"Closed","comments":[{"id":3334,"issue_id":"lettatoolsselector-5fnof","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T12:58:37Z"}]}
{"id":"lettatoolsselector-5g0pk","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:31:02.626300552Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:31:02.990352953Z","closed_at":"2026-01-02T14:31:02.990352953Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5g68u","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:14.971751001Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:15.732561642Z","closed_at":"2026-01-02T21:48:15.732561642Z","close_reason":"Closed","comments":[{"id":4258,"issue_id":"lettatoolsselector-5g68u","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T21:48:15Z"}]}
{"id":"lettatoolsselector-5g9zo","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:04:35.659411901Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:04:36.235290894Z","closed_at":"2026-01-02T15:04:36.235290894Z","close_reason":"Closed","comments":[{"id":3530,"issue_id":"lettatoolsselector-5g9zo","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T15:04:35Z"}]}
{"id":"lettatoolsselector-5gcs9","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:49:30.066361475Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:49:30.518687006Z","closed_at":"2026-01-02T21:49:30.518687006Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5grea","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:41:47.114270639Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:47.459958384Z","closed_at":"2026-01-02T09:41:47.459958384Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5grf8","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:09:53.855291929Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:54.393898644Z","closed_at":"2026-01-02T14:09:54.393898644Z","close_reason":"Closed","comments":[{"id":3428,"issue_id":"lettatoolsselector-5grf8","author":"root","text":"Synced from Huly: LTSEL-227","created_at":"2026-01-02T14:09:54Z"}]}
{"id":"lettatoolsselector-5gu4","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:12.014605216Z","updated_at":"2025-12-29T21:33:26.345864233Z","closed_at":"2025-12-29T21:33:26.345864233Z","close_reason":"Duplicate","comments":[{"id":534,"issue_id":"lettatoolsselector-5gu4","author":"root","text":"Synced from Beads: lettatoolsselector-ayf\n\n---\nHuly Issue: LTSEL-176","created_at":"2025-12-29T20:29:12Z"}]}
{"id":"lettatoolsselector-5hck","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:13.357395619Z","updated_at":"2025-12-29T21:33:40.455601315Z","closed_at":"2025-12-29T21:33:40.455601315Z","close_reason":"Duplicate","comments":[{"id":771,"issue_id":"lettatoolsselector-5hck","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:56:13Z"}]}
{"id":"lettatoolsselector-5hds3","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:21:50.28716367Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:50.783221644Z","closed_at":"2026-01-02T04:21:50.783221644Z","close_reason":"Closed","comments":[{"id":2399,"issue_id":"lettatoolsselector-5hds3","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T04:21:50Z"}]}
{"id":"lettatoolsselector-5hl3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:31:27.305248952Z","updated_at":"2025-12-30T02:05:20.2307888Z","comments":[{"id":1059,"issue_id":"lettatoolsselector-5hl3","author":"root","text":"Synced from Beads: lettatoolsselector-9fs\n\n---\nHuly Issue: LTSEL-58","created_at":"2025-12-29T21:31:27Z"}]}
{"id":"lettatoolsselector-5hp67","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:47:13.492033679Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:47:15.453788769Z","closed_at":"2026-01-02T21:47:15.453788769Z","close_reason":"Closed","comments":[{"id":4243,"issue_id":"lettatoolsselector-5hp67","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T21:47:15Z"}]}
{"id":"lettatoolsselector-5hw7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:37.619485728Z","updated_at":"2025-12-29T21:33:44.437917679Z","closed_at":"2025-12-29T21:33:44.437917679Z","close_reason":"Duplicate","comments":[{"id":337,"issue_id":"lettatoolsselector-5hw7","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:12:37Z"}]}
{"id":"lettatoolsselector-5hxp1","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:44.874083005Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:45.560634911Z","closed_at":"2026-01-02T19:20:45.560634911Z","close_reason":"Closed","comments":[{"id":3935,"issue_id":"lettatoolsselector-5hxp1","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T19:20:45Z"}]}
{"id":"lettatoolsselector-5irqh","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:48.24483648Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:48.841386824Z","closed_at":"2026-01-02T06:17:48.841386824Z","close_reason":"Closed","comments":[{"id":2561,"issue_id":"lettatoolsselector-5irqh","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T06:17:48Z"}]}
{"id":"lettatoolsselector-5iy1g","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:11.238794407Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:11.238794407Z","comments":[{"id":2174,"issue_id":"lettatoolsselector-5iy1g","author":"root","text":"Synced from Huly: LTSEL-765","created_at":"2026-01-02T03:43:11Z"}]}
{"id":"lettatoolsselector-5j6mr","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:47:31.64353306Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:47:32.350940708Z","closed_at":"2026-01-02T15:47:32.350940708Z","close_reason":"Closed","comments":[{"id":3607,"issue_id":"lettatoolsselector-5j6mr","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T15:47:32Z"}]}
{"id":"lettatoolsselector-5jrto","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:59:46.632789815Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:59:47.301534084Z","closed_at":"2026-01-02T21:59:47.301534084Z","close_reason":"Closed","comments":[{"id":4286,"issue_id":"lettatoolsselector-5jrto","author":"root","text":"Synced from Huly: LTSEL-235","created_at":"2026-01-02T21:59:47Z"}]}
{"id":"lettatoolsselector-5js36","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:49:29.946953443Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:49:31.57827882Z","closed_at":"2026-01-02T15:49:31.57827882Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5k9is","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:35:16.110610494Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:35:16.680720641Z","closed_at":"2026-01-02T14:35:16.680720641Z","close_reason":"Closed","comments":[{"id":3479,"issue_id":"lettatoolsselector-5k9is","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T14:35:16Z"}]}
{"id":"lettatoolsselector-5kb6f","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:31.865757511Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:32.503162129Z","closed_at":"2026-01-02T20:38:32.503162129Z","close_reason":"Closed","comments":[{"id":4116,"issue_id":"lettatoolsselector-5kb6f","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T20:38:32Z"}]}
{"id":"lettatoolsselector-5kmmh","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:26:27.242405656Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:26:27.979230202Z","closed_at":"2026-01-02T21:26:27.979230202Z","close_reason":"Closed","comments":[{"id":4221,"issue_id":"lettatoolsselector-5kmmh","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T21:26:27Z"}]}
{"id":"lettatoolsselector-5l3","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:16.775680432Z","updated_at":"2025-12-29T18:03:11.283548875-05:00","closed_at":"2025-12-29T18:03:11.283548875-05:00","close_reason":"No webhook receiver component exists in this codebase. The webhook references are for outgoing notifications (Matrix bridge), not an incoming receiver. Task not applicable.","comments":[{"id":40,"issue_id":"lettatoolsselector-5l3","author":"node","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2025-12-23T03:23:16Z"}]}
{"id":"lettatoolsselector-5lew","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:38.907969086Z","updated_at":"2025-12-29T21:33:28.026820963Z","closed_at":"2025-12-29T21:33:28.026820963Z","close_reason":"Duplicate","comments":[{"id":450,"issue_id":"lettatoolsselector-5lew","author":"root","text":"Synced from Beads: lettatoolsselector-0do\n\n---\nHuly Issue: LTSEL-189","created_at":"2025-12-29T20:22:39Z"}]}
{"id":"lettatoolsselector-5m4g","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:45.324691843Z","updated_at":"2025-12-29T21:33:27.794685749Z","closed_at":"2025-12-29T21:33:27.794685749Z","close_reason":"Duplicate","comments":[{"id":462,"issue_id":"lettatoolsselector-5m4g","author":"root","text":"Synced from Beads: lettatoolsselector-joa\n\n---\nHuly Issue: LTSEL-187","created_at":"2025-12-29T20:23:45Z"}]}
{"id":"lettatoolsselector-5mfxg","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:21:56.000631588Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:56.428059228Z","closed_at":"2026-01-02T09:21:56.428059228Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5mv01","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:18.811917303Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:19.410510364Z","closed_at":"2026-01-02T08:20:19.410510364Z","close_reason":"Closed","comments":[{"id":2848,"issue_id":"lettatoolsselector-5mv01","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T08:20:19Z"}]}
{"id":"lettatoolsselector-5n01l","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:24:38.043823414Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:38.574810337Z","closed_at":"2026-01-02T07:24:38.574810337Z","close_reason":"Closed","comments":[{"id":2728,"issue_id":"lettatoolsselector-5n01l","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T07:24:38Z"}]}
{"id":"lettatoolsselector-5ns6l","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:03.544570632Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:04.190943013Z","closed_at":"2026-01-02T19:20:04.190943013Z","close_reason":"Closed","comments":[{"id":3924,"issue_id":"lettatoolsselector-5ns6l","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T19:20:03Z"}]}
{"id":"lettatoolsselector-5ofi","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:34.492718083Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:34.948883824Z","closed_at":"2026-01-02T02:20:34.948883824Z","close_reason":"Closed","comments":[{"id":1306,"issue_id":"lettatoolsselector-5ofi","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T02:20:34Z"}]}
{"id":"lettatoolsselector-5om0c","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:41:20.246658846Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:20.719513041Z","closed_at":"2026-01-02T05:41:20.719513041Z","close_reason":"Closed","comments":[{"id":2494,"issue_id":"lettatoolsselector-5om0c","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T05:41:20Z"}]}
{"id":"lettatoolsselector-5ov2a","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:28.392508087Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:28.392508087Z","comments":[{"id":2032,"issue_id":"lettatoolsselector-5ov2a","author":"root","text":"Synced from Beads: lettatoolsselector-p1cp\n\n---\nHuly Issue: LTSEL-283","created_at":"2026-01-02T03:29:28Z"}]}
{"id":"lettatoolsselector-5p7ic","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:58:23.86864697Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:58:24.621714205Z","closed_at":"2026-01-02T20:58:24.621714205Z","close_reason":"Closed","comments":[{"id":4175,"issue_id":"lettatoolsselector-5p7ic","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T20:58:24Z"}]}
{"id":"lettatoolsselector-5pmc3","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:39:06.512544909Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:07.27798695Z","closed_at":"2026-01-02T20:39:07.27798695Z","close_reason":"Closed","comments":[{"id":4125,"issue_id":"lettatoolsselector-5pmc3","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T20:39:06Z"}]}
{"id":"lettatoolsselector-5pnmz","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:13.406430098Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:14.103101432Z","closed_at":"2026-01-02T18:25:14.103101432Z","close_reason":"Closed","comments":[{"id":3836,"issue_id":"lettatoolsselector-5pnmz","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T18:25:13Z"}]}
{"id":"lettatoolsselector-5pov9","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:51:40.088010286Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:40.682268979Z","closed_at":"2026-01-02T18:51:40.682268979Z","close_reason":"Closed","comments":[{"id":3899,"issue_id":"lettatoolsselector-5pov9","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T18:51:40Z"}]}
{"id":"lettatoolsselector-5qpio","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:37:06.021054356Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:37:06.610957093Z","closed_at":"2026-01-02T13:37:06.610957093Z","close_reason":"Closed","comments":[{"id":3367,"issue_id":"lettatoolsselector-5qpio","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T13:37:06Z"}]}
{"id":"lettatoolsselector-5qq80","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:25:10.138461684Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:25:10.783549053Z","closed_at":"2026-01-02T19:25:10.783549053Z","close_reason":"Closed","comments":[{"id":3954,"issue_id":"lettatoolsselector-5qq80","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T19:25:10Z"}]}
{"id":"lettatoolsselector-5rba","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:27.458002301Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:27.667271972Z","closed_at":"2026-01-02T02:35:27.667271972Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5rf8x","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:04.439140471Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:04.866487059Z","closed_at":"2026-01-02T03:47:04.866487059Z","close_reason":"Closed","comments":[{"id":2302,"issue_id":"lettatoolsselector-5rf8x","author":"root","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2026-01-02T03:47:04Z"}]}
{"id":"lettatoolsselector-5rgqo","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:01.999542222Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:02.291486605Z","closed_at":"2026-01-02T05:41:02.291486605Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5rrnq","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:13.778517724Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:13.778517724Z","comments":[{"id":2230,"issue_id":"lettatoolsselector-5rrnq","author":"root","text":"Synced from Beads: lettatoolsselector-osh5\n\n---\nHuly Issue: LTSEL-569","created_at":"2026-01-02T03:44:14Z"}]}
{"id":"lettatoolsselector-5sf58","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:09:35.170835273Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:35.603736594Z","closed_at":"2026-01-02T14:09:35.603736594Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5sk01","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:22:07.782008968Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:22:08.291749521Z","closed_at":"2026-01-02T08:22:08.291749521Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5t9uz","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T13:39:58.243720284Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:58.874787339Z","closed_at":"2026-01-02T13:39:58.874787339Z","close_reason":"Closed","comments":[{"id":3376,"issue_id":"lettatoolsselector-5t9uz","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T13:39:58Z"}]}
{"id":"lettatoolsselector-5trhj","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:29:35.67378769Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:36.263437554Z","closed_at":"2026-01-02T17:29:36.263437554Z","close_reason":"Closed","comments":[{"id":3757,"issue_id":"lettatoolsselector-5trhj","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T17:29:36Z"}]}
{"id":"lettatoolsselector-5u0s","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:23.521659558Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:23.851513796Z","closed_at":"2026-01-02T01:08:23.851513796Z","close_reason":"Closed","comments":[{"id":1177,"issue_id":"lettatoolsselector-5u0s","author":"root","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2026-01-02T01:08:23Z"}]}
{"id":"lettatoolsselector-5u70","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:20.617013371Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:20.973728712Z","closed_at":"2026-01-02T01:25:20.973728712Z","close_reason":"Closed","comments":[{"id":1260,"issue_id":"lettatoolsselector-5u70","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T01:25:20Z"}]}
{"id":"lettatoolsselector-5us42","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:12.738245231Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:12.738245231Z","comments":[{"id":2176,"issue_id":"lettatoolsselector-5us42","author":"root","text":"Synced from Beads: lettatoolsselector-8q9\n\n---\nHuly Issue: LTSEL-763","created_at":"2026-01-02T03:43:13Z"}]}
{"id":"lettatoolsselector-5uuk5","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:21:48.094895053Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:48.717098178Z","closed_at":"2026-01-02T09:21:48.717098178Z","close_reason":"Closed","comments":[{"id":2955,"issue_id":"lettatoolsselector-5uuk5","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T09:21:48Z"}]}
{"id":"lettatoolsselector-5vjn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:17.732010797Z","updated_at":"2025-12-30T04:14:00.898671362Z","comments":[{"id":816,"issue_id":"lettatoolsselector-5vjn","author":"root","text":"Synced from Beads: lettatoolsselector-5mj\n\n---\nHuly Issue: LTSEL-123","created_at":"2025-12-29T21:00:18Z"}]}
{"id":"lettatoolsselector-5vlx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:06:07.471025392Z","updated_at":"2025-12-30T04:11:58.016292159Z","comments":[{"id":872,"issue_id":"lettatoolsselector-5vlx","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-109","created_at":"2025-12-29T21:06:07Z"}]}
{"id":"lettatoolsselector-5vtj","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:34.194775864Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:34.542959356Z","closed_at":"2026-01-02T02:19:34.542959356Z","close_reason":"Closed","comments":[{"id":1276,"issue_id":"lettatoolsselector-5vtj","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T02:19:34Z"}]}
{"id":"lettatoolsselector-5vu","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:28:00.54116237Z","updated_at":"2025-12-29T18:08:46.350949664-05:00","closed_at":"2025-12-29T18:08:46.350949664-05:00","close_reason":"Added config validation step to CI pipeline","comments":[{"id":53,"issue_id":"lettatoolsselector-5vu","author":"node","text":"Synced from Beads: lettatoolsselector-388\n\n---\nHuly Issue: LTSEL-31","created_at":"2025-12-23T03:28:00Z"}]}
{"id":"lettatoolsselector-5vui","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:43.492875133Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:43.892963884Z","closed_at":"2026-01-02T01:24:43.892963884Z","close_reason":"Closed","comments":[{"id":1208,"issue_id":"lettatoolsselector-5vui","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T01:24:43Z"}]}
{"id":"lettatoolsselector-5wwok","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:06:46.068011424Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:46.300568525Z","closed_at":"2026-01-02T03:06:46.300568525Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5x6w9","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:18:08.905489219Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:09.368814197Z","closed_at":"2026-01-02T06:18:09.368814197Z","close_reason":"Closed","comments":[{"id":2571,"issue_id":"lettatoolsselector-5x6w9","author":"root","text":"Synced from Huly: LTSEL-222","created_at":"2026-01-02T06:18:09Z"}]}
{"id":"lettatoolsselector-5xjd8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:15.858570449Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:15.858570449Z","comments":[{"id":1876,"issue_id":"lettatoolsselector-5xjd8","author":"root","text":"Synced from Beads: lettatoolsselector-poyh\n\n---\nHuly Issue: LTSEL-473","created_at":"2026-01-02T03:28:16Z"}]}
{"id":"lettatoolsselector-5xlby","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:07.764363896Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:08.339667698Z","closed_at":"2026-01-02T14:29:08.339667698Z","close_reason":"Closed","comments":[{"id":3439,"issue_id":"lettatoolsselector-5xlby","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T14:29:08Z"}]}
{"id":"lettatoolsselector-5xn","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:05.985338423Z","updated_at":"2025-12-23T03:23:06.372637179Z","closed_at":"2025-12-23T03:23:06.372637179Z","close_reason":"Closed","comments":[{"id":29,"issue_id":"lettatoolsselector-5xn","author":"node","text":"## Purpose\n\nRegression guard to ensure protected tools are never removed during pruning.\n\n## Test Scenario\n\n1. Create test agent with MAX_TOTAL_TOOLS tools including find_agents\n2. Trigger attachment that would require pruning\n3. Assert: find_agents is still attached after operation\n4. Repeat for each protected tool in PROTECTED_TOOLS list\n\n## Acceptance Criteria\n\n- [ ] Test runs in CI on every PR\n- [ ] Covers all configured protected tools\n- [ ] Fails if any protected tool is detached\n- [ ] Logs which tools were pruned vs preserved\n\n## Technical Notes\n\n- Parameterize test over PROTECTED_TOOLS list\n- Use pytest-parametrize for clean test output\n- Tag as \n\n---\nHuly Issue: LTSEL-20","created_at":"2025-12-23T03:23:06Z"}]}
{"id":"lettatoolsselector-5xpp7","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:43:28.326133848Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:28.882095243Z","closed_at":"2026-01-02T07:43:28.882095243Z","close_reason":"Closed","comments":[{"id":2771,"issue_id":"lettatoolsselector-5xpp7","author":"root","text":"Synced from Huly: LTSEL-217","created_at":"2026-01-02T07:43:28Z"}]}
{"id":"lettatoolsselector-5xqly","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:57.55806166Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:57.55806166Z","comments":[{"id":2258,"issue_id":"lettatoolsselector-5xqly","author":"root","text":"Synced from Beads: lettatoolsselector-yta9\n\n---\nHuly Issue: LTSEL-453","created_at":"2026-01-02T03:44:57Z"}]}
{"id":"lettatoolsselector-5y15","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:50.544289768Z","updated_at":"2025-12-30T04:14:01.573132561Z","comments":[{"id":818,"issue_id":"lettatoolsselector-5y15","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-109","created_at":"2025-12-29T21:00:50Z"}]}
{"id":"lettatoolsselector-5ybt7","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:54.251398463Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:54.69633052Z","closed_at":"2026-01-02T05:59:54.69633052Z","close_reason":"Closed","comments":[{"id":2510,"issue_id":"lettatoolsselector-5ybt7","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T05:59:54Z"}]}
{"id":"lettatoolsselector-5ydcq","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:12:53.732018168Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:12:54.315144649Z","closed_at":"2026-01-02T11:12:54.315144649Z","close_reason":"Closed","comments":[{"id":3203,"issue_id":"lettatoolsselector-5ydcq","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T11:12:54Z"}]}
{"id":"lettatoolsselector-5yds","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:06.534048305Z","updated_at":"2025-12-30T01:46:40.307979439Z","comments":[{"id":949,"issue_id":"lettatoolsselector-5yds","author":"root","text":"Synced from Beads: lettatoolsselector-dg2\n\n---\nHuly Issue: LTSEL-87","created_at":"2025-12-29T21:14:06Z"}]}
{"id":"lettatoolsselector-5zcc7","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:50:04.466313552Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:50:05.066396045Z","closed_at":"2026-01-02T18:50:05.066396045Z","close_reason":"Closed","comments":[{"id":3884,"issue_id":"lettatoolsselector-5zcc7","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T18:50:04Z"}]}
{"id":"lettatoolsselector-5ziff","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:57:21.209642952Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:57:21.8930267Z","closed_at":"2026-01-02T20:57:21.8930267Z","close_reason":"Closed","comments":[{"id":4167,"issue_id":"lettatoolsselector-5ziff","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T20:57:21Z"}]}
{"id":"lettatoolsselector-5zixh","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:01:03.560048258Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:01:03.936868889Z","closed_at":"2026-01-02T15:01:03.936868889Z","close_reason":"Closed"}
{"id":"lettatoolsselector-5zkpp","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:56.796909422Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:57.278242104Z","closed_at":"2026-01-02T05:40:57.278242104Z","close_reason":"Closed","comments":[{"id":2475,"issue_id":"lettatoolsselector-5zkpp","author":"root","text":"Synced from Huly: LTSEL-13","created_at":"2026-01-02T05:40:57Z"}]}
{"id":"lettatoolsselector-608d7","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:21:44.686732133Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:45.156344898Z","closed_at":"2026-01-02T08:21:45.156344898Z","close_reason":"Closed"}
{"id":"lettatoolsselector-60f4","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:35.267659889Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:35.613277373Z","closed_at":"2026-01-02T01:08:35.613277373Z","close_reason":"Closed","comments":[{"id":1196,"issue_id":"lettatoolsselector-60f4","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T01:08:35Z"}]}
{"id":"lettatoolsselector-61ipt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:24.198255104Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:24.198255104Z","comments":[{"id":2183,"issue_id":"lettatoolsselector-61ipt","author":"root","text":"Synced from Beads: lettatoolsselector-vode\n\n---\nHuly Issue: LTSEL-722","created_at":"2026-01-02T03:43:24Z"}]}
{"id":"lettatoolsselector-620oe","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:03:19.908220953Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:03:20.284139358Z","closed_at":"2026-01-02T17:03:20.284139358Z","close_reason":"Closed"}
{"id":"lettatoolsselector-626","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:28.787444478Z","updated_at":"2025-12-29T18:56:26.302600036Z","closed_at":"2025-12-29T18:56:26.302600036Z","close_reason":"Duplicate of lettatoolsselector-xoz (operational runbooks)","comments":[{"id":19,"issue_id":"lettatoolsselector-626","author":"node","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2025-12-22T23:46:28Z"}]}
{"id":"lettatoolsselector-636ea","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:03:52.211559413Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:52.762546533Z","closed_at":"2026-01-02T08:03:52.762546533Z","close_reason":"Closed","comments":[{"id":2823,"issue_id":"lettatoolsselector-636ea","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T08:03:52Z"}]}
{"id":"lettatoolsselector-63jna","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:06.938653134Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:07.308088551Z","closed_at":"2026-01-02T07:24:07.308088551Z","close_reason":"Closed"}
{"id":"lettatoolsselector-642","title":"[Refactor] Phase 0: Establish test coverage for critical paths","description":"Before refactoring api_server.py (9,027 lines), we need test coverage on critical paths to ensure refactoring doesn't break functionality.\n\n## Critical Paths to Cover\n\n### Priority 1 - Core Tool Operations (Most Used)\n1. **POST /api/v1/tools/attach** (lines 1136-1455)\n   - Tool search and attachment flow\n   - Pre-attach pruning logic\n   - Loop trigger mechanism\n   - Webhook emission\n\n2. **POST /api/v1/tools/search** (lines 577-678)\n   - Weaviate search with reranking\n   - Query expansion\n   - Score filtering\n\n3. **POST /api/v1/tools/prune** (lines 1779-1888)\n   - Tool pruning logic\n   - MIN_MCP_TOOLS enforcement\n\n### Priority 2 - Supporting Functions\n4. `attach_tool()` / `detach_tool()` (lines 309-401)\n5. `process_tools()` (lines 403-575)\n6. `_perform_tool_pruning()` (lines 1483-1777)\n7. `trigger_agent_loop()` (lines 1037-1081)\n\n### Priority 3 - Cache \u0026 Agent Operations\n8. `read_tool_cache()` / `read_mcp_servers_cache()`\n9. `fetch_agent_info()` / `fetch_agent_tools()`\n\n## Current Coverage\n- Overall: 13%\n- api_server.py: 8.8%\n\n## Target Coverage Before Refactoring\n- Critical paths (Priority 1): 80%+\n- Supporting functions (Priority 2): 70%+\n- Cache operations (Priority 3): 60%+\n\n## Test Types Needed\n- [ ] Unit tests with mocked Letta/Weaviate clients\n- [ ] Integration tests against running services\n- [ ] Contract tests for API endpoints\n\n## Acceptance Criteria\n- [ ] Critical path coverage reaches 80%\n- [ ] All existing tests still pass\n- [ ] Test fixtures/mocks established for reuse","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T19:36:47.114061273Z","updated_at":"2025-12-29T19:02:05.655579446Z","closed_at":"2025-12-29T19:02:05.655579446Z","close_reason":"Test coverage established: 389 unit tests passing"}
{"id":"lettatoolsselector-642q5","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:58:56.711518383Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:58:57.30124377Z","closed_at":"2026-01-02T19:58:57.30124377Z","close_reason":"Closed","comments":[{"id":4027,"issue_id":"lettatoolsselector-642q5","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T19:58:57Z"}]}
{"id":"lettatoolsselector-65hh6","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:33:45.918698515Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:33:46.554529791Z","closed_at":"2026-01-02T21:33:46.554529791Z","close_reason":"Closed","comments":[{"id":4232,"issue_id":"lettatoolsselector-65hh6","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T21:33:46Z"}]}
{"id":"lettatoolsselector-65uqv","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:03:25.054103744Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:03:25.653285163Z","closed_at":"2026-01-02T17:03:25.653285163Z","close_reason":"Closed","comments":[{"id":3703,"issue_id":"lettatoolsselector-65uqv","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T17:03:25Z"}]}
{"id":"lettatoolsselector-65vdz","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:51.13377186Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:51.13377186Z","comments":[{"id":2251,"issue_id":"lettatoolsselector-65vdz","author":"root","text":"Synced from Huly: LTSEL-476","created_at":"2026-01-02T03:44:51Z"}]}
{"id":"lettatoolsselector-6685k","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:09.774198896Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:10.309861165Z","closed_at":"2026-01-02T11:34:10.309861165Z","close_reason":"Closed","comments":[{"id":3224,"issue_id":"lettatoolsselector-6685k","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T11:34:10Z"}]}
{"id":"lettatoolsselector-66du","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:43.253787413Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:43.576678727Z","closed_at":"2026-01-02T01:08:43.576678727Z","close_reason":"Closed","comments":[{"id":1205,"issue_id":"lettatoolsselector-66du","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T01:08:43Z"}]}
{"id":"lettatoolsselector-66eg8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:52.797432482Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:52.797432482Z","comments":[{"id":2253,"issue_id":"lettatoolsselector-66eg8","author":"root","text":"Synced from Beads: lettatoolsselector-d77l\n\n---\nHuly Issue: LTSEL-467","created_at":"2026-01-02T03:44:53Z"}]}
{"id":"lettatoolsselector-66j7","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:31.222696346Z","updated_at":"2025-12-29T21:33:27.228149979Z","closed_at":"2025-12-29T21:33:27.228149979Z","close_reason":"Duplicate","comments":[{"id":483,"issue_id":"lettatoolsselector-66j7","author":"root","text":"Synced from Beads: lettatoolsselector-ayf\n\n---\nHuly Issue: LTSEL-176","created_at":"2025-12-29T20:25:31Z"}]}
{"id":"lettatoolsselector-66twd","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:50.022384686Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:50.598726552Z","closed_at":"2026-01-02T06:17:50.598726552Z","close_reason":"Closed","comments":[{"id":2562,"issue_id":"lettatoolsselector-66twd","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T06:17:50Z"}]}
{"id":"lettatoolsselector-66uh2","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:41:52.14488421Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:41:52.985778816Z","closed_at":"2026-01-02T22:41:52.985778816Z","close_reason":"Closed"}
{"id":"lettatoolsselector-66zxs","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:58:48.239222906Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:48.979980947Z","closed_at":"2026-01-02T14:58:48.979980947Z","close_reason":"Closed","comments":[{"id":3512,"issue_id":"lettatoolsselector-66zxs","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T14:58:48Z"}]}
{"id":"lettatoolsselector-670y","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:00.286029758Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:00.655006167Z","closed_at":"2026-01-02T01:25:00.655006167Z","close_reason":"Closed","comments":[{"id":1236,"issue_id":"lettatoolsselector-670y","author":"root","text":"Synced from Beads: lettatoolsselector-388\n\n---\nHuly Issue: LTSEL-31","created_at":"2026-01-02T01:25:00Z"}]}
{"id":"lettatoolsselector-6775l","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:19.956303366Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:20.530598366Z","closed_at":"2026-01-02T11:09:20.530598366Z","close_reason":"Closed","comments":[{"id":3170,"issue_id":"lettatoolsselector-6775l","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T11:09:20Z"}]}
{"id":"lettatoolsselector-67hmr","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:41:21.118105093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:21.594548767Z","closed_at":"2026-01-02T05:41:21.594548767Z","close_reason":"Closed","comments":[{"id":2495,"issue_id":"lettatoolsselector-67hmr","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T05:41:21Z"}]}
{"id":"lettatoolsselector-67j5","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:40.670616628Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:41.007575906Z","closed_at":"2026-01-02T02:19:41.007575906Z","close_reason":"Closed","comments":[{"id":1285,"issue_id":"lettatoolsselector-67j5","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T02:19:40Z"}]}
{"id":"lettatoolsselector-67tu6","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:49:26.420138999Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:49:27.076105286Z","closed_at":"2026-01-02T22:49:27.076105286Z","close_reason":"Closed","comments":[{"id":4378,"issue_id":"lettatoolsselector-67tu6","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T22:49:26Z"}]}
{"id":"lettatoolsselector-687iz","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:41:48.868669251Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:49.303788249Z","closed_at":"2026-01-02T04:41:49.303788249Z","close_reason":"Closed","comments":[{"id":2449,"issue_id":"lettatoolsselector-687iz","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T04:41:49Z"}]}
{"id":"lettatoolsselector-687z","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:04:32.809808122Z","updated_at":"2025-12-30T04:14:10.722266934Z","comments":[{"id":856,"issue_id":"lettatoolsselector-687z","author":"root","text":"Synced from Beads: lettatoolsselector-2iz\n\n---\nHuly Issue: LTSEL-120","created_at":"2025-12-29T21:04:33Z"}]}
{"id":"lettatoolsselector-68co","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:13.345556021Z","updated_at":"2025-12-29T21:33:28.816221707Z","closed_at":"2025-12-29T21:33:28.816221707Z","close_reason":"Duplicate","comments":[{"id":410,"issue_id":"lettatoolsselector-68co","author":"root","text":"Synced from Beads: lettatoolsselector-8pi\n\n---\nHuly Issue: LTSEL-200","created_at":"2025-12-29T20:19:13Z"}]}
{"id":"lettatoolsselector-68w7y","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:43:42.207103548Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:43:42.752574161Z","closed_at":"2026-01-02T09:43:42.752574161Z","close_reason":"Closed","comments":[{"id":3019,"issue_id":"lettatoolsselector-68w7y","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T09:43:42Z"}]}
{"id":"lettatoolsselector-68zd","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:25.77861521Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:26.12991016Z","closed_at":"2026-01-02T03:06:26.12991016Z","close_reason":"Closed","comments":[{"id":1546,"issue_id":"lettatoolsselector-68zd","author":"root","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2026-01-02T03:06:25Z"}]}
{"id":"lettatoolsselector-69kcl","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:35:12.837525317Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:35:13.374153992Z","closed_at":"2026-01-02T14:35:13.374153992Z","close_reason":"Closed","comments":[{"id":3478,"issue_id":"lettatoolsselector-69kcl","author":"root","text":"Synced from Huly: LTSEL-227","created_at":"2026-01-02T14:35:13Z"}]}
{"id":"lettatoolsselector-6a11d","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:22:31.690165052Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:32.205543796Z","closed_at":"2026-01-02T09:22:32.205543796Z","close_reason":"Closed","comments":[{"id":2968,"issue_id":"lettatoolsselector-6a11d","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T09:22:31Z"}]}
{"id":"lettatoolsselector-6a3ht","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:17:44.63989734Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:17:45.329437403Z","closed_at":"2026-01-02T22:17:45.329437403Z","close_reason":"Closed","comments":[{"id":4312,"issue_id":"lettatoolsselector-6a3ht","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T22:17:45Z"}]}
{"id":"lettatoolsselector-6aso0","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:59:40.050286913Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:40.630820884Z","closed_at":"2026-01-02T10:59:40.630820884Z","close_reason":"Closed","comments":[{"id":3154,"issue_id":"lettatoolsselector-6aso0","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T10:59:40Z"}]}
{"id":"lettatoolsselector-6be0o","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:19:58.857227532Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:19:59.280990978Z","closed_at":"2026-01-02T04:19:59.280990978Z","close_reason":"Closed","comments":[{"id":2349,"issue_id":"lettatoolsselector-6be0o","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T04:19:59Z"}]}
{"id":"lettatoolsselector-6bwfh","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:42.778024619Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:43.398646809Z","closed_at":"2026-01-02T07:02:43.398646809Z","close_reason":"Closed","comments":[{"id":2663,"issue_id":"lettatoolsselector-6bwfh","author":"root","text":"Synced from Huly: LTSEL-13","created_at":"2026-01-02T07:02:43Z"}]}
{"id":"lettatoolsselector-6cyex","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:44:05.116288754Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:44:05.677825168Z","closed_at":"2026-01-02T07:44:05.677825168Z","close_reason":"Closed","comments":[{"id":2788,"issue_id":"lettatoolsselector-6cyex","author":"root","text":"Synced from Huly: LTSEL-236","created_at":"2026-01-02T07:44:05Z"}]}
{"id":"lettatoolsselector-6eb5","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:42.230799674Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:42.432592175Z","closed_at":"2026-01-02T01:08:42.432592175Z","close_reason":"Closed"}
{"id":"lettatoolsselector-6ebi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:19:37.066953685Z","updated_at":"2025-12-30T01:55:46.234437597Z","comments":[{"id":1000,"issue_id":"lettatoolsselector-6ebi","author":"root","text":"Synced from Beads: lettatoolsselector-dg2\n\n---\nHuly Issue: LTSEL-88","created_at":"2025-12-29T21:19:37Z"}]}
{"id":"lettatoolsselector-6f68t","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:50.584221418Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:51.026168515Z","closed_at":"2026-01-02T05:40:51.026168515Z","close_reason":"Closed","comments":[{"id":2467,"issue_id":"lettatoolsselector-6f68t","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T05:40:50Z"}]}
{"id":"lettatoolsselector-6fh","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:29.355653376Z","updated_at":"2025-12-29T18:56:33.26947331Z","closed_at":"2025-12-29T18:56:33.26947331Z","close_reason":"Duplicate of lettatoolsselector-784 (scheduled pruning job)","comments":[{"id":24,"issue_id":"lettatoolsselector-6fh","author":"node","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2025-12-22T23:46:29Z"}]}
{"id":"lettatoolsselector-6fhk9","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:46.565660821Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:47.245900762Z","closed_at":"2026-01-02T20:55:47.245900762Z","close_reason":"Closed","comments":[{"id":4159,"issue_id":"lettatoolsselector-6fhk9","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T20:55:46Z"}]}
{"id":"lettatoolsselector-6fk8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:25:49.457900189Z","updated_at":"2025-12-30T02:00:13.650738945Z","comments":[{"id":1034,"issue_id":"lettatoolsselector-6fk8","author":"root","text":"Synced from Beads: lettatoolsselector-1kj\n\n---\nHuly Issue: LTSEL-76","created_at":"2025-12-29T21:25:49Z"}]}
{"id":"lettatoolsselector-6fy5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:06:46.024720764Z","updated_at":"2025-12-30T04:14:15.450001462Z","comments":[{"id":878,"issue_id":"lettatoolsselector-6fy5","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-113","created_at":"2025-12-29T21:06:46Z"}]}
{"id":"lettatoolsselector-6g48","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:53.019147486Z","updated_at":"2025-12-29T21:33:42.758478284Z","closed_at":"2025-12-29T21:33:42.758478284Z","close_reason":"Duplicate","comments":[{"id":518,"issue_id":"lettatoolsselector-6g48","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T20:27:53Z"}]}
{"id":"lettatoolsselector-6gu67","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:25.93751492Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:26.357504343Z","closed_at":"2026-01-02T03:30:26.357504343Z","close_reason":"Closed","comments":[{"id":2105,"issue_id":"lettatoolsselector-6gu67","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T03:30:26Z"}]}
{"id":"lettatoolsselector-6gwgy","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:21:00.619679672Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:01.180390468Z","closed_at":"2026-01-02T04:21:01.180390468Z","close_reason":"Closed","comments":[{"id":2390,"issue_id":"lettatoolsselector-6gwgy","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T04:21:00Z"}]}
{"id":"lettatoolsselector-6he","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:19.698941683Z","updated_at":"2025-12-29T18:56:22.989182633Z","closed_at":"2025-12-29T18:56:22.989182633Z","close_reason":"Duplicate of lettatoolsselector-mna (Prometheus metrics)","comments":[{"id":46,"issue_id":"lettatoolsselector-6he","author":"node","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2025-12-23T03:23:19Z"}]}
{"id":"lettatoolsselector-6hg40","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:47:18.275325552Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:47:18.937418037Z","closed_at":"2026-01-02T21:47:18.937418037Z","close_reason":"Closed","comments":[{"id":4244,"issue_id":"lettatoolsselector-6hg40","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T21:47:18Z"}]}
{"id":"lettatoolsselector-6hjbq","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:00.382418947Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:00.97583759Z","closed_at":"2026-01-02T11:34:00.97583759Z","close_reason":"Closed","comments":[{"id":3217,"issue_id":"lettatoolsselector-6hjbq","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T11:34:00Z"}]}
{"id":"lettatoolsselector-6hpv","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:33.602526622Z","updated_at":"2025-12-29T21:33:43.701419897Z","closed_at":"2025-12-29T21:33:43.701419897Z","close_reason":"Duplicate","comments":[{"id":435,"issue_id":"lettatoolsselector-6hpv","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:21:33Z"}]}
{"id":"lettatoolsselector-6ilyt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:25.987794029Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:25.987794029Z","comments":[{"id":2184,"issue_id":"lettatoolsselector-6ilyt","author":"root","text":"Synced from Beads: lettatoolsselector-87gs\n\n---\nHuly Issue: LTSEL-718","created_at":"2026-01-02T03:43:26Z"}]}
{"id":"lettatoolsselector-6io","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","description":"## Overview\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher  \n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-29T03:26:52.205387601Z","updated_at":"2025-12-29T20:30:45.833956603Z","closed_at":"2025-12-29T20:30:45.833956603Z","close_reason":"Semantic Enrichment System complete. Phase 1 (Server Profiler), Phase 2 (Tool Enricher), Phase 3 (Weaviate schema/search), Phase 4 (API routes) all implemented. Files: semantic_enrichment/, sync_enrichment_to_weaviate.py, routes/enrichment.py. Search now uses action_entities, semantic_keywords, use_cases, server_domain fields.","labels":["enhancement"]}
{"id":"lettatoolsselector-6iv1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:18:35.633329303Z","updated_at":"2025-12-30T01:54:26.364159924Z","comments":[{"id":992,"issue_id":"lettatoolsselector-6iv1","author":"root","text":"Synced from Beads: lettatoolsselector-b0j\n\n---\nHuly Issue: LTSEL-80","created_at":"2025-12-29T21:18:35Z"}]}
{"id":"lettatoolsselector-6j8h","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:37.650921954Z","updated_at":"2025-12-29T21:33:26.519969769Z","closed_at":"2025-12-29T21:33:26.519969769Z","close_reason":"Duplicate","comments":[{"id":526,"issue_id":"lettatoolsselector-6j8h","author":"root","text":"Synced from Beads: lettatoolsselector-4tv\n\n---\nHuly Issue: LTSEL-167","created_at":"2025-12-29T20:28:37Z"}]}
{"id":"lettatoolsselector-6jar","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:28.017652775Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:28.429507161Z","closed_at":"2026-01-02T01:08:28.429507161Z","close_reason":"Closed","comments":[{"id":1185,"issue_id":"lettatoolsselector-6jar","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T01:08:28Z"}]}
{"id":"lettatoolsselector-6jc4d","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:24:23.459456932Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:23.828944969Z","closed_at":"2026-01-02T07:24:23.828944969Z","close_reason":"Closed"}
{"id":"lettatoolsselector-6jg9a","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:24.47535473Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:24.47535473Z","comments":[{"id":2126,"issue_id":"lettatoolsselector-6jg9a","author":"root","text":"Synced from Beads: lettatoolsselector-4c0\n\n---\nHuly Issue: LTSEL-214","created_at":"2026-01-02T03:31:24Z"}]}
{"id":"lettatoolsselector-6jswy","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:39:14.732054079Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:15.133817548Z","closed_at":"2026-01-02T13:39:15.133817548Z","close_reason":"Closed"}
{"id":"lettatoolsselector-6jurd","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:29.304419766Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:29.969069601Z","closed_at":"2026-01-02T19:20:29.969069601Z","close_reason":"Closed","comments":[{"id":3930,"issue_id":"lettatoolsselector-6jurd","author":"root","text":"Synced from Huly: LTSEL-41","created_at":"2026-01-02T19:20:29Z"}]}
{"id":"lettatoolsselector-6ldar","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:22:43.236502886Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:22:43.872451492Z","closed_at":"2026-01-02T21:22:43.872451492Z","close_reason":"Closed","comments":[{"id":4200,"issue_id":"lettatoolsselector-6ldar","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T21:22:43Z"}]}
{"id":"lettatoolsselector-6lkv","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:51.746955722Z","updated_at":"2025-12-29T21:33:44.042959984Z","closed_at":"2025-12-29T21:33:44.042959984Z","close_reason":"Duplicate","comments":[{"id":383,"issue_id":"lettatoolsselector-6lkv","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:16:52Z"}]}
{"id":"lettatoolsselector-6m2dq","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:43:32.859856122Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:33.351688348Z","closed_at":"2026-01-02T07:43:33.351688348Z","close_reason":"Closed","comments":[{"id":2775,"issue_id":"lettatoolsselector-6m2dq","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T07:43:33Z"}]}
{"id":"lettatoolsselector-6mnx","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T02:20:28.901246354Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:29.149458849Z","closed_at":"2026-01-02T02:20:29.149458849Z","close_reason":"Closed"}
{"id":"lettatoolsselector-6mty2","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:32:58.258606602Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:32:59.131959866Z","closed_at":"2026-01-02T18:32:59.131959866Z","close_reason":"Closed","comments":[{"id":3873,"issue_id":"lettatoolsselector-6mty2","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T18:32:58Z"}]}
{"id":"lettatoolsselector-6o1a1","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:19.314142653Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:19.915423637Z","closed_at":"2026-01-02T17:50:19.915423637Z","close_reason":"Closed","comments":[{"id":3779,"issue_id":"lettatoolsselector-6o1a1","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T17:50:19Z"}]}
{"id":"lettatoolsselector-6okab","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:21:37.83265008Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:38.562853272Z","closed_at":"2026-01-02T08:21:38.562853272Z","close_reason":"Closed","comments":[{"id":2862,"issue_id":"lettatoolsselector-6okab","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T08:21:38Z"}]}
{"id":"lettatoolsselector-6pfl9","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:26:30.247694515Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:26:30.965977089Z","closed_at":"2026-01-02T19:26:30.965977089Z","close_reason":"Closed","comments":[{"id":3957,"issue_id":"lettatoolsselector-6pfl9","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T19:26:30Z"}]}
{"id":"lettatoolsselector-6podl","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:55:55.249769093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:55.943122769Z","closed_at":"2026-01-02T08:55:55.943122769Z","close_reason":"Closed","comments":[{"id":2904,"issue_id":"lettatoolsselector-6podl","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T08:55:55Z"}]}
{"id":"lettatoolsselector-6ptou","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:48.957367477Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:48.957367477Z","comments":[{"id":2212,"issue_id":"lettatoolsselector-6ptou","author":"root","text":"Synced from Beads: lettatoolsselector-02kz\n\n---\nHuly Issue: LTSEL-627","created_at":"2026-01-02T03:43:49Z"}]}
{"id":"lettatoolsselector-6qt3r","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:47:39.071967114Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:47:39.699365583Z","closed_at":"2026-01-02T21:47:39.699365583Z","close_reason":"Closed","comments":[{"id":4252,"issue_id":"lettatoolsselector-6qt3r","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T21:47:39Z"}]}
{"id":"lettatoolsselector-6qzh2","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:30:50.489232932Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:30:52.273197066Z","closed_at":"2026-01-02T18:30:52.273197066Z","close_reason":"Closed","comments":[{"id":3869,"issue_id":"lettatoolsselector-6qzh2","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T18:30:52Z"}]}
{"id":"lettatoolsselector-6r0uc","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:55.34578298Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:56.115429879Z","closed_at":"2026-01-02T20:55:56.115429879Z","close_reason":"Closed","comments":[{"id":4161,"issue_id":"lettatoolsselector-6r0uc","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T20:55:55Z"}]}
{"id":"lettatoolsselector-6rjnh","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:18:24.58034979Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:18:25.269434244Z","closed_at":"2026-01-02T16:18:25.269434244Z","close_reason":"Closed","comments":[{"id":3673,"issue_id":"lettatoolsselector-6rjnh","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T16:18:24Z"}]}
{"id":"lettatoolsselector-6rpwc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:31.361923023Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:31.361923023Z","comments":[{"id":2191,"issue_id":"lettatoolsselector-6rpwc","author":"root","text":"Synced from Beads: lettatoolsselector-qp60\n\n---\nHuly Issue: LTSEL-687","created_at":"2026-01-02T03:43:31Z"}]}
{"id":"lettatoolsselector-6s3l","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:12:59.812539503Z","updated_at":"2025-12-30T02:10:43.086425155Z","comments":[{"id":938,"issue_id":"lettatoolsselector-6s3l","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T21:13:00Z"}]}
{"id":"lettatoolsselector-6s5h","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:20:47.559984293Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:47.953843388Z","closed_at":"2026-01-02T02:20:47.953843388Z","close_reason":"Closed","comments":[{"id":1313,"issue_id":"lettatoolsselector-6s5h","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T02:20:47Z"}]}
{"id":"lettatoolsselector-6sz","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.939734223Z","updated_at":"2025-12-29T18:11:58.819413637-05:00","closed_at":"2025-12-29T18:11:58.819413637-05:00","close_reason":"Added validate_env.sh script for environment validation","comments":[{"id":7,"issue_id":"lettatoolsselector-6sz","author":"node","text":"## Problem\n\nTool selector has multiple compose files (compose.yaml, docker-compose.yml, compose-with-reranker.yaml) and an .env file. Changes require editing multiple places.\n\n## Solution\n\nConsolidate to single compose.yaml with environment-specific overrides via .env.\n\n## Acceptance Criteria\n\n- [ ] Single compose.yaml as source of truth\n- [ ] .env.example checked into repo with all variables documented\n- [ ] .env (not checked in) for local overrides\n- [ ] Remove deprecated docker-compose.yml\n- [ ] CI validates .env.example has all required vars\n\n## Technical Notes\n\n- Use compose profiles for optional services (reranker, etc.)\n- Document which vars are required vs optional\n- Add validation script to check env completeness\n\n---\nHuly Issue: LTSEL-15","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-6t27","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:34:11.027737978Z","updated_at":"2025-12-30T02:39:09.593809378Z","comments":[{"id":1067,"issue_id":"lettatoolsselector-6t27","author":"root","text":"Synced from Beads: lettatoolsselector-57s\n\n---\nHuly Issue: LTSEL-59","created_at":"2025-12-29T21:34:11Z"}]}
{"id":"lettatoolsselector-6taj5","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:15:42.625823732Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:15:43.323645193Z","closed_at":"2026-01-02T16:15:43.323645193Z","close_reason":"Closed","comments":[{"id":3663,"issue_id":"lettatoolsselector-6taj5","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T16:15:43Z"}]}
{"id":"lettatoolsselector-6tfnx","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:00:10.046937255Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:00:10.488150081Z","closed_at":"2026-01-02T20:00:10.488150081Z","close_reason":"Closed"}
{"id":"lettatoolsselector-6ti","title":"[Code Quality] Fix async function return type annotations","description":"Several async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n```\nType '(config: Dict[str, Any]) -\u003e ConfigValidationResponse' is not assignable to declared type '() -\u003e CoroutineType[Any, Any, Response | tuple[Response, Literal[500]]]'\n```\n\n### Line 23 - Multiple tracking functions\n```\nType '(operation: str, token_count: int, provider: str = \"openai\") -\u003e CoroutineType[Any, Any, bool]' is not assignable to declared type '(...) -\u003e None'\n```\n\n## Root Cause\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-28T17:13:30.373745238Z","updated_at":"2025-12-29T19:24:03.132221922Z","closed_at":"2025-12-29T19:24:03.132221922Z","close_reason":"Fixed as part of api_server.py type fixes - async cost tracking stubs now properly typed"}
{"id":"lettatoolsselector-6txp9","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:09.349544009Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:09.658313147Z","closed_at":"2026-01-02T06:37:09.658313147Z","close_reason":"Closed"}
{"id":"lettatoolsselector-6ulbe","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:30:12.585314199Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:30:13.250308665Z","closed_at":"2026-01-02T21:30:13.250308665Z","close_reason":"Closed","comments":[{"id":4224,"issue_id":"lettatoolsselector-6ulbe","author":"root","text":"Synced from Huly: LTSEL-249","created_at":"2026-01-02T21:30:12Z"}]}
{"id":"lettatoolsselector-6wb9b","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:51.866962303Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:52.312007696Z","closed_at":"2026-01-02T05:59:52.312007696Z","close_reason":"Closed","comments":[{"id":2507,"issue_id":"lettatoolsselector-6wb9b","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T05:59:52Z"}]}
{"id":"lettatoolsselector-6wk22","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:18.617058526Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:19.175961857Z","closed_at":"2026-01-02T14:29:19.175961857Z","close_reason":"Closed","comments":[{"id":3442,"issue_id":"lettatoolsselector-6wk22","author":"root","text":"Synced from Huly: LTSEL-44","created_at":"2026-01-02T14:29:18Z"}]}
{"id":"lettatoolsselector-6wxj7","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:15.269797855Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:15.825203523Z","closed_at":"2026-01-02T11:09:15.825203523Z","close_reason":"Closed","comments":[{"id":3168,"issue_id":"lettatoolsselector-6wxj7","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T11:09:15Z"}]}
{"id":"lettatoolsselector-6xe5k","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:59.229581617Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:59.229581617Z","comments":[{"id":1838,"issue_id":"lettatoolsselector-6xe5k","author":"root","text":"Synced from Beads: lettatoolsselector-dly4\n\n---\nHuly Issue: LTSEL-514","created_at":"2026-01-02T03:27:59Z"}]}
{"id":"lettatoolsselector-6xng3","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:24:31.84056098Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:32.339508698Z","closed_at":"2026-01-02T07:24:32.339508698Z","close_reason":"Closed","comments":[{"id":2725,"issue_id":"lettatoolsselector-6xng3","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T07:24:32Z"}]}
{"id":"lettatoolsselector-6xqyf","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:30:30.145602394Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:30.416803898Z","closed_at":"2026-01-02T03:30:30.416803898Z","close_reason":"Closed"}
{"id":"lettatoolsselector-6xwj4","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:55:14.764893103Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:55:15.489886998Z","closed_at":"2026-01-02T21:55:15.489886998Z","close_reason":"Closed","comments":[{"id":4277,"issue_id":"lettatoolsselector-6xwj4","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T21:55:15Z"}]}
{"id":"lettatoolsselector-6y17x","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:30:39.662893075Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:40.140712115Z","closed_at":"2026-01-02T03:30:40.140712115Z","close_reason":"Closed","comments":[{"id":2110,"issue_id":"lettatoolsselector-6y17x","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T03:30:39Z"}]}
{"id":"lettatoolsselector-6y5hb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:28.657565915Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:28.657565915Z","comments":[{"id":1905,"issue_id":"lettatoolsselector-6y5hb","author":"root","text":"Synced from Beads: lettatoolsselector-r4qy\n\n---\nHuly Issue: LTSEL-430","created_at":"2026-01-02T03:28:28Z"}]}
{"id":"lettatoolsselector-6yap","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:44.096309414Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:44.483788559Z","closed_at":"2026-01-02T01:24:44.483788559Z","close_reason":"Closed","comments":[{"id":1209,"issue_id":"lettatoolsselector-6yap","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T01:24:44Z"}]}
{"id":"lettatoolsselector-6ydfy","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:39:55.264401563Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:39:55.784275521Z","closed_at":"2026-01-02T09:39:55.784275521Z","close_reason":"Closed","comments":[{"id":2981,"issue_id":"lettatoolsselector-6ydfy","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T09:39:55Z"}]}
{"id":"lettatoolsselector-6z9x","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:46.953714679Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:47.296307293Z","closed_at":"2026-01-02T02:19:47.296307293Z","close_reason":"Closed","comments":[{"id":1287,"issue_id":"lettatoolsselector-6z9x","author":"root","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2026-01-02T02:19:47Z"}]}
{"id":"lettatoolsselector-6zkfz","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:25:34.97550497Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:25:35.542842579Z","closed_at":"2026-01-02T15:25:35.542842579Z","close_reason":"Closed","comments":[{"id":3578,"issue_id":"lettatoolsselector-6zkfz","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T15:25:35Z"}]}
{"id":"lettatoolsselector-6zkt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:51.219374127Z","updated_at":"2025-12-29T21:33:43.064655154Z","closed_at":"2025-12-29T21:33:43.064655154Z","close_reason":"Duplicate","comments":[{"id":501,"issue_id":"lettatoolsselector-6zkt","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T20:26:51Z"}]}
{"id":"lettatoolsselector-70ed","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:51.906383089Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:52.253470514Z","closed_at":"2026-01-02T01:24:52.253470514Z","close_reason":"Closed","comments":[{"id":1222,"issue_id":"lettatoolsselector-70ed","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T01:24:52Z"}]}
{"id":"lettatoolsselector-70gol","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:35:08.067193589Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:35:08.618458222Z","closed_at":"2026-01-02T14:35:08.618458222Z","close_reason":"Closed","comments":[{"id":3476,"issue_id":"lettatoolsselector-70gol","author":"root","text":"Synced from Huly: LTSEL-228","created_at":"2026-01-02T14:35:08Z"}]}
{"id":"lettatoolsselector-70ljc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:29.39592927Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:29.39592927Z","comments":[{"id":2275,"issue_id":"lettatoolsselector-70ljc","author":"root","text":"Synced from Beads: lettatoolsselector-suz6\n\n---\nHuly Issue: LTSEL-387","created_at":"2026-01-02T03:45:29Z"}]}
{"id":"lettatoolsselector-729d","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:28.093527764Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:28.457668847Z","closed_at":"2026-01-02T03:06:28.457668847Z","close_reason":"Closed","comments":[{"id":1550,"issue_id":"lettatoolsselector-729d","author":"root","text":"Synced from Beads: lettatoolsselector-388\n\n---\nHuly Issue: LTSEL-31","created_at":"2026-01-02T03:06:28Z"}]}
{"id":"lettatoolsselector-72xrj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:53.021098964Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:53.021098964Z","comments":[{"id":1959,"issue_id":"lettatoolsselector-72xrj","author":"root","text":"Synced from Beads: lettatoolsselector-e3ch\n\n---\nHuly Issue: LTSEL-361","created_at":"2026-01-02T03:28:53Z"}]}
{"id":"lettatoolsselector-7343m","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:50:59.609687944Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:51:00.399275164Z","closed_at":"2026-01-02T23:51:00.399275164Z","close_reason":"Closed","comments":[{"id":4396,"issue_id":"lettatoolsselector-7343m","author":"root","text":"Synced from Huly: LTSEL-36","created_at":"2026-01-02T23:51:00Z"}]}
{"id":"lettatoolsselector-735q1","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:37:15.163844145Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:15.635175445Z","closed_at":"2026-01-02T06:37:15.635175445Z","close_reason":"Closed","comments":[{"id":2636,"issue_id":"lettatoolsselector-735q1","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T06:37:15Z"}]}
{"id":"lettatoolsselector-7456s","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:42:49.124273378Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:42:49.64641198Z","closed_at":"2026-01-02T04:42:49.64641198Z","close_reason":"Closed","comments":[{"id":2455,"issue_id":"lettatoolsselector-7456s","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T04:42:49Z"}]}
{"id":"lettatoolsselector-74bt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:15:21.115942986Z","updated_at":"2025-12-30T01:49:29.673472291Z","comments":[{"id":964,"issue_id":"lettatoolsselector-74bt","author":"root","text":"Synced from Beads: lettatoolsselector-0ye\n\n---\nHuly Issue: LTSEL-91","created_at":"2025-12-29T21:15:21Z"}]}
{"id":"lettatoolsselector-75h8l","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:53.388136757Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:53.388136757Z","comments":[{"id":1824,"issue_id":"lettatoolsselector-75h8l","author":"root","text":"Synced from Beads: lettatoolsselector-hbn6\n\n---\nHuly Issue: LTSEL-532","created_at":"2026-01-02T03:27:53Z"}]}
{"id":"lettatoolsselector-75wjl","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T16:15:59.188317968Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:15:59.815928648Z","closed_at":"2026-01-02T16:15:59.815928648Z","close_reason":"Closed","comments":[{"id":3665,"issue_id":"lettatoolsselector-75wjl","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T16:15:59Z"}]}
{"id":"lettatoolsselector-761z","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:29.826193456Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:30.039805135Z","closed_at":"2026-01-02T02:35:30.039805135Z","close_reason":"Closed"}
{"id":"lettatoolsselector-764q3","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:42:02.668196028Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:42:03.206915824Z","closed_at":"2026-01-02T09:42:03.206915824Z","close_reason":"Closed","comments":[{"id":3011,"issue_id":"lettatoolsselector-764q3","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T09:42:02Z"}]}
{"id":"lettatoolsselector-76lqt","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:04.496670563Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:05.072618987Z","closed_at":"2026-01-02T07:24:05.072618987Z","close_reason":"Closed","comments":[{"id":2715,"issue_id":"lettatoolsselector-76lqt","author":"root","text":"Synced from Huly: LTSEL-222","created_at":"2026-01-02T07:24:04Z"}]}
{"id":"lettatoolsselector-76z93","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:15.635454576Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:16.282227515Z","closed_at":"2026-01-02T17:50:16.282227515Z","close_reason":"Closed","comments":[{"id":3778,"issue_id":"lettatoolsselector-76z93","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T17:50:16Z"}]}
{"id":"lettatoolsselector-77rc7","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:49:52.214221327Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:49:52.878786304Z","closed_at":"2026-01-02T15:49:52.878786304Z","close_reason":"Closed","comments":[{"id":3614,"issue_id":"lettatoolsselector-77rc7","author":"root","text":"Synced from Huly: LTSEL-217","created_at":"2026-01-02T15:49:52Z"}]}
{"id":"lettatoolsselector-77s9q","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:22.43952582Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:23.031681633Z","closed_at":"2026-01-02T20:16:23.031681633Z","close_reason":"Closed","comments":[{"id":4071,"issue_id":"lettatoolsselector-77s9q","author":"root","text":"Synced from Huly: LTSEL-36","created_at":"2026-01-02T20:16:22Z"}]}
{"id":"lettatoolsselector-784","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:21.106579546Z","updated_at":"2025-12-29T22:29:50.352284402Z","closed_at":"2025-12-29T22:29:50.352284402Z","close_reason":"Scheduled pruning job complete with full Letta API integration. Dry-run tested: 50 agents processed, 22 MCP tools identified for pruning, protected tools respected.","comments":[{"id":48,"issue_id":"lettatoolsselector-784","author":"node","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2025-12-23T03:23:21Z"}]}
{"id":"lettatoolsselector-78fj2","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:27.479417887Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:27.982100521Z","closed_at":"2026-01-02T07:42:27.982100521Z","close_reason":"Closed","comments":[{"id":2745,"issue_id":"lettatoolsselector-78fj2","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T07:42:27Z"}]}
{"id":"lettatoolsselector-78rwq","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:42:38.884009552Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:42:39.574144628Z","closed_at":"2026-01-02T20:42:39.574144628Z","close_reason":"Closed","comments":[{"id":4141,"issue_id":"lettatoolsselector-78rwq","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T20:42:39Z"}]}
{"id":"lettatoolsselector-78x2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:13.711310789Z","updated_at":"2025-12-30T04:14:20.398129622Z","comments":[{"id":900,"issue_id":"lettatoolsselector-78x2","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T21:09:14Z"}]}
{"id":"lettatoolsselector-7adwy","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:12:01.242935207Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:12:01.797342545Z","closed_at":"2026-01-02T11:12:01.797342545Z","close_reason":"Closed","comments":[{"id":3197,"issue_id":"lettatoolsselector-7adwy","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T11:12:01Z"}]}
{"id":"lettatoolsselector-7at6i","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:03:22.726305286Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:03:23.311431497Z","closed_at":"2026-01-02T17:03:23.311431497Z","close_reason":"Closed","comments":[{"id":3702,"issue_id":"lettatoolsselector-7at6i","author":"root","text":"Synced from Huly: LTSEL-246","created_at":"2026-01-02T17:03:23Z"}]}
{"id":"lettatoolsselector-7b1u8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:56.343453884Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:56.343453884Z","comments":[{"id":1831,"issue_id":"lettatoolsselector-7b1u8","author":"root","text":"Synced from Beads: lettatoolsselector-v7h4\n\n---\nHuly Issue: LTSEL-523","created_at":"2026-01-02T03:27:56Z"}]}
{"id":"lettatoolsselector-7bdq","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:50.434595481Z","updated_at":"2025-12-29T21:33:43.355484829Z","closed_at":"2025-12-29T21:33:43.355484829Z","close_reason":"Duplicate","comments":[{"id":475,"issue_id":"lettatoolsselector-7bdq","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:24:50Z"}]}
{"id":"lettatoolsselector-7bk7p","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:50:14.182762287Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:50:14.745264472Z","closed_at":"2026-01-02T15:50:14.745264472Z","close_reason":"Closed","comments":[{"id":3618,"issue_id":"lettatoolsselector-7bk7p","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T15:50:14Z"}]}
{"id":"lettatoolsselector-7bqxy","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:52.309556084Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:52.874846063Z","closed_at":"2026-01-02T14:57:52.874846063Z","close_reason":"Closed","comments":[{"id":3496,"issue_id":"lettatoolsselector-7bqxy","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T14:57:52Z"}]}
{"id":"lettatoolsselector-7c7ek","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:49:58.465411656Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:49:59.044440803Z","closed_at":"2026-01-02T18:49:59.044440803Z","close_reason":"Closed","comments":[{"id":3883,"issue_id":"lettatoolsselector-7c7ek","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T18:49:58Z"}]}
{"id":"lettatoolsselector-7cuwk","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:08.969517472Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:08.969517472Z","comments":[{"id":2173,"issue_id":"lettatoolsselector-7cuwk","author":"root","text":"Synced from Beads: lettatoolsselector-ckt\n\n---\nHuly Issue: LTSEL-770","created_at":"2026-01-02T03:43:09Z"}]}
{"id":"lettatoolsselector-7cwj4","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:58.355712153Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:58.805634622Z","closed_at":"2026-01-02T05:40:58.805634622Z","close_reason":"Closed","comments":[{"id":2477,"issue_id":"lettatoolsselector-7cwj4","author":"root","text":"Synced from Huly: LTSEL-218","created_at":"2026-01-02T05:40:58Z"}]}
{"id":"lettatoolsselector-7cwj5","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:32.982187194Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:33.858704055Z","closed_at":"2026-01-02T06:17:33.858704055Z","close_reason":"Closed","comments":[{"id":2549,"issue_id":"lettatoolsselector-7cwj5","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T06:17:33Z"}]}
{"id":"lettatoolsselector-7d27v","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:33.57638538Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:34.057254862Z","closed_at":"2026-01-02T06:36:34.057254862Z","close_reason":"Closed","comments":[{"id":2602,"issue_id":"lettatoolsselector-7d27v","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T06:36:33Z"}]}
{"id":"lettatoolsselector-7d2s1","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:32.278098397Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:32.278098397Z","comments":[{"id":2280,"issue_id":"lettatoolsselector-7d2s1","author":"root","text":"Synced from Beads: lettatoolsselector-miv6\n\n---\nHuly Issue: LTSEL-360","created_at":"2026-01-02T03:45:32Z"}]}
{"id":"lettatoolsselector-7db6m","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:25.682498505Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:26.279308066Z","closed_at":"2026-01-02T18:25:26.279308066Z","close_reason":"Closed","comments":[{"id":3838,"issue_id":"lettatoolsselector-7db6m","author":"root","text":"Synced from Huly: LTSEL-33","created_at":"2026-01-02T18:25:26Z"}]}
{"id":"lettatoolsselector-7dny","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:16.520708556Z","updated_at":"2025-12-30T04:14:21.195133391Z","comments":[{"id":903,"issue_id":"lettatoolsselector-7dny","author":"root","text":"Synced from Beads: lettatoolsselector-mwv\n\n---\nHuly Issue: LTSEL-103","created_at":"2025-12-29T21:09:16Z"}]}
{"id":"lettatoolsselector-7dri","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:48.100665054Z","updated_at":"2025-12-29T21:33:31.022672811Z","closed_at":"2025-12-29T21:33:31.022672811Z","close_reason":"Duplicate","comments":[{"id":340,"issue_id":"lettatoolsselector-7dri","author":"root","text":"Synced from Beads: lettatoolsselector-b2i\n\n---\nHuly Issue: LTSEL-208","created_at":"2025-12-29T20:12:48Z"}]}
{"id":"lettatoolsselector-7dtz0","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:50:46.922017558Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:50:47.697384746Z","closed_at":"2026-01-02T18:50:47.697384746Z","close_reason":"Closed","comments":[{"id":3891,"issue_id":"lettatoolsselector-7dtz0","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T18:50:47Z"}]}
{"id":"lettatoolsselector-7dz38","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:48:32.660417452Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:48:33.495574591Z","closed_at":"2026-01-02T22:48:33.495574591Z","close_reason":"Closed","comments":[{"id":4372,"issue_id":"lettatoolsselector-7dz38","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T22:48:33Z"}]}
{"id":"lettatoolsselector-7e4qj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:34.9120598Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:34.9120598Z","comments":[{"id":2047,"issue_id":"lettatoolsselector-7e4qj","author":"root","text":"Synced from Beads: lettatoolsselector-fkxi\n\n---\nHuly Issue: LTSEL-268","created_at":"2026-01-02T03:29:35Z"}]}
{"id":"lettatoolsselector-7e7h9","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:53.221937807Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:53.672351414Z","closed_at":"2026-01-02T06:36:53.672351414Z","close_reason":"Closed","comments":[{"id":2617,"issue_id":"lettatoolsselector-7e7h9","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T06:36:53Z"}]}
{"id":"lettatoolsselector-7ebtc","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:58:24.615988146Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:58:25.155438924Z","closed_at":"2026-01-02T12:58:25.155438924Z","close_reason":"Closed","comments":[{"id":3330,"issue_id":"lettatoolsselector-7ebtc","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T12:58:24Z"}]}
{"id":"lettatoolsselector-7f0qd","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:32.378318275Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:33.101456559Z","closed_at":"2026-01-02T14:05:33.101456559Z","close_reason":"Closed","comments":[{"id":3401,"issue_id":"lettatoolsselector-7f0qd","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T14:05:32Z"}]}
{"id":"lettatoolsselector-7ffnt","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:34:12.573874555Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:34:13.278621277Z","closed_at":"2026-01-02T17:34:13.278621277Z","close_reason":"Closed","comments":[{"id":3776,"issue_id":"lettatoolsselector-7ffnt","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T17:34:13Z"}]}
{"id":"lettatoolsselector-7fqb","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:24.041453747Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:24.370849132Z","closed_at":"2026-01-02T01:08:24.370849132Z","close_reason":"Closed","comments":[{"id":1178,"issue_id":"lettatoolsselector-7fqb","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T01:08:24Z"}]}
{"id":"lettatoolsselector-7g7w3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:36.609368651Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:36.609368651Z","comments":[{"id":2051,"issue_id":"lettatoolsselector-7g7w3","author":"root","text":"Synced from Beads: lettatoolsselector-puea\n\n---\nHuly Issue: LTSEL-264","created_at":"2026-01-02T03:29:36Z"}]}
{"id":"lettatoolsselector-7gj0n","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:05:48.214435485Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:05:48.903043488Z","closed_at":"2026-01-02T17:05:48.903043488Z","close_reason":"Closed","comments":[{"id":3711,"issue_id":"lettatoolsselector-7gj0n","author":"root","text":"Synced from Huly: LTSEL-240","created_at":"2026-01-02T17:05:48Z"}]}
{"id":"lettatoolsselector-7h9y7","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:17.33272957Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:17.935148639Z","closed_at":"2026-01-02T08:20:17.935148639Z","close_reason":"Closed","comments":[{"id":2847,"issue_id":"lettatoolsselector-7h9y7","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T08:20:17Z"}]}
{"id":"lettatoolsselector-7hazt","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:41:52.318591891Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:52.603177902Z","closed_at":"2026-01-02T04:41:52.603177902Z","close_reason":"Closed"}
{"id":"lettatoolsselector-7hbff","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:37:07.916757703Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:08.58254458Z","closed_at":"2026-01-02T10:37:08.58254458Z","close_reason":"Closed","comments":[{"id":3097,"issue_id":"lettatoolsselector-7hbff","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T10:37:08Z"}]}
{"id":"lettatoolsselector-7hua5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:32.85049157Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:32.85049157Z","comments":[{"id":1915,"issue_id":"lettatoolsselector-7hua5","author":"root","text":"Synced from Beads: lettatoolsselector-4wxk\n\n---\nHuly Issue: LTSEL-418","created_at":"2026-01-02T03:28:33Z"}]}
{"id":"lettatoolsselector-7hwx","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:21.844041159Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:22.195969728Z","closed_at":"2026-01-02T01:08:22.195969728Z","close_reason":"Closed","comments":[{"id":1174,"issue_id":"lettatoolsselector-7hwx","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T01:08:22Z"}]}
{"id":"lettatoolsselector-7igos","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:54:29.502934566Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:54:29.990558364Z","closed_at":"2026-01-02T18:54:29.990558364Z","close_reason":"Closed"}
{"id":"lettatoolsselector-7ivdc","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:16.017354475Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:16.297456284Z","closed_at":"2026-01-02T03:30:16.297456284Z","close_reason":"Closed"}
{"id":"lettatoolsselector-7ixfp","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:47:25.027590655Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:47:25.665045945Z","closed_at":"2026-01-02T21:47:25.665045945Z","close_reason":"Closed","comments":[{"id":4246,"issue_id":"lettatoolsselector-7ixfp","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T21:47:25Z"}]}
{"id":"lettatoolsselector-7jb3y","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:44.323926547Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:44.991483993Z","closed_at":"2026-01-02T17:50:44.991483993Z","close_reason":"Closed","comments":[{"id":3786,"issue_id":"lettatoolsselector-7jb3y","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T17:50:44Z"}]}
{"id":"lettatoolsselector-7jepv","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:36:52.278817848Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:36:52.908060349Z","closed_at":"2026-01-02T21:36:52.908060349Z","close_reason":"Closed","comments":[{"id":4241,"issue_id":"lettatoolsselector-7jepv","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T21:36:52Z"}]}
{"id":"lettatoolsselector-7jl4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:16:55.392883338Z","updated_at":"2025-12-30T01:52:27.409892257Z","comments":[{"id":979,"issue_id":"lettatoolsselector-7jl4","author":"root","text":"Synced from Beads: lettatoolsselector-dg2\n\n---\nHuly Issue: LTSEL-88","created_at":"2025-12-29T21:16:55Z"}]}
{"id":"lettatoolsselector-7juzk","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:03.708107349Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:04.163938993Z","closed_at":"2026-01-02T03:30:04.163938993Z","close_reason":"Closed","comments":[{"id":2085,"issue_id":"lettatoolsselector-7juzk","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T03:30:03Z"}]}
{"id":"lettatoolsselector-7k3ji","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:03:09.44454757Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:09.933596193Z","closed_at":"2026-01-02T07:03:09.933596193Z","close_reason":"Closed","comments":[{"id":2683,"issue_id":"lettatoolsselector-7k3ji","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T07:03:09Z"}]}
{"id":"lettatoolsselector-7k6n","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:12:21.601897125Z","updated_at":"2025-12-30T02:09:14.171217215Z","comments":[{"id":933,"issue_id":"lettatoolsselector-7k6n","author":"root","text":"Synced from Beads: lettatoolsselector-dg2\n\n---\nHuly Issue: LTSEL-87","created_at":"2025-12-29T21:12:21Z"}]}
{"id":"lettatoolsselector-7kd2r","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:51.25181196Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:51.835497183Z","closed_at":"2026-01-02T17:50:51.835497183Z","close_reason":"Closed","comments":[{"id":3788,"issue_id":"lettatoolsselector-7kd2r","author":"root","text":"Synced from Huly: LTSEL-37","created_at":"2026-01-02T17:50:51Z"}]}
{"id":"lettatoolsselector-7kf88","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:37.017226737Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:37.017226737Z","comments":[{"id":2242,"issue_id":"lettatoolsselector-7kf88","author":"root","text":"Synced from Huly: LTSEL-540","created_at":"2026-01-02T03:44:37Z"}]}
{"id":"lettatoolsselector-7kwi","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:12.797947975Z","updated_at":"2025-12-29T21:33:41.841082031Z","closed_at":"2025-12-29T21:33:41.841082031Z","close_reason":"Duplicate","comments":[{"id":598,"issue_id":"lettatoolsselector-7kwi","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:35:13Z"}]}
{"id":"lettatoolsselector-7kzsx","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:27.122936242Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:27.639327134Z","closed_at":"2026-01-02T09:54:27.639327134Z","close_reason":"Closed","comments":[{"id":3028,"issue_id":"lettatoolsselector-7kzsx","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T09:54:27Z"}]}
{"id":"lettatoolsselector-7l3y","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:09.959123876Z","updated_at":"2025-12-29T21:33:30.80806305Z","closed_at":"2025-12-29T21:33:30.80806305Z","close_reason":"Duplicate","comments":[{"id":344,"issue_id":"lettatoolsselector-7l3y","author":"root","text":"Synced from Beads: lettatoolsselector-12y\n\n---\nHuly Issue: LTSEL-201","created_at":"2025-12-29T20:13:10Z"}]}
{"id":"lettatoolsselector-7l72j","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:46.680220326Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:47.201690988Z","closed_at":"2026-01-02T11:33:47.201690988Z","close_reason":"Closed","comments":[{"id":3216,"issue_id":"lettatoolsselector-7l72j","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T11:33:46Z"}]}
{"id":"lettatoolsselector-7l7zz","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:55.714137648Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:56.332375305Z","closed_at":"2026-01-02T20:16:56.332375305Z","close_reason":"Closed","comments":[{"id":4075,"issue_id":"lettatoolsselector-7l7zz","author":"root","text":"Synced from Huly: LTSEL-22","created_at":"2026-01-02T20:16:56Z"}]}
{"id":"lettatoolsselector-7lfbq","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:19:08.058865668Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:08.590544997Z","closed_at":"2026-01-02T06:19:08.590544997Z","close_reason":"Closed","comments":[{"id":2589,"issue_id":"lettatoolsselector-7lfbq","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T06:19:08Z"}]}
{"id":"lettatoolsselector-7lj","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:55:06.822715997Z","updated_at":"2025-12-29T21:33:45.32489177Z","closed_at":"2025-12-29T21:33:45.32489177Z","close_reason":"Duplicate","comments":[{"id":258,"issue_id":"lettatoolsselector-7lj","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T19:55:07Z"}]}
{"id":"lettatoolsselector-7lnie","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:20.061302213Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:20.64276461Z","closed_at":"2026-01-02T08:55:20.64276461Z","close_reason":"Closed","comments":[{"id":2897,"issue_id":"lettatoolsselector-7lnie","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T08:55:20Z"}]}
{"id":"lettatoolsselector-7locs","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:15.852376632Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:16.409626772Z","closed_at":"2026-01-02T12:54:16.409626772Z","close_reason":"Closed","comments":[{"id":3310,"issue_id":"lettatoolsselector-7locs","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T12:54:16Z"}]}
{"id":"lettatoolsselector-7ltcr","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:39:57.089235481Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:39:57.608080786Z","closed_at":"2026-01-02T09:39:57.608080786Z","close_reason":"Closed","comments":[{"id":2982,"issue_id":"lettatoolsselector-7ltcr","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T09:39:57Z"}]}
{"id":"lettatoolsselector-7m8th","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:58:27.834057018Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:28.453515288Z","closed_at":"2026-01-02T10:58:28.453515288Z","close_reason":"Closed","comments":[{"id":3136,"issue_id":"lettatoolsselector-7m8th","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T10:58:28Z"}]}
{"id":"lettatoolsselector-7mod","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:08:50.223162892Z","updated_at":"2025-12-30T04:14:19.555421688Z","comments":[{"id":897,"issue_id":"lettatoolsselector-7mod","author":"root","text":"Synced from Beads: lettatoolsselector-w50\n\n---\nHuly Issue: LTSEL-96","created_at":"2025-12-29T21:08:50Z"}]}
{"id":"lettatoolsselector-7mq4u","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:54.815914571Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:55.358389572Z","closed_at":"2026-01-02T08:54:55.358389572Z","close_reason":"Closed","comments":[{"id":2890,"issue_id":"lettatoolsselector-7mq4u","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T08:54:55Z"}]}
{"id":"lettatoolsselector-7nqm2","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:15.606821665Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:16.192956659Z","closed_at":"2026-01-02T09:40:16.192956659Z","close_reason":"Closed","comments":[{"id":2989,"issue_id":"lettatoolsselector-7nqm2","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T09:40:15Z"}]}
{"id":"lettatoolsselector-7nr73","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:19.350995903Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:19.832941459Z","closed_at":"2026-01-02T05:41:19.832941459Z","close_reason":"Closed","comments":[{"id":2493,"issue_id":"lettatoolsselector-7nr73","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T05:41:19Z"}]}
{"id":"lettatoolsselector-7ny42","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:05.791822722Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:06.305015844Z","closed_at":"2026-01-02T03:30:06.305015844Z","close_reason":"Closed","comments":[{"id":2088,"issue_id":"lettatoolsselector-7ny42","author":"root","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2026-01-02T03:30:06Z"}]}
{"id":"lettatoolsselector-7nzw7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:51.65791087Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:51.65791087Z","comments":[{"id":1820,"issue_id":"lettatoolsselector-7nzw7","author":"root","text":"Synced from Beads: lettatoolsselector-nnnl\n\n---\nHuly Issue: LTSEL-538","created_at":"2026-01-02T03:27:51Z"}]}
{"id":"lettatoolsselector-7oje5","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:37:46.747979557Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:47.092519957Z","closed_at":"2026-01-02T10:37:47.092519957Z","close_reason":"Closed"}
{"id":"lettatoolsselector-7ooz2","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:51:56.045333568Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:56.455230868Z","closed_at":"2026-01-02T18:51:56.455230868Z","close_reason":"Closed"}
{"id":"lettatoolsselector-7otee","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:38.673791838Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:39.16122615Z","closed_at":"2026-01-02T07:42:39.16122615Z","close_reason":"Closed","comments":[{"id":2756,"issue_id":"lettatoolsselector-7otee","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T07:42:38Z"}]}
{"id":"lettatoolsselector-7ow3v","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:45.144762467Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:45.745538392Z","closed_at":"2026-01-02T07:23:45.745538392Z","close_reason":"Closed","comments":[{"id":2701,"issue_id":"lettatoolsselector-7ow3v","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T07:23:45Z"}]}
{"id":"lettatoolsselector-7qkdh","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:13.529588822Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:14.162595628Z","closed_at":"2026-01-02T20:38:14.162595628Z","close_reason":"Closed","comments":[{"id":4110,"issue_id":"lettatoolsselector-7qkdh","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T20:38:13Z"}]}
{"id":"lettatoolsselector-7qm2","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:30.355965863Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:30.684680717Z","closed_at":"2026-01-02T02:35:30.684680717Z","close_reason":"Closed","comments":[{"id":1360,"issue_id":"lettatoolsselector-7qm2","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T02:35:30Z"}]}
{"id":"lettatoolsselector-7qt2c","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:40.165437819Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:40.721225833Z","closed_at":"2026-01-02T07:23:40.721225833Z","close_reason":"Closed","comments":[{"id":2696,"issue_id":"lettatoolsselector-7qt2c","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T07:23:40Z"}]}
{"id":"lettatoolsselector-7qul","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:39.006655249Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:39.428594089Z","closed_at":"2026-01-02T02:35:39.428594089Z","close_reason":"Closed","comments":[{"id":1372,"issue_id":"lettatoolsselector-7qul","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T02:35:39Z"}]}
{"id":"lettatoolsselector-7rfm3","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:57:46.586654205Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:47.037808218Z","closed_at":"2026-01-02T12:57:47.037808218Z","close_reason":"Closed"}
{"id":"lettatoolsselector-7rhco","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:21:02.447064997Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:02.90181802Z","closed_at":"2026-01-02T04:21:02.90181802Z","close_reason":"Closed","comments":[{"id":2391,"issue_id":"lettatoolsselector-7rhco","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T04:21:02Z"}]}
{"id":"lettatoolsselector-7rj","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:28:00.227878853Z","updated_at":"2025-12-29T18:07:33.912200796-05:00","closed_at":"2025-12-29T18:07:33.912200796-05:00","close_reason":"Automated deploy script with dry-run, health checks, and verification","comments":[{"id":52,"issue_id":"lettatoolsselector-7rj","author":"node","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2025-12-23T03:28:00Z"}]}
{"id":"lettatoolsselector-7sja3","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:17.649161435Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:18.15806527Z","closed_at":"2026-01-02T11:09:18.15806527Z","close_reason":"Closed","comments":[{"id":3169,"issue_id":"lettatoolsselector-7sja3","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T11:09:17Z"}]}
{"id":"lettatoolsselector-7slbg","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:05:03.434895745Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:05:04.127358599Z","closed_at":"2026-01-02T17:05:04.127358599Z","close_reason":"Closed","comments":[{"id":3708,"issue_id":"lettatoolsselector-7slbg","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T17:05:03Z"}]}
{"id":"lettatoolsselector-7te3p","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:30:53.928253921Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:30:54.534124071Z","closed_at":"2026-01-02T18:30:54.534124071Z","close_reason":"Closed","comments":[{"id":3870,"issue_id":"lettatoolsselector-7te3p","author":"root","text":"Synced from Huly: LTSEL-238","created_at":"2026-01-02T18:30:54Z"}]}
{"id":"lettatoolsselector-7te8e","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:00.61220856Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:01.310153801Z","closed_at":"2026-01-02T13:36:01.310153801Z","close_reason":"Closed","comments":[{"id":3347,"issue_id":"lettatoolsselector-7te8e","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T13:36:01Z"}]}
{"id":"lettatoolsselector-7teq8","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:35.836412394Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:36.417171189Z","closed_at":"2026-01-02T17:01:36.417171189Z","close_reason":"Closed","comments":[{"id":3696,"issue_id":"lettatoolsselector-7teq8","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T17:01:36Z"}]}
{"id":"lettatoolsselector-7tsof","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:47:40.943804448Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:47:41.597821509Z","closed_at":"2026-01-02T15:47:41.597821509Z","close_reason":"Closed","comments":[{"id":3608,"issue_id":"lettatoolsselector-7tsof","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T15:47:41Z"}]}
{"id":"lettatoolsselector-7tsrx","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:11:22.731515494Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:23.099855724Z","closed_at":"2026-01-02T11:11:23.099855724Z","close_reason":"Closed"}
{"id":"lettatoolsselector-7v62p","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:10.330229087Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:10.864295134Z","closed_at":"2026-01-02T13:36:10.864295134Z","close_reason":"Closed","comments":[{"id":3353,"issue_id":"lettatoolsselector-7v62p","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T13:36:10Z"}]}
{"id":"lettatoolsselector-7vnpf","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:06:21.712110868Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:06:22.489699877Z","closed_at":"2026-01-02T17:06:22.489699877Z","close_reason":"Closed","comments":[{"id":3714,"issue_id":"lettatoolsselector-7vnpf","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T17:06:22Z"}]}
{"id":"lettatoolsselector-7vwp1","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:45:32.571597422Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:45:33.135982263Z","closed_at":"2026-01-02T15:45:33.135982263Z","close_reason":"Closed","comments":[{"id":3586,"issue_id":"lettatoolsselector-7vwp1","author":"root","text":"Synced from Huly: LTSEL-47","created_at":"2026-01-02T15:45:32Z"}]}
{"id":"lettatoolsselector-7y2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:51:27.788504943Z","updated_at":"2025-12-29T21:33:45.693955175Z","closed_at":"2025-12-29T21:33:45.693955175Z","close_reason":"Duplicate","comments":[{"id":245,"issue_id":"lettatoolsselector-7y2","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T19:51:28Z"}]}
{"id":"lettatoolsselector-7ygdx","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:37:20.786517351Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:21.130234668Z","closed_at":"2026-01-02T10:37:21.130234668Z","close_reason":"Closed"}
{"id":"lettatoolsselector-7yq2u","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:20.412156743Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:20.895932597Z","closed_at":"2026-01-02T06:00:20.895932597Z","close_reason":"Closed","comments":[{"id":2534,"issue_id":"lettatoolsselector-7yq2u","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T06:00:20Z"}]}
{"id":"lettatoolsselector-7z7ja","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:48.508110388Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:49.043510225Z","closed_at":"2026-01-02T05:59:49.043510225Z","close_reason":"Closed","comments":[{"id":2503,"issue_id":"lettatoolsselector-7z7ja","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T05:59:48Z"}]}
{"id":"lettatoolsselector-7z8","title":"[Refactor] Migrate models handlers to models blueprint","description":"## Goal\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\nThese handlers interact with:\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T00:43:14.483667034Z","updated_at":"2025-12-29T01:10:44.00743334Z","closed_at":"2025-12-29T01:10:44.00743334Z","close_reason":"Closed","labels":["refactor","services-layer"]}
{"id":"lettatoolsselector-7zajw","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:30.26056342Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:30.73306239Z","closed_at":"2026-01-02T05:41:30.73306239Z","close_reason":"Closed","comments":[{"id":2500,"issue_id":"lettatoolsselector-7zajw","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T05:41:30Z"}]}
{"id":"lettatoolsselector-7zexo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:05.688678578Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:05.688678578Z","comments":[{"id":1986,"issue_id":"lettatoolsselector-7zexo","author":"root","text":"Synced from Beads: lettatoolsselector-6ebi\n\n---\nHuly Issue: LTSEL-330","created_at":"2026-01-02T03:29:05Z"}]}
{"id":"lettatoolsselector-7zge3","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:24:02.082183037Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:02.472039098Z","closed_at":"2026-01-02T07:24:02.472039098Z","close_reason":"Closed"}
{"id":"lettatoolsselector-7zwv8","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:29:33.499025533Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:34.212725059Z","closed_at":"2026-01-02T17:29:34.212725059Z","close_reason":"Closed","comments":[{"id":3756,"issue_id":"lettatoolsselector-7zwv8","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T17:29:33Z"}]}
{"id":"lettatoolsselector-80w9v","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:57.428954915Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:57.982697044Z","closed_at":"2026-01-02T05:59:57.982697044Z","close_reason":"Closed","comments":[{"id":2514,"issue_id":"lettatoolsselector-80w9v","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T05:59:57Z"}]}
{"id":"lettatoolsselector-80wm3","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:23:43.148336667Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:23:43.783899597Z","closed_at":"2026-01-02T08:23:43.783899597Z","close_reason":"Closed","comments":[{"id":2880,"issue_id":"lettatoolsselector-80wm3","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T08:23:43Z"}]}
{"id":"lettatoolsselector-80x","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:14.296026908Z","updated_at":"2025-12-29T18:56:31.064288926Z","closed_at":"2025-12-29T18:56:31.064288926Z","close_reason":"Duplicate of lettatoolsselector-9x3 (E2E test)","comments":[{"id":38,"issue_id":"lettatoolsselector-80x","author":"node","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2025-12-23T03:23:14Z"}]}
{"id":"lettatoolsselector-812wc","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:45:04.834321426Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:45:05.625566741Z","closed_at":"2026-01-02T19:45:05.625566741Z","close_reason":"Closed","comments":[{"id":4012,"issue_id":"lettatoolsselector-812wc","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T19:45:05Z"}]}
{"id":"lettatoolsselector-81b5y","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:06:01.686144065Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:06:02.378690442Z","closed_at":"2026-01-02T20:06:02.378690442Z","close_reason":"Closed","comments":[{"id":4055,"issue_id":"lettatoolsselector-81b5y","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T20:06:02Z"}]}
{"id":"lettatoolsselector-81dmq","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:35.004095657Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:35.239916658Z","closed_at":"2026-01-02T03:06:35.239916658Z","close_reason":"Closed"}
{"id":"lettatoolsselector-81jwh","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:06:12.994754469Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:06:13.537381331Z","closed_at":"2026-01-02T14:06:13.537381331Z","close_reason":"Closed","comments":[{"id":3407,"issue_id":"lettatoolsselector-81jwh","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T14:06:13Z"}]}
{"id":"lettatoolsselector-82toy","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:22:25.642009691Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:22:26.243833746Z","closed_at":"2026-01-02T20:22:26.243833746Z","close_reason":"Closed","comments":[{"id":4101,"issue_id":"lettatoolsselector-82toy","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T20:22:26Z"}]}
{"id":"lettatoolsselector-830ds","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:31.179811973Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:31.736703701Z","closed_at":"2026-01-02T13:36:31.736703701Z","close_reason":"Closed","comments":[{"id":3360,"issue_id":"lettatoolsselector-830ds","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T13:36:31Z"}]}
{"id":"lettatoolsselector-839n6","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:19:09.679422494Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:10.167429344Z","closed_at":"2026-01-02T06:19:10.167429344Z","close_reason":"Closed","comments":[{"id":2591,"issue_id":"lettatoolsselector-839n6","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T06:19:09Z"}]}
{"id":"lettatoolsselector-83kgm","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:20:56.429470068Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:20:56.837964135Z","closed_at":"2026-01-02T20:20:56.837964135Z","close_reason":"Closed"}
{"id":"lettatoolsselector-84p4","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:20:25.561838037Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:25.915340758Z","closed_at":"2026-01-02T02:20:25.915340758Z","close_reason":"Closed","comments":[{"id":1302,"issue_id":"lettatoolsselector-84p4","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T02:20:25Z"}]}
{"id":"lettatoolsselector-858vj","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:24:17.971457806Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:24:18.704951776Z","closed_at":"2026-01-02T21:24:18.704951776Z","close_reason":"Closed","comments":[{"id":4214,"issue_id":"lettatoolsselector-858vj","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T21:24:18Z"}]}
{"id":"lettatoolsselector-85e7n","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:29:20.88502491Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:21.49086333Z","closed_at":"2026-01-02T18:29:21.49086333Z","close_reason":"Closed","comments":[{"id":3856,"issue_id":"lettatoolsselector-85e7n","author":"root","text":"Synced from Huly: LTSEL-245","created_at":"2026-01-02T18:29:21Z"}]}
{"id":"lettatoolsselector-85okt","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:58:01.414864104Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:58:02.042792387Z","closed_at":"2026-01-02T19:58:02.042792387Z","close_reason":"Closed","comments":[{"id":4020,"issue_id":"lettatoolsselector-85okt","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T19:58:01Z"}]}
{"id":"lettatoolsselector-85qn","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:05.875874762Z","updated_at":"2025-12-29T21:33:41.979308858Z","closed_at":"2025-12-29T21:33:41.979308858Z","close_reason":"Duplicate","comments":[{"id":585,"issue_id":"lettatoolsselector-85qn","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T20:34:06Z"}]}
{"id":"lettatoolsselector-8624m","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:44:41.126612064Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:44:41.754562782Z","closed_at":"2026-01-02T22:44:41.754562782Z","close_reason":"Closed","comments":[{"id":4367,"issue_id":"lettatoolsselector-8624m","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T22:44:41Z"}]}
{"id":"lettatoolsselector-869","title":"[Refactor] Phase 1: Extract data models and types","description":"Extract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models (`models/tool.py`)\n```python\n@dataclass\nclass Tool:\n    id: str\n    name: str\n    description: str\n    tool_type: str  # 'external_mcp', 'custom', 'letta_core'\n    source_type: str\n    json_schema: dict\n    mcp_server_name: Optional[str]\n    tags: List[str]\n    \n@dataclass\nclass ToolAttachResult:\n    tool_id: str\n    tool_name: str\n    success: bool\n    error: Optional[str]\n\n@dataclass  \nclass ToolSearchResult:\n    tool: Tool\n    score: float\n    rerank_score: Optional[float]\n```\n\n### 2. Agent Models (`models/agent.py`)\n```python\n@dataclass\nclass AgentInfo:\n    id: str\n    name: str\n    \n@dataclass\nclass AgentToolSet:\n    agent_id: str\n    mcp_tools: List[Tool]\n    core_tools: List[Tool]\n    total_count: int\n```\n\n### 3. Request/Response Models (`models/requests.py`)\n```python\n@dataclass\nclass AttachRequest:\n    agent_id: str\n    query: str\n    limit: int = 10\n    min_score: float = 50.0\n    keep_tools: List[str] = field(default_factory=list)\n    skip_loop_trigger: bool = False\n\n@dataclass\nclass AttachResponse:\n    success: bool\n    message: str\n    successful_attachments: List[ToolAttachResult]\n    failed_attachments: List[ToolAttachResult]\n    detached_tools: List[str]\n    loop_triggered: bool\n```\n\n### 4. Constants (`constants.py`)\n```python\n# Tool limits\nDEFAULT_MAX_TOTAL_TOOLS = 30\nDEFAULT_MAX_MCP_TOOLS = 20\nDEFAULT_MIN_MCP_TOOLS = 7\nDEFAULT_DROP_RATE = 0.3\n\n# Letta core tool types\nLETTA_CORE_TOOL_TYPES = [\n    'letta_core', 'letta_voice_sleeptime_core', ...\n]\n\n# Never detach tools\nNEVER_DETACH_TOOLS = ['find_tools', 'matrix_messaging', ...]\n```\n\n## File Structure\n```\nlettaaugment-source/\n models/\n    __init__.py\n    tool.py\n    agent.py\n    requests.py\n constants.py\n api_server.py (imports from above)\n```\n\n## Acceptance Criteria\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:37:09.269216431Z","updated_at":"2025-12-28T21:09:10.980552414Z","closed_at":"2025-12-28T21:09:10.980559948Z"}
{"id":"lettatoolsselector-86q0i","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:27:20.50455375Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:27:21.086361524Z","closed_at":"2026-01-02T17:27:21.086361524Z","close_reason":"Closed","comments":[{"id":3750,"issue_id":"lettatoolsselector-86q0i","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T17:27:20Z"}]}
{"id":"lettatoolsselector-86seo","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:06:26.393768065Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:06:26.979624293Z","closed_at":"2026-01-02T14:06:26.979624293Z","close_reason":"Closed","comments":[{"id":3411,"issue_id":"lettatoolsselector-86seo","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T14:06:26Z"}]}
{"id":"lettatoolsselector-87c8v","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:45:08.641606331Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:45:09.353623934Z","closed_at":"2026-01-02T19:45:09.353623934Z","close_reason":"Closed","comments":[{"id":4013,"issue_id":"lettatoolsselector-87c8v","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T19:45:09Z"}]}
{"id":"lettatoolsselector-87cm1","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:21:35.938708294Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:36.447265588Z","closed_at":"2026-01-02T09:21:36.447265588Z","close_reason":"Closed","comments":[{"id":2953,"issue_id":"lettatoolsselector-87cm1","author":"root","text":"Synced from Huly: LTSEL-243","created_at":"2026-01-02T09:21:36Z"}]}
{"id":"lettatoolsselector-883dn","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:19.254619427Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:19.87451911Z","closed_at":"2026-01-02T20:55:19.87451911Z","close_reason":"Closed","comments":[{"id":4153,"issue_id":"lettatoolsselector-883dn","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T20:55:19Z"}]}
{"id":"lettatoolsselector-88h5w","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:41:50.023657065Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:41:50.611654272Z","closed_at":"2026-01-02T13:41:50.611654272Z","close_reason":"Closed","comments":[{"id":3384,"issue_id":"lettatoolsselector-88h5w","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T13:41:50Z"}]}
{"id":"lettatoolsselector-88wyj","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:51:25.606771603Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:51:26.483345126Z","closed_at":"2026-01-02T21:51:26.483345126Z","close_reason":"Closed","comments":[{"id":4274,"issue_id":"lettatoolsselector-88wyj","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T21:51:26Z"}]}
{"id":"lettatoolsselector-89980","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:15.392381204Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:16.167091203Z","closed_at":"2026-01-02T19:20:16.167091203Z","close_reason":"Closed","comments":[{"id":3927,"issue_id":"lettatoolsselector-89980","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T19:20:15Z"}]}
{"id":"lettatoolsselector-89c6e","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:37.463035262Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:38.017256037Z","closed_at":"2026-01-02T07:02:38.017256037Z","close_reason":"Closed","comments":[{"id":2657,"issue_id":"lettatoolsselector-89c6e","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T07:02:37Z"}]}
{"id":"lettatoolsselector-89d9l","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:56:12.102417275Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:56:12.668677483Z","closed_at":"2026-01-02T17:56:12.668677483Z","close_reason":"Closed","comments":[{"id":3811,"issue_id":"lettatoolsselector-89d9l","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T17:56:12Z"}]}
{"id":"lettatoolsselector-8adno","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:49:56.17548913Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:49:56.840552223Z","closed_at":"2026-01-02T15:49:56.840552223Z","close_reason":"Closed","comments":[{"id":3615,"issue_id":"lettatoolsselector-8adno","author":"root","text":"Synced from Huly: LTSEL-230","created_at":"2026-01-02T15:49:56Z"}]}
{"id":"lettatoolsselector-8bebv","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:53:51.476340674Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:53:52.049657424Z","closed_at":"2026-01-02T12:53:52.049657424Z","close_reason":"Closed","comments":[{"id":3303,"issue_id":"lettatoolsselector-8bebv","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T12:53:51Z"}]}
{"id":"lettatoolsselector-8bqk0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:34.059795328Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:34.059795328Z","comments":[{"id":2045,"issue_id":"lettatoolsselector-8bqk0","author":"root","text":"Synced from Beads: lettatoolsselector-6t27\n\n---\nHuly Issue: LTSEL-270","created_at":"2026-01-02T03:29:34Z"}]}
{"id":"lettatoolsselector-8c8zc","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:03:08.220753678Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:08.80093765Z","closed_at":"2026-01-02T08:03:08.80093765Z","close_reason":"Closed","comments":[{"id":2817,"issue_id":"lettatoolsselector-8c8zc","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T08:03:08Z"}]}
{"id":"lettatoolsselector-8cbrx","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:21:12.831908345Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:13.301217099Z","closed_at":"2026-01-02T20:21:13.301217099Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8cgq8","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:26:22.845498289Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:26:23.342430709Z","closed_at":"2026-01-02T19:26:23.342430709Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8ch6t","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:22.149693281Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:22.149693281Z","comments":[{"id":2018,"issue_id":"lettatoolsselector-8ch6t","author":"root","text":"Synced from Beads: lettatoolsselector-k3fq\n\n---\nHuly Issue: LTSEL-297","created_at":"2026-01-02T03:29:22Z"}]}
{"id":"lettatoolsselector-8czba","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:45.456439389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:45.863032947Z","closed_at":"2026-01-02T03:29:45.863032947Z","close_reason":"Closed","comments":[{"id":2065,"issue_id":"lettatoolsselector-8czba","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T03:29:45Z"}]}
{"id":"lettatoolsselector-8d27c","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:37:07.970613081Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:08.291173739Z","closed_at":"2026-01-02T06:37:08.291173739Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8d4ze","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:57:17.896224206Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:18.287236667Z","closed_at":"2026-01-02T12:57:18.287236667Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8dlw","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:12:23.269558379Z","updated_at":"2025-12-30T02:10:14.49702554Z","comments":[{"id":935,"issue_id":"lettatoolsselector-8dlw","author":"root","text":"Synced from Beads: lettatoolsselector-w50\n\n---\nHuly Issue: LTSEL-96","created_at":"2025-12-29T21:12:23Z"}]}
{"id":"lettatoolsselector-8e6ii","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:18:53.108362704Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:53.584731336Z","closed_at":"2026-01-02T06:18:53.584731336Z","close_reason":"Closed","comments":[{"id":2580,"issue_id":"lettatoolsselector-8e6ii","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T06:18:53Z"}]}
{"id":"lettatoolsselector-8eqc5","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:47:54.327930736Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:54.683096364Z","closed_at":"2026-01-02T03:47:54.683096364Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8ev9c","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:57.664024642Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:58.261455246Z","closed_at":"2026-01-02T08:54:58.261455246Z","close_reason":"Closed","comments":[{"id":2891,"issue_id":"lettatoolsselector-8ev9c","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T08:54:58Z"}]}
{"id":"lettatoolsselector-8faps","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:08.722110308Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:09.272298741Z","closed_at":"2026-01-02T11:34:09.272298741Z","close_reason":"Closed","comments":[{"id":3223,"issue_id":"lettatoolsselector-8faps","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T11:34:09Z"}]}
{"id":"lettatoolsselector-8fhyz","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:07.935060033Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:08.50009359Z","closed_at":"2026-01-02T12:54:08.50009359Z","close_reason":"Closed","comments":[{"id":3305,"issue_id":"lettatoolsselector-8fhyz","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T12:54:08Z"}]}
{"id":"lettatoolsselector-8fif2","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:59:27.583032705Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:28.254281465Z","closed_at":"2026-01-02T19:59:28.254281465Z","close_reason":"Closed","comments":[{"id":4032,"issue_id":"lettatoolsselector-8fif2","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T19:59:28Z"}]}
{"id":"lettatoolsselector-8fk43","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:56:36.570264962Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:56:37.057001166Z","closed_at":"2026-01-02T12:56:37.057001166Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8fs2d","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:00:56.290724328Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:00:56.703317538Z","closed_at":"2026-01-02T21:00:56.703317538Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8g76i","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:08:53.962849536Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:08:54.318635382Z","closed_at":"2026-01-02T14:08:54.318635382Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8h0et","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:39.309602332Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:39.309602332Z","comments":[{"id":2057,"issue_id":"lettatoolsselector-8h0et","author":"root","text":"Synced from Beads: lettatoolsselector-usbu\n\n---\nHuly Issue: LTSEL-258","created_at":"2026-01-02T03:29:39Z"}]}
{"id":"lettatoolsselector-8h6n4","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:38.996894801Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:39.628853095Z","closed_at":"2026-01-02T19:20:39.628853095Z","close_reason":"Closed","comments":[{"id":3933,"issue_id":"lettatoolsselector-8h6n4","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T19:20:39Z"}]}
{"id":"lettatoolsselector-8hcj","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:49.541504571Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:49.879045446Z","closed_at":"2026-01-02T01:24:49.879045446Z","close_reason":"Closed","comments":[{"id":1218,"issue_id":"lettatoolsselector-8hcj","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T01:24:49Z"}]}
{"id":"lettatoolsselector-8hz7n","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:35:54.785158869Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:35:55.315794003Z","closed_at":"2026-01-02T10:35:55.315794003Z","close_reason":"Closed","comments":[{"id":3074,"issue_id":"lettatoolsselector-8hz7n","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T10:35:55Z"}]}
{"id":"lettatoolsselector-8ia6s","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:11:01.215863265Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:11:01.819429424Z","closed_at":"2026-01-02T14:11:01.819429424Z","close_reason":"Closed","comments":[{"id":3436,"issue_id":"lettatoolsselector-8ia6s","author":"root","text":"Synced from Huly: LTSEL-225","created_at":"2026-01-02T14:11:01Z"}]}
{"id":"lettatoolsselector-8ikt7","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:02.565872932Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:03.060513737Z","closed_at":"2026-01-02T05:41:03.060513737Z","close_reason":"Closed","comments":[{"id":2481,"issue_id":"lettatoolsselector-8ikt7","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T05:41:02Z"}]}
{"id":"lettatoolsselector-8j82m","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:03:07.868970103Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:08.337404394Z","closed_at":"2026-01-02T07:03:08.337404394Z","close_reason":"Closed","comments":[{"id":2681,"issue_id":"lettatoolsselector-8j82m","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T07:03:08Z"}]}
{"id":"lettatoolsselector-8jn5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:08.445096965Z","updated_at":"2025-12-30T01:47:08.158670453Z","comments":[{"id":951,"issue_id":"lettatoolsselector-8jn5","author":"root","text":"Synced from Beads: lettatoolsselector-9cq\n\n---\nHuly Issue: LTSEL-98","created_at":"2025-12-29T21:14:08Z"}]}
{"id":"lettatoolsselector-8k3wf","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:46.166856631Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:46.857387786Z","closed_at":"2026-01-02T17:25:46.857387786Z","close_reason":"Closed","comments":[{"id":3735,"issue_id":"lettatoolsselector-8k3wf","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T17:25:46Z"}]}
{"id":"lettatoolsselector-8k76m","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:02:54.62321571Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:55.249122701Z","closed_at":"2026-01-02T12:02:55.249122701Z","close_reason":"Closed","comments":[{"id":3284,"issue_id":"lettatoolsselector-8k76m","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T12:02:55Z"}]}
{"id":"lettatoolsselector-8lfxr","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:49:37.774824108Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:49:38.369029845Z","closed_at":"2026-01-02T15:49:38.369029845Z","close_reason":"Closed","comments":[{"id":3610,"issue_id":"lettatoolsselector-8lfxr","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T15:49:38Z"}]}
{"id":"lettatoolsselector-8m5","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:11.704019765Z","updated_at":"2025-12-23T03:23:11.910721455Z","closed_at":"2025-12-23T03:23:11.910721455Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8mp3j","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:43:09.112688648Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:43:09.86343082Z","closed_at":"2026-01-02T20:43:09.86343082Z","close_reason":"Closed","comments":[{"id":4144,"issue_id":"lettatoolsselector-8mp3j","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T20:43:09Z"}]}
{"id":"lettatoolsselector-8n15i","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:39:58.841206741Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:39:59.361564699Z","closed_at":"2026-01-02T09:39:59.361564699Z","close_reason":"Closed","comments":[{"id":2983,"issue_id":"lettatoolsselector-8n15i","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T09:39:59Z"}]}
{"id":"lettatoolsselector-8n61y","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:42:00.020726741Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:42:02.039134535Z","closed_at":"2026-01-02T19:42:02.039134535Z","close_reason":"Closed","comments":[{"id":4002,"issue_id":"lettatoolsselector-8n61y","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T19:42:01Z"}]}
{"id":"lettatoolsselector-8nhwe","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:08.853886214Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:09.284584641Z","closed_at":"2026-01-02T04:20:09.284584641Z","close_reason":"Closed","comments":[{"id":2362,"issue_id":"lettatoolsselector-8nhwe","author":"root","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2026-01-02T04:20:09Z"}]}
{"id":"lettatoolsselector-8o98j","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:21.063071195Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:21.063071195Z","comments":[{"id":1888,"issue_id":"lettatoolsselector-8o98j","author":"root","text":"Synced from Beads: lettatoolsselector-p4x2\n\n---\nHuly Issue: LTSEL-455","created_at":"2026-01-02T03:28:21Z"}]}
{"id":"lettatoolsselector-8p5ln","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:47:22.862834685Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:23.360689838Z","closed_at":"2026-01-02T03:47:23.360689838Z","close_reason":"Closed","comments":[{"id":2317,"issue_id":"lettatoolsselector-8p5ln","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T03:47:23Z"}]}
{"id":"lettatoolsselector-8pcrc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:39.496773347Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:39.496773347Z","comments":[{"id":2198,"issue_id":"lettatoolsselector-8pcrc","author":"root","text":"Synced from Huly: LTSEL-661","created_at":"2026-01-02T03:43:39Z"}]}
{"id":"lettatoolsselector-8pez","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:10:30.07018618Z","updated_at":"2025-12-30T04:14:23.335512748Z","comments":[{"id":913,"issue_id":"lettatoolsselector-8pez","author":"root","text":"Synced from Beads: lettatoolsselector-th4\n\n---\nHuly Issue: LTSEL-94","created_at":"2025-12-29T21:10:30Z"}]}
{"id":"lettatoolsselector-8q2k3","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:58:07.865349966Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:08.240345469Z","closed_at":"2026-01-02T09:58:08.240345469Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8q4lg","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:38.389901223Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:38.980512819Z","closed_at":"2026-01-02T07:23:38.980512819Z","close_reason":"Closed","comments":[{"id":2694,"issue_id":"lettatoolsselector-8q4lg","author":"root","text":"Synced from Huly: LTSEL-46","created_at":"2026-01-02T07:23:38Z"}]}
{"id":"lettatoolsselector-8q50c","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:14:25.895162075Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:14:26.548148346Z","closed_at":"2026-01-02T22:14:26.548148346Z","close_reason":"Closed","comments":[{"id":4289,"issue_id":"lettatoolsselector-8q50c","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T22:14:26Z"}]}
{"id":"lettatoolsselector-8qa03","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:35.818044822Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:36.333523996Z","closed_at":"2026-01-02T07:02:36.333523996Z","close_reason":"Closed","comments":[{"id":2655,"issue_id":"lettatoolsselector-8qa03","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T07:02:36Z"}]}
{"id":"lettatoolsselector-8qg88","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:46.604696531Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:46.604696531Z","comments":[{"id":1808,"issue_id":"lettatoolsselector-8qg88","author":"root","text":"Synced from Beads: lettatoolsselector-gc7f\n\n---\nHuly Issue: LTSEL-559","created_at":"2026-01-02T03:27:46Z"}]}
{"id":"lettatoolsselector-8qio","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:14.19555848Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:14.611649022Z","closed_at":"2026-01-02T02:35:14.611649022Z","close_reason":"Closed","comments":[{"id":1343,"issue_id":"lettatoolsselector-8qio","author":"root","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2026-01-02T02:35:14Z"}]}
{"id":"lettatoolsselector-8qmw","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:34:57.781255505Z","updated_at":"2025-12-30T02:39:42.401157064Z","comments":[{"id":1070,"issue_id":"lettatoolsselector-8qmw","author":"root","text":"Synced from Beads: lettatoolsselector-9fs\n\n---\nHuly Issue: LTSEL-56","created_at":"2025-12-29T21:34:58Z"}]}
{"id":"lettatoolsselector-8qphs","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:07.906826623Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:08.208998276Z","closed_at":"2026-01-02T05:41:08.208998276Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8que8","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:42:11.033536708Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:42:11.701117574Z","closed_at":"2026-01-02T19:42:11.701117574Z","close_reason":"Closed","comments":[{"id":4003,"issue_id":"lettatoolsselector-8que8","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T19:42:11Z"}]}
{"id":"lettatoolsselector-8rdg","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:12:20.327855396Z","updated_at":"2025-12-30T02:09:04.139576473Z","comments":[{"id":932,"issue_id":"lettatoolsselector-8rdg","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T21:12:20Z"}]}
{"id":"lettatoolsselector-8rooc","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:21:52.766123612Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:53.156251585Z","closed_at":"2026-01-02T08:21:53.156251585Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8ryd6","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:07.631520601Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:08.244107881Z","closed_at":"2026-01-02T13:36:08.244107881Z","close_reason":"Closed","comments":[{"id":3351,"issue_id":"lettatoolsselector-8ryd6","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T13:36:08Z"}]}
{"id":"lettatoolsselector-8s1","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:08:16.853460013Z","updated_at":"2025-12-29T21:33:44.741468329Z","closed_at":"2025-12-29T21:33:44.741468329Z","close_reason":"Duplicate","comments":[{"id":295,"issue_id":"lettatoolsselector-8s1","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T20:08:17Z"}]}
{"id":"lettatoolsselector-8s1ho","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:30.119927569Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:30.847621184Z","closed_at":"2026-01-02T09:40:30.847621184Z","close_reason":"Closed","comments":[{"id":2996,"issue_id":"lettatoolsselector-8s1ho","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T09:40:30Z"}]}
{"id":"lettatoolsselector-8sbq9","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:37:25.008539566Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:25.486632429Z","closed_at":"2026-01-02T06:37:25.486632429Z","close_reason":"Closed","comments":[{"id":2639,"issue_id":"lettatoolsselector-8sbq9","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T06:37:25Z"}]}
{"id":"lettatoolsselector-8sffh","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:42.981258383Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:43.414898175Z","closed_at":"2026-01-02T03:29:43.414898175Z","close_reason":"Closed","comments":[{"id":2063,"issue_id":"lettatoolsselector-8sffh","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T03:29:43Z"}]}
{"id":"lettatoolsselector-8tnvy","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:37.504756082Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:37.991043466Z","closed_at":"2026-01-02T07:42:37.991043466Z","close_reason":"Closed","comments":[{"id":2755,"issue_id":"lettatoolsselector-8tnvy","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T07:42:37Z"}]}
{"id":"lettatoolsselector-8u3c9","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:48:20.78704642Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:21.216870013Z","closed_at":"2026-01-02T03:48:21.216870013Z","close_reason":"Closed","comments":[{"id":2336,"issue_id":"lettatoolsselector-8u3c9","author":"root","text":"Synced from Huly: LTSEL-49","created_at":"2026-01-02T03:48:21Z"}]}
{"id":"lettatoolsselector-8u7d","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:28:34.510838448Z","updated_at":"2025-12-30T02:02:53.875975521Z","comments":[{"id":1047,"issue_id":"lettatoolsselector-8u7d","author":"root","text":"Synced from Beads: lettatoolsselector-ct9\n\n---\nHuly Issue: LTSEL-75","created_at":"2025-12-29T21:28:34Z"}]}
{"id":"lettatoolsselector-8uca7","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:00:22.531055287Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:22.987341892Z","closed_at":"2026-01-02T06:00:22.987341892Z","close_reason":"Closed","comments":[{"id":2536,"issue_id":"lettatoolsselector-8uca7","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T06:00:22Z"}]}
{"id":"lettatoolsselector-8ucxk","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:27.379027824Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:28.87135312Z","closed_at":"2026-01-02T08:54:28.87135312Z","close_reason":"Closed","comments":[{"id":2881,"issue_id":"lettatoolsselector-8ucxk","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T08:54:28Z"}]}
{"id":"lettatoolsselector-8uwi3","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T04:20:35.152465197Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:35.720061972Z","closed_at":"2026-01-02T04:20:35.720061972Z","close_reason":"Closed","comments":[{"id":2383,"issue_id":"lettatoolsselector-8uwi3","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T04:20:35Z"}]}
{"id":"lettatoolsselector-8voee","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:57:12.78984208Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:13.304941509Z","closed_at":"2026-01-02T08:57:13.304941509Z","close_reason":"Closed","comments":[{"id":2920,"issue_id":"lettatoolsselector-8voee","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T08:57:13Z"}]}
{"id":"lettatoolsselector-8vplj","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:49.268590557Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:49.53670421Z","closed_at":"2026-01-02T04:20:49.53670421Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8vwik","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:30:29.157094837Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:30:29.773068217Z","closed_at":"2026-01-02T18:30:29.773068217Z","close_reason":"Closed","comments":[{"id":3865,"issue_id":"lettatoolsselector-8vwik","author":"root","text":"Synced from Huly: LTSEL-228","created_at":"2026-01-02T18:30:29Z"}]}
{"id":"lettatoolsselector-8wjzm","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:08.720327491Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:09.324991936Z","closed_at":"2026-01-02T15:46:09.324991936Z","close_reason":"Closed","comments":[{"id":3596,"issue_id":"lettatoolsselector-8wjzm","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T15:46:09Z"}]}
{"id":"lettatoolsselector-8wnin","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:23:24.682750555Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:23:25.232682667Z","closed_at":"2026-01-02T08:23:25.232682667Z","close_reason":"Closed","comments":[{"id":2876,"issue_id":"lettatoolsselector-8wnin","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T08:23:25Z"}]}
{"id":"lettatoolsselector-8wq7","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:41:05.645168525Z","updated_at":"2025-12-29T21:33:23.628774035Z","closed_at":"2025-12-29T21:33:23.628774035Z","close_reason":"Duplicate","comments":[{"id":653,"issue_id":"lettatoolsselector-8wq7","author":"root","text":"Synced from Beads: lettatoolsselector-7mg\n\n---\nHuly Issue: LTSEL-144","created_at":"2025-12-29T20:41:05Z"}]}
{"id":"lettatoolsselector-8wr9z","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:41:34.9613833Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:35.419277072Z","closed_at":"2026-01-02T20:41:35.419277072Z","close_reason":"Closed"}
{"id":"lettatoolsselector-8xp62","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:58:39.064933472Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:58:39.604759212Z","closed_at":"2026-01-02T12:58:39.604759212Z","close_reason":"Closed","comments":[{"id":3335,"issue_id":"lettatoolsselector-8xp62","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T12:58:39Z"}]}
{"id":"lettatoolsselector-8yc1h","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:53.583340025Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:54.063671611Z","closed_at":"2026-01-02T06:17:54.063671611Z","close_reason":"Closed","comments":[{"id":2564,"issue_id":"lettatoolsselector-8yc1h","author":"root","text":"Synced from Huly: LTSEL-17","created_at":"2026-01-02T06:17:53Z"}]}
{"id":"lettatoolsselector-8yefn","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:37.139109109Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:37.665935794Z","closed_at":"2026-01-02T11:33:37.665935794Z","close_reason":"Closed","comments":[{"id":3209,"issue_id":"lettatoolsselector-8yefn","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T11:33:37Z"}]}
{"id":"lettatoolsselector-8yet7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:29.063264844Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:29.063264844Z","comments":[{"id":1906,"issue_id":"lettatoolsselector-8yet7","author":"root","text":"Synced from Beads: lettatoolsselector-wvdl\n\n---\nHuly Issue: LTSEL-429","created_at":"2026-01-02T03:28:29Z"}]}
{"id":"lettatoolsselector-8z4r","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:33.395046976Z","updated_at":"2025-12-29T21:33:29.692121942Z","closed_at":"2025-12-29T21:33:29.692121942Z","close_reason":"Duplicate","comments":[{"id":382,"issue_id":"lettatoolsselector-8z4r","author":"root","text":"Synced from Beads: lettatoolsselector-ajz\n\n---\nHuly Issue: LTSEL-205","created_at":"2025-12-29T20:16:33Z"}]}
{"id":"lettatoolsselector-8zvk9","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:47.120799794Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:47.775412542Z","closed_at":"2026-01-02T07:23:47.775412542Z","close_reason":"Closed","comments":[{"id":2703,"issue_id":"lettatoolsselector-8zvk9","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T07:23:47Z"}]}
{"id":"lettatoolsselector-90bak","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:59:56.361672874Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:59:56.946676914Z","closed_at":"2026-01-02T18:59:56.946676914Z","close_reason":"Closed","comments":[{"id":3918,"issue_id":"lettatoolsselector-90bak","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T18:59:56Z"}]}
{"id":"lettatoolsselector-90if","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:20:21.867801619Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:22.130188831Z","closed_at":"2026-01-02T02:20:22.130188831Z","close_reason":"Closed"}
{"id":"lettatoolsselector-90s1c","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:29.241298721Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:29.241298721Z","comments":[{"id":2034,"issue_id":"lettatoolsselector-90s1c","author":"root","text":"Synced from Beads: lettatoolsselector-si3l\n\n---\nHuly Issue: LTSEL-281","created_at":"2026-01-02T03:29:29Z"}]}
{"id":"lettatoolsselector-91f9n","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:49.5008349Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:50.008158463Z","closed_at":"2026-01-02T10:57:50.008158463Z","close_reason":"Closed","comments":[{"id":3121,"issue_id":"lettatoolsselector-91f9n","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T10:57:49Z"}]}
{"id":"lettatoolsselector-91p0","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:26.508674141Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:26.715126922Z","closed_at":"2026-01-02T02:35:26.715126922Z","close_reason":"Closed"}
{"id":"lettatoolsselector-92an8","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:22:35.442882718Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:35.961639429Z","closed_at":"2026-01-02T09:22:35.961639429Z","close_reason":"Closed","comments":[{"id":2971,"issue_id":"lettatoolsselector-92an8","author":"root","text":"Synced from Huly: LTSEL-49","created_at":"2026-01-02T09:22:35Z"}]}
{"id":"lettatoolsselector-92gky","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:42.193282154Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:42.882366415Z","closed_at":"2026-01-02T07:23:42.882366415Z","close_reason":"Closed","comments":[{"id":2698,"issue_id":"lettatoolsselector-92gky","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T07:23:42Z"}]}
{"id":"lettatoolsselector-92q61","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:34.989551536Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:35.536793609Z","closed_at":"2026-01-02T08:54:35.536793609Z","close_reason":"Closed","comments":[{"id":2883,"issue_id":"lettatoolsselector-92q61","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T08:54:35Z"}]}
{"id":"lettatoolsselector-92tyk","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:01:06.35795179Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:01:07.133656651Z","closed_at":"2026-01-02T21:01:07.133656651Z","close_reason":"Closed","comments":[{"id":4180,"issue_id":"lettatoolsselector-92tyk","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T21:01:06Z"}]}
{"id":"lettatoolsselector-936p","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:31.204007418Z","updated_at":"2025-12-30T01:58:33.334422314Z","comments":[{"id":1020,"issue_id":"lettatoolsselector-936p","author":"root","text":"Synced from Beads: lettatoolsselector-leh\n\n---\nHuly Issue: LTSEL-80","created_at":"2025-12-29T21:22:31Z"}]}
{"id":"lettatoolsselector-93eme","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:36:56.326100938Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:56.657014035Z","closed_at":"2026-01-02T06:36:56.657014035Z","close_reason":"Closed"}
{"id":"lettatoolsselector-93hwu","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:30:36.248138224Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:30:36.956428093Z","closed_at":"2026-01-02T21:30:36.956428093Z","close_reason":"Closed","comments":[{"id":4227,"issue_id":"lettatoolsselector-93hwu","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T21:30:36Z"}]}
{"id":"lettatoolsselector-93jj4","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T16:18:19.578575143Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:18:19.966975817Z","closed_at":"2026-01-02T16:18:19.966975817Z","close_reason":"Closed"}
{"id":"lettatoolsselector-94cef","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:04:40.170044093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:04:40.872877132Z","closed_at":"2026-01-02T15:04:40.872877132Z","close_reason":"Closed","comments":[{"id":3532,"issue_id":"lettatoolsselector-94cef","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T15:04:40Z"}]}
{"id":"lettatoolsselector-95btl","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:42.936417102Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:43.465000975Z","closed_at":"2026-01-02T11:33:43.465000975Z","close_reason":"Closed","comments":[{"id":3214,"issue_id":"lettatoolsselector-95btl","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T11:33:43Z"}]}
{"id":"lettatoolsselector-95k2w","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:54.366616059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:54.965719002Z","closed_at":"2026-01-02T10:59:54.965719002Z","close_reason":"Closed","comments":[{"id":3157,"issue_id":"lettatoolsselector-95k2w","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T10:59:54Z"}]}
{"id":"lettatoolsselector-95p2","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:36.276395873Z","updated_at":"2025-12-29T21:33:25.286879424Z","closed_at":"2025-12-29T21:33:25.286879424Z","close_reason":"Duplicate","comments":[{"id":581,"issue_id":"lettatoolsselector-95p2","author":"root","text":"Synced from Beads: lettatoolsselector-x6v\n\n---\nHuly Issue: LTSEL-168","created_at":"2025-12-29T20:33:36Z"}]}
{"id":"lettatoolsselector-95yhh","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:25:12.543895845Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:25:12.976380507Z","closed_at":"2026-01-02T19:25:12.976380507Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9638b","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:05.414589093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:06.037530335Z","closed_at":"2026-01-02T07:24:06.037530335Z","close_reason":"Closed","comments":[{"id":2716,"issue_id":"lettatoolsselector-9638b","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T07:24:05Z"}]}
{"id":"lettatoolsselector-96ewc","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:03:24.555716436Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:24.954593015Z","closed_at":"2026-01-02T20:03:24.954593015Z","close_reason":"Closed"}
{"id":"lettatoolsselector-96g48","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:24:56.893090148Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:57.467850436Z","closed_at":"2026-01-02T07:24:57.467850436Z","close_reason":"Closed","comments":[{"id":2735,"issue_id":"lettatoolsselector-96g48","author":"root","text":"Synced from Huly: LTSEL-48","created_at":"2026-01-02T07:24:57Z"}]}
{"id":"lettatoolsselector-96pzp","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:34:24.93204546Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:34:25.511421095Z","closed_at":"2026-01-02T14:34:25.511421095Z","close_reason":"Closed","comments":[{"id":3474,"issue_id":"lettatoolsselector-96pzp","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T14:34:25Z"}]}
{"id":"lettatoolsselector-96wu","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:02.855913657Z","updated_at":"2025-12-29T21:33:43.95322652Z","closed_at":"2025-12-29T21:33:43.95322652Z","close_reason":"Duplicate","comments":[{"id":406,"issue_id":"lettatoolsselector-96wu","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:19:03Z"}]}
{"id":"lettatoolsselector-970bd","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:48:55.996741989Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:48:56.697161244Z","closed_at":"2026-01-02T22:48:56.697161244Z","close_reason":"Closed","comments":[{"id":4375,"issue_id":"lettatoolsselector-970bd","author":"root","text":"Synced from Huly: LTSEL-49","created_at":"2026-01-02T22:48:56Z"}]}
{"id":"lettatoolsselector-971fr","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:32.499471476Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:33.053341576Z","closed_at":"2026-01-02T07:02:33.053341576Z","close_reason":"Closed","comments":[{"id":2651,"issue_id":"lettatoolsselector-971fr","author":"root","text":"Synced from Huly: LTSEL-42","created_at":"2026-01-02T07:02:32Z"}]}
{"id":"lettatoolsselector-97amg","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:58:41.859022769Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:42.51861514Z","closed_at":"2026-01-02T14:58:42.51861514Z","close_reason":"Closed"}
{"id":"lettatoolsselector-980ig","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:36.986559624Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:36.986559624Z","comments":[{"id":1924,"issue_id":"lettatoolsselector-980ig","author":"root","text":"Synced from Beads: lettatoolsselector-r4kz\n\n---\nHuly Issue: LTSEL-405","created_at":"2026-01-02T03:28:37Z"}]}
{"id":"lettatoolsselector-98ji","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:27.501339088Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:27.862560062Z","closed_at":"2026-01-02T03:06:27.862560062Z","close_reason":"Closed","comments":[{"id":1549,"issue_id":"lettatoolsselector-98ji","author":"root","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2026-01-02T03:06:27Z"}]}
{"id":"lettatoolsselector-99gsq","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:34.032156002Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:34.747221565Z","closed_at":"2026-01-02T22:39:34.747221565Z","close_reason":"Closed","comments":[{"id":4345,"issue_id":"lettatoolsselector-99gsq","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T22:39:34Z"}]}
{"id":"lettatoolsselector-9ar40","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:59:16.072869829Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:59:16.622074987Z","closed_at":"2026-01-02T12:59:16.622074987Z","close_reason":"Closed","comments":[{"id":3336,"issue_id":"lettatoolsselector-9ar40","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T12:59:16Z"}]}
{"id":"lettatoolsselector-9b267","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:52.17076716Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:52.849521422Z","closed_at":"2026-01-02T15:20:52.849521422Z","close_reason":"Closed","comments":[{"id":3546,"issue_id":"lettatoolsselector-9b267","author":"root","text":"Synced from Huly: LTSEL-33","created_at":"2026-01-02T15:20:52Z"}]}
{"id":"lettatoolsselector-9b9je","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:30.287022085Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:30.894914548Z","closed_at":"2026-01-02T15:20:30.894914548Z","close_reason":"Closed","comments":[{"id":3537,"issue_id":"lettatoolsselector-9b9je","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T15:20:30Z"}]}
{"id":"lettatoolsselector-9bb8s","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:14:30.051689409Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:14:30.698706512Z","closed_at":"2026-01-02T22:14:30.698706512Z","close_reason":"Closed","comments":[{"id":4290,"issue_id":"lettatoolsselector-9bb8s","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T22:14:30Z"}]}
{"id":"lettatoolsselector-9bbug","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:49.510010819Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:49.510010819Z","comments":[{"id":1815,"issue_id":"lettatoolsselector-9bbug","author":"root","text":"Synced from Beads: lettatoolsselector-416d\n\n---\nHuly Issue: LTSEL-548","created_at":"2026-01-02T03:27:49Z"}]}
{"id":"lettatoolsselector-9bg8d","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:21:46.72573423Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:47.166095469Z","closed_at":"2026-01-02T04:21:47.166095469Z","close_reason":"Closed","comments":[{"id":2396,"issue_id":"lettatoolsselector-9bg8d","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T04:21:46Z"}]}
{"id":"lettatoolsselector-9bp7q","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:38.56321164Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:38.56321164Z","comments":[{"id":1790,"issue_id":"lettatoolsselector-9bp7q","author":"root","text":"Synced from Beads: lettatoolsselector-wvnz\n\n---\nHuly Issue: LTSEL-586","created_at":"2026-01-02T03:27:38Z"}]}
{"id":"lettatoolsselector-9bt7y","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:37:02.849658209Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:03.4581283Z","closed_at":"2026-01-02T10:37:03.4581283Z","close_reason":"Closed","comments":[{"id":3096,"issue_id":"lettatoolsselector-9bt7y","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T10:37:03Z"}]}
{"id":"lettatoolsselector-9bzxg","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:46.775217729Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:47.349722848Z","closed_at":"2026-01-02T10:57:47.349722848Z","close_reason":"Closed","comments":[{"id":3119,"issue_id":"lettatoolsselector-9bzxg","author":"root","text":"Synced from Huly: LTSEL-45","created_at":"2026-01-02T10:57:47Z"}]}
{"id":"lettatoolsselector-9c8fj","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:13:40.005638964Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:13:40.61401694Z","closed_at":"2026-01-02T16:13:40.61401694Z","close_reason":"Closed","comments":[{"id":3657,"issue_id":"lettatoolsselector-9c8fj","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T16:13:40Z"}]}
{"id":"lettatoolsselector-9cjr0","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:25.48152876Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:26.127054296Z","closed_at":"2026-01-02T17:25:26.127054296Z","close_reason":"Closed","comments":[{"id":3729,"issue_id":"lettatoolsselector-9cjr0","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T17:25:25Z"}]}
{"id":"lettatoolsselector-9d6f7","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:18:05.561360624Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:05.889207845Z","closed_at":"2026-01-02T06:18:05.889207845Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9dbdf","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:54.346243879Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:54.741177199Z","closed_at":"2026-01-02T03:29:54.741177199Z","close_reason":"Closed","comments":[{"id":2075,"issue_id":"lettatoolsselector-9dbdf","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T03:29:54Z"}]}
{"id":"lettatoolsselector-9ee1h","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:53:42.853071357Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:53:43.388090589Z","closed_at":"2026-01-02T12:53:43.388090589Z","close_reason":"Closed","comments":[{"id":3298,"issue_id":"lettatoolsselector-9ee1h","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T12:53:43Z"}]}
{"id":"lettatoolsselector-9egpq","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:21:30.10698479Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:30.604100097Z","closed_at":"2026-01-02T09:21:30.604100097Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9esn5","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:35:58.007021746Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:35:58.558647348Z","closed_at":"2026-01-02T10:35:58.558647348Z","close_reason":"Closed","comments":[{"id":3076,"issue_id":"lettatoolsselector-9esn5","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T10:35:58Z"}]}
{"id":"lettatoolsselector-9ewak","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:03:36.405807098Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:03:37.110913561Z","closed_at":"2026-01-02T17:03:37.110913561Z","close_reason":"Closed","comments":[{"id":3705,"issue_id":"lettatoolsselector-9ewak","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T17:03:36Z"}]}
{"id":"lettatoolsselector-9exj","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:20.72671003Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:21.09195453Z","closed_at":"2026-01-02T02:35:21.09195453Z","close_reason":"Closed","comments":[{"id":1352,"issue_id":"lettatoolsselector-9exj","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T02:35:20Z"}]}
{"id":"lettatoolsselector-9ffwd","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:49.820138006Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:49.820138006Z","comments":[{"id":2214,"issue_id":"lettatoolsselector-9ffwd","author":"root","text":"Synced from Huly: LTSEL-625","created_at":"2026-01-02T03:43:50Z"}]}
{"id":"lettatoolsselector-9flnj","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:04:58.905461107Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:04:59.544726459Z","closed_at":"2026-01-02T14:04:59.544726459Z","close_reason":"Closed","comments":[{"id":3392,"issue_id":"lettatoolsselector-9flnj","author":"root","text":"Synced from Huly: LTSEL-44","created_at":"2026-01-02T14:04:59Z"}]}
{"id":"lettatoolsselector-9fnqm","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:39.723651316Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:40.348667906Z","closed_at":"2026-01-02T17:25:40.348667906Z","close_reason":"Closed","comments":[{"id":3733,"issue_id":"lettatoolsselector-9fnqm","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T17:25:40Z"}]}
{"id":"lettatoolsselector-9fx2g","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:54.626803064Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:54.626803064Z","comments":[{"id":2223,"issue_id":"lettatoolsselector-9fx2g","author":"root","text":"Synced from Beads: lettatoolsselector-wuqn\n\n---\nHuly Issue: LTSEL-604","created_at":"2026-01-02T03:43:54Z"}]}
{"id":"lettatoolsselector-9g0sw","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:39.900777885Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:39.900777885Z","comments":[{"id":1793,"issue_id":"lettatoolsselector-9g0sw","author":"root","text":"Synced from Beads: lettatoolsselector-g3u5\n\n---\nHuly Issue: LTSEL-583","created_at":"2026-01-02T03:27:40Z"}]}
{"id":"lettatoolsselector-9g9tn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:55.945029413Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:55.945029413Z","comments":[{"id":1830,"issue_id":"lettatoolsselector-9g9tn","author":"root","text":"Synced from Beads: lettatoolsselector-jc31\n\n---\nHuly Issue: LTSEL-524","created_at":"2026-01-02T03:27:56Z"}]}
{"id":"lettatoolsselector-9gqpk","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:04.931148677Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:05.56446212Z","closed_at":"2026-01-02T09:21:05.56446212Z","close_reason":"Closed","comments":[{"id":2938,"issue_id":"lettatoolsselector-9gqpk","author":"root","text":"Synced from Huly: LTSEL-37","created_at":"2026-01-02T09:21:05Z"}]}
{"id":"lettatoolsselector-9gyxq","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:13.733499793Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:14.249712603Z","closed_at":"2026-01-02T10:36:14.249712603Z","close_reason":"Closed","comments":[{"id":3085,"issue_id":"lettatoolsselector-9gyxq","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T10:36:14Z"}]}
{"id":"lettatoolsselector-9h14p","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:31:07.967199054Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:31:08.541650898Z","closed_at":"2026-01-02T14:31:08.541650898Z","close_reason":"Closed","comments":[{"id":3460,"issue_id":"lettatoolsselector-9h14p","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T14:31:08Z"}]}
{"id":"lettatoolsselector-9h65l","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:57:35.375273467Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:35.71259089Z","closed_at":"2026-01-02T09:57:35.71259089Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9hu8","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:33.492617817Z","updated_at":"2025-12-29T21:33:26.958504287Z","closed_at":"2025-12-29T21:33:26.958504287Z","close_reason":"Duplicate","comments":[{"id":498,"issue_id":"lettatoolsselector-9hu8","author":"root","text":"Synced from Beads: lettatoolsselector-9xp\n\n---\nHuly Issue: LTSEL-181","created_at":"2025-12-29T20:26:33Z"}]}
{"id":"lettatoolsselector-9hygj","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:48:50.998235169Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:51.437936344Z","closed_at":"2026-01-02T03:48:51.437936344Z","close_reason":"Closed","comments":[{"id":2343,"issue_id":"lettatoolsselector-9hygj","author":"root","text":"Synced from Huly: LTSEL-225","created_at":"2026-01-02T03:48:51Z"}]}
{"id":"lettatoolsselector-9i2z","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:21.265741984Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:21.615072471Z","closed_at":"2026-01-02T03:06:21.615072471Z","close_reason":"Closed","comments":[{"id":1538,"issue_id":"lettatoolsselector-9i2z","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T03:06:21Z"}]}
{"id":"lettatoolsselector-9i6k","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:44:26.31551729Z","updated_at":"2025-12-29T21:33:23.031278811Z","closed_at":"2025-12-29T21:33:23.031278811Z","close_reason":"Duplicate","comments":[{"id":677,"issue_id":"lettatoolsselector-9i6k","author":"root","text":"Synced from Beads: lettatoolsselector-3dk\n\n---\nHuly Issue: LTSEL-154","created_at":"2025-12-29T20:44:26Z"}]}
{"id":"lettatoolsselector-9i9l6","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:23:41.384429404Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:23:42.016060189Z","closed_at":"2026-01-02T21:23:42.016060189Z","close_reason":"Closed","comments":[{"id":4211,"issue_id":"lettatoolsselector-9i9l6","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T21:23:41Z"}]}
{"id":"lettatoolsselector-9irc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:02:09.436003903Z","updated_at":"2025-12-30T04:14:04.069533745Z","comments":[{"id":830,"issue_id":"lettatoolsselector-9irc","author":"root","text":"Synced from Beads: lettatoolsselector-dj2\n\n---\nHuly Issue: LTSEL-125","created_at":"2025-12-29T21:02:09Z"}]}
{"id":"lettatoolsselector-9isnw","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:41:52.312677838Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:41:52.911257288Z","closed_at":"2026-01-02T13:41:52.911257288Z","close_reason":"Closed","comments":[{"id":3385,"issue_id":"lettatoolsselector-9isnw","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T13:41:52Z"}]}
{"id":"lettatoolsselector-9j09r","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:04.795699Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:05.401101209Z","closed_at":"2026-01-02T14:29:05.401101209Z","close_reason":"Closed","comments":[{"id":3438,"issue_id":"lettatoolsselector-9j09r","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T14:29:05Z"}]}
{"id":"lettatoolsselector-9j58","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:19.37886272Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:19.749372291Z","closed_at":"2026-01-02T01:25:19.749372291Z","close_reason":"Closed","comments":[{"id":1258,"issue_id":"lettatoolsselector-9j58","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T01:25:19Z"}]}
{"id":"lettatoolsselector-9jb3d","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:33:40.479585978Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:33:41.192881374Z","closed_at":"2026-01-02T14:33:41.192881374Z","close_reason":"Closed","comments":[{"id":3469,"issue_id":"lettatoolsselector-9jb3d","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T14:33:40Z"}]}
{"id":"lettatoolsselector-9jh40","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:31:03.219441576Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:03.712899652Z","closed_at":"2026-01-02T03:31:03.712899652Z","close_reason":"Closed","comments":[{"id":2122,"issue_id":"lettatoolsselector-9jh40","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T03:31:03Z"}]}
{"id":"lettatoolsselector-9jll","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:15:18.531771404Z","updated_at":"2025-12-30T01:49:08.477286796Z","comments":[{"id":961,"issue_id":"lettatoolsselector-9jll","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T21:15:18Z"}]}
{"id":"lettatoolsselector-9ju3i","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:29.455224997Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:29.455224997Z","comments":[{"id":2187,"issue_id":"lettatoolsselector-9ju3i","author":"root","text":"Synced from Beads: lettatoolsselector-t5ls\n\n---\nHuly Issue: LTSEL-701","created_at":"2026-01-02T03:43:29Z"}]}
{"id":"lettatoolsselector-9jwva","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:57:56.109268036Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:57:56.829818411Z","closed_at":"2026-01-02T21:57:56.829818411Z","close_reason":"Closed","comments":[{"id":4283,"issue_id":"lettatoolsselector-9jwva","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T21:57:56Z"}]}
{"id":"lettatoolsselector-9kbx","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:36.213853095Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:36.612916931Z","closed_at":"2026-01-02T01:08:36.612916931Z","close_reason":"Closed","comments":[{"id":1197,"issue_id":"lettatoolsselector-9kbx","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T01:08:36Z"}]}
{"id":"lettatoolsselector-9ke9l","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:58:30.890418944Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:58:31.424159064Z","closed_at":"2026-01-02T12:58:31.424159064Z","close_reason":"Closed","comments":[{"id":3331,"issue_id":"lettatoolsselector-9ke9l","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T12:58:31Z"}]}
{"id":"lettatoolsselector-9kv","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.807195814Z","updated_at":"2025-12-29T18:56:07.37428219Z","closed_at":"2025-12-29T18:56:07.37428219Z","close_reason":"Duplicate of closed lettatoolsselector-v66","comments":[{"id":6,"issue_id":"lettatoolsselector-9kv","author":"node","text":"## Purpose\n\nRegression guard to ensure tool limits are enforced end-to-end.\n\n## Test Scenario\n\n1. Create test agent with MAX_TOTAL_TOOLS-1 tools attached\n2. Trigger webhook with query that matches 5 tools\n3. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS after operation\n4. Assert: Response includes pruned tools if any were removed\n\n## Acceptance Criteria\n\n- [ ] Test runs in CI on every PR\n- [ ] Uses real tool selector API (integration test)\n- [ ] Cleans up test agent after run\n- [ ] Fails if agent exceeds limit\n\n## Technical Notes\n\n- Use pytest with fixtures for agent setup/teardown\n- May need test-specific MAX_TOTAL_TOOLS value (e.g., 5) for fast testing\n- Tag as \n\n---\nHuly Issue: LTSEL-19","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-9kzk","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:25:07.651684397Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:08.009342419Z","closed_at":"2026-01-02T01:25:08.009342419Z","close_reason":"Closed","comments":[{"id":1244,"issue_id":"lettatoolsselector-9kzk","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T01:25:07Z"}]}
{"id":"lettatoolsselector-9l27","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:06.321375518Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:06.713480686Z","closed_at":"2026-01-02T01:25:06.713480686Z","close_reason":"Closed","comments":[{"id":1243,"issue_id":"lettatoolsselector-9l27","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T01:25:06Z"}]}
{"id":"lettatoolsselector-9lb8j","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:44.002682597Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:44.231886588Z","closed_at":"2026-01-02T03:06:44.231886588Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9lc7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:26.46844329Z","updated_at":"2025-12-30T02:07:34.131837132Z","comments":[{"id":925,"issue_id":"lettatoolsselector-9lc7","author":"root","text":"Synced from Beads: lettatoolsselector-jnc\n\n---\nHuly Issue: LTSEL-104","created_at":"2025-12-29T21:11:26Z"}]}
{"id":"lettatoolsselector-9lc8w","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:20.006539391Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:20.558363694Z","closed_at":"2026-01-02T12:54:20.558363694Z","close_reason":"Closed","comments":[{"id":3312,"issue_id":"lettatoolsselector-9lc8w","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T12:54:20Z"}]}
{"id":"lettatoolsselector-9lyij","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:29:53.49885687Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:53.880091994Z","closed_at":"2026-01-02T17:29:53.880091994Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9mcz7","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:39:22.195703726Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:22.804515849Z","closed_at":"2026-01-02T20:39:22.804515849Z","close_reason":"Closed","comments":[{"id":4127,"issue_id":"lettatoolsselector-9mcz7","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T20:39:22Z"}]}
{"id":"lettatoolsselector-9mwr8","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:07.965363764Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:08.383520884Z","closed_at":"2026-01-02T04:39:08.383520884Z","close_reason":"Closed","comments":[{"id":2406,"issue_id":"lettatoolsselector-9mwr8","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T04:39:08Z"}]}
{"id":"lettatoolsselector-9n0rf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:25.281557857Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:25.281557857Z","comments":[{"id":2025,"issue_id":"lettatoolsselector-9n0rf","author":"root","text":"Synced from Beads: lettatoolsselector-rfdy\n\n---\nHuly Issue: LTSEL-290","created_at":"2026-01-02T03:29:25Z"}]}
{"id":"lettatoolsselector-9n3a5","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:45.176746218Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:45.176746218Z","comments":[{"id":2204,"issue_id":"lettatoolsselector-9n3a5","author":"root","text":"Synced from Beads: lettatoolsselector-l4vc\n\n---\nHuly Issue: LTSEL-649","created_at":"2026-01-02T03:43:45Z"}]}
{"id":"lettatoolsselector-9nx0k","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:39:39.798791721Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:40.42755534Z","closed_at":"2026-01-02T20:39:40.42755534Z","close_reason":"Closed","comments":[{"id":4130,"issue_id":"lettatoolsselector-9nx0k","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T20:39:40Z"}]}
{"id":"lettatoolsselector-9o2e7","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:56:19.868058495Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:56:20.38833071Z","closed_at":"2026-01-02T09:56:20.38833071Z","close_reason":"Closed","comments":[{"id":3049,"issue_id":"lettatoolsselector-9o2e7","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T09:56:20Z"}]}
{"id":"lettatoolsselector-9o46e","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:05:07.300896513Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:05:07.728376093Z","closed_at":"2026-01-02T17:05:07.728376093Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9o4fh","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:27:46.218800085Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:27:46.818628729Z","closed_at":"2026-01-02T17:27:46.818628729Z","close_reason":"Closed","comments":[{"id":3755,"issue_id":"lettatoolsselector-9o4fh","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T17:27:46Z"}]}
{"id":"lettatoolsselector-9o8i0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:05.235838916Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:05.235838916Z","comments":[{"id":1985,"issue_id":"lettatoolsselector-9o8i0","author":"root","text":"Synced from Beads: lettatoolsselector-fx26\n\n---\nHuly Issue: LTSEL-331","created_at":"2026-01-02T03:29:05Z"}]}
{"id":"lettatoolsselector-9ob5g","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:56:13.594140813Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:56:13.94704851Z","closed_at":"2026-01-02T09:56:13.94704851Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9ouot","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:57:07.670328377Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:08.008646412Z","closed_at":"2026-01-02T09:57:08.008646412Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9oy64","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:40:53.543604693Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:54.135496552Z","closed_at":"2026-01-02T04:40:54.135496552Z","close_reason":"Closed","comments":[{"id":2437,"issue_id":"lettatoolsselector-9oy64","author":"root","text":"Synced from Huly: LTSEL-249","created_at":"2026-01-02T04:40:53Z"}]}
{"id":"lettatoolsselector-9p3fu","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:04.417188887Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:04.810608261Z","closed_at":"2026-01-02T03:30:04.810608261Z","close_reason":"Closed","comments":[{"id":2086,"issue_id":"lettatoolsselector-9p3fu","author":"root","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2026-01-02T03:30:04Z"}]}
{"id":"lettatoolsselector-9p6by","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:53:32.524351876Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:53:33.212814278Z","closed_at":"2026-01-02T15:53:33.212814278Z","close_reason":"Closed","comments":[{"id":3632,"issue_id":"lettatoolsselector-9p6by","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T15:53:32Z"}]}
{"id":"lettatoolsselector-9p84m","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:58:18.466957059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:58:18.88281555Z","closed_at":"2026-01-02T20:58:18.88281555Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9qb0","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:37.99154799Z","updated_at":"2025-12-29T21:33:28.269473386Z","closed_at":"2025-12-29T21:33:28.269473386Z","close_reason":"Duplicate","comments":[{"id":438,"issue_id":"lettatoolsselector-9qb0","author":"root","text":"Synced from Beads: lettatoolsselector-zzl\n\n---\nHuly Issue: LTSEL-190","created_at":"2025-12-29T20:21:38Z"}]}
{"id":"lettatoolsselector-9qmsq","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:15:47.489321067Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:15:48.115933017Z","closed_at":"2026-01-02T20:15:48.115933017Z","close_reason":"Closed","comments":[{"id":4062,"issue_id":"lettatoolsselector-9qmsq","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T20:15:47Z"}]}
{"id":"lettatoolsselector-9qw3a","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:47:26.911111791Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:47:27.280856576Z","closed_at":"2026-01-02T15:47:27.280856576Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9qzqw","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:58:26.040675813Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:58:26.413116947Z","closed_at":"2026-01-02T12:58:26.413116947Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9r16","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:28:33.442146829Z","updated_at":"2025-12-30T02:02:44.871836836Z","comments":[{"id":1046,"issue_id":"lettatoolsselector-9r16","author":"root","text":"Synced from Beads: lettatoolsselector-ksi\n\n---\nHuly Issue: LTSEL-64","created_at":"2025-12-29T21:28:33Z"}]}
{"id":"lettatoolsselector-9rvzk","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:59:23.016840843Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:23.358169478Z","closed_at":"2026-01-02T10:59:23.358169478Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9s7rn","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T04:40:01.701932462Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:02.247046977Z","closed_at":"2026-01-02T04:40:02.247046977Z","close_reason":"Closed","comments":[{"id":2433,"issue_id":"lettatoolsselector-9s7rn","author":"root","text":"Synced from Huly: LTSEL-247","created_at":"2026-01-02T04:40:02Z"}]}
{"id":"lettatoolsselector-9s82s","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:02:53.538298781Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:53.918846886Z","closed_at":"2026-01-02T08:02:53.918846886Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9s8wg","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:00.637780915Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:01.107242007Z","closed_at":"2026-01-02T04:39:01.107242007Z","close_reason":"Closed","comments":[{"id":2402,"issue_id":"lettatoolsselector-9s8wg","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T04:39:00Z"}]}
{"id":"lettatoolsselector-9si8","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:21.732156939Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:22.161960018Z","closed_at":"2026-01-02T01:25:22.161960018Z","close_reason":"Closed","comments":[{"id":1262,"issue_id":"lettatoolsselector-9si8","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T01:25:22Z"}]}
{"id":"lettatoolsselector-9sxj5","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:55.952950369Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:56.594345519Z","closed_at":"2026-01-02T10:59:56.594345519Z","close_reason":"Closed","comments":[{"id":3158,"issue_id":"lettatoolsselector-9sxj5","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T10:59:56Z"}]}
{"id":"lettatoolsselector-9t0yt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:58.419302104Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:58.419302104Z","comments":[{"id":1970,"issue_id":"lettatoolsselector-9t0yt","author":"root","text":"Synced from Beads: lettatoolsselector-7jl4\n\n---\nHuly Issue: LTSEL-347","created_at":"2026-01-02T03:28:58Z"}]}
{"id":"lettatoolsselector-9tjy7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:59.744274328Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:59.744274328Z","comments":[{"id":1973,"issue_id":"lettatoolsselector-9tjy7","author":"root","text":"Synced from Beads: lettatoolsselector-w6ec\n\n---\nHuly Issue: LTSEL-344","created_at":"2026-01-02T03:28:59Z"}]}
{"id":"lettatoolsselector-9uxcp","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:59.371301482Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:00:00.053672317Z","closed_at":"2026-01-02T11:00:00.053672317Z","close_reason":"Closed","comments":[{"id":3160,"issue_id":"lettatoolsselector-9uxcp","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T10:59:59Z"}]}
{"id":"lettatoolsselector-9ve","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.837976718Z","updated_at":"2025-12-29T18:56:00.056507758Z","closed_at":"2025-12-29T18:56:00.056507758Z","close_reason":"Duplicate of closed lettatoolsselector-8m5"}
{"id":"lettatoolsselector-9vmt9","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:00:57.164247205Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:00:57.553712396Z","closed_at":"2026-01-02T15:00:57.553712396Z","close_reason":"Closed"}
{"id":"lettatoolsselector-9w7pk","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:11.482325022Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:11.932750302Z","closed_at":"2026-01-02T06:37:11.932750302Z","close_reason":"Closed","comments":[{"id":2632,"issue_id":"lettatoolsselector-9w7pk","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T06:37:11Z"}]}
{"id":"lettatoolsselector-9wir","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:48.754126363Z","updated_at":"2025-12-29T21:33:23.232976724Z","closed_at":"2025-12-29T21:33:23.232976724Z","close_reason":"Duplicate","comments":[{"id":668,"issue_id":"lettatoolsselector-9wir","author":"root","text":"Synced from Beads: lettatoolsselector-omu\n\n---\nHuly Issue: LTSEL-157","created_at":"2025-12-29T20:42:49Z"}]}
{"id":"lettatoolsselector-9woyt","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:50.1422823Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:50.616317452Z","closed_at":"2026-01-02T06:36:50.616317452Z","close_reason":"Closed","comments":[{"id":2613,"issue_id":"lettatoolsselector-9woyt","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T06:36:50Z"}]}
{"id":"lettatoolsselector-9wzef","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:35.580751565Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:35.580751565Z","comments":[{"id":1783,"issue_id":"lettatoolsselector-9wzef","author":"root","text":"Synced from Beads: lettatoolsselector-7dmh\n\n---\nHuly Issue: LTSEL-593","created_at":"2026-01-02T03:27:35Z"}]}
{"id":"lettatoolsselector-9x3","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:27:59.187579944Z","updated_at":"2025-12-29T18:10:47.802664435-05:00","closed_at":"2025-12-29T18:10:47.802664435-05:00","close_reason":"No webhook receiver component exists - same as 5l3. Task not applicable.","comments":[{"id":49,"issue_id":"lettatoolsselector-9x3","author":"node","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2025-12-23T03:27:59Z"}]}
{"id":"lettatoolsselector-9xwuo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:42.105399128Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:42.105399128Z","comments":[{"id":1935,"issue_id":"lettatoolsselector-9xwuo","author":"root","text":"Synced from Beads: lettatoolsselector-c9q6\n\n---\nHuly Issue: LTSEL-390","created_at":"2026-01-02T03:28:42Z"}]}
{"id":"lettatoolsselector-9yduv","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:41.517014167Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:42.125855119Z","closed_at":"2026-01-02T17:50:42.125855119Z","close_reason":"Closed","comments":[{"id":3785,"issue_id":"lettatoolsselector-9yduv","author":"root","text":"Synced from Huly: LTSEL-41","created_at":"2026-01-02T17:50:41Z"}]}
{"id":"lettatoolsselector-9yj4z","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:03:10.180439544Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:03:10.800834531Z","closed_at":"2026-01-02T17:03:10.800834531Z","close_reason":"Closed","comments":[{"id":3699,"issue_id":"lettatoolsselector-9yj4z","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T17:03:10Z"}]}
{"id":"lettatoolsselector-9yr","title":"[Refactor] Extract config module for tool limits","description":"## Summary\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n- `api_server.py:129-154` (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n- `config/tool_limits.py` or add to existing `models.py`\n\n## Values to Extract\n```python\nMAX_TOTAL_TOOLS = int(os.getenv('MAX_TOTAL_TOOLS', '30'))\nMAX_MCP_TOOLS = int(os.getenv('MAX_MCP_TOOLS', '20'))\nMIN_MCP_TOOLS = int(os.getenv('MIN_MCP_TOOLS', '7'))\nMANAGE_ONLY_MCP_TOOLS = os.getenv('MANAGE_ONLY_MCP_TOOLS', 'false').lower() == 'true'\nNEVER_DETACH_TOOLS = [...]\n```\n\n## Implementation\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\nlettatoolsselector-nav","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:51:49.575697277Z","updated_at":"2025-12-29T19:03:29.979084356Z","closed_at":"2025-12-29T19:03:29.979084356Z","close_reason":"Already implemented: ToolLimitsConfig in models.py:337"}
{"id":"lettatoolsselector-9z01e","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:26.808279127Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:27.369427241Z","closed_at":"2026-01-02T14:05:27.369427241Z","close_reason":"Closed","comments":[{"id":3399,"issue_id":"lettatoolsselector-9z01e","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T14:05:27Z"}]}
{"id":"lettatoolsselector-9zg4q","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:28:10.284548362Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:28:10.990725822Z","closed_at":"2026-01-02T22:28:10.990725822Z","close_reason":"Closed","comments":[{"id":4334,"issue_id":"lettatoolsselector-9zg4q","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T22:28:10Z"}]}
{"id":"lettatoolsselector-9zt8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:16:54.526755653Z","updated_at":"2025-12-30T01:52:19.573660566Z","comments":[{"id":978,"issue_id":"lettatoolsselector-9zt8","author":"root","text":"Synced from Beads: lettatoolsselector-5na\n\n---\nHuly Issue: LTSEL-82","created_at":"2025-12-29T21:16:54Z"}]}
{"id":"lettatoolsselector-9zuuf","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:21:14.896659261Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:15.561952999Z","closed_at":"2026-01-02T08:21:15.561952999Z","close_reason":"Closed","comments":[{"id":2860,"issue_id":"lettatoolsselector-9zuuf","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T08:21:15Z"}]}
{"id":"lettatoolsselector-a0il6","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:25.346851086Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:25.346851086Z","comments":[{"id":2238,"issue_id":"lettatoolsselector-a0il6","author":"root","text":"Synced from Beads: lettatoolsselector-d30j\n\n---\nHuly Issue: LTSEL-547","created_at":"2026-01-02T03:44:25Z"}]}
{"id":"lettatoolsselector-a0t6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:04:32.079407821Z","updated_at":"2025-12-30T04:11:46.853579299Z","comments":[{"id":855,"issue_id":"lettatoolsselector-a0t6","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-112","created_at":"2025-12-29T21:04:32Z"}]}
{"id":"lettatoolsselector-a15wk","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:57:34.741995911Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:57:35.135498649Z","closed_at":"2026-01-02T18:57:35.135498649Z","close_reason":"Closed"}
{"id":"lettatoolsselector-a1wg1","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:31:14.105235251Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:31:14.548947049Z","closed_at":"2026-01-02T21:31:14.548947049Z","close_reason":"Closed"}
{"id":"lettatoolsselector-a2026","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:25:24.963247246Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:25:25.522510309Z","closed_at":"2026-01-02T15:25:25.522510309Z","close_reason":"Closed","comments":[{"id":3576,"issue_id":"lettatoolsselector-a2026","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T15:25:25Z"}]}
{"id":"lettatoolsselector-a2z2b","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:41:13.070227989Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:13.497307168Z","closed_at":"2026-01-02T09:41:13.497307168Z","close_reason":"Closed"}
{"id":"lettatoolsselector-a3a","title":"[Perf] Cache MCP servers data in memory","description":"## Problem\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** `api_server.py:823-835`\n\n```python\n# Line 828-830\nasync with aiofiles.open(MCP_SERVERS_CACHE_FILE_PATH, 'r') as f:\n    mcp_data = json.loads(await f.read())\n    mcp_servers_cache_size_on_disk = len(mcp_data)\n```\n\n## Impact\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n```python\n_mcp_servers_cache: List[dict] = []\n_mcp_servers_cache_mtime: float = 0\n\nasync def read_mcp_servers_cache(force_reload=False) -\u003e List[dict]:\n    global _mcp_servers_cache, _mcp_servers_cache_mtime\n    \n    if not force_reload and _mcp_servers_cache:\n        # Check if file changed\n        current_mtime = os.path.getmtime(MCP_SERVERS_CACHE_FILE_PATH)\n        if current_mtime == _mcp_servers_cache_mtime:\n            return _mcp_servers_cache\n    \n    # Load from file\n    async with aiofiles.open(MCP_SERVERS_CACHE_FILE_PATH, 'r') as f:\n        _mcp_servers_cache = json.loads(await f.read())\n        _mcp_servers_cache_mtime = os.path.getmtime(MCP_SERVERS_CACHE_FILE_PATH)\n    \n    return _mcp_servers_cache\n```\n\n## Acceptance Criteria\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T01:50:20.792232309Z","updated_at":"2025-12-29T17:48:49.124654192Z","closed_at":"2025-12-29T17:48:49.124654192Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-a3ro","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:21.22084674Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:21.644765408Z","closed_at":"2026-01-02T01:08:21.644765408Z","close_reason":"Closed","comments":[{"id":1173,"issue_id":"lettatoolsselector-a3ro","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T01:08:21Z"}]}
{"id":"lettatoolsselector-a42jf","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:47:24.025424619Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:24.300535943Z","closed_at":"2026-01-02T03:47:24.300535943Z","close_reason":"Closed"}
{"id":"lettatoolsselector-a43a","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:10:25.996304374Z","updated_at":"2025-12-30T04:14:22.797232634Z","comments":[{"id":911,"issue_id":"lettatoolsselector-a43a","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T21:10:26Z"}]}
{"id":"lettatoolsselector-a4g4g","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:21:08.176528918Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:08.872384121Z","closed_at":"2026-01-02T08:21:08.872384121Z","close_reason":"Closed","comments":[{"id":2858,"issue_id":"lettatoolsselector-a4g4g","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T08:21:08Z"}]}
{"id":"lettatoolsselector-a4juu","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:03:25.608107659Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:26.009360791Z","closed_at":"2026-01-02T20:03:26.009360791Z","close_reason":"Closed"}
{"id":"lettatoolsselector-a4lsk","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:00:30.899317687Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:00:32.62949047Z","closed_at":"2026-01-02T17:00:32.62949047Z","close_reason":"Closed","comments":[{"id":3679,"issue_id":"lettatoolsselector-a4lsk","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T17:00:32Z"}]}
{"id":"lettatoolsselector-a4x2i","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:19.613101934Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:20.122556365Z","closed_at":"2026-01-02T09:40:20.122556365Z","close_reason":"Closed","comments":[{"id":2992,"issue_id":"lettatoolsselector-a4x2i","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T09:40:19Z"}]}
{"id":"lettatoolsselector-a55e","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:26.560781599Z","updated_at":"2025-12-29T21:33:43.149164714Z","closed_at":"2025-12-29T21:33:43.149164714Z","close_reason":"Duplicate","comments":[{"id":494,"issue_id":"lettatoolsselector-a55e","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:26:26Z"}]}
{"id":"lettatoolsselector-a5wy9","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:21:06.726149793Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:21:07.335888263Z","closed_at":"2026-01-02T19:21:07.335888263Z","close_reason":"Closed","comments":[{"id":3938,"issue_id":"lettatoolsselector-a5wy9","author":"root","text":"Synced from Huly: LTSEL-22","created_at":"2026-01-02T19:21:07Z"}]}
{"id":"lettatoolsselector-a5xn3","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:26.612643118Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:27.247097361Z","closed_at":"2026-01-02T19:20:27.247097361Z","close_reason":"Closed","comments":[{"id":3929,"issue_id":"lettatoolsselector-a5xn3","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T19:20:27Z"}]}
{"id":"lettatoolsselector-a65wc","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:41:14.798547007Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:15.258069165Z","closed_at":"2026-01-02T05:41:15.258069165Z","close_reason":"Closed","comments":[{"id":2489,"issue_id":"lettatoolsselector-a65wc","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T05:41:15Z"}]}
{"id":"lettatoolsselector-a6c","title":"[Refactor] Add search_tools callback to tool_manager","description":"## Summary\nAdd `search_tools` as a configurable callback in `tool_manager.py` to support `_perform_tool_pruning` extraction.\n\n## Problem\n`_perform_tool_pruning` calls `search_tools()` which is imported from `weaviate_tool_search_with_reranking.py`. We can't import this directly in tool_manager without creating circular dependencies.\n\n## Solution\nAdd search function as a callback in `tool_manager.configure()`:\n\n```python\ndef configure(\n    http_session=None,\n    letta_url=None,\n    headers=None,\n    use_letta_sdk=False,\n    get_letta_sdk_client_func=None,\n    search_tools_func=None,  # NEW: callback for search\n    tool_config=None         # NEW: ToolLimitConfig\n):\n    ...\n```\n\n## Implementation\n1. Add `search_tools_func` parameter to `configure()`\n2. Store as module-level `_search_tools`\n3. Update api_server.py startup to pass `search_tools` function\n4. Add unit tests with mock search function\n\n## Acceptance Criteria\n- [ ] configure() accepts search_tools_func\n- [ ] api_server.py passes search_tools on startup\n- [ ] Tests pass with mock search\n\n## Parent Issue\nlettatoolsselector-nav","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:52:01.134499169Z","updated_at":"2025-12-29T19:03:28.781267636Z","closed_at":"2025-12-29T19:03:28.781267636Z","close_reason":"Already implemented: search_tools_func callback in tool_manager.configure()"}
{"id":"lettatoolsselector-a6hoj","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:30:39.438693715Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:30:40.033775535Z","closed_at":"2026-01-02T18:30:40.033775535Z","close_reason":"Closed","comments":[{"id":3868,"issue_id":"lettatoolsselector-a6hoj","author":"root","text":"Synced from Huly: LTSEL-49","created_at":"2026-01-02T18:30:39Z"}]}
{"id":"lettatoolsselector-a6jbb","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:54.027541188Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:54.521449408Z","closed_at":"2026-01-02T06:36:54.521449408Z","close_reason":"Closed","comments":[{"id":2618,"issue_id":"lettatoolsselector-a6jbb","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T06:36:54Z"}]}
{"id":"lettatoolsselector-a6py3","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:59:21.536312407Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:22.104731625Z","closed_at":"2026-01-02T10:59:22.104731625Z","close_reason":"Closed","comments":[{"id":3141,"issue_id":"lettatoolsselector-a6py3","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T10:59:21Z"}]}
{"id":"lettatoolsselector-a75c","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:48.354998635Z","updated_at":"2025-12-29T21:33:43.264942286Z","closed_at":"2025-12-29T21:33:43.264942286Z","close_reason":"Duplicate","comments":[{"id":486,"issue_id":"lettatoolsselector-a75c","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T20:25:48Z"}]}
{"id":"lettatoolsselector-a865a","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:19:35.173737712Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:35.660002648Z","closed_at":"2026-01-02T06:19:35.660002648Z","close_reason":"Closed","comments":[{"id":2596,"issue_id":"lettatoolsselector-a865a","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T06:19:35Z"}]}
{"id":"lettatoolsselector-a89jj","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:35:47.489664659Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:35:48.130401837Z","closed_at":"2026-01-02T11:35:48.130401837Z","close_reason":"Closed","comments":[{"id":3233,"issue_id":"lettatoolsselector-a89jj","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T11:35:47Z"}]}
{"id":"lettatoolsselector-a8bg","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:05.26440744Z","updated_at":"2025-12-29T21:33:29.912235789Z","closed_at":"2025-12-29T21:33:29.912235789Z","close_reason":"Duplicate","comments":[{"id":374,"issue_id":"lettatoolsselector-a8bg","author":"root","text":"Synced from Beads: lettatoolsselector-vn0\n\n---\nHuly Issue: LTSEL-192","created_at":"2025-12-29T20:16:05Z"}]}
{"id":"lettatoolsselector-a8bm3","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:04.861176524Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:05.392564408Z","closed_at":"2026-01-02T10:36:05.392564408Z","close_reason":"Closed","comments":[{"id":3080,"issue_id":"lettatoolsselector-a8bm3","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T10:36:05Z"}]}
{"id":"lettatoolsselector-a8h7y","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:44:07.682501242Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:44:08.244029721Z","closed_at":"2026-01-02T07:44:08.244029721Z","close_reason":"Closed","comments":[{"id":2790,"issue_id":"lettatoolsselector-a8h7y","author":"root","text":"Synced from Huly: LTSEL-225","created_at":"2026-01-02T07:44:08Z"}]}
{"id":"lettatoolsselector-a91qm","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:51.952798648Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:52.579297328Z","closed_at":"2026-01-02T19:38:52.579297328Z","close_reason":"Closed","comments":[{"id":3979,"issue_id":"lettatoolsselector-a91qm","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T19:38:52Z"}]}
{"id":"lettatoolsselector-a92v","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:21:11.282719513Z","updated_at":"2025-12-30T04:12:16.146128478Z","comments":[{"id":1010,"issue_id":"lettatoolsselector-a92v","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-85","created_at":"2025-12-29T21:21:11Z"}]}
{"id":"lettatoolsselector-a9n4n","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:51:26.88607136Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:51:27.479470084Z","closed_at":"2026-01-02T15:51:27.479470084Z","close_reason":"Closed","comments":[{"id":3623,"issue_id":"lettatoolsselector-a9n4n","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T15:51:27Z"}]}
{"id":"lettatoolsselector-aa9gx","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:03:02.242871455Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:02.586461333Z","closed_at":"2026-01-02T07:03:02.586461333Z","close_reason":"Closed"}
{"id":"lettatoolsselector-aact1","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:41:41.053607011Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:41.455772193Z","closed_at":"2026-01-02T20:41:41.455772193Z","close_reason":"Closed"}
{"id":"lettatoolsselector-aaghl","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:28.440539532Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:28.440539532Z","comments":[{"id":2186,"issue_id":"lettatoolsselector-aaghl","author":"root","text":"Synced from Beads: lettatoolsselector-te8e\n\n---\nHuly Issue: LTSEL-710","created_at":"2026-01-02T03:43:28Z"}]}
{"id":"lettatoolsselector-abf2f","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:56.197234355Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:56.774714312Z","closed_at":"2026-01-02T06:17:56.774714312Z","close_reason":"Closed","comments":[{"id":2566,"issue_id":"lettatoolsselector-abf2f","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T06:17:56Z"}]}
{"id":"lettatoolsselector-absfw","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:14.069071521Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:14.757509568Z","closed_at":"2026-01-02T12:54:14.757509568Z","close_reason":"Closed","comments":[{"id":3309,"issue_id":"lettatoolsselector-absfw","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T12:54:14Z"}]}
{"id":"lettatoolsselector-abumz","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:01:27.779381613Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:01:28.307413894Z","closed_at":"2026-01-02T21:01:28.307413894Z","close_reason":"Closed"}
{"id":"lettatoolsselector-adb4p","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:38.993947916Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:38.993947916Z","comments":[{"id":1791,"issue_id":"lettatoolsselector-adb4p","author":"root","text":"Synced from Beads: lettatoolsselector-sfmy\n\n---\nHuly Issue: LTSEL-585","created_at":"2026-01-02T03:27:39Z"}]}
{"id":"lettatoolsselector-adeo5","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:45:35.691690174Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:45:36.235203484Z","closed_at":"2026-01-02T15:45:36.235203484Z","close_reason":"Closed","comments":[{"id":3587,"issue_id":"lettatoolsselector-adeo5","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T15:45:36Z"}]}
{"id":"lettatoolsselector-adm0c","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:26.995798944Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:27.44551565Z","closed_at":"2026-01-02T06:00:27.44551565Z","close_reason":"Closed","comments":[{"id":2541,"issue_id":"lettatoolsselector-adm0c","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T06:00:27Z"}]}
{"id":"lettatoolsselector-af9hm","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:52:18.125233036Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:52:18.761954484Z","closed_at":"2026-01-02T17:52:18.761954484Z","close_reason":"Closed","comments":[{"id":3799,"issue_id":"lettatoolsselector-af9hm","author":"root","text":"Synced from Huly: LTSEL-220","created_at":"2026-01-02T17:52:18Z"}]}
{"id":"lettatoolsselector-afxp2","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:03:18.549613097Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:19.133661109Z","closed_at":"2026-01-02T08:03:19.133661109Z","close_reason":"Closed","comments":[{"id":2822,"issue_id":"lettatoolsselector-afxp2","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T08:03:18Z"}]}
{"id":"lettatoolsselector-afy4y","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:00:03.993073378Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:00:04.592680908Z","closed_at":"2026-01-02T19:00:04.592680908Z","close_reason":"Closed","comments":[{"id":3920,"issue_id":"lettatoolsselector-afy4y","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T19:00:04Z"}]}
{"id":"lettatoolsselector-aga3t","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:21:13.317699235Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:13.87552614Z","closed_at":"2026-01-02T15:21:13.87552614Z","close_reason":"Closed","comments":[{"id":3554,"issue_id":"lettatoolsselector-aga3t","author":"root","text":"Synced from Huly: LTSEL-218","created_at":"2026-01-02T15:21:13Z"}]}
{"id":"lettatoolsselector-agd0","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T01:08:41.834380472Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:42.04109493Z","closed_at":"2026-01-02T01:08:42.04109493Z","close_reason":"Closed"}
{"id":"lettatoolsselector-aghxz","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:09:57.299542616Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:57.842592611Z","closed_at":"2026-01-02T14:09:57.842592611Z","close_reason":"Closed","comments":[{"id":3430,"issue_id":"lettatoolsselector-aghxz","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T14:09:57Z"}]}
{"id":"lettatoolsselector-aglx","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:32.845900585Z","updated_at":"2025-12-29T21:33:29.721328215Z","closed_at":"2025-12-29T21:33:29.721328215Z","close_reason":"Duplicate","comments":[{"id":381,"issue_id":"lettatoolsselector-aglx","author":"root","text":"Synced from Beads: lettatoolsselector-12y\n\n---\nHuly Issue: LTSEL-201","created_at":"2025-12-29T20:16:33Z"}]}
{"id":"lettatoolsselector-agum5","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:27.947380157Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:28.41507778Z","closed_at":"2026-01-02T06:37:28.41507778Z","close_reason":"Closed","comments":[{"id":2640,"issue_id":"lettatoolsselector-agum5","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T06:37:28Z"}]}
{"id":"lettatoolsselector-ahfr","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:17.784531086Z","updated_at":"2025-12-29T21:33:24.98749599Z","closed_at":"2025-12-29T21:33:24.98749599Z","close_reason":"Duplicate","comments":[{"id":600,"issue_id":"lettatoolsselector-ahfr","author":"root","text":"Synced from Beads: lettatoolsselector-53h\n\n---\nHuly Issue: LTSEL-156","created_at":"2025-12-29T20:35:18Z"}]}
{"id":"lettatoolsselector-ahpom","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:45.316806967Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:45.848045345Z","closed_at":"2026-01-02T14:05:45.848045345Z","close_reason":"Closed","comments":[{"id":3403,"issue_id":"lettatoolsselector-ahpom","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T14:05:45Z"}]}
{"id":"lettatoolsselector-ahtbf","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:53:38.472751664Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:53:39.034403163Z","closed_at":"2026-01-02T15:53:39.034403163Z","close_reason":"Closed","comments":[{"id":3633,"issue_id":"lettatoolsselector-ahtbf","author":"root","text":"Synced from Huly: LTSEL-225","created_at":"2026-01-02T15:53:38Z"}]}
{"id":"lettatoolsselector-ahtnc","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T05:41:10.550952412Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:11.026291748Z","closed_at":"2026-01-02T05:41:11.026291748Z","close_reason":"Closed","comments":[{"id":2488,"issue_id":"lettatoolsselector-ahtnc","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T05:41:10Z"}]}
{"id":"lettatoolsselector-aiiql","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:43.258074112Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:43.826880354Z","closed_at":"2026-01-02T07:23:43.826880354Z","close_reason":"Closed","comments":[{"id":2699,"issue_id":"lettatoolsselector-aiiql","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T07:23:43Z"}]}
{"id":"lettatoolsselector-ail6p","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:31.608667094Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:31.608667094Z","comments":[{"id":1912,"issue_id":"lettatoolsselector-ail6p","author":"root","text":"Synced from Beads: lettatoolsselector-i8pn\n\n---\nHuly Issue: LTSEL-421","created_at":"2026-01-02T03:28:31Z"}]}
{"id":"lettatoolsselector-aimgl","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:37:02.231561465Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:02.540480057Z","closed_at":"2026-01-02T06:37:02.540480057Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ainj","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:08.105757392Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:08.542053342Z","closed_at":"2026-01-02T02:35:08.542053342Z","close_reason":"Closed","comments":[{"id":1333,"issue_id":"lettatoolsselector-ainj","author":"root","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2026-01-02T02:35:08Z"}]}
{"id":"lettatoolsselector-aixc3","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:50:04.391168243Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:50:05.027354043Z","closed_at":"2026-01-02T15:50:05.027354043Z","close_reason":"Closed","comments":[{"id":3617,"issue_id":"lettatoolsselector-aixc3","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T15:50:04Z"}]}
{"id":"lettatoolsselector-aj14h","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:17:06.995837745Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:17:07.581635068Z","closed_at":"2026-01-02T16:17:07.581635068Z","close_reason":"Closed","comments":[{"id":3666,"issue_id":"lettatoolsselector-aj14h","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T16:17:07Z"}]}
{"id":"lettatoolsselector-ajesh","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:02:43.679384749Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:44.136249629Z","closed_at":"2026-01-02T12:02:44.136249629Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ajgqe","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:34:07.04395361Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:34:07.641448905Z","closed_at":"2026-01-02T17:34:07.641448905Z","close_reason":"Closed","comments":[{"id":3775,"issue_id":"lettatoolsselector-ajgqe","author":"root","text":"Synced from Huly: LTSEL-235","created_at":"2026-01-02T17:34:07Z"}]}
{"id":"lettatoolsselector-akgqv","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:51.302680601Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:51.873047389Z","closed_at":"2026-01-02T05:40:51.873047389Z","close_reason":"Closed","comments":[{"id":2468,"issue_id":"lettatoolsselector-akgqv","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T05:40:51Z"}]}
{"id":"lettatoolsselector-ala16","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:04:54.771150791Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:04:55.327352018Z","closed_at":"2026-01-02T14:04:55.327352018Z","close_reason":"Closed","comments":[{"id":3391,"issue_id":"lettatoolsselector-ala16","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T14:04:55Z"}]}
{"id":"lettatoolsselector-alc7i","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:06:15.396001289Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:06:15.93974405Z","closed_at":"2026-01-02T14:06:15.93974405Z","close_reason":"Closed","comments":[{"id":3408,"issue_id":"lettatoolsselector-alc7i","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T14:06:15Z"}]}
{"id":"lettatoolsselector-am2d0","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:50.094949079Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:50.733941609Z","closed_at":"2026-01-02T07:23:50.733941609Z","close_reason":"Closed","comments":[{"id":2706,"issue_id":"lettatoolsselector-am2d0","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T07:23:50Z"}]}
{"id":"lettatoolsselector-amgck","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:03:08.647719527Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:09.130712515Z","closed_at":"2026-01-02T07:03:09.130712515Z","close_reason":"Closed","comments":[{"id":2682,"issue_id":"lettatoolsselector-amgck","author":"root","text":"Synced from Huly: LTSEL-227","created_at":"2026-01-02T07:03:08Z"}]}
{"id":"lettatoolsselector-amjm4","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:48:36.23115984Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:48:38.030818253Z","closed_at":"2026-01-02T18:48:38.030818253Z","close_reason":"Closed","comments":[{"id":3877,"issue_id":"lettatoolsselector-amjm4","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T18:48:37Z"}]}
{"id":"lettatoolsselector-an08d","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:22:29.120005424Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:29.656942205Z","closed_at":"2026-01-02T09:22:29.656942205Z","close_reason":"Closed","comments":[{"id":2967,"issue_id":"lettatoolsselector-an08d","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T09:22:29Z"}]}
{"id":"lettatoolsselector-ancby","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:09.579684258Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:10.198709961Z","closed_at":"2026-01-02T04:20:10.198709961Z","close_reason":"Closed","comments":[{"id":2363,"issue_id":"lettatoolsselector-ancby","author":"root","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2026-01-02T04:20:09Z"}]}
{"id":"lettatoolsselector-andjq","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:48.995867163Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:49.642791577Z","closed_at":"2026-01-02T17:25:49.642791577Z","close_reason":"Closed","comments":[{"id":3736,"issue_id":"lettatoolsselector-andjq","author":"root","text":"Synced from Huly: LTSEL-41","created_at":"2026-01-02T17:25:49Z"}]}
{"id":"lettatoolsselector-anf0m","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:04:07.0771538Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:04:07.725487749Z","closed_at":"2026-01-02T08:04:07.725487749Z","close_reason":"Closed","comments":[{"id":2831,"issue_id":"lettatoolsselector-anf0m","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T08:04:07Z"}]}
{"id":"lettatoolsselector-anf7p","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:39:56.134270951Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:56.754133647Z","closed_at":"2026-01-02T19:39:56.754133647Z","close_reason":"Closed","comments":[{"id":3993,"issue_id":"lettatoolsselector-anf7p","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T19:39:56Z"}]}
{"id":"lettatoolsselector-anngq","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:49:49.033516987Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:49:49.746033476Z","closed_at":"2026-01-02T23:49:49.746033476Z","close_reason":"Closed","comments":[{"id":4390,"issue_id":"lettatoolsselector-anngq","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T23:49:49Z"}]}
{"id":"lettatoolsselector-anwcf","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:29:44.07462568Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:45.111663058Z","closed_at":"2026-01-02T18:29:45.111663058Z","close_reason":"Closed","comments":[{"id":3861,"issue_id":"lettatoolsselector-anwcf","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T18:29:44Z"}]}
{"id":"lettatoolsselector-aopkk","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:36:56.946314893Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:57.269126615Z","closed_at":"2026-01-02T06:36:57.269126615Z","close_reason":"Closed"}
{"id":"lettatoolsselector-aovwp","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:58:28.555224472Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:58:29.063904618Z","closed_at":"2026-01-02T20:58:29.063904618Z","close_reason":"Closed"}
{"id":"lettatoolsselector-apf6p","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:19:11.357683497Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:11.84367333Z","closed_at":"2026-01-02T06:19:11.84367333Z","close_reason":"Closed","comments":[{"id":2592,"issue_id":"lettatoolsselector-apf6p","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T06:19:11Z"}]}
{"id":"lettatoolsselector-apvh","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:37.452267209Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:37.794943794Z","closed_at":"2026-01-02T02:19:37.794943794Z","close_reason":"Closed","comments":[{"id":1280,"issue_id":"lettatoolsselector-apvh","author":"root","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2026-01-02T02:19:37Z"}]}
{"id":"lettatoolsselector-aquq6","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:06.376893759Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:06.850239988Z","closed_at":"2026-01-02T05:41:06.850239988Z","close_reason":"Closed","comments":[{"id":2484,"issue_id":"lettatoolsselector-aquq6","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T05:41:06Z"}]}
{"id":"lettatoolsselector-ar0bl","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:32.608188747Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:33.03576086Z","closed_at":"2026-01-02T04:39:33.03576086Z","close_reason":"Closed","comments":[{"id":2419,"issue_id":"lettatoolsselector-ar0bl","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T04:39:32Z"}]}
{"id":"lettatoolsselector-arppr","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:12:57.427580935Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:12:58.025235768Z","closed_at":"2026-01-02T11:12:58.025235768Z","close_reason":"Closed","comments":[{"id":3205,"issue_id":"lettatoolsselector-arppr","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T11:12:57Z"}]}
{"id":"lettatoolsselector-arsn2","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:19:56.690016242Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:19:57.113511708Z","closed_at":"2026-01-02T04:19:57.113511708Z","close_reason":"Closed","comments":[{"id":2346,"issue_id":"lettatoolsselector-arsn2","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T04:19:56Z"}]}
{"id":"lettatoolsselector-arwz","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:14.835624138Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:15.061524609Z","closed_at":"2026-01-02T01:25:15.061524609Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ary9c","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:14.315812188Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:14.315812188Z","comments":[{"id":2178,"issue_id":"lettatoolsselector-ary9c","author":"root","text":"Synced from Huly: LTSEL-759","created_at":"2026-01-02T03:43:14Z"}]}
{"id":"lettatoolsselector-as86r","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:56.227710918Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:56.826419281Z","closed_at":"2026-01-02T19:38:56.826419281Z","close_reason":"Closed","comments":[{"id":3981,"issue_id":"lettatoolsselector-as86r","author":"root","text":"Synced from Huly: LTSEL-33","created_at":"2026-01-02T19:38:56Z"}]}
{"id":"lettatoolsselector-asci","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:00.58402933Z","updated_at":"2025-12-30T02:06:10.08550582Z","comments":[{"id":918,"issue_id":"lettatoolsselector-asci","author":"root","text":"Synced from Beads: lettatoolsselector-0qv\n\n---\nHuly Issue: LTSEL-93","created_at":"2025-12-29T21:11:00Z"}]}
{"id":"lettatoolsselector-asgj4","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:48:48.722045584Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:49.163783457Z","closed_at":"2026-01-02T03:48:49.163783457Z","close_reason":"Closed","comments":[{"id":2340,"issue_id":"lettatoolsselector-asgj4","author":"root","text":"Synced from Huly: LTSEL-233","created_at":"2026-01-02T03:48:48Z"}]}
{"id":"lettatoolsselector-asur5","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:18:55.394598471Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:55.87643767Z","closed_at":"2026-01-02T06:18:55.87643767Z","close_reason":"Closed","comments":[{"id":2582,"issue_id":"lettatoolsselector-asur5","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T06:18:55Z"}]}
{"id":"lettatoolsselector-at4ng","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:21:28.740244202Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:29.263873422Z","closed_at":"2026-01-02T09:21:29.263873422Z","close_reason":"Closed","comments":[{"id":2949,"issue_id":"lettatoolsselector-at4ng","author":"root","text":"Synced from Huly: LTSEL-220","created_at":"2026-01-02T09:21:29Z"}]}
{"id":"lettatoolsselector-at5wo","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:17:06.624150003Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:17:07.254871873Z","closed_at":"2026-01-02T20:17:07.254871873Z","close_reason":"Closed","comments":[{"id":4077,"issue_id":"lettatoolsselector-at5wo","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T20:17:07Z"}]}
{"id":"lettatoolsselector-atbig","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:41.696287216Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:41.696287216Z","comments":[{"id":1934,"issue_id":"lettatoolsselector-atbig","author":"root","text":"Synced from Beads: lettatoolsselector-7k6n\n\n---\nHuly Issue: LTSEL-391","created_at":"2026-01-02T03:28:41Z"}]}
{"id":"lettatoolsselector-ateu8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:34.264280494Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:34.264280494Z","comments":[{"id":2239,"issue_id":"lettatoolsselector-ateu8","author":"root","text":"Synced from Beads: lettatoolsselector-wjvx\n\n---\nHuly Issue: LTSEL-546","created_at":"2026-01-02T03:44:34Z"}]}
{"id":"lettatoolsselector-aths","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:29.533869772Z","updated_at":"2025-12-29T21:33:24.622687398Z","closed_at":"2025-12-29T21:33:24.622687398Z","close_reason":"Duplicate","comments":[{"id":615,"issue_id":"lettatoolsselector-aths","author":"root","text":"Synced from Beads: lettatoolsselector-x6v\n\n---\nHuly Issue: LTSEL-168","created_at":"2025-12-29T20:36:29Z"}]}
{"id":"lettatoolsselector-atwzz","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:46.438656134Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:46.925024633Z","closed_at":"2026-01-02T07:43:46.925024633Z","close_reason":"Closed","comments":[{"id":2779,"issue_id":"lettatoolsselector-atwzz","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T07:43:46Z"}]}
{"id":"lettatoolsselector-au4n","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:37:31.195124141Z","updated_at":"2025-12-30T02:41:09.748687583Z","comments":[{"id":1076,"issue_id":"lettatoolsselector-au4n","author":"root","text":"Synced from Beads: lettatoolsselector-9fs\n\n---\nHuly Issue: LTSEL-56","created_at":"2025-12-29T21:37:31Z"}]}
{"id":"lettatoolsselector-au699","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:00:42.481762686Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:00:43.03784162Z","closed_at":"2026-01-02T17:00:43.03784162Z","close_reason":"Closed","comments":[{"id":3683,"issue_id":"lettatoolsselector-au699","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T17:00:42Z"}]}
{"id":"lettatoolsselector-au9bh","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:35:56.388432853Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:35:56.899430106Z","closed_at":"2026-01-02T10:35:56.899430106Z","close_reason":"Closed","comments":[{"id":3075,"issue_id":"lettatoolsselector-au9bh","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T10:35:56Z"}]}
{"id":"lettatoolsselector-auxpm","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:30.782798586Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:31.259227043Z","closed_at":"2026-01-02T07:02:31.259227043Z","close_reason":"Closed","comments":[{"id":2649,"issue_id":"lettatoolsselector-auxpm","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T07:02:31Z"}]}
{"id":"lettatoolsselector-avfpc","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:56:12.333654043Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:56:12.842428167Z","closed_at":"2026-01-02T09:56:12.842428167Z","close_reason":"Closed","comments":[{"id":3047,"issue_id":"lettatoolsselector-avfpc","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T09:56:12Z"}]}
{"id":"lettatoolsselector-avmzn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:57.566240027Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:57.566240027Z","comments":[{"id":1834,"issue_id":"lettatoolsselector-avmzn","author":"root","text":"Synced from Beads: lettatoolsselector-xdbc\n\n---\nHuly Issue: LTSEL-519","created_at":"2026-01-02T03:27:57Z"}]}
{"id":"lettatoolsselector-avzx0","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:16.493341761Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:17.212875211Z","closed_at":"2026-01-02T13:36:17.212875211Z","close_reason":"Closed","comments":[{"id":3356,"issue_id":"lettatoolsselector-avzx0","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T13:36:16Z"}]}
{"id":"lettatoolsselector-awizl","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:25.635080112Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:26.128992219Z","closed_at":"2026-01-02T06:00:26.128992219Z","close_reason":"Closed","comments":[{"id":2540,"issue_id":"lettatoolsselector-awizl","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T06:00:25Z"}]}
{"id":"lettatoolsselector-awl0b","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:30:57.342873674Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:30:58.004626324Z","closed_at":"2026-01-02T18:30:58.004626324Z","close_reason":"Closed","comments":[{"id":3871,"issue_id":"lettatoolsselector-awl0b","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T18:30:57Z"}]}
{"id":"lettatoolsselector-awqy1","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:36:57.546834309Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:58.035109418Z","closed_at":"2026-01-02T06:36:58.035109418Z","close_reason":"Closed","comments":[{"id":2621,"issue_id":"lettatoolsselector-awqy1","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T06:36:57Z"}]}
{"id":"lettatoolsselector-awv9j","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T19:25:14.501089269Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:25:14.964532532Z","closed_at":"2026-01-02T19:25:14.964532532Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ax2ut","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:08.078214894Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:08.078214894Z","comments":[{"id":1858,"issue_id":"lettatoolsselector-ax2ut","author":"root","text":"Synced from Beads: lettatoolsselector-2og3\n\n---\nHuly Issue: LTSEL-492","created_at":"2026-01-02T03:28:08Z"}]}
{"id":"lettatoolsselector-axa1","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:11.443922295Z","updated_at":"2025-12-29T21:33:30.384916915Z","closed_at":"2025-12-29T21:33:30.384916915Z","close_reason":"Duplicate","comments":[{"id":353,"issue_id":"lettatoolsselector-axa1","author":"root","text":"Synced from Beads: lettatoolsselector-qh2\n\n---\nHuly Issue: LTSEL-199","created_at":"2025-12-29T20:14:11Z"}]}
{"id":"lettatoolsselector-axb7","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:10.460457111Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:10.801826812Z","closed_at":"2026-01-02T02:35:10.801826812Z","close_reason":"Closed","comments":[{"id":1337,"issue_id":"lettatoolsselector-axb7","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T02:35:10Z"}]}
{"id":"lettatoolsselector-axfxs","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:44:00.470098489Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:44:00.961642847Z","closed_at":"2026-01-02T07:44:00.961642847Z","close_reason":"Closed","comments":[{"id":2786,"issue_id":"lettatoolsselector-axfxs","author":"root","text":"Synced from Huly: LTSEL-48","created_at":"2026-01-02T07:44:00Z"}]}
{"id":"lettatoolsselector-axo11","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:10.764490562Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:11.252617129Z","closed_at":"2026-01-02T06:00:11.252617129Z","close_reason":"Closed","comments":[{"id":2527,"issue_id":"lettatoolsselector-axo11","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T06:00:11Z"}]}
{"id":"lettatoolsselector-axtfe","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:21:33.438753033Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:33.969077172Z","closed_at":"2026-01-02T09:21:33.969077172Z","close_reason":"Closed","comments":[{"id":2951,"issue_id":"lettatoolsselector-axtfe","author":"root","text":"Synced from Huly: LTSEL-222","created_at":"2026-01-02T09:21:33Z"}]}
{"id":"lettatoolsselector-ay1we","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:31.146327678Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:31.671239071Z","closed_at":"2026-01-02T05:41:31.671239071Z","close_reason":"Closed","comments":[{"id":2501,"issue_id":"lettatoolsselector-ay1we","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T05:41:31Z"}]}
{"id":"lettatoolsselector-ayg03","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:31:34.830250013Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:31:35.544731835Z","closed_at":"2026-01-02T17:31:35.544731835Z","close_reason":"Closed","comments":[{"id":3771,"issue_id":"lettatoolsselector-ayg03","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T17:31:35Z"}]}
{"id":"lettatoolsselector-ayjod","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:24.147388838Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:24.147388838Z","comments":[{"id":2237,"issue_id":"lettatoolsselector-ayjod","author":"root","text":"Synced from Beads: lettatoolsselector-iivq\n\n---\nHuly Issue: LTSEL-549","created_at":"2026-01-02T03:44:24Z"}]}
{"id":"lettatoolsselector-ayq2u","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:03:14.488033617Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:14.955221462Z","closed_at":"2026-01-02T07:03:14.955221462Z","close_reason":"Closed","comments":[{"id":2688,"issue_id":"lettatoolsselector-ayq2u","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T07:03:14Z"}]}
{"id":"lettatoolsselector-az15t","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:11.595084504Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:12.342122306Z","closed_at":"2026-01-02T08:20:12.342122306Z","close_reason":"Closed","comments":[{"id":2843,"issue_id":"lettatoolsselector-az15t","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T08:20:12Z"}]}
{"id":"lettatoolsselector-azc9n","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:03:17.194846003Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:03:17.809857203Z","closed_at":"2026-01-02T17:03:17.809857203Z","close_reason":"Closed","comments":[{"id":3701,"issue_id":"lettatoolsselector-azc9n","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T17:03:17Z"}]}
{"id":"lettatoolsselector-b0blx","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:41:04.868024319Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:05.24630433Z","closed_at":"2026-01-02T09:41:05.24630433Z","close_reason":"Closed"}
{"id":"lettatoolsselector-b0kb","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:05.338037089Z","updated_at":"2025-12-29T21:33:44.411019561Z","closed_at":"2025-12-29T21:33:44.411019561Z","close_reason":"Duplicate","comments":[{"id":342,"issue_id":"lettatoolsselector-b0kb","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T20:13:05Z"}]}
{"id":"lettatoolsselector-b0m8n","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:23.433139229Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:23.433139229Z","comments":[{"id":2125,"issue_id":"lettatoolsselector-b0m8n","author":"root","text":"Synced from Beads: lettatoolsselector-ylm\n\n---\nHuly Issue: LTSEL-215","created_at":"2026-01-02T03:31:23Z"}]}
{"id":"lettatoolsselector-b1d99","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:12:02.64789492Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:12:03.16919421Z","closed_at":"2026-01-02T11:12:03.16919421Z","close_reason":"Closed","comments":[{"id":3198,"issue_id":"lettatoolsselector-b1d99","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T11:12:02Z"}]}
{"id":"lettatoolsselector-b1t","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:08.070788495Z","updated_at":"2025-12-23T03:23:08.431030137Z","closed_at":"2025-12-23T03:23:08.431030137Z","close_reason":"Closed","comments":[{"id":32,"issue_id":"lettatoolsselector-b1t","author":"node","text":"## Problem\n\nWebhook receiver and tool selector have different ideas about what fields are required, what keep_tools means, and how limits work.\n\n## Solution\n\nDefine a formal contract (JSON schema or Pydantic model) that both sides adhere to.\n\n## Acceptance Criteria\n\n- [ ] Document payload schema: query, agent_id, keep_tools, limit, min_score, protected_tools\n- [ ] Document response schema: success, attached, detached, preserved, errors\n- [ ] Document behavior: what happens when limits are exceeded, how protected tools work\n- [ ] Version the contract (v1) to allow future evolution\n- [ ] Both repos reference the same contract documentation\n\n## Technical Notes\n\n- Consider using OpenAPI/Swagger for formal spec\n- Publish contract in shared docs location or SDK repo\n\n---\nHuly Issue: LTSEL-9","created_at":"2025-12-23T03:23:08Z"}]}
{"id":"lettatoolsselector-b1xx1","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:56:31.403112093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:56:31.795332188Z","closed_at":"2026-01-02T12:56:31.795332188Z","close_reason":"Closed"}
{"id":"lettatoolsselector-b24kl","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:03:33.323888913Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:03:33.759326359Z","closed_at":"2026-01-02T17:03:33.759326359Z","close_reason":"Closed"}
{"id":"lettatoolsselector-b2vfh","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:21:04.110615796Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:04.541111077Z","closed_at":"2026-01-02T04:21:04.541111077Z","close_reason":"Closed","comments":[{"id":2392,"issue_id":"lettatoolsselector-b2vfh","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T04:21:04Z"}]}
{"id":"lettatoolsselector-b3he8","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:03:10.568504363Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:11.041101264Z","closed_at":"2026-01-02T08:03:11.041101264Z","close_reason":"Closed"}
{"id":"lettatoolsselector-b3tq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:51.254830155Z","updated_at":"2025-12-30T01:48:53.941023373Z","comments":[{"id":959,"issue_id":"lettatoolsselector-b3tq","author":"root","text":"Synced from Beads: lettatoolsselector-0ye\n\n---\nHuly Issue: LTSEL-92","created_at":"2025-12-29T21:14:51Z"}]}
{"id":"lettatoolsselector-b448","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:23.505207761Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:23.861644177Z","closed_at":"2026-01-02T03:06:23.861644177Z","close_reason":"Closed","comments":[{"id":1542,"issue_id":"lettatoolsselector-b448","author":"root","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2026-01-02T03:06:23Z"}]}
{"id":"lettatoolsselector-b4uvm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:27.997593206Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:27.997593206Z","comments":[{"id":2130,"issue_id":"lettatoolsselector-b4uvm","author":"root","text":"Synced from Beads: lettatoolsselector-6gk\n\n---\nHuly Issue: LTSEL-210","created_at":"2026-01-02T03:31:28Z"}]}
{"id":"lettatoolsselector-b5e9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:15:20.246801383Z","updated_at":"2025-12-30T01:49:22.353274918Z","comments":[{"id":963,"issue_id":"lettatoolsselector-b5e9","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-84","created_at":"2025-12-29T21:15:20Z"}]}
{"id":"lettatoolsselector-b5fh4","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:39:18.669422103Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:19.293231051Z","closed_at":"2026-01-02T20:39:19.293231051Z","close_reason":"Closed","comments":[{"id":4126,"issue_id":"lettatoolsselector-b5fh4","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T20:39:19Z"}]}
{"id":"lettatoolsselector-b5nc","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:18.640708159Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:19.011311819Z","closed_at":"2026-01-02T01:25:19.011311819Z","close_reason":"Closed","comments":[{"id":1257,"issue_id":"lettatoolsselector-b5nc","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T01:25:18Z"}]}
{"id":"lettatoolsselector-b60vr","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:29:36.079894667Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:36.71123828Z","closed_at":"2026-01-02T18:29:36.71123828Z","close_reason":"Closed","comments":[{"id":3860,"issue_id":"lettatoolsselector-b60vr","author":"root","text":"Synced from Huly: LTSEL-240","created_at":"2026-01-02T18:29:36Z"}]}
{"id":"lettatoolsselector-b6aql","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:04.299308242Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:04.299308242Z","comments":[{"id":1983,"issue_id":"lettatoolsselector-b6aql","author":"root","text":"Synced from Beads: lettatoolsselector-uxfy\n\n---\nHuly Issue: LTSEL-333","created_at":"2026-01-02T03:29:04Z"}]}
{"id":"lettatoolsselector-b6d","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:08:17.495447541Z","updated_at":"2025-12-29T21:33:44.712980561Z","closed_at":"2025-12-29T21:33:44.712980561Z","close_reason":"Duplicate","comments":[{"id":296,"issue_id":"lettatoolsselector-b6d","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T20:08:17Z"}]}
{"id":"lettatoolsselector-b6nhp","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:03:12.615834981Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:13.084412835Z","closed_at":"2026-01-02T07:03:13.084412835Z","close_reason":"Closed","comments":[{"id":2686,"issue_id":"lettatoolsselector-b6nhp","author":"root","text":"Synced from Huly: LTSEL-48","created_at":"2026-01-02T07:03:12Z"}]}
{"id":"lettatoolsselector-b6y5q","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:01.341094822Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:02.696276799Z","closed_at":"2026-01-02T08:20:02.696276799Z","close_reason":"Closed","comments":[{"id":2840,"issue_id":"lettatoolsselector-b6y5q","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T08:20:02Z"}]}
{"id":"lettatoolsselector-b7bv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:03:07.642720763Z","updated_at":"2025-12-30T04:14:06.581341924Z","comments":[{"id":836,"issue_id":"lettatoolsselector-b7bv","author":"root","text":"Synced from Beads: lettatoolsselector-jnc\n\n---\nHuly Issue: LTSEL-105","created_at":"2025-12-29T21:03:08Z"}]}
{"id":"lettatoolsselector-b8ekj","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:11:56.485013633Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:57.014049014Z","closed_at":"2026-01-02T11:11:57.014049014Z","close_reason":"Closed","comments":[{"id":3195,"issue_id":"lettatoolsselector-b8ekj","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T11:11:56Z"}]}
{"id":"lettatoolsselector-b8kij","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:49:41.259729142Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:49:41.83043013Z","closed_at":"2026-01-02T15:49:41.83043013Z","close_reason":"Closed","comments":[{"id":3611,"issue_id":"lettatoolsselector-b8kij","author":"root","text":"Synced from Huly: LTSEL-234","created_at":"2026-01-02T15:49:41Z"}]}
{"id":"lettatoolsselector-b8l","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:11.316159731Z","updated_at":"2025-12-23T03:23:11.516214876Z","closed_at":"2025-12-23T03:23:11.516214876Z","close_reason":"Closed"}
{"id":"lettatoolsselector-b8nju","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:09.167396124Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:09.79149427Z","closed_at":"2026-01-02T12:54:09.79149427Z","close_reason":"Closed","comments":[{"id":3306,"issue_id":"lettatoolsselector-b8nju","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T12:54:09Z"}]}
{"id":"lettatoolsselector-b8p2g","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:01.947341763Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:02.475787599Z","closed_at":"2026-01-02T10:36:02.475787599Z","close_reason":"Closed","comments":[{"id":3078,"issue_id":"lettatoolsselector-b8p2g","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T10:36:02Z"}]}
{"id":"lettatoolsselector-b8pup","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:31:28.494218201Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:31:29.099826987Z","closed_at":"2026-01-02T17:31:29.099826987Z","close_reason":"Closed","comments":[{"id":3770,"issue_id":"lettatoolsselector-b8pup","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T17:31:28Z"}]}
{"id":"lettatoolsselector-b8zy2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:09.736085918Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:09.736085918Z","comments":[{"id":1862,"issue_id":"lettatoolsselector-b8zy2","author":"root","text":"Synced from Beads: lettatoolsselector-ypvi\n\n---\nHuly Issue: LTSEL-488","created_at":"2026-01-02T03:28:09Z"}]}
{"id":"lettatoolsselector-b92tw","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:20:07.677102378Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:20:08.301165649Z","closed_at":"2026-01-02T16:20:08.301165649Z","close_reason":"Closed","comments":[{"id":3676,"issue_id":"lettatoolsselector-b92tw","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T16:20:08Z"}]}
{"id":"lettatoolsselector-b99ct","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:01:31.859069382Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:01:32.325757894Z","closed_at":"2026-01-02T21:01:32.325757894Z","close_reason":"Closed"}
{"id":"lettatoolsselector-b9a8t","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:18.388981088Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:18.388981088Z","comments":[{"id":2232,"issue_id":"lettatoolsselector-b9a8t","author":"root","text":"Synced from Beads: lettatoolsselector-nrvq\n\n---\nHuly Issue: LTSEL-562","created_at":"2026-01-02T03:44:18Z"}]}
{"id":"lettatoolsselector-b9n4","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:10.088934526Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:10.432926311Z","closed_at":"2026-01-02T01:25:10.432926311Z","close_reason":"Closed","comments":[{"id":1247,"issue_id":"lettatoolsselector-b9n4","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T01:25:10Z"}]}
{"id":"lettatoolsselector-ba4d5","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:04:04.011272073Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:04:04.572743729Z","closed_at":"2026-01-02T15:04:04.572743729Z","close_reason":"Closed","comments":[{"id":3528,"issue_id":"lettatoolsselector-ba4d5","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T15:04:04Z"}]}
{"id":"lettatoolsselector-bat9i","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:21:00.095612202Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:00.686732221Z","closed_at":"2026-01-02T15:21:00.686732221Z","close_reason":"Closed","comments":[{"id":3549,"issue_id":"lettatoolsselector-bat9i","author":"root","text":"Synced from Huly: LTSEL-22","created_at":"2026-01-02T15:21:00Z"}]}
{"id":"lettatoolsselector-bb8yw","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:46.520681035Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:46.751563104Z","closed_at":"2026-01-02T03:06:46.751563104Z","close_reason":"Closed"}
{"id":"lettatoolsselector-bbbc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:29.225693134Z","updated_at":"2025-12-29T21:33:43.646687052Z","closed_at":"2025-12-29T21:33:43.646687052Z","close_reason":"Duplicate","comments":[{"id":445,"issue_id":"lettatoolsselector-bbbc","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T20:22:29Z"}]}
{"id":"lettatoolsselector-bc3b","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:15.583140389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:15.915797128Z","closed_at":"2026-01-02T01:08:15.915797128Z","close_reason":"Closed","comments":[{"id":1163,"issue_id":"lettatoolsselector-bc3b","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T01:08:15Z"}]}
{"id":"lettatoolsselector-bc98l","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:03.883101033Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:03.883101033Z","comments":[{"id":1982,"issue_id":"lettatoolsselector-bc98l","author":"root","text":"Synced from Beads: lettatoolsselector-re1i\n\n---\nHuly Issue: LTSEL-334","created_at":"2026-01-02T03:29:04Z"}]}
{"id":"lettatoolsselector-bcyi1","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:28.477733142Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:29.094972214Z","closed_at":"2026-01-02T19:38:29.094972214Z","close_reason":"Closed","comments":[{"id":3977,"issue_id":"lettatoolsselector-bcyi1","author":"root","text":"Synced from Huly: LTSEL-40","created_at":"2026-01-02T19:38:28Z"}]}
{"id":"lettatoolsselector-bd0it","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:02:47.156619972Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:47.550627636Z","closed_at":"2026-01-02T08:02:47.550627636Z","close_reason":"Closed"}
{"id":"lettatoolsselector-bd7w","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:08:40.875322964Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:41.222377757Z","closed_at":"2026-01-02T01:08:41.222377757Z","close_reason":"Closed","comments":[{"id":1203,"issue_id":"lettatoolsselector-bd7w","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T01:08:41Z"}]}
{"id":"lettatoolsselector-bdnku","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:34.971075349Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:35.489013661Z","closed_at":"2026-01-02T07:02:35.489013661Z","close_reason":"Closed","comments":[{"id":2654,"issue_id":"lettatoolsselector-bdnku","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T07:02:35Z"}]}
{"id":"lettatoolsselector-bdwti","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:21:24.621035942Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:21:25.084740889Z","closed_at":"2026-01-02T22:21:25.084740889Z","close_reason":"Closed"}
{"id":"lettatoolsselector-be8t6","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:04.895052958Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:05.438030829Z","closed_at":"2026-01-02T06:00:05.438030829Z","close_reason":"Closed","comments":[{"id":2523,"issue_id":"lettatoolsselector-be8t6","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T06:00:05Z"}]}
{"id":"lettatoolsselector-bek4b","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:37:45.358847989Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:45.870266634Z","closed_at":"2026-01-02T10:37:45.870266634Z","close_reason":"Closed","comments":[{"id":3102,"issue_id":"lettatoolsselector-bek4b","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T10:37:45Z"}]}
{"id":"lettatoolsselector-bemrk","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:45:34.870087575Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:45:35.641989276Z","closed_at":"2026-01-02T20:45:35.641989276Z","close_reason":"Closed","comments":[{"id":4151,"issue_id":"lettatoolsselector-bemrk","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T20:45:35Z"}]}
{"id":"lettatoolsselector-bey1i","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:37.914805172Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:37.914805172Z","comments":[{"id":1926,"issue_id":"lettatoolsselector-bey1i","author":"root","text":"Synced from Beads: lettatoolsselector-zzvn\n\n---\nHuly Issue: LTSEL-402","created_at":"2026-01-02T03:28:38Z"}]}
{"id":"lettatoolsselector-bfnfl","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:23:00.62887735Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:23:01.213067405Z","closed_at":"2026-01-02T09:23:01.213067405Z","close_reason":"Closed","comments":[{"id":2979,"issue_id":"lettatoolsselector-bfnfl","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T09:23:01Z"}]}
{"id":"lettatoolsselector-bg7m5","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:07.482603017Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:08.037588008Z","closed_at":"2026-01-02T09:21:08.037588008Z","close_reason":"Closed","comments":[{"id":2940,"issue_id":"lettatoolsselector-bg7m5","author":"root","text":"Synced from Huly: LTSEL-33","created_at":"2026-01-02T09:21:07Z"}]}
{"id":"lettatoolsselector-bgiod","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T16:15:25.553851539Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:15:26.124526696Z","closed_at":"2026-01-02T16:15:26.124526696Z","close_reason":"Closed","comments":[{"id":3660,"issue_id":"lettatoolsselector-bgiod","author":"root","text":"Synced from Huly: LTSEL-249","created_at":"2026-01-02T16:15:25Z"}]}
{"id":"lettatoolsselector-bgwvg","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:49.490104934Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:50.032674812Z","closed_at":"2026-01-02T15:20:50.032674812Z","close_reason":"Closed","comments":[{"id":3544,"issue_id":"lettatoolsselector-bgwvg","author":"root","text":"Synced from Huly: LTSEL-37","created_at":"2026-01-02T15:20:49Z"}]}
{"id":"lettatoolsselector-bgz8a","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:58:09.722980909Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:10.324197197Z","closed_at":"2026-01-02T09:58:10.324197197Z","close_reason":"Closed","comments":[{"id":3058,"issue_id":"lettatoolsselector-bgz8a","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T09:58:10Z"}]}
{"id":"lettatoolsselector-bhimv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:19.816365828Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:19.816365828Z","comments":[{"id":1885,"issue_id":"lettatoolsselector-bhimv","author":"root","text":"Synced from Beads: lettatoolsselector-x5vs\n\n---\nHuly Issue: LTSEL-459","created_at":"2026-01-02T03:28:20Z"}]}
{"id":"lettatoolsselector-bhm","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.661060325Z","updated_at":"2025-12-29T18:56:08.386604841Z","closed_at":"2025-12-29T18:56:08.386604841Z","close_reason":"Duplicate of closed lettatoolsselector-5xn","comments":[{"id":5,"issue_id":"lettatoolsselector-bhm","author":"node","text":"## Purpose\n\nRegression guard to ensure protected tools are never removed during pruning.\n\n## Test Scenario\n\n1. Create test agent with MAX_TOTAL_TOOLS tools including find_agents\n2. Trigger attachment that would require pruning\n3. Assert: find_agents is still attached after operation\n4. Repeat for each protected tool in PROTECTED_TOOLS list\n\n## Acceptance Criteria\n\n- [ ] Test runs in CI on every PR\n- [ ] Covers all configured protected tools\n- [ ] Fails if any protected tool is detached\n- [ ] Logs which tools were pruned vs preserved\n\n## Technical Notes\n\n- Parameterize test over PROTECTED_TOOLS list\n- Use pytest-parametrize for clean test output\n- Tag as \n\n---\nHuly Issue: LTSEL-20","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-bhrqm","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:58:42.370912978Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:58:42.901669189Z","closed_at":"2026-01-02T11:58:42.901669189Z","close_reason":"Closed","comments":[{"id":3252,"issue_id":"lettatoolsselector-bhrqm","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T11:58:42Z"}]}
{"id":"lettatoolsselector-bi279","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:00:28.560240281Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:00:29.196685462Z","closed_at":"2026-01-02T20:00:29.196685462Z","close_reason":"Closed","comments":[{"id":4039,"issue_id":"lettatoolsselector-bi279","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T20:00:28Z"}]}
{"id":"lettatoolsselector-bif2t","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:02.08033915Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:02.627160578Z","closed_at":"2026-01-02T07:23:02.627160578Z","close_reason":"Closed","comments":[{"id":2692,"issue_id":"lettatoolsselector-bif2t","author":"root","text":"Synced from Huly: LTSEL-51","created_at":"2026-01-02T07:23:02Z"}]}
{"id":"lettatoolsselector-biho1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:58.804133595Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:58.804133595Z","comments":[{"id":1837,"issue_id":"lettatoolsselector-biho1","author":"root","text":"Synced from Beads: lettatoolsselector-62we\n\n---\nHuly Issue: LTSEL-516","created_at":"2026-01-02T03:27:59Z"}]}
{"id":"lettatoolsselector-bj4rr","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:40.08101947Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:40.562808211Z","closed_at":"2026-01-02T07:02:40.562808211Z","close_reason":"Closed","comments":[{"id":2660,"issue_id":"lettatoolsselector-bj4rr","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T07:02:40Z"}]}
{"id":"lettatoolsselector-bjda7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:08.932805373Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:08.932805373Z","comments":[{"id":1860,"issue_id":"lettatoolsselector-bjda7","author":"root","text":"Synced from Beads: lettatoolsselector-br0s\n\n---\nHuly Issue: LTSEL-490","created_at":"2026-01-02T03:28:09Z"}]}
{"id":"lettatoolsselector-bjel7","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:02.611542417Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:03.031398935Z","closed_at":"2026-01-02T04:39:03.031398935Z","close_reason":"Closed","comments":[{"id":2403,"issue_id":"lettatoolsselector-bjel7","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T04:39:02Z"}]}
{"id":"lettatoolsselector-bjt39","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:09:58.317642828Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:58.6881511Z","closed_at":"2026-01-02T14:09:58.6881511Z","close_reason":"Closed"}
{"id":"lettatoolsselector-bjw54","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:54:45.400249746Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:54:45.856606718Z","closed_at":"2026-01-02T17:54:45.856606718Z","close_reason":"Closed"}
{"id":"lettatoolsselector-bk9da","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:30.80219164Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:31.729610884Z","closed_at":"2026-01-02T21:48:31.729610884Z","close_reason":"Closed","comments":[{"id":4262,"issue_id":"lettatoolsselector-bk9da","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T21:48:31Z"}]}
{"id":"lettatoolsselector-bkpx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:04:30.351671137Z","updated_at":"2025-12-30T04:11:55.271892019Z","comments":[{"id":853,"issue_id":"lettatoolsselector-bkpx","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-101","created_at":"2025-12-29T21:04:30Z"}]}
{"id":"lettatoolsselector-bksa3","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:15:46.542703647Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:15:46.926341294Z","closed_at":"2026-01-02T16:15:46.926341294Z","close_reason":"Closed"}
{"id":"lettatoolsselector-blie5","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:56.847150995Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:57.478058519Z","closed_at":"2026-01-02T22:39:57.478058519Z","close_reason":"Closed","comments":[{"id":4351,"issue_id":"lettatoolsselector-blie5","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T22:39:57Z"}]}
{"id":"lettatoolsselector-bljj2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:33.149552556Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:33.149552556Z","comments":[{"id":2043,"issue_id":"lettatoolsselector-bljj2","author":"root","text":"Synced from Beads: lettatoolsselector-j9ap\n\n---\nHuly Issue: LTSEL-272","created_at":"2026-01-02T03:29:33Z"}]}
{"id":"lettatoolsselector-blzkk","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:02:23.298439837Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:23.918670005Z","closed_at":"2026-01-02T12:02:23.918670005Z","close_reason":"Closed","comments":[{"id":3278,"issue_id":"lettatoolsselector-blzkk","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T12:02:23Z"}]}
{"id":"lettatoolsselector-bmp4","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:18:58.370642592Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:18:58.784629027Z","closed_at":"2026-01-02T02:18:58.784629027Z","close_reason":"Closed","comments":[{"id":1263,"issue_id":"lettatoolsselector-bmp4","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T02:18:58Z"}]}
{"id":"lettatoolsselector-bmssu","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:55:30.70080341Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:55:31.139794027Z","closed_at":"2026-01-02T17:55:31.139794027Z","close_reason":"Closed"}
{"id":"lettatoolsselector-bnb0w","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:05:09.037031978Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:05:09.428320293Z","closed_at":"2026-01-02T20:05:09.428320293Z","close_reason":"Closed"}
{"id":"lettatoolsselector-bnoi","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:04.72168344Z","updated_at":"2025-12-29T21:33:26.582990779Z","closed_at":"2025-12-29T21:33:26.582990779Z","close_reason":"Duplicate","comments":[{"id":521,"issue_id":"lettatoolsselector-bnoi","author":"root","text":"Synced from Beads: lettatoolsselector-au5\n\n---\nHuly Issue: LTSEL-178","created_at":"2025-12-29T20:28:05Z"}]}
{"id":"lettatoolsselector-bnyrk","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:20:58.457713023Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:21:00.484806902Z","closed_at":"2026-01-02T22:21:00.484806902Z","close_reason":"Closed","comments":[{"id":4317,"issue_id":"lettatoolsselector-bnyrk","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T22:21:00Z"}]}
{"id":"lettatoolsselector-bot1v","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:03:58.842242478Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:59.428245985Z","closed_at":"2026-01-02T08:03:59.428245985Z","close_reason":"Closed","comments":[{"id":2828,"issue_id":"lettatoolsselector-bot1v","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T08:03:59Z"}]}
{"id":"lettatoolsselector-bp72","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:37.429319815Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:37.827588424Z","closed_at":"2026-01-02T02:20:37.827588424Z","close_reason":"Closed","comments":[{"id":1308,"issue_id":"lettatoolsselector-bp72","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T02:20:37Z"}]}
{"id":"lettatoolsselector-bp8ao","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:23:13.368029832Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:13.996478739Z","closed_at":"2026-01-02T15:23:13.996478739Z","close_reason":"Closed","comments":[{"id":3565,"issue_id":"lettatoolsselector-bp8ao","author":"root","text":"Synced from Huly: LTSEL-242","created_at":"2026-01-02T15:23:13Z"}]}
{"id":"lettatoolsselector-bpfbt","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:47:29.122171746Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:47:29.60734951Z","closed_at":"2026-01-02T15:47:29.60734951Z","close_reason":"Closed"}
{"id":"lettatoolsselector-bpocw","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:19:50.184713582Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:19:52.465577761Z","closed_at":"2026-01-02T08:19:52.465577761Z","close_reason":"Closed","comments":[{"id":2836,"issue_id":"lettatoolsselector-bpocw","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T08:19:52Z"}]}
{"id":"lettatoolsselector-bpvuo","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:59.742641103Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:00.962766537Z","closed_at":"2026-01-02T07:03:00.962766537Z","close_reason":"Closed","comments":[{"id":2675,"issue_id":"lettatoolsselector-bpvuo","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T07:03:00Z"}]}
{"id":"lettatoolsselector-bqkqv","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:57:01.76501698Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:02.160505174Z","closed_at":"2026-01-02T08:57:02.160505174Z","close_reason":"Closed"}
{"id":"lettatoolsselector-br19w","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:21:46.361263092Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:21:46.950003969Z","closed_at":"2026-01-02T19:21:46.950003969Z","close_reason":"Closed","comments":[{"id":3943,"issue_id":"lettatoolsselector-br19w","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T19:21:46Z"}]}
{"id":"lettatoolsselector-brg61","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:04.076878033Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:04.076878033Z","comments":[{"id":2123,"issue_id":"lettatoolsselector-brg61","author":"root","text":"Synced from Beads: lettatoolsselector-3cf\n\n---\nHuly Issue: LTSEL-106","created_at":"2026-01-02T03:31:04Z"}]}
{"id":"lettatoolsselector-brrmt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:36.306624836Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:36.306624836Z","comments":[{"id":2241,"issue_id":"lettatoolsselector-brrmt","author":"root","text":"Synced from Beads: lettatoolsselector-3vgi\n\n---\nHuly Issue: LTSEL-542","created_at":"2026-01-02T03:44:36Z"}]}
{"id":"lettatoolsselector-brww9","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:44.119453276Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:44.586965257Z","closed_at":"2026-01-02T03:29:44.586965257Z","close_reason":"Closed","comments":[{"id":2064,"issue_id":"lettatoolsselector-brww9","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T03:29:44Z"}]}
{"id":"lettatoolsselector-bslst","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:02.303489175Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:02.303489175Z","comments":[{"id":1845,"issue_id":"lettatoolsselector-bslst","author":"root","text":"Synced from Beads: lettatoolsselector-637o\n\n---\nHuly Issue: LTSEL-507","created_at":"2026-01-02T03:28:02Z"}]}
{"id":"lettatoolsselector-bsqgn","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:02:47.097164241Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:47.652541712Z","closed_at":"2026-01-02T07:02:47.652541712Z","close_reason":"Closed"}
{"id":"lettatoolsselector-bssjl","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:04:11.330527049Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:04:12.043536976Z","closed_at":"2026-01-02T08:04:12.043536976Z","close_reason":"Closed","comments":[{"id":2832,"issue_id":"lettatoolsselector-bssjl","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T08:04:11Z"}]}
{"id":"lettatoolsselector-bt3m5","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:13.964040674Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:13.964040674Z","comments":[{"id":2272,"issue_id":"lettatoolsselector-bt3m5","author":"root","text":"Synced from Beads: lettatoolsselector-t4dg\n\n---\nHuly Issue: LTSEL-398","created_at":"2026-01-02T03:45:14Z"}]}
{"id":"lettatoolsselector-btdei","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:16.220306223Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:16.750957024Z","closed_at":"2026-01-02T11:59:16.750957024Z","close_reason":"Closed","comments":[{"id":3262,"issue_id":"lettatoolsselector-btdei","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T11:59:16Z"}]}
{"id":"lettatoolsselector-btpib","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:24:10.967918252Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:24:11.655113317Z","closed_at":"2026-01-02T22:24:11.655113317Z","close_reason":"Closed","comments":[{"id":4329,"issue_id":"lettatoolsselector-btpib","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T22:24:11Z"}]}
{"id":"lettatoolsselector-bu98x","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:34.183079693Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:34.676445971Z","closed_at":"2026-01-02T07:02:34.676445971Z","close_reason":"Closed","comments":[{"id":2653,"issue_id":"lettatoolsselector-bu98x","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T07:02:34Z"}]}
{"id":"lettatoolsselector-buhs","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:49.0874566Z","updated_at":"2025-12-29T21:33:43.233028329Z","closed_at":"2025-12-29T21:33:43.233028329Z","close_reason":"Duplicate","comments":[{"id":487,"issue_id":"lettatoolsselector-buhs","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T20:25:49Z"}]}
{"id":"lettatoolsselector-bv5qd","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:46.109856753Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:46.705806304Z","closed_at":"2026-01-02T07:23:46.705806304Z","close_reason":"Closed","comments":[{"id":2702,"issue_id":"lettatoolsselector-bv5qd","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T07:23:46Z"}]}
{"id":"lettatoolsselector-bvoy","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:24.645271808Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:24.997751157Z","closed_at":"2026-01-02T03:06:24.997751157Z","close_reason":"Closed","comments":[{"id":1544,"issue_id":"lettatoolsselector-bvoy","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T03:06:24Z"}]}
{"id":"lettatoolsselector-bw5i9","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:21:41.519427245Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:42.18004712Z","closed_at":"2026-01-02T20:21:42.18004712Z","close_reason":"Closed","comments":[{"id":4094,"issue_id":"lettatoolsselector-bw5i9","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T20:21:41Z"}]}
{"id":"lettatoolsselector-bwad","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:02.62622618Z","updated_at":"2025-12-29T21:33:43.552596309Z","closed_at":"2025-12-29T21:33:43.552596309Z","close_reason":"Duplicate","comments":[{"id":452,"issue_id":"lettatoolsselector-bwad","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T20:23:02Z"}]}
{"id":"lettatoolsselector-bwps","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:06:43.576687085Z","updated_at":"2025-12-30T04:14:14.642906839Z","comments":[{"id":875,"issue_id":"lettatoolsselector-bwps","author":"root","text":"Synced from Beads: lettatoolsselector-w50\n\n---\nHuly Issue: LTSEL-97","created_at":"2025-12-29T21:06:43Z"}]}
{"id":"lettatoolsselector-bx1gp","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:34.620014422Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:34.620014422Z","comments":[{"id":2283,"issue_id":"lettatoolsselector-bx1gp","author":"root","text":"Synced from Beads: lettatoolsselector-02ut\n\n---\nHuly Issue: LTSEL-341","created_at":"2026-01-02T03:45:34Z"}]}
{"id":"lettatoolsselector-bxw1u","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:19:47.147565297Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:19:47.56808098Z","closed_at":"2026-01-02T20:19:47.56808098Z","close_reason":"Closed"}
{"id":"lettatoolsselector-by8rc","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:55:21.919631008Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:55:22.403646202Z","closed_at":"2026-01-02T18:55:22.403646202Z","close_reason":"Closed"}
{"id":"lettatoolsselector-byq70","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:40:55.291876156Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:55.570354586Z","closed_at":"2026-01-02T04:40:55.570354586Z","close_reason":"Closed"}
{"id":"lettatoolsselector-bz0gt","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:39.819402556Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:40.3666172Z","closed_at":"2026-01-02T14:57:40.3666172Z","close_reason":"Closed","comments":[{"id":3492,"issue_id":"lettatoolsselector-bz0gt","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T14:57:40Z"}]}
{"id":"lettatoolsselector-bzgk","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:30.070062131Z","updated_at":"2025-12-29T21:33:43.614839461Z","closed_at":"2025-12-29T21:33:43.614839461Z","close_reason":"Duplicate","comments":[{"id":446,"issue_id":"lettatoolsselector-bzgk","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:22:30Z"}]}
{"id":"lettatoolsselector-bznqq","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:06:26.921077502Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:06:27.491063483Z","closed_at":"2026-01-02T17:06:27.491063483Z","close_reason":"Closed","comments":[{"id":3715,"issue_id":"lettatoolsselector-bznqq","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T17:06:27Z"}]}
{"id":"lettatoolsselector-bzql0","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:39:38.827727756Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:39.52842673Z","closed_at":"2026-01-02T19:39:39.52842673Z","close_reason":"Closed","comments":[{"id":3989,"issue_id":"lettatoolsselector-bzql0","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T19:39:39Z"}]}
{"id":"lettatoolsselector-bzx4","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:20:22.495196569Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:22.89835804Z","closed_at":"2026-01-02T02:20:22.89835804Z","close_reason":"Closed","comments":[{"id":1299,"issue_id":"lettatoolsselector-bzx4","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T02:20:22Z"}]}
{"id":"lettatoolsselector-c05","title":"[Refactor] Extract _perform_tool_pruning to tool_manager","description":"## Summary\nMove `_perform_tool_pruning` function from `api_server.py` to `tool_manager.py`.\n\n## Current Location\n- `api_server.py:1228-1521` (~300 lines)\n\n## Dependencies (must be resolved first)\n1. **lettatoolsselector-pmp**: Extract `fetch_agent_tools` to tool_manager\n2. **lettatoolsselector-9yr**: Extract config module for tool limits\n3. **lettatoolsselector-a6c**: Add `search_tools` callback to tool_manager\n\n## Function Signature\n```python\nasync def perform_tool_pruning(\n    agent_id: str,\n    user_prompt: str,\n    drop_rate: float,\n    keep_tool_ids: list = None,\n    newly_matched_tool_ids: list = None\n) -\u003e dict:\n```\n\n## Internal Dependencies (already in tool_manager)\n- `detach_tool()` - already extracted\n- `is_letta_core_tool()` - already in models.py\n\n## Implementation\n1. Complete prerequisite issues\n2. Move function to tool_manager.py\n3. Update api_server.py to delegate\n4. Update tests in test_tool_management.py to use tool_manager.configure()\n5. Add dedicated tests in test_tool_manager.py\n\n## Acceptance Criteria\n- [ ] Prerequisites completed\n- [ ] Function moved to tool_manager.py\n- [ ] api_server.py delegates to tool_manager\n- [ ] All 296+ unit tests pass\n- [ ] Integration tests pass\n\n## Parent Issue\nlettatoolsselector-nav","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-28T20:52:19.997470978Z","updated_at":"2025-12-30T03:21:24.016349333Z"}
{"id":"lettatoolsselector-c0e6m","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:23.541472591Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:24.020915876Z","closed_at":"2026-01-02T07:42:24.020915876Z","close_reason":"Closed","comments":[{"id":2742,"issue_id":"lettatoolsselector-c0e6m","author":"root","text":"Synced from Huly: LTSEL-47","created_at":"2026-01-02T07:42:23Z"}]}
{"id":"lettatoolsselector-c1l","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","description":"## Problem\nSame `_is_letta_core_tool()` check is performed twice for the same tools - once for counting, once in the loop.\n\n**Location:** `routes/tools.py:382-390`\n\n```python\n# Counting - checks every tool\nmcp_count = len([t for t in current_agent_tools \n               if (t.get(\"tool_type\") == \"external_mcp\" or \n                   (not _is_letta_core_tool(t) and t.get(\"tool_type\") == \"custom\"))])\n\n# Loop - checks same tools again\nfor tool in current_agent_tools:\n    is_mcp_tool = (tool.get(\"tool_type\") == \"external_mcp\" or \n                 (not _is_letta_core_tool(tool) and tool.get(\"tool_type\") == \"custom\"))\n```\n\n## Impact\n- **Latency:** ~0.1ms per tool (duplicate function calls)\n- **Priority:** LOW\n\n## Solution\nCompute once and store results:\n\n```python\n# Compute MCP status once per tool\nmcp_status = {}\nfor tool in current_agent_tools:\n    tool_id = tool.get('id') or tool.get('tool_id')\n    is_mcp = (tool.get(\"tool_type\") == \"external_mcp\" or \n              (not _is_letta_core_tool(tool) and tool.get(\"tool_type\") == \"custom\"))\n    mcp_status[tool_id] = is_mcp\n\nmcp_count = sum(1 for is_mcp in mcp_status.values() if is_mcp)\n\n# Later in loop\nfor tool in current_agent_tools:\n    tool_id = tool.get('id') or tool.get('tool_id')\n    if mcp_status.get(tool_id):\n        # ... process MCP tool ...\n```\n\n## Acceptance Criteria\n- [ ] Each tool checked only once\n- [ ] MCP status cached for reuse\n- [ ] All unit tests pass","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T01:51:26.059923Z","updated_at":"2025-12-29T19:43:33.740744305Z","closed_at":"2025-12-29T19:43:33.740744305Z","close_reason":"Precomputed MCP status per tool in a dict, eliminating redundant _is_letta_core_tool() calls during attach loop","labels":["performance"]}
{"id":"lettatoolsselector-c27uk","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T11:34:23.566145362Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:23.9354818Z","closed_at":"2026-01-02T11:34:23.9354818Z","close_reason":"Closed"}
{"id":"lettatoolsselector-c2fz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:05.73517496Z","updated_at":"2025-12-30T04:12:09.39017332Z","comments":[{"id":948,"issue_id":"lettatoolsselector-c2fz","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-84","created_at":"2025-12-29T21:14:06Z"}]}
{"id":"lettatoolsselector-c2jv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:25:22.113962498Z","updated_at":"2025-12-30T01:59:54.689637844Z","comments":[{"id":1032,"issue_id":"lettatoolsselector-c2jv","author":"root","text":"Synced from Beads: lettatoolsselector-m9u\n\n---\nHuly Issue: LTSEL-77","created_at":"2025-12-29T21:25:22Z"}]}
{"id":"lettatoolsselector-c2lze","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:24:49.944866892Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:24:50.657744364Z","closed_at":"2026-01-02T21:24:50.657744364Z","close_reason":"Closed","comments":[{"id":4215,"issue_id":"lettatoolsselector-c2lze","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T21:24:50Z"}]}
{"id":"lettatoolsselector-c2v7u","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:09.234959438Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:09.67341628Z","closed_at":"2026-01-02T03:47:09.67341628Z","close_reason":"Closed","comments":[{"id":2307,"issue_id":"lettatoolsselector-c2v7u","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T03:47:09Z"}]}
{"id":"lettatoolsselector-c35eg","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:49.425104285Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:49.829725666Z","closed_at":"2026-01-02T03:29:49.829725666Z","close_reason":"Closed","comments":[{"id":2069,"issue_id":"lettatoolsselector-c35eg","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T03:29:49Z"}]}
{"id":"lettatoolsselector-c3jh2","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:55:30.643529761Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:55:31.467546802Z","closed_at":"2026-01-02T21:55:31.467546802Z","close_reason":"Closed","comments":[{"id":4280,"issue_id":"lettatoolsselector-c3jh2","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T21:55:31Z"}]}
{"id":"lettatoolsselector-c3w2t","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:55.166075473Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:55.166075473Z","comments":[{"id":1828,"issue_id":"lettatoolsselector-c3w2t","author":"root","text":"Synced from Beads: lettatoolsselector-h8wk\n\n---\nHuly Issue: LTSEL-526","created_at":"2026-01-02T03:27:55Z"}]}
{"id":"lettatoolsselector-c3z35","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:53:48.518026547Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:53:49.118394003Z","closed_at":"2026-01-02T12:53:49.118394003Z","close_reason":"Closed","comments":[{"id":3301,"issue_id":"lettatoolsselector-c3z35","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T12:53:48Z"}]}
{"id":"lettatoolsselector-c4b9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:34:12.426814946Z","updated_at":"2025-12-30T02:39:19.851638203Z","comments":[{"id":1068,"issue_id":"lettatoolsselector-c4b9","author":"root","text":"Synced from Beads: lettatoolsselector-ksi\n\n---\nHuly Issue: LTSEL-64","created_at":"2025-12-29T21:34:12Z"}]}
{"id":"lettatoolsselector-c4um","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:25:15.288923044Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:15.638035835Z","closed_at":"2026-01-02T01:25:15.638035835Z","close_reason":"Closed","comments":[{"id":1252,"issue_id":"lettatoolsselector-c4um","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T01:25:15Z"}]}
{"id":"lettatoolsselector-c4zds","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:30.830135444Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:30.830135444Z","comments":[{"id":2133,"issue_id":"lettatoolsselector-c4zds","author":"root","text":"Synced from Beads: lettatoolsselector-vnx\n\n---\nHuly Issue: LTSEL-207","created_at":"2026-01-02T03:31:31Z"}]}
{"id":"lettatoolsselector-c5zsd","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:47.713179407Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:48.411958976Z","closed_at":"2026-01-02T19:20:48.411958976Z","close_reason":"Closed","comments":[{"id":3936,"issue_id":"lettatoolsselector-c5zsd","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T19:20:48Z"}]}
{"id":"lettatoolsselector-c60o3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:22.616876127Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:22.616876127Z","comments":[{"id":2019,"issue_id":"lettatoolsselector-c60o3","author":"root","text":"Synced from Beads: lettatoolsselector-lcs8\n\n---\nHuly Issue: LTSEL-296","created_at":"2026-01-02T03:29:22Z"}]}
{"id":"lettatoolsselector-c61rs","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:04:52.9092509Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:04:53.546215458Z","closed_at":"2026-01-02T20:04:53.546215458Z","close_reason":"Closed","comments":[{"id":4049,"issue_id":"lettatoolsselector-c61rs","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T20:04:53Z"}]}
{"id":"lettatoolsselector-c6em","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:05:39.556964051Z","updated_at":"2025-12-30T04:14:12.644146318Z","comments":[{"id":866,"issue_id":"lettatoolsselector-c6em","author":"root","text":"Synced from Beads: lettatoolsselector-lec\n\n---\nHuly Issue: LTSEL-117","created_at":"2025-12-29T21:05:39Z"}]}
{"id":"lettatoolsselector-c6q5j","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:20:42.110604689Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:42.494772562Z","closed_at":"2026-01-02T04:20:42.494772562Z","close_reason":"Closed"}
{"id":"lettatoolsselector-c7649","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:53.396592436Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:53.801108229Z","closed_at":"2026-01-02T03:06:53.801108229Z","close_reason":"Closed","comments":[{"id":1574,"issue_id":"lettatoolsselector-c7649","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T03:06:53Z"}]}
{"id":"lettatoolsselector-c816x","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:51:40.067465337Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:51:40.502427058Z","closed_at":"2026-01-02T21:51:40.502427058Z","close_reason":"Closed"}
{"id":"lettatoolsselector-c81qa","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:39:32.010459614Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:32.660756732Z","closed_at":"2026-01-02T20:39:32.660756732Z","close_reason":"Closed","comments":[{"id":4128,"issue_id":"lettatoolsselector-c81qa","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T20:39:32Z"}]}
{"id":"lettatoolsselector-c8jao","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:29.070810951Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:29.794845585Z","closed_at":"2026-01-02T20:55:29.794845585Z","close_reason":"Closed","comments":[{"id":4155,"issue_id":"lettatoolsselector-c8jao","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T20:55:29Z"}]}
{"id":"lettatoolsselector-c8lu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:25:50.235819842Z","updated_at":"2025-12-30T02:00:24.586243162Z","comments":[{"id":1035,"issue_id":"lettatoolsselector-c8lu","author":"root","text":"Synced from Beads: lettatoolsselector-563\n\n---\nHuly Issue: LTSEL-79","created_at":"2025-12-29T21:25:50Z"}]}
{"id":"lettatoolsselector-c9a46","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:21:14.51999085Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:21:15.206800466Z","closed_at":"2026-01-02T22:21:15.206800466Z","close_reason":"Closed","comments":[{"id":4320,"issue_id":"lettatoolsselector-c9a46","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T22:21:14Z"}]}
{"id":"lettatoolsselector-c9q6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:12:22.36697154Z","updated_at":"2025-12-30T02:10:05.300671061Z","comments":[{"id":934,"issue_id":"lettatoolsselector-c9q6","author":"root","text":"Synced from Beads: lettatoolsselector-ix0\n\n---\nHuly Issue: LTSEL-90","created_at":"2025-12-29T21:12:22Z"}]}
{"id":"lettatoolsselector-ca59f","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T16:13:35.965730468Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:13:36.34261677Z","closed_at":"2026-01-02T16:13:36.34261677Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ca70t","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:47:34.077570834Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:47:34.736116323Z","closed_at":"2026-01-02T21:47:34.736116323Z","close_reason":"Closed","comments":[{"id":4250,"issue_id":"lettatoolsselector-ca70t","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T21:47:34Z"}]}
{"id":"lettatoolsselector-cah4s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:07.266784164Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:07.266784164Z","comments":[{"id":1856,"issue_id":"lettatoolsselector-cah4s","author":"root","text":"Synced from Beads: lettatoolsselector-x1mt\n\n---\nHuly Issue: LTSEL-494","created_at":"2026-01-02T03:28:07Z"}]}
{"id":"lettatoolsselector-canhl","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:17.992717189Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:18.596312533Z","closed_at":"2026-01-02T08:02:18.596312533Z","close_reason":"Closed","comments":[{"id":2800,"issue_id":"lettatoolsselector-canhl","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T08:02:18Z"}]}
{"id":"lettatoolsselector-cao3","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:20.058968337Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:20.413683119Z","closed_at":"2026-01-02T01:25:20.413683119Z","close_reason":"Closed","comments":[{"id":1259,"issue_id":"lettatoolsselector-cao3","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T01:25:20Z"}]}
{"id":"lettatoolsselector-cawf","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T02:35:19.319473928Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:19.54282615Z","closed_at":"2026-01-02T02:35:19.54282615Z","close_reason":"Closed"}
{"id":"lettatoolsselector-cay2c","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:07.763101741Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:08.263190411Z","closed_at":"2026-01-02T06:00:08.263190411Z","close_reason":"Closed","comments":[{"id":2525,"issue_id":"lettatoolsselector-cay2c","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T06:00:08Z"}]}
{"id":"lettatoolsselector-cb62y","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:10:07.337828972Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:10:07.900095367Z","closed_at":"2026-01-02T16:10:07.900095367Z","close_reason":"Closed","comments":[{"id":3635,"issue_id":"lettatoolsselector-cb62y","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T16:10:07Z"}]}
{"id":"lettatoolsselector-cbir","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:03.379203651Z","updated_at":"2025-12-29T21:33:44.189888672Z","closed_at":"2025-12-29T21:33:44.189888672Z","close_reason":"Duplicate","comments":[{"id":362,"issue_id":"lettatoolsselector-cbir","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:15:03Z"}]}
{"id":"lettatoolsselector-cbpe4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:10.163890817Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:10.163890817Z","comments":[{"id":1863,"issue_id":"lettatoolsselector-cbpe4","author":"root","text":"Synced from Beads: lettatoolsselector-qane\n\n---\nHuly Issue: LTSEL-487","created_at":"2026-01-02T03:28:10Z"}]}
{"id":"lettatoolsselector-cbq0p","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:10:58.156668214Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:10:58.695654199Z","closed_at":"2026-01-02T14:10:58.695654199Z","close_reason":"Closed","comments":[{"id":3435,"issue_id":"lettatoolsselector-cbq0p","author":"root","text":"Synced from Huly: LTSEL-235","created_at":"2026-01-02T14:10:58Z"}]}
{"id":"lettatoolsselector-cbtsn","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:26:35.515364217Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:26:36.147406259Z","closed_at":"2026-01-02T19:26:36.147406259Z","close_reason":"Closed","comments":[{"id":3959,"issue_id":"lettatoolsselector-cbtsn","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T19:26:35Z"}]}
{"id":"lettatoolsselector-ccr1q","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:16.435339103Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:16.735050032Z","closed_at":"2026-01-02T06:00:16.735050032Z","close_reason":"Closed"}
{"id":"lettatoolsselector-cd2y2","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:50:45.270174425Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:50:45.896484665Z","closed_at":"2026-01-02T18:50:45.896484665Z","close_reason":"Closed","comments":[{"id":3890,"issue_id":"lettatoolsselector-cd2y2","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T18:50:45Z"}]}
{"id":"lettatoolsselector-cd5bh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:06.385267347Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:06.385267347Z","comments":[{"id":1854,"issue_id":"lettatoolsselector-cd5bh","author":"root","text":"Synced from Beads: lettatoolsselector-448k\n\n---\nHuly Issue: LTSEL-496","created_at":"2026-01-02T03:28:06Z"}]}
{"id":"lettatoolsselector-ce8s","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:11.619980259Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:12.091936936Z","closed_at":"2026-01-02T02:35:12.091936936Z","close_reason":"Closed","comments":[{"id":1339,"issue_id":"lettatoolsselector-ce8s","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T02:35:11Z"}]}
{"id":"lettatoolsselector-cen02","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:21:16.668236438Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:17.253418619Z","closed_at":"2026-01-02T15:21:17.253418619Z","close_reason":"Closed","comments":[{"id":3555,"issue_id":"lettatoolsselector-cen02","author":"root","text":"Synced from Huly: LTSEL-220","created_at":"2026-01-02T15:21:17Z"}]}
{"id":"lettatoolsselector-ceth9","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:29.947659348Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:30.306885084Z","closed_at":"2026-01-02T03:06:30.306885084Z","close_reason":"Closed","comments":[{"id":1553,"issue_id":"lettatoolsselector-ceth9","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T03:06:30Z"}]}
{"id":"lettatoolsselector-cev19","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:04:51.985645282Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:04:53.574275395Z","closed_at":"2026-01-02T17:04:53.574275395Z","close_reason":"Closed"}
{"id":"lettatoolsselector-cf0kp","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:57:35.404784388Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:57:36.054851667Z","closed_at":"2026-01-02T20:57:36.054851667Z","close_reason":"Closed","comments":[{"id":4170,"issue_id":"lettatoolsselector-cf0kp","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T20:57:35Z"}]}
{"id":"lettatoolsselector-cf5l4","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:35:20.453503721Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:35:21.276379175Z","closed_at":"2026-01-02T21:35:21.276379175Z","close_reason":"Closed","comments":[{"id":4238,"issue_id":"lettatoolsselector-cf5l4","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T21:35:21Z"}]}
{"id":"lettatoolsselector-cf7a1","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:22.626052816Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:22.626052816Z","comments":[{"id":2236,"issue_id":"lettatoolsselector-cf7a1","author":"root","text":"Synced from Beads: lettatoolsselector-ltsw\n\n---\nHuly Issue: LTSEL-553","created_at":"2026-01-02T03:44:22Z"}]}
{"id":"lettatoolsselector-cf9ft","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:44.850775141Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:45.348936281Z","closed_at":"2026-01-02T07:02:45.348936281Z","close_reason":"Closed","comments":[{"id":2665,"issue_id":"lettatoolsselector-cf9ft","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T07:02:45Z"}]}
{"id":"lettatoolsselector-cfcol","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:39.820047983Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:40.358593087Z","closed_at":"2026-01-02T14:29:40.358593087Z","close_reason":"Closed","comments":[{"id":3449,"issue_id":"lettatoolsselector-cfcol","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T14:29:40Z"}]}
{"id":"lettatoolsselector-cg56","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:15.892453059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:16.233220827Z","closed_at":"2026-01-02T02:35:16.233220827Z","close_reason":"Closed","comments":[{"id":1346,"issue_id":"lettatoolsselector-cg56","author":"root","text":"Synced from Beads: lettatoolsselector-388\n\n---\nHuly Issue: LTSEL-31","created_at":"2026-01-02T02:35:16Z"}]}
{"id":"lettatoolsselector-cgmph","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:23:23.369948374Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:23:23.997763852Z","closed_at":"2026-01-02T21:23:23.997763852Z","close_reason":"Closed","comments":[{"id":4207,"issue_id":"lettatoolsselector-cgmph","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T21:23:23Z"}]}
{"id":"lettatoolsselector-cgro","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:52.478892722Z","updated_at":"2025-12-29T21:33:43.205378343Z","closed_at":"2025-12-29T21:33:43.205378343Z","close_reason":"Duplicate","comments":[{"id":488,"issue_id":"lettatoolsselector-cgro","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T20:25:52Z"}]}
{"id":"lettatoolsselector-ch3b","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:31.724958838Z","updated_at":"2025-12-30T04:12:02.284994356Z","comments":[{"id":954,"issue_id":"lettatoolsselector-ch3b","author":"root","text":"Synced from Beads: lettatoolsselector-oij\n\n---\nHuly Issue: LTSEL-86","created_at":"2025-12-29T21:14:32Z"}]}
{"id":"lettatoolsselector-chd6y","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:09:50.217772597Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:50.764315207Z","closed_at":"2026-01-02T14:09:50.764315207Z","close_reason":"Closed","comments":[{"id":3426,"issue_id":"lettatoolsselector-chd6y","author":"root","text":"Synced from Huly: LTSEL-228","created_at":"2026-01-02T14:09:50Z"}]}
{"id":"lettatoolsselector-chdl","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:12.032614905Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:12.39820987Z","closed_at":"2026-01-02T03:06:12.39820987Z","close_reason":"Closed","comments":[{"id":1522,"issue_id":"lettatoolsselector-chdl","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T03:06:12Z"}]}
{"id":"lettatoolsselector-chk44","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:54.125565665Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:54.749870669Z","closed_at":"2026-01-02T21:48:54.749870669Z","close_reason":"Closed","comments":[{"id":4264,"issue_id":"lettatoolsselector-chk44","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T21:48:54Z"}]}
{"id":"lettatoolsselector-choba","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:07:28.301514947Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:07:29.02478011Z","closed_at":"2026-01-02T21:07:29.02478011Z","close_reason":"Closed","comments":[{"id":4194,"issue_id":"lettatoolsselector-choba","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T21:07:28Z"}]}
{"id":"lettatoolsselector-ci80","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:27.865437261Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:28.201698589Z","closed_at":"2026-01-02T02:35:28.201698589Z","close_reason":"Closed","comments":[{"id":1358,"issue_id":"lettatoolsselector-ci80","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T02:35:28Z"}]}
{"id":"lettatoolsselector-cianm","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:36:54.795080739Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:36:55.576401695Z","closed_at":"2026-01-02T21:36:55.576401695Z","close_reason":"Closed","comments":[{"id":4242,"issue_id":"lettatoolsselector-cianm","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T21:36:55Z"}]}
{"id":"lettatoolsselector-cicz","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:20:40.971966626Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:41.203789438Z","closed_at":"2026-01-02T02:20:41.203789438Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ciryf","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:12.240572576Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:12.240572576Z","comments":[{"id":2175,"issue_id":"lettatoolsselector-ciryf","author":"root","text":"Synced from Beads: lettatoolsselector-t48\n\n---\nHuly Issue: LTSEL-764","created_at":"2026-01-02T03:43:12Z"}]}
{"id":"lettatoolsselector-ciyno","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:26:29.427281551Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:26:30.202976797Z","closed_at":"2026-01-02T17:26:30.202976797Z","close_reason":"Closed","comments":[{"id":3743,"issue_id":"lettatoolsselector-ciyno","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T17:26:29Z"}]}
{"id":"lettatoolsselector-cj0f","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:51.523214781Z","updated_at":"2025-12-30T02:08:45.039035351Z","comments":[{"id":930,"issue_id":"lettatoolsselector-cj0f","author":"root","text":"Synced from Beads: lettatoolsselector-mwv\n\n---\nHuly Issue: LTSEL-103","created_at":"2025-12-29T21:11:51Z"}]}
{"id":"lettatoolsselector-cj77k","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T11:10:24.174260746Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:10:24.602112397Z","closed_at":"2026-01-02T11:10:24.602112397Z","close_reason":"Closed"}
{"id":"lettatoolsselector-cjgs8","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:17.222245144Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:17.811555171Z","closed_at":"2026-01-02T09:40:17.811555171Z","close_reason":"Closed","comments":[{"id":2990,"issue_id":"lettatoolsselector-cjgs8","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T09:40:17Z"}]}
{"id":"lettatoolsselector-ck3e","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:50.201184844Z","updated_at":"2025-12-30T04:14:21.732338522Z","comments":[{"id":905,"issue_id":"lettatoolsselector-ck3e","author":"root","text":"Synced from Beads: lettatoolsselector-dqi\n\n---\nHuly Issue: LTSEL-67","created_at":"2025-12-29T21:09:50Z"}]}
{"id":"lettatoolsselector-ckaxj","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:49.324306478Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:49.800381229Z","closed_at":"2026-01-02T06:36:49.800381229Z","close_reason":"Closed","comments":[{"id":2612,"issue_id":"lettatoolsselector-ckaxj","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T06:36:49Z"}]}
{"id":"lettatoolsselector-ckk3n","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:24.335036991Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:24.335036991Z","comments":[{"id":1895,"issue_id":"lettatoolsselector-ckk3n","author":"root","text":"Synced from Beads: lettatoolsselector-bwps\n\n---\nHuly Issue: LTSEL-443","created_at":"2026-01-02T03:28:24Z"}]}
{"id":"lettatoolsselector-ckvp1","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:05:11.815863375Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:05:12.466516074Z","closed_at":"2026-01-02T20:05:12.466516074Z","close_reason":"Closed","comments":[{"id":4053,"issue_id":"lettatoolsselector-ckvp1","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T20:05:12Z"}]}
{"id":"lettatoolsselector-cl1lv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:47.015456383Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:47.015456383Z","comments":[{"id":1809,"issue_id":"lettatoolsselector-cl1lv","author":"root","text":"Synced from Beads: lettatoolsselector-64ep\n\n---\nHuly Issue: LTSEL-557","created_at":"2026-01-02T03:27:47Z"}]}
{"id":"lettatoolsselector-cl2d","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:28.685449174Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:29.040500419Z","closed_at":"2026-01-02T03:06:29.040500419Z","close_reason":"Closed","comments":[{"id":1551,"issue_id":"lettatoolsselector-cl2d","author":"root","text":"Synced from Beads: lettatoolsselector-sxk\n\n---\nHuly Issue: LTSEL-30","created_at":"2026-01-02T03:06:28Z"}]}
{"id":"lettatoolsselector-cl5sf","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:43:57.580859307Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:43:58.188854344Z","closed_at":"2026-01-02T22:43:58.188854344Z","close_reason":"Closed","comments":[{"id":4363,"issue_id":"lettatoolsselector-cl5sf","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T22:43:57Z"}]}
{"id":"lettatoolsselector-cla1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:05:38.757379663Z","updated_at":"2025-12-30T04:11:57.083065576Z","comments":[{"id":865,"issue_id":"lettatoolsselector-cla1","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-110","created_at":"2025-12-29T21:05:39Z"}]}
{"id":"lettatoolsselector-cll7a","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:25:38.76034286Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:25:39.375776207Z","closed_at":"2026-01-02T19:25:39.375776207Z","close_reason":"Closed","comments":[{"id":3955,"issue_id":"lettatoolsselector-cll7a","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T19:25:39Z"}]}
{"id":"lettatoolsselector-clogo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:26.470766946Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:26.470766946Z","comments":[{"id":1900,"issue_id":"lettatoolsselector-clogo","author":"root","text":"Synced from Beads: lettatoolsselector-mv3b\n\n---\nHuly Issue: LTSEL-437","created_at":"2026-01-02T03:28:26Z"}]}
{"id":"lettatoolsselector-cm4ve","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:26:42.169059077Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:26:42.738298367Z","closed_at":"2026-01-02T17:26:42.738298367Z","close_reason":"Closed","comments":[{"id":3744,"issue_id":"lettatoolsselector-cm4ve","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T17:26:42Z"}]}
{"id":"lettatoolsselector-cmuvi","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:09:30.13600182Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:30.870065737Z","closed_at":"2026-01-02T14:09:30.870065737Z","close_reason":"Closed","comments":[{"id":3422,"issue_id":"lettatoolsselector-cmuvi","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T14:09:30Z"}]}
{"id":"lettatoolsselector-cnh8v","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:18.15006534Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:18.573835598Z","closed_at":"2026-01-02T04:20:18.573835598Z","close_reason":"Closed","comments":[{"id":2374,"issue_id":"lettatoolsselector-cnh8v","author":"root","text":"Synced from Beads: lettatoolsselector-sxk\n\n---\nHuly Issue: LTSEL-30","created_at":"2026-01-02T04:20:18Z"}]}
{"id":"lettatoolsselector-coa4b","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:49:26.978227094Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:49:27.644675652Z","closed_at":"2026-01-02T21:49:27.644675652Z","close_reason":"Closed","comments":[{"id":4267,"issue_id":"lettatoolsselector-coa4b","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T21:49:27Z"}]}
{"id":"lettatoolsselector-cokaw","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T19:41:15.682230082Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:41:16.263905932Z","closed_at":"2026-01-02T19:41:16.263905932Z","close_reason":"Closed","comments":[{"id":4000,"issue_id":"lettatoolsselector-cokaw","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T19:41:16Z"}]}
{"id":"lettatoolsselector-cown","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:20:39.186162994Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:39.546564947Z","closed_at":"2026-01-02T02:20:39.546564947Z","close_reason":"Closed","comments":[{"id":1310,"issue_id":"lettatoolsselector-cown","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T02:20:39Z"}]}
{"id":"lettatoolsselector-cp4a3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:00.113118902Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:00.113118902Z","comments":[{"id":1840,"issue_id":"lettatoolsselector-cp4a3","author":"root","text":"Synced from Beads: lettatoolsselector-s3vn\n\n---\nHuly Issue: LTSEL-512","created_at":"2026-01-02T03:28:00Z"}]}
{"id":"lettatoolsselector-cp4fh","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:39.072542924Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:39.656532054Z","closed_at":"2026-01-02T08:54:39.656532054Z","close_reason":"Closed","comments":[{"id":2884,"issue_id":"lettatoolsselector-cp4fh","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T08:54:39Z"}]}
{"id":"lettatoolsselector-cp98c","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:41:40.086177181Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:40.639779819Z","closed_at":"2026-01-02T04:41:40.639779819Z","close_reason":"Closed","comments":[{"id":2445,"issue_id":"lettatoolsselector-cp98c","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T04:41:40Z"}]}
{"id":"lettatoolsselector-cp9j6","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:30:55.343211784Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:30:55.889505716Z","closed_at":"2026-01-02T14:30:55.889505716Z","close_reason":"Closed","comments":[{"id":3458,"issue_id":"lettatoolsselector-cp9j6","author":"root","text":"Synced from Huly: LTSEL-218","created_at":"2026-01-02T14:30:55Z"}]}
{"id":"lettatoolsselector-cpmf","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:15.564637306Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:15.922255927Z","closed_at":"2026-01-02T03:06:15.922255927Z","close_reason":"Closed","comments":[{"id":1528,"issue_id":"lettatoolsselector-cpmf","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T03:06:15Z"}]}
{"id":"lettatoolsselector-cppd","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:36.126900308Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:36.57806897Z","closed_at":"2026-01-02T02:19:36.57806897Z","close_reason":"Closed","comments":[{"id":1278,"issue_id":"lettatoolsselector-cppd","author":"root","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2026-01-02T02:19:36Z"}]}
{"id":"lettatoolsselector-cpxpj","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:41.970998482Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:42.491805873Z","closed_at":"2026-01-02T11:33:42.491805873Z","close_reason":"Closed","comments":[{"id":3213,"issue_id":"lettatoolsselector-cpxpj","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T11:33:42Z"}]}
{"id":"lettatoolsselector-cqejd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:16.688174604Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:16.688174604Z","comments":[{"id":2007,"issue_id":"lettatoolsselector-cqejd","author":"root","text":"Synced from Beads: lettatoolsselector-37d9\n\n---\nHuly Issue: LTSEL-308","created_at":"2026-01-02T03:29:16Z"}]}
{"id":"lettatoolsselector-cqtw","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:21.66488791Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:21.888449969Z","closed_at":"2026-01-02T02:35:21.888449969Z","close_reason":"Closed"}
{"id":"lettatoolsselector-cr1w1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:54.212005873Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:54.212005873Z","comments":[{"id":1826,"issue_id":"lettatoolsselector-cr1w1","author":"root","text":"Synced from Beads: lettatoolsselector-5wwo\n\n---\nHuly Issue: LTSEL-529","created_at":"2026-01-02T03:27:54Z"}]}
{"id":"lettatoolsselector-crx87","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:35.223074579Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:35.223074579Z","comments":[{"id":2240,"issue_id":"lettatoolsselector-crx87","author":"root","text":"Synced from Huly: LTSEL-545","created_at":"2026-01-02T03:44:35Z"}]}
{"id":"lettatoolsselector-csl3u","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:37:04.676084176Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:37:05.037502293Z","closed_at":"2026-01-02T13:37:05.037502293Z","close_reason":"Closed"}
{"id":"lettatoolsselector-cspn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:28:58.802153214Z","updated_at":"2025-12-30T02:03:01.930921082Z","comments":[{"id":1048,"issue_id":"lettatoolsselector-cspn","author":"root","text":"Synced from Beads: lettatoolsselector-7dj\n\n---\nHuly Issue: LTSEL-60","created_at":"2025-12-29T21:28:59Z"}]}
{"id":"lettatoolsselector-csuun","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:14:46.658074028Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:14:47.287855174Z","closed_at":"2026-01-02T22:14:47.287855174Z","close_reason":"Closed","comments":[{"id":4294,"issue_id":"lettatoolsselector-csuun","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T22:14:47Z"}]}
{"id":"lettatoolsselector-ct35t","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:37:16.072956728Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:16.417711605Z","closed_at":"2026-01-02T10:37:16.417711605Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ct8vt","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:30.790304797Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:31.052164565Z","closed_at":"2026-01-02T03:30:31.052164565Z","close_reason":"Closed"}
{"id":"lettatoolsselector-cthd8","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:51:55.5095725Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:51:56.14962371Z","closed_at":"2026-01-02T22:51:56.14962371Z","close_reason":"Closed","comments":[{"id":4382,"issue_id":"lettatoolsselector-cthd8","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T22:51:55Z"}]}
{"id":"lettatoolsselector-cthgk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:31.187672902Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:31.187672902Z","comments":[{"id":1911,"issue_id":"lettatoolsselector-cthgk","author":"root","text":"Synced from Beads: lettatoolsselector-3os7\n\n---\nHuly Issue: LTSEL-423","created_at":"2026-01-02T03:28:31Z"}]}
{"id":"lettatoolsselector-cthzn","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:12.873277473Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:13.422234476Z","closed_at":"2026-01-02T04:20:13.422234476Z","close_reason":"Closed","comments":[{"id":2367,"issue_id":"lettatoolsselector-cthzn","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T04:20:13Z"}]}
{"id":"lettatoolsselector-ctz9","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:14.815985933Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:15.155775122Z","closed_at":"2026-01-02T02:35:15.155775122Z","close_reason":"Closed","comments":[{"id":1344,"issue_id":"lettatoolsselector-ctz9","author":"root","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2026-01-02T02:35:15Z"}]}
{"id":"lettatoolsselector-cu0rf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:14.544602884Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:14.544602884Z","comments":[{"id":2003,"issue_id":"lettatoolsselector-cu0rf","author":"root","text":"Synced from Beads: lettatoolsselector-936p\n\n---\nHuly Issue: LTSEL-312","created_at":"2026-01-02T03:29:14Z"}]}
{"id":"lettatoolsselector-cu13u","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:26:07.57055963Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:26:08.020094288Z","closed_at":"2026-01-02T21:26:08.020094288Z","close_reason":"Closed"}
{"id":"lettatoolsselector-cu79","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:06.488872711Z","updated_at":"2025-12-29T21:33:44.162864875Z","closed_at":"2025-12-29T21:33:44.162864875Z","close_reason":"Duplicate","comments":[{"id":363,"issue_id":"lettatoolsselector-cu79","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T20:15:06Z"}]}
{"id":"lettatoolsselector-cv2m9","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:44.964828132Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:44.964828132Z","comments":[{"id":2248,"issue_id":"lettatoolsselector-cv2m9","author":"root","text":"Synced from Beads: lettatoolsselector-pa7b\n\n---\nHuly Issue: LTSEL-515","created_at":"2026-01-02T03:44:45Z"}]}
{"id":"lettatoolsselector-cvx9j","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:00:44.522093748Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:00:45.103297878Z","closed_at":"2026-01-02T17:00:45.103297878Z","close_reason":"Closed","comments":[{"id":3684,"issue_id":"lettatoolsselector-cvx9j","author":"root","text":"Synced from Huly: LTSEL-44","created_at":"2026-01-02T17:00:44Z"}]}
{"id":"lettatoolsselector-cvy","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:05.071719446Z","updated_at":"2025-12-23T03:23:05.419749054Z","closed_at":"2025-12-23T03:23:05.419749054Z","close_reason":"Closed","comments":[{"id":28,"issue_id":"lettatoolsselector-cvy","author":"node","text":"## Problem\n\nNo audit trail for tool changes. Debugging requires scraping logs from multiple containers.\n\n## Solution\n\nEmit structured events to a queue/stream whenever tools are attached or detached.\n\n## Acceptance Criteria\n\n- [ ] Event schema: {timestamp, agent_id, tool_id, tool_name, action, reason, source}\n- [ ] Events emitted from tool selector API on every attach/detach\n- [ ] Events written to Redis Stream or similar (low overhead)\n- [ ] Events include correlation ID for tracing webhook -\u003e attach flow\n\n## Technical Notes\n\n- Use Redis Streams for simplicity (XADD)\n- Keep 7 days of events by default\n- Consider also writing to structured log for Loki ingestion\n\n---\nHuly Issue: LTSEL-11","created_at":"2025-12-23T03:23:05Z"}]}
{"id":"lettatoolsselector-cw3l","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:46.37281488Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:46.720733253Z","closed_at":"2026-01-02T01:24:46.720733253Z","close_reason":"Closed","comments":[{"id":1213,"issue_id":"lettatoolsselector-cw3l","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T01:24:46Z"}]}
{"id":"lettatoolsselector-cw3pz","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:47:05.992128578Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:47:06.64050009Z","closed_at":"2026-01-02T22:47:06.64050009Z","close_reason":"Closed","comments":[{"id":4370,"issue_id":"lettatoolsselector-cw3pz","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T22:47:06Z"}]}
{"id":"lettatoolsselector-cwgpn","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:06.258425905Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:06.860404572Z","closed_at":"2026-01-02T13:36:06.860404572Z","close_reason":"Closed","comments":[{"id":3350,"issue_id":"lettatoolsselector-cwgpn","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T13:36:06Z"}]}
{"id":"lettatoolsselector-cwt58","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:04.135613436Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:04.135613436Z","comments":[{"id":1849,"issue_id":"lettatoolsselector-cwt58","author":"root","text":"Synced from Beads: lettatoolsselector-en49\n\n---\nHuly Issue: LTSEL-502","created_at":"2026-01-02T03:28:04Z"}]}
{"id":"lettatoolsselector-cx37","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:24:52.004447233Z","updated_at":"2025-12-30T01:59:40.353294694Z","comments":[{"id":1030,"issue_id":"lettatoolsselector-cx37","author":"root","text":"Synced from Beads: lettatoolsselector-m03\n\n---\nHuly Issue: LTSEL-71","created_at":"2025-12-29T21:24:52Z"}]}
{"id":"lettatoolsselector-cxej3","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:47:44.822227454Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:47:45.231871349Z","closed_at":"2026-01-02T15:47:45.231871349Z","close_reason":"Closed"}
{"id":"lettatoolsselector-cxgbe","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:50.673232195Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:51.104047912Z","closed_at":"2026-01-02T03:46:51.104047912Z","close_reason":"Closed","comments":[{"id":2290,"issue_id":"lettatoolsselector-cxgbe","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T03:46:50Z"}]}
{"id":"lettatoolsselector-cy5gm","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:51.301914589Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:51.979957478Z","closed_at":"2026-01-02T15:46:51.979957478Z","close_reason":"Closed","comments":[{"id":3604,"issue_id":"lettatoolsselector-cy5gm","author":"root","text":"Synced from Huly: LTSEL-219","created_at":"2026-01-02T15:46:51Z"}]}
{"id":"lettatoolsselector-cykg1","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:19:05.308973806Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:05.960681072Z","closed_at":"2026-01-02T06:19:05.960681072Z","close_reason":"Closed","comments":[{"id":2586,"issue_id":"lettatoolsselector-cykg1","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T06:19:05Z"}]}
{"id":"lettatoolsselector-d03n9","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:21:05.495392503Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:06.098869662Z","closed_at":"2026-01-02T20:21:06.098869662Z","close_reason":"Closed","comments":[{"id":4089,"issue_id":"lettatoolsselector-d03n9","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T20:21:05Z"}]}
{"id":"lettatoolsselector-d0ojb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:44.914658612Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:44.914658612Z","comments":[{"id":1941,"issue_id":"lettatoolsselector-d0ojb","author":"root","text":"Synced from Beads: lettatoolsselector-rjjh\n\n---\nHuly Issue: LTSEL-382","created_at":"2026-01-02T03:28:45Z"}]}
{"id":"lettatoolsselector-d0t","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:12.533425716Z","updated_at":"2025-12-23T03:23:12.739214321Z","closed_at":"2025-12-23T03:23:12.739214321Z","close_reason":"Closed"}
{"id":"lettatoolsselector-d12gg","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:34:26.931058981Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:27.447047078Z","closed_at":"2026-01-02T11:34:27.447047078Z","close_reason":"Closed"}
{"id":"lettatoolsselector-d1v2k","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:37:16.807878406Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:17.124090611Z","closed_at":"2026-01-02T06:37:17.124090611Z","close_reason":"Closed"}
{"id":"lettatoolsselector-d26o","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:02.901544757Z","updated_at":"2025-12-29T21:33:29.509931908Z","closed_at":"2025-12-29T21:33:29.509931908Z","close_reason":"Duplicate","comments":[{"id":388,"issue_id":"lettatoolsselector-d26o","author":"root","text":"Synced from Beads: lettatoolsselector-mwv\n\n---\nHuly Issue: LTSEL-102","created_at":"2025-12-29T20:17:03Z"}]}
{"id":"lettatoolsselector-d2tt3","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:02.988111568Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:03.419282661Z","closed_at":"2026-01-02T03:30:03.419282661Z","close_reason":"Closed","comments":[{"id":2084,"issue_id":"lettatoolsselector-d2tt3","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T03:30:03Z"}]}
{"id":"lettatoolsselector-d3da8","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:23:21.394820281Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:23:22.111510646Z","closed_at":"2026-01-02T21:23:22.111510646Z","close_reason":"Closed","comments":[{"id":4206,"issue_id":"lettatoolsselector-d3da8","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T21:23:21Z"}]}
{"id":"lettatoolsselector-d3de","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:15:53.379268597Z","updated_at":"2025-12-30T01:50:43.176219711Z","comments":[{"id":968,"issue_id":"lettatoolsselector-d3de","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-84","created_at":"2025-12-29T21:15:53Z"}]}
{"id":"lettatoolsselector-d3kl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:13:27.276710786Z","updated_at":"2025-12-30T01:46:04.137184424Z","comments":[{"id":944,"issue_id":"lettatoolsselector-d3kl","author":"root","text":"Synced from Beads: lettatoolsselector-dg2\n\n---\nHuly Issue: LTSEL-88","created_at":"2025-12-29T21:13:27Z"}]}
{"id":"lettatoolsselector-d4c9u","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:21:29.983678418Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:30.550867385Z","closed_at":"2026-01-02T15:21:30.550867385Z","close_reason":"Closed","comments":[{"id":3559,"issue_id":"lettatoolsselector-d4c9u","author":"root","text":"Synced from Huly: LTSEL-229","created_at":"2026-01-02T15:21:30Z"}]}
{"id":"lettatoolsselector-d4vyr","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:09.581080196Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:10.077688285Z","closed_at":"2026-01-02T03:30:10.077688285Z","close_reason":"Closed","comments":[{"id":2093,"issue_id":"lettatoolsselector-d4vyr","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T03:30:09Z"}]}
{"id":"lettatoolsselector-d4wn6","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:02:53.513325734Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:53.961313083Z","closed_at":"2026-01-02T07:02:53.961313083Z","close_reason":"Closed"}
{"id":"lettatoolsselector-d51u","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:45.597196975Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:45.936513568Z","closed_at":"2026-01-02T02:19:45.936513568Z","close_reason":"Closed","comments":[{"id":1286,"issue_id":"lettatoolsselector-d51u","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T02:19:45Z"}]}
{"id":"lettatoolsselector-d5da7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:07.214305822Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:07.214305822Z","comments":[{"id":1989,"issue_id":"lettatoolsselector-d5da7","author":"root","text":"Synced from Beads: lettatoolsselector-3uph\n\n---\nHuly Issue: LTSEL-327","created_at":"2026-01-02T03:29:07Z"}]}
{"id":"lettatoolsselector-d5va","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:13:00.871301498Z","updated_at":"2025-12-30T02:10:52.019815589Z","comments":[{"id":939,"issue_id":"lettatoolsselector-d5va","author":"root","text":"Synced from Beads: lettatoolsselector-oij\n\n---\nHuly Issue: LTSEL-86","created_at":"2025-12-29T21:13:01Z"}]}
{"id":"lettatoolsselector-d5ym","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:58.051276655Z","updated_at":"2025-12-29T21:33:24.847686265Z","closed_at":"2025-12-29T21:33:24.847686265Z","close_reason":"Duplicate","comments":[{"id":606,"issue_id":"lettatoolsselector-d5ym","author":"root","text":"Synced from Beads: lettatoolsselector-f4x\n\n---\nHuly Issue: LTSEL-155","created_at":"2025-12-29T20:35:58Z"}]}
{"id":"lettatoolsselector-d61wv","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:30:16.196300297Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:30:16.82988309Z","closed_at":"2026-01-02T21:30:16.82988309Z","close_reason":"Closed","comments":[{"id":4225,"issue_id":"lettatoolsselector-d61wv","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T21:30:16Z"}]}
{"id":"lettatoolsselector-d64te","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:43.011627182Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:43.61114018Z","closed_at":"2026-01-02T20:16:43.61114018Z","close_reason":"Closed","comments":[{"id":4074,"issue_id":"lettatoolsselector-d64te","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T20:16:43Z"}]}
{"id":"lettatoolsselector-d667","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:32.661568206Z","updated_at":"2025-12-30T01:48:02.700738403Z","comments":[{"id":955,"issue_id":"lettatoolsselector-d667","author":"root","text":"Synced from Beads: lettatoolsselector-0qv\n\n---\nHuly Issue: LTSEL-93","created_at":"2025-12-29T21:14:33Z"}]}
{"id":"lettatoolsselector-d6uiz","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:46.061368493Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:46.661612193Z","closed_at":"2026-01-02T09:54:46.661612193Z","close_reason":"Closed","comments":[{"id":3035,"issue_id":"lettatoolsselector-d6uiz","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T09:54:46Z"}]}
{"id":"lettatoolsselector-d7t10","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:37:01.457161056Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:01.944776892Z","closed_at":"2026-01-02T06:37:01.944776892Z","close_reason":"Closed","comments":[{"id":2624,"issue_id":"lettatoolsselector-d7t10","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T06:37:01Z"}]}
{"id":"lettatoolsselector-d87vy","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:55:20.113441505Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:55:20.766080086Z","closed_at":"2026-01-02T18:55:20.766080086Z","close_reason":"Closed","comments":[{"id":3908,"issue_id":"lettatoolsselector-d87vy","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T18:55:20Z"}]}
{"id":"lettatoolsselector-d8atw","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:47:21.68766295Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:47:22.375898581Z","closed_at":"2026-01-02T21:47:22.375898581Z","close_reason":"Closed","comments":[{"id":4245,"issue_id":"lettatoolsselector-d8atw","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T21:47:22Z"}]}
{"id":"lettatoolsselector-d8b","title":"[Perf] Cache environment-based config at startup","description":"## Problem\nConfig endpoints parse environment variables on every request.\n\n**Location:** `routes/config.py:60-77, 135-151, 305-340`\n\n```python\n# Line 65-71\nconfig = {\n    \"enabled\": os.getenv('RERANKER_ENABLED', 'true').lower() == 'true',\n    \"model\": os.getenv('RERANKER_MODEL', 'qwen3-reranker-4b'),\n    ...\n}\n```\n\n## Impact\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\nCache config values at startup, only reload on explicit refresh:\n\n```python\n_cached_config: dict = None\n_config_loaded_at: float = 0\n\ndef _load_config() -\u003e dict:\n    return {\n        \"reranker\": {\n            \"enabled\": os.getenv('RERANKER_ENABLED', 'true').lower() == 'true',\n            \"model\": os.getenv('RERANKER_MODEL', 'qwen3-reranker-4b'),\n            # ...\n        },\n        \"weaviate\": {\n            # ...\n        }\n    }\n\ndef get_cached_config() -\u003e dict:\n    global _cached_config, _config_loaded_at\n    if _cached_config is None:\n        _cached_config = _load_config()\n        _config_loaded_at = time.time()\n    return _cached_config\n\ndef refresh_config():\n    global _cached_config\n    _cached_config = _load_config()\n```\n\n## Acceptance Criteria\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T01:51:01.443245463Z","updated_at":"2025-12-29T19:37:19.127415932Z","closed_at":"2025-12-29T19:37:19.127415932Z","close_reason":"Added config caching at startup with _reload_config_cache(), get_cached_config(), and /api/v1/config/refresh endpoint","labels":["performance"]}
{"id":"lettatoolsselector-d8mw9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:34.783816991Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:34.783816991Z","comments":[{"id":1781,"issue_id":"lettatoolsselector-d8mw9","author":"root","text":"Synced from Beads: lettatoolsselector-ym9g\n\n---\nHuly Issue: LTSEL-595","created_at":"2026-01-02T03:27:35Z"}]}
{"id":"lettatoolsselector-d8we2","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:03:07.085443439Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:07.564698091Z","closed_at":"2026-01-02T07:03:07.564698091Z","close_reason":"Closed","comments":[{"id":2680,"issue_id":"lettatoolsselector-d8we2","author":"root","text":"Synced from Huly: LTSEL-228","created_at":"2026-01-02T07:03:07Z"}]}
{"id":"lettatoolsselector-d90se","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:46.172104592Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:46.172104592Z","comments":[{"id":2250,"issue_id":"lettatoolsselector-d90se","author":"root","text":"Synced from Beads: lettatoolsselector-gr47\n\n---\nHuly Issue: LTSEL-501","created_at":"2026-01-02T03:44:46Z"}]}
{"id":"lettatoolsselector-d9b6","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:46.344341017Z","updated_at":"2025-12-29T21:33:25.113941186Z","closed_at":"2025-12-29T21:33:25.113941186Z","close_reason":"Duplicate","comments":[{"id":593,"issue_id":"lettatoolsselector-d9b6","author":"root","text":"Synced from Beads: lettatoolsselector-omu\n\n---\nHuly Issue: LTSEL-157","created_at":"2025-12-29T20:34:46Z"}]}
{"id":"lettatoolsselector-d9jt","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:05.134855736Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:05.454014509Z","closed_at":"2026-01-02T02:35:05.454014509Z","close_reason":"Closed","comments":[{"id":1328,"issue_id":"lettatoolsselector-d9jt","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T02:35:05Z"}]}
{"id":"lettatoolsselector-d9t7","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:45.068144992Z","updated_at":"2025-12-29T21:33:28.757400495Z","closed_at":"2025-12-29T21:33:28.757400495Z","close_reason":"Duplicate","comments":[{"id":412,"issue_id":"lettatoolsselector-d9t7","author":"root","text":"Synced from Beads: lettatoolsselector-h76\n\n---\nHuly Issue: LTSEL-188","created_at":"2025-12-29T20:19:45Z"}]}
{"id":"lettatoolsselector-dae","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:57:02.744476808Z","updated_at":"2025-12-29T21:33:45.134306569Z","closed_at":"2025-12-29T21:33:45.134306569Z","close_reason":"Duplicate","comments":[{"id":264,"issue_id":"lettatoolsselector-dae","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T19:57:02Z"}]}
{"id":"lettatoolsselector-dafq","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:13.20120062Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:13.545828222Z","closed_at":"2026-01-02T03:06:13.545828222Z","close_reason":"Closed","comments":[{"id":1524,"issue_id":"lettatoolsselector-dafq","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T03:06:13Z"}]}
{"id":"lettatoolsselector-dai","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","description":"Move remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools  \n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n~450 lines removed from api_server.py","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T00:41:37.690094322Z","updated_at":"2025-12-29T15:45:40.101009704Z","closed_at":"2025-12-29T15:45:40.101009704Z","close_reason":"Closed","labels":["refactor","services-layer"]}
{"id":"lettatoolsselector-dail4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:18.760953614Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:18.760953614Z","comments":[{"id":2011,"issue_id":"lettatoolsselector-dail4","author":"root","text":"Synced from Beads: lettatoolsselector-cx37\n\n---\nHuly Issue: LTSEL-304","created_at":"2026-01-02T03:29:19Z"}]}
{"id":"lettatoolsselector-dam0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:49.422812921Z","updated_at":"2025-12-30T01:48:41.436252758Z","comments":[{"id":957,"issue_id":"lettatoolsselector-dam0","author":"root","text":"Synced from Beads: lettatoolsselector-5na\n\n---\nHuly Issue: LTSEL-83","created_at":"2025-12-29T21:14:49Z"}]}
{"id":"lettatoolsselector-dapg","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:20:27.864628995Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:28.235833801Z","closed_at":"2026-01-02T02:20:28.235833801Z","close_reason":"Closed","comments":[{"id":1304,"issue_id":"lettatoolsselector-dapg","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T02:20:28Z"}]}
{"id":"lettatoolsselector-db9is","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:40.866502418Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:41.564034268Z","closed_at":"2026-01-02T08:20:41.564034268Z","close_reason":"Closed","comments":[{"id":2855,"issue_id":"lettatoolsselector-db9is","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T08:20:41Z"}]}
{"id":"lettatoolsselector-dbjac","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:30.096401891Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:30.096401891Z","comments":[{"id":1770,"issue_id":"lettatoolsselector-dbjac","author":"root","text":"Synced from Beads: lettatoolsselector-1l9s\n\n---\nHuly Issue: LTSEL-611","created_at":"2026-01-02T03:27:30Z"}]}
{"id":"lettatoolsselector-dcmu3","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:19.182517705Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:19.808300686Z","closed_at":"2026-01-02T14:05:19.808300686Z","close_reason":"Closed","comments":[{"id":3397,"issue_id":"lettatoolsselector-dcmu3","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T14:05:19Z"}]}
{"id":"lettatoolsselector-dcwdq","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:23.459663071Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:23.972246404Z","closed_at":"2026-01-02T03:30:23.972246404Z","close_reason":"Closed","comments":[{"id":2103,"issue_id":"lettatoolsselector-dcwdq","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T03:30:23Z"}]}
{"id":"lettatoolsselector-dcydo","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:38.916022744Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:38.916022744Z","comments":[{"id":2197,"issue_id":"lettatoolsselector-dcydo","author":"root","text":"Synced from Beads: lettatoolsselector-a754\n\n---\nHuly Issue: LTSEL-664","created_at":"2026-01-02T03:43:39Z"}]}
{"id":"lettatoolsselector-dd3aq","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:29:17.248349436Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:17.889897531Z","closed_at":"2026-01-02T18:29:17.889897531Z","close_reason":"Closed","comments":[{"id":3855,"issue_id":"lettatoolsselector-dd3aq","author":"root","text":"Synced from Huly: LTSEL-234","created_at":"2026-01-02T18:29:17Z"}]}
{"id":"lettatoolsselector-ddhls","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:56.859068308Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:56.859068308Z","comments":[{"id":2257,"issue_id":"lettatoolsselector-ddhls","author":"root","text":"Synced from Beads: lettatoolsselector-b1kw\n\n---\nHuly Issue: LTSEL-456","created_at":"2026-01-02T03:44:57Z"}]}
{"id":"lettatoolsselector-ddmyu","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:01:52.62520782Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:01:54.049123227Z","closed_at":"2026-01-02T08:01:54.049123227Z","close_reason":"Closed","comments":[{"id":2791,"issue_id":"lettatoolsselector-ddmyu","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T08:01:53Z"}]}
{"id":"lettatoolsselector-ddoul","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:35:49.072318933Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:35:50.500310427Z","closed_at":"2026-01-02T10:35:50.500310427Z","close_reason":"Closed","comments":[{"id":3070,"issue_id":"lettatoolsselector-ddoul","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T10:35:50Z"}]}
{"id":"lettatoolsselector-ddr3v","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:42:58.777099658Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:59.287423004Z","closed_at":"2026-01-02T07:42:59.287423004Z","close_reason":"Closed","comments":[{"id":2764,"issue_id":"lettatoolsselector-ddr3v","author":"root","text":"Synced from Huly: LTSEL-226","created_at":"2026-01-02T07:42:59Z"}]}
{"id":"lettatoolsselector-de894","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:52.947654924Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:53.504872151Z","closed_at":"2026-01-02T07:23:53.504872151Z","close_reason":"Closed","comments":[{"id":2708,"issue_id":"lettatoolsselector-de894","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T07:23:53Z"}]}
{"id":"lettatoolsselector-defk2","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:28.46959328Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:28.915908195Z","closed_at":"2026-01-02T05:41:28.915908195Z","close_reason":"Closed","comments":[{"id":2498,"issue_id":"lettatoolsselector-defk2","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T05:41:28Z"}]}
{"id":"lettatoolsselector-deok4","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:01:54.473701251Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:01:55.132644114Z","closed_at":"2026-01-02T08:01:55.132644114Z","close_reason":"Closed","comments":[{"id":2792,"issue_id":"lettatoolsselector-deok4","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T08:01:54Z"}]}
{"id":"lettatoolsselector-dfpx1","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:54:23.745890938Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:54:24.391214159Z","closed_at":"2026-01-02T18:54:24.391214159Z","close_reason":"Closed","comments":[{"id":3905,"issue_id":"lettatoolsselector-dfpx1","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T18:54:24Z"}]}
{"id":"lettatoolsselector-dgao8","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:27:43.937230814Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:27:44.551731899Z","closed_at":"2026-01-02T19:27:44.551731899Z","close_reason":"Closed","comments":[{"id":3962,"issue_id":"lettatoolsselector-dgao8","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T19:27:44Z"}]}
{"id":"lettatoolsselector-dghc1","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:43.713911129Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:44.167104832Z","closed_at":"2026-01-02T04:39:44.167104832Z","close_reason":"Closed","comments":[{"id":2426,"issue_id":"lettatoolsselector-dghc1","author":"root","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2026-01-02T04:39:43Z"}]}
{"id":"lettatoolsselector-dgn2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:07.488660652Z","updated_at":"2025-12-30T01:46:48.146348682Z","comments":[{"id":950,"issue_id":"lettatoolsselector-dgn2","author":"root","text":"Synced from Beads: lettatoolsselector-th4\n\n---\nHuly Issue: LTSEL-94","created_at":"2025-12-29T21:14:07Z"}]}
{"id":"lettatoolsselector-dgoey","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:55:03.116379271Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:55:03.639907622Z","closed_at":"2026-01-02T09:55:03.639907622Z","close_reason":"Closed","comments":[{"id":3039,"issue_id":"lettatoolsselector-dgoey","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T09:55:03Z"}]}
{"id":"lettatoolsselector-dgome","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:22:47.907236937Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:22:48.568087231Z","closed_at":"2026-01-02T21:22:48.568087231Z","close_reason":"Closed","comments":[{"id":4201,"issue_id":"lettatoolsselector-dgome","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T21:22:48Z"}]}
{"id":"lettatoolsselector-dgx9e","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:39.17906419Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:39.651389878Z","closed_at":"2026-01-02T07:02:39.651389878Z","close_reason":"Closed","comments":[{"id":2659,"issue_id":"lettatoolsselector-dgx9e","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T07:02:39Z"}]}
{"id":"lettatoolsselector-dhk","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:52:40.88077533Z","updated_at":"2025-12-29T21:33:45.495201244Z","closed_at":"2025-12-29T21:33:45.495201244Z","close_reason":"Duplicate","comments":[{"id":252,"issue_id":"lettatoolsselector-dhk","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T19:52:41Z"}]}
{"id":"lettatoolsselector-dhupi","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:07:00.605957494Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:07:01.385836973Z","closed_at":"2026-01-02T17:07:01.385836973Z","close_reason":"Closed","comments":[{"id":3720,"issue_id":"lettatoolsselector-dhupi","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T17:07:01Z"}]}
{"id":"lettatoolsselector-di90","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:01.468724038Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:01.808884065Z","closed_at":"2026-01-02T01:25:01.808884065Z","close_reason":"Closed","comments":[{"id":1238,"issue_id":"lettatoolsselector-di90","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T01:25:01Z"}]}
{"id":"lettatoolsselector-dim9g","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:30.903467419Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:31.516592589Z","closed_at":"2026-01-02T18:25:31.516592589Z","close_reason":"Closed","comments":[{"id":3839,"issue_id":"lettatoolsselector-dim9g","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T18:25:31Z"}]}
{"id":"lettatoolsselector-dj8oe","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:06:15.837976898Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:06:17.683530038Z","closed_at":"2026-01-02T20:06:17.683530038Z","close_reason":"Closed","comments":[{"id":4057,"issue_id":"lettatoolsselector-dj8oe","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T20:06:17Z"}]}
{"id":"lettatoolsselector-djnqp","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:51:48.386607998Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:51:49.129828144Z","closed_at":"2026-01-02T22:51:49.129828144Z","close_reason":"Closed","comments":[{"id":4381,"issue_id":"lettatoolsselector-djnqp","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T22:51:48Z"}]}
{"id":"lettatoolsselector-dkpzu","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:04:01.408947427Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:04:01.827051653Z","closed_at":"2026-01-02T08:04:01.827051653Z","close_reason":"Closed"}
{"id":"lettatoolsselector-dl8jj","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:02:40.620980569Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:41.168932222Z","closed_at":"2026-01-02T12:02:41.168932222Z","close_reason":"Closed","comments":[{"id":3283,"issue_id":"lettatoolsselector-dl8jj","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T12:02:40Z"}]}
{"id":"lettatoolsselector-dlax5","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:01.834161474Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:02.466949339Z","closed_at":"2026-01-02T20:16:02.466949339Z","close_reason":"Closed","comments":[{"id":4065,"issue_id":"lettatoolsselector-dlax5","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T20:16:02Z"}]}
{"id":"lettatoolsselector-dlu5k","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:19:53.623826256Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:19:54.470924326Z","closed_at":"2026-01-02T08:19:54.470924326Z","close_reason":"Closed","comments":[{"id":2837,"issue_id":"lettatoolsselector-dlu5k","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T08:19:54Z"}]}
{"id":"lettatoolsselector-dmq2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:13:28.174510635Z","updated_at":"2025-12-30T01:46:11.835881349Z","comments":[{"id":945,"issue_id":"lettatoolsselector-dmq2","author":"root","text":"Synced from Beads: lettatoolsselector-th4\n\n---\nHuly Issue: LTSEL-94","created_at":"2025-12-29T21:13:28Z"}]}
{"id":"lettatoolsselector-dness","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:39:03.51933814Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:04.100526294Z","closed_at":"2026-01-02T19:39:04.100526294Z","close_reason":"Closed","comments":[{"id":3982,"issue_id":"lettatoolsselector-dness","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T19:39:03Z"}]}
{"id":"lettatoolsselector-dngc9","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:05.581112276Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:06.190982014Z","closed_at":"2026-01-02T21:48:06.190982014Z","close_reason":"Closed","comments":[{"id":4254,"issue_id":"lettatoolsselector-dngc9","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T21:48:05Z"}]}
{"id":"lettatoolsselector-dnuzf","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:27:14.862274338Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:27:15.441044441Z","closed_at":"2026-01-02T17:27:15.441044441Z","close_reason":"Closed","comments":[{"id":3749,"issue_id":"lettatoolsselector-dnuzf","author":"root","text":"Synced from Huly: LTSEL-218","created_at":"2026-01-02T17:27:15Z"}]}
{"id":"lettatoolsselector-dnw","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:55:56.906202713Z","updated_at":"2025-12-29T21:33:45.267830542Z","closed_at":"2025-12-29T21:33:45.267830542Z","close_reason":"Duplicate","comments":[{"id":260,"issue_id":"lettatoolsselector-dnw","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T19:55:57Z"}]}
{"id":"lettatoolsselector-do2zg","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:21:09.286825841Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:09.703002176Z","closed_at":"2026-01-02T08:21:09.703002176Z","close_reason":"Closed"}
{"id":"lettatoolsselector-dohd5","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:39.289932861Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:39.836162727Z","closed_at":"2026-01-02T07:23:39.836162727Z","close_reason":"Closed","comments":[{"id":2695,"issue_id":"lettatoolsselector-dohd5","author":"root","text":"Synced from Huly: LTSEL-45","created_at":"2026-01-02T07:23:39Z"}]}
{"id":"lettatoolsselector-dowm1","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:47.962214284Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:48.464559099Z","closed_at":"2026-01-02T10:57:48.464559099Z","close_reason":"Closed","comments":[{"id":3120,"issue_id":"lettatoolsselector-dowm1","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T10:57:48Z"}]}
{"id":"lettatoolsselector-dq0w6","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:57:12.102861999Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:12.649801749Z","closed_at":"2026-01-02T09:57:12.649801749Z","close_reason":"Closed","comments":[{"id":3053,"issue_id":"lettatoolsselector-dq0w6","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T09:57:12Z"}]}
{"id":"lettatoolsselector-dqj55","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:04:45.384639503Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:04:45.908782577Z","closed_at":"2026-01-02T21:04:45.908782577Z","close_reason":"Closed"}
{"id":"lettatoolsselector-dqjsh","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:40.731376959Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:41.264958165Z","closed_at":"2026-01-02T08:02:41.264958165Z","close_reason":"Closed","comments":[{"id":2811,"issue_id":"lettatoolsselector-dqjsh","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T08:02:41Z"}]}
{"id":"lettatoolsselector-drbdf","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:14:43.086528007Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:14:43.714948867Z","closed_at":"2026-01-02T22:14:43.714948867Z","close_reason":"Closed","comments":[{"id":4293,"issue_id":"lettatoolsselector-drbdf","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T22:14:43Z"}]}
{"id":"lettatoolsselector-drgjh","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:59:24.890978155Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:25.49343741Z","closed_at":"2026-01-02T19:59:25.49343741Z","close_reason":"Closed","comments":[{"id":4031,"issue_id":"lettatoolsselector-drgjh","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T19:59:25Z"}]}
{"id":"lettatoolsselector-drs4m","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:19:57.397059815Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:19:57.820541987Z","closed_at":"2026-01-02T04:19:57.820541987Z","close_reason":"Closed","comments":[{"id":2347,"issue_id":"lettatoolsselector-drs4m","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T04:19:57Z"}]}
{"id":"lettatoolsselector-druqt","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:54:04.251126874Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:54:06.133380201Z","closed_at":"2026-01-02T18:54:06.133380201Z","close_reason":"Closed","comments":[{"id":3903,"issue_id":"lettatoolsselector-druqt","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T18:54:05Z"}]}
{"id":"lettatoolsselector-ds21i","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:00:13.049703707Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:00:14.339632322Z","closed_at":"2026-01-02T13:00:14.339632322Z","close_reason":"Closed","comments":[{"id":3341,"issue_id":"lettatoolsselector-ds21i","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T13:00:13Z"}]}
{"id":"lettatoolsselector-ds9b0","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:11:55.391176157Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:11:55.975031911Z","closed_at":"2026-01-02T16:11:55.975031911Z","close_reason":"Closed","comments":[{"id":3649,"issue_id":"lettatoolsselector-ds9b0","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T16:11:55Z"}]}
{"id":"lettatoolsselector-dser6","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:39:21.395147523Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:39:21.916922438Z","closed_at":"2026-01-02T10:39:21.916922438Z","close_reason":"Closed","comments":[{"id":3112,"issue_id":"lettatoolsselector-dser6","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T10:39:21Z"}]}
{"id":"lettatoolsselector-dshl2","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T16:17:54.967145047Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:17:55.595058773Z","closed_at":"2026-01-02T16:17:55.595058773Z","close_reason":"Closed","comments":[{"id":3668,"issue_id":"lettatoolsselector-dshl2","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T16:17:55Z"}]}
{"id":"lettatoolsselector-dt4yb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:15.133928068Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:15.133928068Z","comments":[{"id":2004,"issue_id":"lettatoolsselector-dt4yb","author":"root","text":"Synced from Beads: lettatoolsselector-kuad\n\n---\nHuly Issue: LTSEL-311","created_at":"2026-01-02T03:29:15Z"}]}
{"id":"lettatoolsselector-dt7m","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:09.616925724Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:09.870011318Z","closed_at":"2026-01-02T01:25:09.870011318Z","close_reason":"Closed"}
{"id":"lettatoolsselector-dtaca","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:56.228412656Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:56.765433541Z","closed_at":"2026-01-02T10:57:56.765433541Z","close_reason":"Closed","comments":[{"id":3126,"issue_id":"lettatoolsselector-dtaca","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T10:57:56Z"}]}
{"id":"lettatoolsselector-dtynx","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:44:39.77206222Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:44:40.391552119Z","closed_at":"2026-01-02T09:44:40.391552119Z","close_reason":"Closed","comments":[{"id":3021,"issue_id":"lettatoolsselector-dtynx","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T09:44:40Z"}]}
{"id":"lettatoolsselector-du0ny","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:31.900754122Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:32.481905362Z","closed_at":"2026-01-02T06:17:32.481905362Z","close_reason":"Closed","comments":[{"id":2548,"issue_id":"lettatoolsselector-du0ny","author":"root","text":"Synced from Huly: LTSEL-51","created_at":"2026-01-02T06:17:32Z"}]}
{"id":"lettatoolsselector-du1n","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:34:59.848478487Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:00.251410343Z","closed_at":"2026-01-02T02:35:00.251410343Z","close_reason":"Closed","comments":[{"id":1319,"issue_id":"lettatoolsselector-du1n","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T02:35:00Z"}]}
{"id":"lettatoolsselector-duejf","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:56:46.786658871Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:47.182804517Z","closed_at":"2026-01-02T08:56:47.182804517Z","close_reason":"Closed"}
{"id":"lettatoolsselector-dumxe","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:04:25.904853514Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:04:26.591550629Z","closed_at":"2026-01-02T12:04:26.591550629Z","close_reason":"Closed","comments":[{"id":3294,"issue_id":"lettatoolsselector-dumxe","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T12:04:26Z"}]}
{"id":"lettatoolsselector-duxj7","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:07:07.330110989Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:07:07.905542654Z","closed_at":"2026-01-02T17:07:07.905542654Z","close_reason":"Closed","comments":[{"id":3721,"issue_id":"lettatoolsselector-duxj7","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T17:07:07Z"}]}
{"id":"lettatoolsselector-dv99u","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:25.264582445Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:25.542709243Z","closed_at":"2026-01-02T03:30:25.542709243Z","close_reason":"Closed"}
{"id":"lettatoolsselector-dvm2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:37.390937041Z","updated_at":"2025-12-29T21:33:44.135764573Z","closed_at":"2025-12-29T21:33:44.135764573Z","close_reason":"Duplicate","comments":[{"id":368,"issue_id":"lettatoolsselector-dvm2","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T20:15:37Z"}]}
{"id":"lettatoolsselector-dvmd8","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:48:44.086082195Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:44.552798202Z","closed_at":"2026-01-02T03:48:44.552798202Z","close_reason":"Closed","comments":[{"id":2337,"issue_id":"lettatoolsselector-dvmd8","author":"root","text":"Synced from Huly: LTSEL-50","created_at":"2026-01-02T03:48:44Z"}]}
{"id":"lettatoolsselector-dw1de","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:11:06.273710501Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:06.821954244Z","closed_at":"2026-01-02T11:11:06.821954244Z","close_reason":"Closed","comments":[{"id":3187,"issue_id":"lettatoolsselector-dw1de","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T11:11:06Z"}]}
{"id":"lettatoolsselector-dwshu","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:42:48.627651024Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:42:48.980887332Z","closed_at":"2026-01-02T09:42:48.980887332Z","close_reason":"Closed"}
{"id":"lettatoolsselector-dx1v","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:47.345056847Z","updated_at":"2025-12-29T21:33:31.06264246Z","closed_at":"2025-12-29T21:33:31.06264246Z","close_reason":"Duplicate","comments":[{"id":339,"issue_id":"lettatoolsselector-dx1v","author":"root","text":"Synced from Beads: lettatoolsselector-mfj\n\n---\nHuly Issue: LTSEL-202","created_at":"2025-12-29T20:12:47Z"}]}
{"id":"lettatoolsselector-dxf5","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:05.288630772Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:05.663200354Z","closed_at":"2026-01-02T01:25:05.663200354Z","close_reason":"Closed","comments":[{"id":1242,"issue_id":"lettatoolsselector-dxf5","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T01:25:05Z"}]}
{"id":"lettatoolsselector-dxox","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:41.009087575Z","updated_at":"2025-12-29T21:33:30.544460999Z","closed_at":"2025-12-29T21:33:30.544460999Z","close_reason":"Duplicate","comments":[{"id":348,"issue_id":"lettatoolsselector-dxox","author":"root","text":"Synced from Beads: lettatoolsselector-bte\n\n---\nHuly Issue: LTSEL-197","created_at":"2025-12-29T20:13:41Z"}]}
{"id":"lettatoolsselector-dz2mt","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:49.104386978Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:49.635786735Z","closed_at":"2026-01-02T11:09:49.635786735Z","close_reason":"Closed","comments":[{"id":3179,"issue_id":"lettatoolsselector-dz2mt","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T11:09:49Z"}]}
{"id":"lettatoolsselector-dzfjw","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:46.473872398Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:46.473872398Z","comments":[{"id":2207,"issue_id":"lettatoolsselector-dzfjw","author":"root","text":"Synced from Huly: LTSEL-643","created_at":"2026-01-02T03:43:46Z"}]}
{"id":"lettatoolsselector-dzhel","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:24:02.682717539Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:24:03.294789567Z","closed_at":"2026-01-02T22:24:03.294789567Z","close_reason":"Closed","comments":[{"id":4328,"issue_id":"lettatoolsselector-dzhel","author":"root","text":"Synced from Huly: LTSEL-49","created_at":"2026-01-02T22:24:03Z"}]}
{"id":"lettatoolsselector-dzl1m","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:50:53.405576123Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:50:54.141544208Z","closed_at":"2026-01-02T23:50:54.141544208Z","close_reason":"Closed","comments":[{"id":4395,"issue_id":"lettatoolsselector-dzl1m","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T23:50:53Z"}]}
{"id":"lettatoolsselector-dzqn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:32:15.553592067Z","updated_at":"2025-12-30T02:38:37.522678751Z","comments":[{"id":1064,"issue_id":"lettatoolsselector-dzqn","author":"root","text":"Synced from Beads: lettatoolsselector-7dj\n\n---\nHuly Issue: LTSEL-55","created_at":"2025-12-29T21:32:15Z"}]}
{"id":"lettatoolsselector-dzsh9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:35.47861087Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:35.47861087Z","comments":[{"id":1921,"issue_id":"lettatoolsselector-dzsh9","author":"root","text":"Synced from Beads: lettatoolsselector-idln\n\n---\nHuly Issue: LTSEL-409","created_at":"2026-01-02T03:28:35Z"}]}
{"id":"lettatoolsselector-e0ay9","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:33.13060157Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:33.661261321Z","closed_at":"2026-01-02T09:40:33.661261321Z","close_reason":"Closed","comments":[{"id":2997,"issue_id":"lettatoolsselector-e0ay9","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T09:40:33Z"}]}
{"id":"lettatoolsselector-e0kf2","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:05.829421599Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:06.266191746Z","closed_at":"2026-01-02T03:47:06.266191746Z","close_reason":"Closed","comments":[{"id":2303,"issue_id":"lettatoolsselector-e0kf2","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T03:47:06Z"}]}
{"id":"lettatoolsselector-e0opi","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:06.554118332Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:06.998131877Z","closed_at":"2026-01-02T04:20:06.998131877Z","close_reason":"Closed","comments":[{"id":2359,"issue_id":"lettatoolsselector-e0opi","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T04:20:06Z"}]}
{"id":"lettatoolsselector-e0q","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:55:24.681298917Z","updated_at":"2025-12-29T21:33:45.297798853Z","closed_at":"2025-12-29T21:33:45.297798853Z","close_reason":"Duplicate","comments":[{"id":259,"issue_id":"lettatoolsselector-e0q","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T19:55:24Z"}]}
{"id":"lettatoolsselector-e0ubk","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:00.712657409Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:01.182176401Z","closed_at":"2026-01-02T06:00:01.182176401Z","close_reason":"Closed","comments":[{"id":2518,"issue_id":"lettatoolsselector-e0ubk","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T06:00:00Z"}]}
{"id":"lettatoolsselector-e19lj","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:04.358614708Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:04.983336477Z","closed_at":"2026-01-02T09:40:04.983336477Z","close_reason":"Closed","comments":[{"id":2986,"issue_id":"lettatoolsselector-e19lj","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T09:40:04Z"}]}
{"id":"lettatoolsselector-e2sjh","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:25:10.523550497Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:25:11.029080393Z","closed_at":"2026-01-02T07:25:11.029080393Z","close_reason":"Closed","comments":[{"id":2737,"issue_id":"lettatoolsselector-e2sjh","author":"root","text":"Synced from Huly: LTSEL-236","created_at":"2026-01-02T07:25:10Z"}]}
{"id":"lettatoolsselector-e2vq","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:42.311610084Z","updated_at":"2025-12-29T21:33:30.480606826Z","closed_at":"2025-12-29T21:33:30.480606826Z","close_reason":"Duplicate","comments":[{"id":350,"issue_id":"lettatoolsselector-e2vq","author":"root","text":"Synced from Beads: lettatoolsselector-7yx\n\n---\nHuly Issue: LTSEL-206","created_at":"2025-12-29T20:13:42Z"}]}
{"id":"lettatoolsselector-e2wr","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:41.589675636Z","updated_at":"2025-12-29T21:33:28.498754218Z","closed_at":"2025-12-29T21:33:28.498754218Z","close_reason":"Duplicate","comments":[{"id":425,"issue_id":"lettatoolsselector-e2wr","author":"root","text":"Synced from Beads: lettatoolsselector-vn0\n\n---\nHuly Issue: LTSEL-192","created_at":"2025-12-29T20:20:41Z"}]}
{"id":"lettatoolsselector-e3cfr","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:15.912229103Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:16.494015429Z","closed_at":"2026-01-02T08:02:16.494015429Z","close_reason":"Closed","comments":[{"id":2799,"issue_id":"lettatoolsselector-e3cfr","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T08:02:16Z"}]}
{"id":"lettatoolsselector-e3ch","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:15:21.920458984Z","updated_at":"2025-12-30T01:50:18.874069107Z","comments":[{"id":965,"issue_id":"lettatoolsselector-e3ch","author":"root","text":"Synced from Beads: lettatoolsselector-76g\n\n---\nHuly Issue: LTSEL-95","created_at":"2025-12-29T21:15:22Z"}]}
{"id":"lettatoolsselector-e3gdr","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:21:39.288398767Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:39.647596373Z","closed_at":"2026-01-02T08:21:39.647596373Z","close_reason":"Closed"}
{"id":"lettatoolsselector-e3jce","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:43.977390796Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:43.977390796Z","comments":[{"id":1939,"issue_id":"lettatoolsselector-e3jce","author":"root","text":"Synced from Beads: lettatoolsselector-z5uk\n\n---\nHuly Issue: LTSEL-384","created_at":"2026-01-02T03:28:44Z"}]}
{"id":"lettatoolsselector-e3o9b","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:09.851219544Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:10.612255791Z","closed_at":"2026-01-02T19:20:10.612255791Z","close_reason":"Closed","comments":[{"id":3926,"issue_id":"lettatoolsselector-e3o9b","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T19:20:10Z"}]}
{"id":"lettatoolsselector-e40u2","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:58:36.927949286Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:37.497532405Z","closed_at":"2026-01-02T10:58:37.497532405Z","close_reason":"Closed","comments":[{"id":3140,"issue_id":"lettatoolsselector-e40u2","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T10:58:37Z"}]}
{"id":"lettatoolsselector-e4np","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:27:24.383771083Z","updated_at":"2025-12-30T02:01:56.805268506Z","comments":[{"id":1041,"issue_id":"lettatoolsselector-e4np","author":"root","text":"Synced from Beads: lettatoolsselector-cgd\n\n---\nHuly Issue: LTSEL-73","created_at":"2025-12-29T21:27:24Z"}]}
{"id":"lettatoolsselector-e4qd4","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:09:47.051198152Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:47.673816652Z","closed_at":"2026-01-02T14:09:47.673816652Z","close_reason":"Closed","comments":[{"id":3425,"issue_id":"lettatoolsselector-e4qd4","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T14:09:47Z"}]}
{"id":"lettatoolsselector-e5ej","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:03.185116002Z","updated_at":"2025-12-29T21:33:26.171872113Z","closed_at":"2025-12-29T21:33:26.171872113Z","close_reason":"Duplicate","comments":[{"id":546,"issue_id":"lettatoolsselector-e5ej","author":"root","text":"Synced from Beads: lettatoolsselector-dlg\n\n---\nHuly Issue: LTSEL-164","created_at":"2025-12-29T20:30:03Z"}]}
{"id":"lettatoolsselector-e60o1","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:37.649965898Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:38.340275695Z","closed_at":"2026-01-02T20:55:38.340275695Z","close_reason":"Closed","comments":[{"id":4157,"issue_id":"lettatoolsselector-e60o1","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T20:55:38Z"}]}
{"id":"lettatoolsselector-e62ip","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:02.858412177Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:03.321123455Z","closed_at":"2026-01-02T06:37:03.321123455Z","close_reason":"Closed","comments":[{"id":2625,"issue_id":"lettatoolsselector-e62ip","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T06:37:03Z"}]}
{"id":"lettatoolsselector-e6ubr","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:08.394580349Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:08.394580349Z","comments":[{"id":2267,"issue_id":"lettatoolsselector-e6ubr","author":"root","text":"Synced from Beads: lettatoolsselector-ck3e\n\n---\nHuly Issue: LTSEL-417","created_at":"2026-01-02T03:45:08Z"}]}
{"id":"lettatoolsselector-e6y6","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:16.661148319Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:16.978196997Z","closed_at":"2026-01-02T01:08:16.978196997Z","close_reason":"Closed","comments":[{"id":1165,"issue_id":"lettatoolsselector-e6y6","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T01:08:16Z"}]}
{"id":"lettatoolsselector-e73p","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:16:52.81219102Z","updated_at":"2025-12-30T01:51:41.970620285Z","comments":[{"id":976,"issue_id":"lettatoolsselector-e73p","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T21:16:53Z"}]}
{"id":"lettatoolsselector-e7iwp","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:30:31.673462132Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:30:32.314400938Z","closed_at":"2026-01-02T14:30:32.314400938Z","close_reason":"Closed","comments":[{"id":3454,"issue_id":"lettatoolsselector-e7iwp","author":"root","text":"Synced from Huly: LTSEL-17","created_at":"2026-01-02T14:30:32Z"}]}
{"id":"lettatoolsselector-e7nkv","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:38:05.109455013Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:38:05.717364318Z","closed_at":"2026-01-02T10:38:05.717364318Z","close_reason":"Closed","comments":[{"id":3105,"issue_id":"lettatoolsselector-e7nkv","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T10:38:05Z"}]}
{"id":"lettatoolsselector-e7z7b","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:29:38.855756171Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:39.456309425Z","closed_at":"2026-01-02T17:29:39.456309425Z","close_reason":"Closed","comments":[{"id":3758,"issue_id":"lettatoolsselector-e7z7b","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T17:29:39Z"}]}
{"id":"lettatoolsselector-e86jx","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:48:55.151419191Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:48:55.725875343Z","closed_at":"2026-01-02T18:48:55.725875343Z","close_reason":"Closed","comments":[{"id":3880,"issue_id":"lettatoolsselector-e86jx","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T18:48:55Z"}]}
{"id":"lettatoolsselector-e8fqm","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:40.130137063Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:40.792513264Z","closed_at":"2026-01-02T06:17:40.792513264Z","close_reason":"Closed","comments":[{"id":2555,"issue_id":"lettatoolsselector-e8fqm","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T06:17:40Z"}]}
{"id":"lettatoolsselector-e8py1","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:41.537203742Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:42.333671183Z","closed_at":"2026-01-02T20:55:42.333671183Z","close_reason":"Closed","comments":[{"id":4158,"issue_id":"lettatoolsselector-e8py1","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T20:55:42Z"}]}
{"id":"lettatoolsselector-e8s9x","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:02.10208206Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:02.848867744Z","closed_at":"2026-01-02T21:48:02.848867744Z","close_reason":"Closed","comments":[{"id":4253,"issue_id":"lettatoolsselector-e8s9x","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T21:48:02Z"}]}
{"id":"lettatoolsselector-e92j7","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:47.296639751Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:47.848380434Z","closed_at":"2026-01-02T13:36:47.848380434Z","close_reason":"Closed","comments":[{"id":3363,"issue_id":"lettatoolsselector-e92j7","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T13:36:47Z"}]}
{"id":"lettatoolsselector-e98pp","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:52.603753926Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:53.176266931Z","closed_at":"2026-01-02T05:59:53.176266931Z","close_reason":"Closed","comments":[{"id":2508,"issue_id":"lettatoolsselector-e98pp","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T05:59:52Z"}]}
{"id":"lettatoolsselector-e9iq0","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:43:45.660162143Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:46.13632604Z","closed_at":"2026-01-02T07:43:46.13632604Z","close_reason":"Closed","comments":[{"id":2778,"issue_id":"lettatoolsselector-e9iq0","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T07:43:45Z"}]}
{"id":"lettatoolsselector-e9qvx","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:57:23.372452927Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:57:23.958185411Z","closed_at":"2026-01-02T18:57:23.958185411Z","close_reason":"Closed","comments":[{"id":3914,"issue_id":"lettatoolsselector-e9qvx","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T18:57:23Z"}]}
{"id":"lettatoolsselector-e9x6m","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:02:48.00887077Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:48.58439994Z","closed_at":"2026-01-02T08:02:48.58439994Z","close_reason":"Closed","comments":[{"id":2814,"issue_id":"lettatoolsselector-e9x6m","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T08:02:48Z"}]}
{"id":"lettatoolsselector-ea4jr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:24.737658935Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:24.737658935Z","comments":[{"id":1896,"issue_id":"lettatoolsselector-ea4jr","author":"root","text":"Synced from Beads: lettatoolsselector-z2kn\n\n---\nHuly Issue: LTSEL-442","created_at":"2026-01-02T03:28:24Z"}]}
{"id":"lettatoolsselector-eape","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:56.44361108Z","updated_at":"2025-12-29T21:33:27.108044486Z","closed_at":"2025-12-29T21:33:27.108044486Z","close_reason":"Duplicate","comments":[{"id":491,"issue_id":"lettatoolsselector-eape","author":"root","text":"Synced from Beads: lettatoolsselector-8o8\n\n---\nHuly Issue: LTSEL-175","created_at":"2025-12-29T20:25:56Z"}]}
{"id":"lettatoolsselector-eat68","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:03.417138718Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:04.128819013Z","closed_at":"2026-01-02T07:24:04.128819013Z","close_reason":"Closed","comments":[{"id":2714,"issue_id":"lettatoolsselector-eat68","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T07:24:03Z"}]}
{"id":"lettatoolsselector-eax10","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:54:42.670662029Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:54:43.389930629Z","closed_at":"2026-01-02T21:54:43.389930629Z","close_reason":"Closed","comments":[{"id":4276,"issue_id":"lettatoolsselector-eax10","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T21:54:43Z"}]}
{"id":"lettatoolsselector-eb7n2","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:24:17.153068979Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:17.760180874Z","closed_at":"2026-01-02T07:24:17.760180874Z","close_reason":"Closed","comments":[{"id":2720,"issue_id":"lettatoolsselector-eb7n2","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T07:24:17Z"}]}
{"id":"lettatoolsselector-ebmsn","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T05:41:04.983643363Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:05.461340428Z","closed_at":"2026-01-02T05:41:05.461340428Z","close_reason":"Closed","comments":[{"id":2483,"issue_id":"lettatoolsselector-ebmsn","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T05:41:05Z"}]}
{"id":"lettatoolsselector-eby4u","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:58:50.165867723Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:58:50.685829068Z","closed_at":"2026-01-02T11:58:50.685829068Z","close_reason":"Closed","comments":[{"id":3255,"issue_id":"lettatoolsselector-eby4u","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T11:58:50Z"}]}
{"id":"lettatoolsselector-ecep5","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:10.564832729Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:10.564832729Z","comments":[{"id":2228,"issue_id":"lettatoolsselector-ecep5","author":"root","text":"Synced from Huly: LTSEL-572","created_at":"2026-01-02T03:44:10Z"}]}
{"id":"lettatoolsselector-ed9c8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:55.07746589Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:55.07746589Z","comments":[{"id":1963,"issue_id":"lettatoolsselector-ed9c8","author":"root","text":"Synced from Beads: lettatoolsselector-2lms\n\n---\nHuly Issue: LTSEL-356","created_at":"2026-01-02T03:28:55Z"}]}
{"id":"lettatoolsselector-edh6j","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:39:25.598359124Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:39:26.458292788Z","closed_at":"2026-01-02T10:39:26.458292788Z","close_reason":"Closed","comments":[{"id":3114,"issue_id":"lettatoolsselector-edh6j","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T10:39:26Z"}]}
{"id":"lettatoolsselector-edib8","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:54.344655609Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:54.787552943Z","closed_at":"2026-01-02T04:39:54.787552943Z","close_reason":"Closed","comments":[{"id":2431,"issue_id":"lettatoolsselector-edib8","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T04:39:54Z"}]}
{"id":"lettatoolsselector-ee3sl","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:56.911970339Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:57.467322997Z","closed_at":"2026-01-02T07:23:57.467322997Z","close_reason":"Closed","comments":[{"id":2711,"issue_id":"lettatoolsselector-ee3sl","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T07:23:57Z"}]}
{"id":"lettatoolsselector-eeew","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:22.912686618Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:23.244520465Z","closed_at":"2026-01-02T01:08:23.244520465Z","close_reason":"Closed","comments":[{"id":1176,"issue_id":"lettatoolsselector-eeew","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T01:08:23Z"}]}
{"id":"lettatoolsselector-efcyr","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:51.320792248Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:52.592281246Z","closed_at":"2026-01-02T12:54:52.592281246Z","close_reason":"Closed","comments":[{"id":3313,"issue_id":"lettatoolsselector-efcyr","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T12:54:52Z"}]}
{"id":"lettatoolsselector-efft","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:01:36.390605117Z","updated_at":"2025-12-30T04:14:03.264870461Z","comments":[{"id":825,"issue_id":"lettatoolsselector-efft","author":"root","text":"Synced from Beads: lettatoolsselector-eyc\n\n---\nHuly Issue: LTSEL-121","created_at":"2025-12-29T21:01:36Z"}]}
{"id":"lettatoolsselector-egbh3","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:36:43.590149891Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:43.945236211Z","closed_at":"2026-01-02T10:36:43.945236211Z","close_reason":"Closed"}
{"id":"lettatoolsselector-egeuc","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:44.651414438Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:45.207231227Z","closed_at":"2026-01-02T11:09:45.207231227Z","close_reason":"Closed","comments":[{"id":3178,"issue_id":"lettatoolsselector-egeuc","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T11:09:44Z"}]}
{"id":"lettatoolsselector-eggnm","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:37:19.303478002Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:37:19.906984491Z","closed_at":"2026-01-02T14:37:19.906984491Z","close_reason":"Closed","comments":[{"id":3484,"issue_id":"lettatoolsselector-eggnm","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T14:37:19Z"}]}
{"id":"lettatoolsselector-eh1aj","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:18:54.683801489Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:54.999523437Z","closed_at":"2026-01-02T06:18:54.999523437Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ehex7","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:45:23.155431053Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:45:23.910052953Z","closed_at":"2026-01-02T20:45:23.910052953Z","close_reason":"Closed","comments":[{"id":4148,"issue_id":"lettatoolsselector-ehex7","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T20:45:23Z"}]}
{"id":"lettatoolsselector-ehext","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:57:06.850440694Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:07.232506881Z","closed_at":"2026-01-02T12:57:07.232506881Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ehii5","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:24.063568945Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:24.553272659Z","closed_at":"2026-01-02T06:00:24.553272659Z","close_reason":"Closed","comments":[{"id":2538,"issue_id":"lettatoolsselector-ehii5","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T06:00:24Z"}]}
{"id":"lettatoolsselector-ehtdd","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:03.460634417Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:04.011246194Z","closed_at":"2026-01-02T11:34:04.011246194Z","close_reason":"Closed","comments":[{"id":3219,"issue_id":"lettatoolsselector-ehtdd","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T11:34:03Z"}]}
{"id":"lettatoolsselector-ei5m","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:05.66137834Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:05.988352387Z","closed_at":"2026-01-02T02:35:05.988352387Z","close_reason":"Closed","comments":[{"id":1329,"issue_id":"lettatoolsselector-ei5m","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T02:35:05Z"}]}
{"id":"lettatoolsselector-eiaqf","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:24.26671317Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:24.940900037Z","closed_at":"2026-01-02T15:20:24.940900037Z","close_reason":"Closed","comments":[{"id":3535,"issue_id":"lettatoolsselector-eiaqf","author":"root","text":"Synced from Huly: LTSEL-47","created_at":"2026-01-02T15:20:24Z"}]}
{"id":"lettatoolsselector-eim6i","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:42.213228456Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:42.625190281Z","closed_at":"2026-01-02T03:30:42.625190281Z","close_reason":"Closed","comments":[{"id":2113,"issue_id":"lettatoolsselector-eim6i","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T03:30:42Z"}]}
{"id":"lettatoolsselector-ejbly","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:37:31.50959955Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:31.847677014Z","closed_at":"2026-01-02T10:37:31.847677014Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ejg40","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:50:13.129945988Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:50:13.70850423Z","closed_at":"2026-01-02T18:50:13.70850423Z","close_reason":"Closed","comments":[{"id":3887,"issue_id":"lettatoolsselector-ejg40","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T18:50:13Z"}]}
{"id":"lettatoolsselector-ejr9x","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:05:00.284268672Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:05:01.006901758Z","closed_at":"2026-01-02T17:05:01.006901758Z","close_reason":"Closed","comments":[{"id":3707,"issue_id":"lettatoolsselector-ejr9x","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T17:05:00Z"}]}
{"id":"lettatoolsselector-ejudz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:00.592734865Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:00.592734865Z","comments":[{"id":1841,"issue_id":"lettatoolsselector-ejudz","author":"root","text":"Synced from Beads: lettatoolsselector-u3c9\n\n---\nHuly Issue: LTSEL-511","created_at":"2026-01-02T03:28:00Z"}]}
{"id":"lettatoolsselector-ekd56","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T13:39:25.460766185Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:26.473104431Z","closed_at":"2026-01-02T13:39:26.473104431Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ekm1","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:08.744937134Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:09.085060538Z","closed_at":"2026-01-02T02:35:09.085060538Z","close_reason":"Closed","comments":[{"id":1334,"issue_id":"lettatoolsselector-ekm1","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T02:35:08Z"}]}
{"id":"lettatoolsselector-ekmsa","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:13:02.86165309Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:13:03.436033586Z","closed_at":"2026-01-02T16:13:03.436033586Z","close_reason":"Closed","comments":[{"id":3654,"issue_id":"lettatoolsselector-ekmsa","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T16:13:03Z"}]}
{"id":"lettatoolsselector-ekz9","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:36.448815832Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:36.810246779Z","closed_at":"2026-01-02T02:35:36.810246779Z","close_reason":"Closed","comments":[{"id":1368,"issue_id":"lettatoolsselector-ekz9","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T02:35:36Z"}]}
{"id":"lettatoolsselector-el79q","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:34.031874058Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:34.45976613Z","closed_at":"2026-01-02T04:39:34.45976613Z","close_reason":"Closed","comments":[{"id":2420,"issue_id":"lettatoolsselector-el79q","author":"root","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2026-01-02T04:39:34Z"}]}
{"id":"lettatoolsselector-elbpw","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:55:24.879343244Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:55:25.270134125Z","closed_at":"2026-01-02T17:55:25.270134125Z","close_reason":"Closed"}
{"id":"lettatoolsselector-elfci","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:58:18.499459655Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:19.002016603Z","closed_at":"2026-01-02T10:58:19.002016603Z","close_reason":"Closed","comments":[{"id":3133,"issue_id":"lettatoolsselector-elfci","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T10:58:18Z"}]}
{"id":"lettatoolsselector-eliv","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:35.16335029Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:35.524204281Z","closed_at":"2026-01-02T02:35:35.524204281Z","close_reason":"Closed","comments":[{"id":1367,"issue_id":"lettatoolsselector-eliv","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T02:35:35Z"}]}
{"id":"lettatoolsselector-elle","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:15.621004285Z","updated_at":"2025-12-30T04:14:20.921195035Z","comments":[{"id":902,"issue_id":"lettatoolsselector-elle","author":"root","text":"Synced from Beads: lettatoolsselector-76g\n\n---\nHuly Issue: LTSEL-95","created_at":"2025-12-29T21:09:15Z"}]}
{"id":"lettatoolsselector-elndi","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:20.203228285Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:20.203228285Z","comments":[{"id":2179,"issue_id":"lettatoolsselector-elndi","author":"root","text":"Synced from Beads: lettatoolsselector-dt02\n\n---\nHuly Issue: LTSEL-740","created_at":"2026-01-02T03:43:20Z"}]}
{"id":"lettatoolsselector-em661","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:45:22.217378404Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:45:22.663401202Z","closed_at":"2026-01-02T22:45:22.663401202Z","close_reason":"Closed"}
{"id":"lettatoolsselector-emjbm","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:29:46.821491089Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:47.436253079Z","closed_at":"2026-01-02T17:29:47.436253079Z","close_reason":"Closed","comments":[{"id":3760,"issue_id":"lettatoolsselector-emjbm","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T17:29:47Z"}]}
{"id":"lettatoolsselector-enpqk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:36.375816929Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:36.375816929Z","comments":[{"id":1785,"issue_id":"lettatoolsselector-enpqk","author":"root","text":"Synced from Beads: lettatoolsselector-4g6o\n\n---\nHuly Issue: LTSEL-591","created_at":"2026-01-02T03:27:36Z"}]}
{"id":"lettatoolsselector-eo3zi","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:43:52.344869528Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:52.662929728Z","closed_at":"2026-01-02T07:43:52.662929728Z","close_reason":"Closed"}
{"id":"lettatoolsselector-eo70","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:05.831926735Z","updated_at":"2025-12-29T21:33:29.884564683Z","closed_at":"2025-12-29T21:33:29.884564683Z","close_reason":"Duplicate","comments":[{"id":375,"issue_id":"lettatoolsselector-eo70","author":"root","text":"Synced from Beads: lettatoolsselector-rc8\n\n---\nHuly Issue: LTSEL-195","created_at":"2025-12-29T20:16:06Z"}]}
{"id":"lettatoolsselector-eo9o2","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:51:39.893088076Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:51:40.658669828Z","closed_at":"2026-01-02T15:51:40.658669828Z","close_reason":"Closed","comments":[{"id":3626,"issue_id":"lettatoolsselector-eo9o2","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T15:51:40Z"}]}
{"id":"lettatoolsselector-eotvs","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:25.550051372Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:25.550051372Z","comments":[{"id":1898,"issue_id":"lettatoolsselector-eotvs","author":"root","text":"Synced from Beads: lettatoolsselector-6fy5\n\n---\nHuly Issue: LTSEL-440","created_at":"2026-01-02T03:28:25Z"}]}
{"id":"lettatoolsselector-ep2ls","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T04:20:21.042079804Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:21.322876876Z","closed_at":"2026-01-02T04:20:21.322876876Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ep818","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:56:29.896635295Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:56:30.561559541Z","closed_at":"2026-01-02T18:56:30.561559541Z","close_reason":"Closed","comments":[{"id":3910,"issue_id":"lettatoolsselector-ep818","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T18:56:30Z"}]}
{"id":"lettatoolsselector-eqkfw","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:29:50.103334738Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:50.714837939Z","closed_at":"2026-01-02T17:29:50.714837939Z","close_reason":"Closed","comments":[{"id":3761,"issue_id":"lettatoolsselector-eqkfw","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T17:29:50Z"}]}
{"id":"lettatoolsselector-eqpoq","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:41:55.942718036Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:41:56.64560278Z","closed_at":"2026-01-02T13:41:56.64560278Z","close_reason":"Closed","comments":[{"id":3386,"issue_id":"lettatoolsselector-eqpoq","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T13:41:56Z"}]}
{"id":"lettatoolsselector-erc2s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:01.176700488Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:01.176700488Z","comments":[{"id":1976,"issue_id":"lettatoolsselector-erc2s","author":"root","text":"Synced from Beads: lettatoolsselector-qquy\n\n---\nHuly Issue: LTSEL-340","created_at":"2026-01-02T03:29:01Z"}]}
{"id":"lettatoolsselector-erf81","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:00.249369787Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:00.249369787Z","comments":[{"id":2260,"issue_id":"lettatoolsselector-erf81","author":"root","text":"Synced from Huly: LTSEL-448","created_at":"2026-01-02T03:45:00Z"}]}
{"id":"lettatoolsselector-ertij","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:12.943110436Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:13.494230634Z","closed_at":"2026-01-02T11:09:13.494230634Z","close_reason":"Closed","comments":[{"id":3167,"issue_id":"lettatoolsselector-ertij","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T11:09:13Z"}]}
{"id":"lettatoolsselector-erv9e","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:30.149660416Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:30.677314869Z","closed_at":"2026-01-02T11:09:30.677314869Z","close_reason":"Closed","comments":[{"id":3175,"issue_id":"lettatoolsselector-erv9e","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T11:09:30Z"}]}
{"id":"lettatoolsselector-erx6i","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:48:47.581334327Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:48.045750555Z","closed_at":"2026-01-02T03:48:48.045750555Z","close_reason":"Closed","comments":[{"id":2339,"issue_id":"lettatoolsselector-erx6i","author":"root","text":"Synced from Huly: LTSEL-48","created_at":"2026-01-02T03:48:47Z"}]}
{"id":"lettatoolsselector-esqfb","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:57:52.863098766Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:57:53.559490244Z","closed_at":"2026-01-02T19:57:53.559490244Z","close_reason":"Closed","comments":[{"id":4018,"issue_id":"lettatoolsselector-esqfb","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T19:57:53Z"}]}
{"id":"lettatoolsselector-ess9p","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:41.190181621Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:41.190181621Z","comments":[{"id":2061,"issue_id":"lettatoolsselector-ess9p","author":"root","text":"Synced from Beads: lettatoolsselector-b2rg\n\n---\nHuly Issue: LTSEL-254","created_at":"2026-01-02T03:29:41Z"}]}
{"id":"lettatoolsselector-esukj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:29.146520787Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:29.146520787Z","comments":[{"id":1768,"issue_id":"lettatoolsselector-esukj","author":"root","text":"Synced from Beads: lettatoolsselector-89tt\n\n---\nHuly Issue: LTSEL-615","created_at":"2026-01-02T03:27:29Z"}]}
{"id":"lettatoolsselector-etbc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:24:01.72145199Z","updated_at":"2025-12-29T21:33:43.438049726Z","closed_at":"2025-12-29T21:33:43.438049726Z","close_reason":"Duplicate","comments":[{"id":464,"issue_id":"lettatoolsselector-etbc","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T20:24:02Z"}]}
{"id":"lettatoolsselector-eto9","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:09.923597213Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:10.259127482Z","closed_at":"2026-01-02T02:35:10.259127482Z","close_reason":"Closed","comments":[{"id":1336,"issue_id":"lettatoolsselector-eto9","author":"root","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2026-01-02T02:35:10Z"}]}
{"id":"lettatoolsselector-eumo","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:51.08826123Z","updated_at":"2025-12-30T04:14:22.000540237Z","comments":[{"id":906,"issue_id":"lettatoolsselector-eumo","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T21:09:51Z"}]}
{"id":"lettatoolsselector-euvf","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:17.26934721Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:17.604311401Z","closed_at":"2026-01-02T01:08:17.604311401Z","close_reason":"Closed","comments":[{"id":1166,"issue_id":"lettatoolsselector-euvf","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T01:08:17Z"}]}
{"id":"lettatoolsselector-ev3l","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:25.745421774Z","updated_at":"2025-12-29T21:33:29.282492495Z","closed_at":"2025-12-29T21:33:29.282492495Z","close_reason":"Duplicate","comments":[{"id":392,"issue_id":"lettatoolsselector-ev3l","author":"root","text":"Synced from Beads: lettatoolsselector-71n\n\n---\nHuly Issue: LTSEL-204","created_at":"2025-12-29T20:17:25Z"}]}
{"id":"lettatoolsselector-eviu9","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:03:18.0694335Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:18.857009615Z","closed_at":"2026-01-02T20:03:18.857009615Z","close_reason":"Closed","comments":[{"id":4044,"issue_id":"lettatoolsselector-eviu9","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T20:03:18Z"}]}
{"id":"lettatoolsselector-ew3kn","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:37:00.421206146Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:37:00.780365262Z","closed_at":"2026-01-02T13:37:00.780365262Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ewacr","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:33:43.068223841Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:33:43.671315472Z","closed_at":"2026-01-02T14:33:43.671315472Z","close_reason":"Closed","comments":[{"id":3470,"issue_id":"lettatoolsselector-ewacr","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T14:33:43Z"}]}
{"id":"lettatoolsselector-ex180","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:29:47.402005583Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:48.036737392Z","closed_at":"2026-01-02T18:29:48.036737392Z","close_reason":"Closed","comments":[{"id":3862,"issue_id":"lettatoolsselector-ex180","author":"root","text":"Synced from Huly: LTSEL-231","created_at":"2026-01-02T18:29:47Z"}]}
{"id":"lettatoolsselector-ex4lb","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:21:17.03385891Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:17.438266549Z","closed_at":"2026-01-02T08:21:17.438266549Z","close_reason":"Closed"}
{"id":"lettatoolsselector-exlnd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:34.139187056Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:34.139187056Z","comments":[{"id":1918,"issue_id":"lettatoolsselector-exlnd","author":"root","text":"Synced from Beads: lettatoolsselector-symt\n\n---\nHuly Issue: LTSEL-412","created_at":"2026-01-02T03:28:34Z"}]}
{"id":"lettatoolsselector-exuh9","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:30:23.026305394Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:30:23.445242052Z","closed_at":"2026-01-02T18:30:23.445242052Z","close_reason":"Closed"}
{"id":"lettatoolsselector-exwzc","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:58:34.028493609Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:34.386410394Z","closed_at":"2026-01-02T10:58:34.386410394Z","close_reason":"Closed"}
{"id":"lettatoolsselector-eyz10","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:48.157110111Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:48.817001362Z","closed_at":"2026-01-02T07:23:48.817001362Z","close_reason":"Closed","comments":[{"id":2704,"issue_id":"lettatoolsselector-eyz10","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T07:23:48Z"}]}
{"id":"lettatoolsselector-ez2hy","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T04:41:11.730364826Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:12.017232652Z","closed_at":"2026-01-02T04:41:12.017232652Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ez4m8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:53.807874151Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:53.807874151Z","comments":[{"id":1825,"issue_id":"lettatoolsselector-ez4m8","author":"root","text":"Synced from Beads: lettatoolsselector-pqfv\n\n---\nHuly Issue: LTSEL-530","created_at":"2026-01-02T03:27:54Z"}]}
{"id":"lettatoolsselector-ez6rj","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:52.662456892Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:52.662456892Z","comments":[{"id":2220,"issue_id":"lettatoolsselector-ez6rj","author":"root","text":"Synced from Beads: lettatoolsselector-u8n6\n\n---\nHuly Issue: LTSEL-610","created_at":"2026-01-02T03:43:52Z"}]}
{"id":"lettatoolsselector-eziei","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:57.342911786Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:57.791641379Z","closed_at":"2026-01-02T03:46:57.791641379Z","close_reason":"Closed","comments":[{"id":2293,"issue_id":"lettatoolsselector-eziei","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T03:46:57Z"}]}
{"id":"lettatoolsselector-f0gb7","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:18.26709394Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:18.843332689Z","closed_at":"2026-01-02T20:16:18.843332689Z","close_reason":"Closed","comments":[{"id":4070,"issue_id":"lettatoolsselector-f0gb7","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T20:16:18Z"}]}
{"id":"lettatoolsselector-f0mpy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:11.183934568Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:11.183934568Z","comments":[{"id":1997,"issue_id":"lettatoolsselector-f0mpy","author":"root","text":"Synced from Beads: lettatoolsselector-lmb1\n\n---\nHuly Issue: LTSEL-319","created_at":"2026-01-02T03:29:11Z"}]}
{"id":"lettatoolsselector-f0o7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:01.468314764Z","updated_at":"2025-12-29T21:33:42.037893711Z","closed_at":"2025-12-29T21:33:42.037893711Z","close_reason":"Duplicate","comments":[{"id":583,"issue_id":"lettatoolsselector-f0o7","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:34:01Z"}]}
{"id":"lettatoolsselector-f0wzt","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:17:36.176594449Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:17:36.911348601Z","closed_at":"2026-01-02T22:17:36.911348601Z","close_reason":"Closed","comments":[{"id":4311,"issue_id":"lettatoolsselector-f0wzt","author":"root","text":"Synced from Huly: LTSEL-226","created_at":"2026-01-02T22:17:36Z"}]}
{"id":"lettatoolsselector-f0zl7","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:45.661711704Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:46.191442472Z","closed_at":"2026-01-02T06:17:46.191442472Z","close_reason":"Closed","comments":[{"id":2559,"issue_id":"lettatoolsselector-f0zl7","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T06:17:45Z"}]}
{"id":"lettatoolsselector-f10f1","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:57.894283825Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:58.480691491Z","closed_at":"2026-01-02T14:05:58.480691491Z","close_reason":"Closed","comments":[{"id":3405,"issue_id":"lettatoolsselector-f10f1","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T14:05:58Z"}]}
{"id":"lettatoolsselector-f1hzg","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:17.726680832Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:18.423787893Z","closed_at":"2026-01-02T19:38:18.423787893Z","close_reason":"Closed","comments":[{"id":3971,"issue_id":"lettatoolsselector-f1hzg","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T19:38:18Z"}]}
{"id":"lettatoolsselector-f1rcy","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:14:01.569035869Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:14:01.980355389Z","closed_at":"2026-01-02T16:14:01.980355389Z","close_reason":"Closed"}
{"id":"lettatoolsselector-f1u1i","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:29:12.001588254Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:29:12.652123982Z","closed_at":"2026-01-02T19:29:12.652123982Z","close_reason":"Closed","comments":[{"id":3966,"issue_id":"lettatoolsselector-f1u1i","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T19:29:12Z"}]}
{"id":"lettatoolsselector-f1udx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:25.724911219Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:25.724911219Z","comments":[{"id":2026,"issue_id":"lettatoolsselector-f1udx","author":"root","text":"Synced from Beads: lettatoolsselector-9r16\n\n---\nHuly Issue: LTSEL-289","created_at":"2026-01-02T03:29:25Z"}]}
{"id":"lettatoolsselector-f2ds2","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:47:37.346095016Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:47:37.972821428Z","closed_at":"2026-01-02T21:47:37.972821428Z","close_reason":"Closed","comments":[{"id":4251,"issue_id":"lettatoolsselector-f2ds2","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T21:47:37Z"}]}
{"id":"lettatoolsselector-f2ef5","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:01.154434469Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:01.57599125Z","closed_at":"2026-01-02T03:47:01.57599125Z","close_reason":"Closed","comments":[{"id":2298,"issue_id":"lettatoolsselector-f2ef5","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T03:47:01Z"}]}
{"id":"lettatoolsselector-f2kep","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:38.836208452Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:38.836208452Z","comments":[{"id":1928,"issue_id":"lettatoolsselector-f2kep","author":"root","text":"Synced from Beads: lettatoolsselector-unfo\n\n---\nHuly Issue: LTSEL-400","created_at":"2026-01-02T03:28:39Z"}]}
{"id":"lettatoolsselector-f2m19","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:27.054373542Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:27.054373542Z","comments":[{"id":2029,"issue_id":"lettatoolsselector-f2m19","author":"root","text":"Synced from Beads: lettatoolsselector-jnrp\n\n---\nHuly Issue: LTSEL-286","created_at":"2026-01-02T03:29:27Z"}]}
{"id":"lettatoolsselector-f3bcp","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:58.142874738Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:58.67284016Z","closed_at":"2026-01-02T03:46:58.67284016Z","close_reason":"Closed","comments":[{"id":2294,"issue_id":"lettatoolsselector-f3bcp","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T03:46:58Z"}]}
{"id":"lettatoolsselector-f3qxw","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:41:23.977135588Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:24.570929065Z","closed_at":"2026-01-02T20:41:24.570929065Z","close_reason":"Closed","comments":[{"id":4133,"issue_id":"lettatoolsselector-f3qxw","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T20:41:24Z"}]}
{"id":"lettatoolsselector-f3u5m","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:37:30.804829431Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:37:31.6480417Z","closed_at":"2026-01-02T11:37:31.6480417Z","close_reason":"Closed","comments":[{"id":3248,"issue_id":"lettatoolsselector-f3u5m","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T11:37:31Z"}]}
{"id":"lettatoolsselector-f4a","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:10:35.543133742Z","updated_at":"2025-12-29T21:33:44.520137481Z","closed_at":"2025-12-29T21:33:44.520137481Z","close_reason":"Duplicate","comments":[{"id":316,"issue_id":"lettatoolsselector-f4a","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T20:10:35Z"}]}
{"id":"lettatoolsselector-f4e0f","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:06:40.539203149Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:41.039198575Z","closed_at":"2026-01-02T03:06:41.039198575Z","close_reason":"Closed","comments":[{"id":1560,"issue_id":"lettatoolsselector-f4e0f","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T03:06:40Z"}]}
{"id":"lettatoolsselector-f4q22","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:19:06.308037502Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:06.80106177Z","closed_at":"2026-01-02T06:19:06.80106177Z","close_reason":"Closed","comments":[{"id":2587,"issue_id":"lettatoolsselector-f4q22","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T06:19:06Z"}]}
{"id":"lettatoolsselector-f4t27","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:29.867648532Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:30.421072408Z","closed_at":"2026-01-02T09:54:30.421072408Z","close_reason":"Closed","comments":[{"id":3029,"issue_id":"lettatoolsselector-f4t27","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T09:54:30Z"}]}
{"id":"lettatoolsselector-f59ty","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:27.516018436Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:28.003485747Z","closed_at":"2026-01-02T07:02:28.003485747Z","close_reason":"Closed","comments":[{"id":2645,"issue_id":"lettatoolsselector-f59ty","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T07:02:27Z"}]}
{"id":"lettatoolsselector-f5dn8","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:10:32.452421461Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:10:33.010251885Z","closed_at":"2026-01-02T11:10:33.010251885Z","close_reason":"Closed","comments":[{"id":3185,"issue_id":"lettatoolsselector-f5dn8","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T11:10:32Z"}]}
{"id":"lettatoolsselector-f5ia0","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:47:42.012265418Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:42.44932228Z","closed_at":"2026-01-02T03:47:42.44932228Z","close_reason":"Closed","comments":[{"id":2322,"issue_id":"lettatoolsselector-f5ia0","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T03:47:42Z"}]}
{"id":"lettatoolsselector-f5yg","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:28:09.959653957Z","updated_at":"2025-12-30T02:02:20.074791394Z","comments":[{"id":1043,"issue_id":"lettatoolsselector-f5yg","author":"root","text":"Synced from Beads: lettatoolsselector-m03\n\n---\nHuly Issue: LTSEL-71","created_at":"2025-12-29T21:28:10Z"}]}
{"id":"lettatoolsselector-f6mrz","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:17:26.78435283Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:17:27.353372352Z","closed_at":"2026-01-02T16:17:27.353372352Z","close_reason":"Closed","comments":[{"id":3667,"issue_id":"lettatoolsselector-f6mrz","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T16:17:27Z"}]}
{"id":"lettatoolsselector-f6xzv","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:52.938488575Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:53.424257976Z","closed_at":"2026-01-02T05:40:53.424257976Z","close_reason":"Closed","comments":[{"id":2470,"issue_id":"lettatoolsselector-f6xzv","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T05:40:53Z"}]}
{"id":"lettatoolsselector-f73hh","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:19:59.418543114Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:00.106376442Z","closed_at":"2026-01-02T19:20:00.106376442Z","close_reason":"Closed","comments":[{"id":3923,"issue_id":"lettatoolsselector-f73hh","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T19:19:59Z"}]}
{"id":"lettatoolsselector-f7rpn","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:54.481646163Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:54.980190189Z","closed_at":"2026-01-02T10:57:54.980190189Z","close_reason":"Closed","comments":[{"id":3125,"issue_id":"lettatoolsselector-f7rpn","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T10:57:54Z"}]}
{"id":"lettatoolsselector-f8o24","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:45.923076413Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:45.923076413Z","comments":[{"id":2117,"issue_id":"lettatoolsselector-f8o24","author":"root","text":"Synced from Beads: lettatoolsselector-5hl3\n\n---\nHuly Issue: LTSEL-250","created_at":"2026-01-02T03:30:46Z"}]}
{"id":"lettatoolsselector-f9qla","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:31.64972937Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:32.211381522Z","closed_at":"2026-01-02T07:02:32.211381522Z","close_reason":"Closed","comments":[{"id":2650,"issue_id":"lettatoolsselector-f9qla","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T07:02:32Z"}]}
{"id":"lettatoolsselector-f9tk6","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:30.935865252Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:30.935865252Z","comments":[{"id":2190,"issue_id":"lettatoolsselector-f9tk6","author":"root","text":"Synced from Beads: lettatoolsselector-kutx\n\n---\nHuly Issue: LTSEL-688","created_at":"2026-01-02T03:43:31Z"}]}
{"id":"lettatoolsselector-f9wka","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:12.773114524Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:12.773114524Z","comments":[{"id":1869,"issue_id":"lettatoolsselector-f9wka","author":"root","text":"Synced from Beads: lettatoolsselector-zgks\n\n---\nHuly Issue: LTSEL-481","created_at":"2026-01-02T03:28:13Z"}]}
{"id":"lettatoolsselector-fa6b","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:33.053167383Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:33.43284543Z","closed_at":"2026-01-02T02:35:33.43284543Z","close_reason":"Closed","comments":[{"id":1364,"issue_id":"lettatoolsselector-fa6b","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T02:35:33Z"}]}
{"id":"lettatoolsselector-fa95i","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:51:02.18824852Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:51:02.698419327Z","closed_at":"2026-01-02T21:51:02.698419327Z","close_reason":"Closed"}
{"id":"lettatoolsselector-famm9","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:00.439040756Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:00.889945791Z","closed_at":"2026-01-02T03:47:00.889945791Z","close_reason":"Closed","comments":[{"id":2297,"issue_id":"lettatoolsselector-famm9","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T03:47:00Z"}]}
{"id":"lettatoolsselector-fax5","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:07.343436433Z","updated_at":"2025-12-29T21:33:28.669260015Z","closed_at":"2025-12-29T21:33:28.669260015Z","close_reason":"Duplicate","comments":[{"id":417,"issue_id":"lettatoolsselector-fax5","author":"root","text":"Synced from Beads: lettatoolsselector-8ix\n\n---\nHuly Issue: LTSEL-184","created_at":"2025-12-29T20:20:07Z"}]}
{"id":"lettatoolsselector-fb5i","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:47.511637408Z","updated_at":"2025-12-29T21:33:28.934620958Z","closed_at":"2025-12-29T21:33:28.934620958Z","close_reason":"Duplicate","comments":[{"id":405,"issue_id":"lettatoolsselector-fb5i","author":"root","text":"Synced from Beads: lettatoolsselector-12y\n\n---\nHuly Issue: LTSEL-201","created_at":"2025-12-29T20:18:47Z"}]}
{"id":"lettatoolsselector-fb90r","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:07:52.258879591Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:07:53.002322737Z","closed_at":"2026-01-02T17:07:53.002322737Z","close_reason":"Closed","comments":[{"id":3726,"issue_id":"lettatoolsselector-fb90r","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T17:07:52Z"}]}
{"id":"lettatoolsselector-fbc7f","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:57:21.689820093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:22.247239514Z","closed_at":"2026-01-02T12:57:22.247239514Z","close_reason":"Closed","comments":[{"id":3326,"issue_id":"lettatoolsselector-fbc7f","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T12:57:22Z"}]}
{"id":"lettatoolsselector-fbndm","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:58:14.304190289Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:14.831431883Z","closed_at":"2026-01-02T09:58:14.831431883Z","close_reason":"Closed","comments":[{"id":3059,"issue_id":"lettatoolsselector-fbndm","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T09:58:14Z"}]}
{"id":"lettatoolsselector-fc3ez","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:47.07296818Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:47.429159211Z","closed_at":"2026-01-02T03:06:47.429159211Z","close_reason":"Closed","comments":[{"id":1566,"issue_id":"lettatoolsselector-fc3ez","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T03:06:47Z"}]}
{"id":"lettatoolsselector-fce9p","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:27:23.335010433Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:27:24.02211708Z","closed_at":"2026-01-02T18:27:24.02211708Z","close_reason":"Closed","comments":[{"id":3851,"issue_id":"lettatoolsselector-fce9p","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T18:27:23Z"}]}
{"id":"lettatoolsselector-fci9a","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:49.410705296Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:49.864003214Z","closed_at":"2026-01-02T05:59:49.864003214Z","close_reason":"Closed","comments":[{"id":2504,"issue_id":"lettatoolsselector-fci9a","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T05:59:49Z"}]}
{"id":"lettatoolsselector-fczse","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:09:32.639025701Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:33.012923221Z","closed_at":"2026-01-02T14:09:33.012923221Z","close_reason":"Closed"}
{"id":"lettatoolsselector-fd2wq","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:17.034967535Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:17.495237567Z","closed_at":"2026-01-02T06:00:17.495237567Z","close_reason":"Closed","comments":[{"id":2532,"issue_id":"lettatoolsselector-fd2wq","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T06:00:17Z"}]}
{"id":"lettatoolsselector-fe4r","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:16.433682748Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:16.771758823Z","closed_at":"2026-01-02T02:35:16.771758823Z","close_reason":"Closed","comments":[{"id":1347,"issue_id":"lettatoolsselector-fe4r","author":"root","text":"Synced from Beads: lettatoolsselector-sxk\n\n---\nHuly Issue: LTSEL-30","created_at":"2026-01-02T02:35:16Z"}]}
{"id":"lettatoolsselector-fe62","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:57.923353019Z","updated_at":"2025-12-29T21:33:26.865439844Z","closed_at":"2025-12-29T21:33:26.865439844Z","close_reason":"Duplicate","comments":[{"id":505,"issue_id":"lettatoolsselector-fe62","author":"root","text":"Synced from Beads: lettatoolsselector-z62\n\n---\nHuly Issue: LTSEL-173","created_at":"2025-12-29T20:26:58Z"}]}
{"id":"lettatoolsselector-feha9","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:11:19.089998931Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:19.736458695Z","closed_at":"2026-01-02T11:11:19.736458695Z","close_reason":"Closed","comments":[{"id":3192,"issue_id":"lettatoolsselector-feha9","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T11:11:19Z"}]}
{"id":"lettatoolsselector-fel6","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:25:07.19596796Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:07.428685067Z","closed_at":"2026-01-02T01:25:07.428685067Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ff06y","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:29:43.340320472Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:43.999445152Z","closed_at":"2026-01-02T17:29:43.999445152Z","close_reason":"Closed","comments":[{"id":3759,"issue_id":"lettatoolsselector-ff06y","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T17:29:43Z"}]}
{"id":"lettatoolsselector-ffkux","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:08.136562831Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:08.837118369Z","closed_at":"2026-01-02T21:48:08.837118369Z","close_reason":"Closed","comments":[{"id":4255,"issue_id":"lettatoolsselector-ffkux","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T21:48:08Z"}]}
{"id":"lettatoolsselector-ffs8c","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:32:31.095853192Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:32:31.756040357Z","closed_at":"2026-01-02T14:32:31.756040357Z","close_reason":"Closed","comments":[{"id":3465,"issue_id":"lettatoolsselector-ffs8c","author":"root","text":"Synced from Huly: LTSEL-249","created_at":"2026-01-02T14:32:31Z"}]}
{"id":"lettatoolsselector-fftnw","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:05:05.664240781Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:05:06.322872827Z","closed_at":"2026-01-02T20:05:06.322872827Z","close_reason":"Closed","comments":[{"id":4052,"issue_id":"lettatoolsselector-fftnw","author":"root","text":"Synced from Huly: LTSEL-50","created_at":"2026-01-02T20:05:06Z"}]}
{"id":"lettatoolsselector-fg3cc","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:28.720750101Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:29.277561301Z","closed_at":"2026-01-02T08:20:29.277561301Z","close_reason":"Closed","comments":[{"id":2852,"issue_id":"lettatoolsselector-fg3cc","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T08:20:29Z"}]}
{"id":"lettatoolsselector-fgw2y","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:42:00.861847834Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:42:01.5524162Z","closed_at":"2026-01-02T22:42:01.5524162Z","close_reason":"Closed","comments":[{"id":4362,"issue_id":"lettatoolsselector-fgw2y","author":"root","text":"Synced from Huly: LTSEL-241","created_at":"2026-01-02T22:42:01Z"}]}
{"id":"lettatoolsselector-fh7ph","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:54.959986102Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:55.334548652Z","closed_at":"2026-01-02T03:06:55.334548652Z","close_reason":"Closed","comments":[{"id":1576,"issue_id":"lettatoolsselector-fh7ph","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T03:06:55Z"}]}
{"id":"lettatoolsselector-fh8lr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:46.766304213Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:46.766304213Z","comments":[{"id":1945,"issue_id":"lettatoolsselector-fh8lr","author":"root","text":"Synced from Beads: lettatoolsselector-rqhh\n\n---\nHuly Issue: LTSEL-378","created_at":"2026-01-02T03:28:47Z"}]}
{"id":"lettatoolsselector-fhmzl","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:21.966514929Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:22.481951713Z","closed_at":"2026-01-02T11:09:22.481951713Z","close_reason":"Closed","comments":[{"id":3171,"issue_id":"lettatoolsselector-fhmzl","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T11:09:22Z"}]}
{"id":"lettatoolsselector-fhvu8","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:23:41.537270473Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:23:42.149925476Z","closed_at":"2026-01-02T08:23:42.149925476Z","close_reason":"Closed","comments":[{"id":2879,"issue_id":"lettatoolsselector-fhvu8","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T08:23:41Z"}]}
{"id":"lettatoolsselector-fi7km","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:40:14.031144882Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:40:14.607295695Z","closed_at":"2026-01-02T13:40:14.607295695Z","close_reason":"Closed","comments":[{"id":3378,"issue_id":"lettatoolsselector-fi7km","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T13:40:14Z"}]}
{"id":"lettatoolsselector-fi9jb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:40.696919313Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:40.696919313Z","comments":[{"id":1795,"issue_id":"lettatoolsselector-fi9jb","author":"root","text":"Synced from Beads: lettatoolsselector-uhzq\n\n---\nHuly Issue: LTSEL-581","created_at":"2026-01-02T03:27:40Z"}]}
{"id":"lettatoolsselector-fia3m","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:24:01.033438821Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:01.468815554Z","closed_at":"2026-01-02T07:24:01.468815554Z","close_reason":"Closed"}
{"id":"lettatoolsselector-fikef","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:41:35.371556776Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:35.882384023Z","closed_at":"2026-01-02T04:41:35.882384023Z","close_reason":"Closed","comments":[{"id":2444,"issue_id":"lettatoolsselector-fikef","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T04:41:35Z"}]}
{"id":"lettatoolsselector-fiph","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:52.197235011Z","updated_at":"2025-12-30T04:11:46.418027284Z","comments":[{"id":820,"issue_id":"lettatoolsselector-fiph","author":"root","text":"Synced from Beads: lettatoolsselector-80w\n\n---\nHuly Issue: LTSEL-122","created_at":"2025-12-29T21:00:52Z"}]}
{"id":"lettatoolsselector-fipv1","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:06:04.984391136Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:06:05.585653838Z","closed_at":"2026-01-02T20:06:05.585653838Z","close_reason":"Closed","comments":[{"id":4056,"issue_id":"lettatoolsselector-fipv1","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T20:06:05Z"}]}
{"id":"lettatoolsselector-fiyi","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:16:17.140847851Z","updated_at":"2025-12-30T01:51:04.100960379Z","comments":[{"id":971,"issue_id":"lettatoolsselector-fiyi","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T21:16:17Z"}]}
{"id":"lettatoolsselector-fj6zs","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T16:16:03.739004532Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:16:04.151357155Z","closed_at":"2026-01-02T16:16:04.151357155Z","close_reason":"Closed"}
{"id":"lettatoolsselector-fjjj8","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:52.050882527Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:52.419432275Z","closed_at":"2026-01-02T03:06:52.419432275Z","close_reason":"Closed","comments":[{"id":1573,"issue_id":"lettatoolsselector-fjjj8","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T03:06:52Z"}]}
{"id":"lettatoolsselector-fk58f","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:47:21.856424448Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:22.18110837Z","closed_at":"2026-01-02T03:47:22.18110837Z","close_reason":"Closed"}
{"id":"lettatoolsselector-fk7ta","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:41.351184942Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:41.826032869Z","closed_at":"2026-01-02T07:42:41.826032869Z","close_reason":"Closed","comments":[{"id":2758,"issue_id":"lettatoolsselector-fk7ta","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T07:42:41Z"}]}
{"id":"lettatoolsselector-fkb4","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:25.215222138Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:25.56416065Z","closed_at":"2026-01-02T03:06:25.56416065Z","close_reason":"Closed","comments":[{"id":1545,"issue_id":"lettatoolsselector-fkb4","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T03:06:25Z"}]}
{"id":"lettatoolsselector-fkdwe","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:50.258447928Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:50.258447928Z","comments":[{"id":2215,"issue_id":"lettatoolsselector-fkdwe","author":"root","text":"Synced from Huly: LTSEL-622","created_at":"2026-01-02T03:43:50Z"}]}
{"id":"lettatoolsselector-fkew","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:22.39442456Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:22.721017403Z","closed_at":"2026-01-02T01:08:22.721017403Z","close_reason":"Closed","comments":[{"id":1175,"issue_id":"lettatoolsselector-fkew","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T01:08:22Z"}]}
{"id":"lettatoolsselector-fkxi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:34:35.543955064Z","updated_at":"2025-12-30T02:39:31.92705071Z","comments":[{"id":1069,"issue_id":"lettatoolsselector-fkxi","author":"root","text":"Synced from Beads: lettatoolsselector-9fs\n\n---\nHuly Issue: LTSEL-58","created_at":"2025-12-29T21:34:36Z"}]}
{"id":"lettatoolsselector-flq9","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:24.982155547Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:25.22605897Z","closed_at":"2026-01-02T02:20:25.22605897Z","close_reason":"Closed"}
{"id":"lettatoolsselector-fludb","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:00:37.869510099Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:00:38.258630375Z","closed_at":"2026-01-02T15:00:38.258630375Z","close_reason":"Closed"}
{"id":"lettatoolsselector-fm0ga","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:16:33.789740955Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:16:34.438878755Z","closed_at":"2026-01-02T22:16:34.438878755Z","close_reason":"Closed","comments":[{"id":4306,"issue_id":"lettatoolsselector-fm0ga","author":"root","text":"Synced from Huly: LTSEL-16","created_at":"2026-01-02T22:16:34Z"}]}
{"id":"lettatoolsselector-fm1vs","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:41:25.133812164Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:41:25.778280002Z","closed_at":"2026-01-02T22:41:25.778280002Z","close_reason":"Closed","comments":[{"id":4359,"issue_id":"lettatoolsselector-fm1vs","author":"root","text":"Synced from Huly: LTSEL-247","created_at":"2026-01-02T22:41:25Z"}]}
{"id":"lettatoolsselector-fmgc0","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:51:32.898792328Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:33.524664965Z","closed_at":"2026-01-02T18:51:33.524664965Z","close_reason":"Closed","comments":[{"id":3898,"issue_id":"lettatoolsselector-fmgc0","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T18:51:33Z"}]}
{"id":"lettatoolsselector-fmguo","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:14:15.622419315Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:14:17.634062969Z","closed_at":"2026-01-02T22:14:17.634062969Z","close_reason":"Closed","comments":[{"id":4288,"issue_id":"lettatoolsselector-fmguo","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T22:14:17Z"}]}
{"id":"lettatoolsselector-fna4a","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:11.948075737Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:11.948075737Z","comments":[{"id":1867,"issue_id":"lettatoolsselector-fna4a","author":"root","text":"Synced from Beads: lettatoolsselector-5y15\n\n---\nHuly Issue: LTSEL-483","created_at":"2026-01-02T03:28:12Z"}]}
{"id":"lettatoolsselector-fnkp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:21:09.555358409Z","updated_at":"2025-12-30T04:12:15.657608835Z","comments":[{"id":1008,"issue_id":"lettatoolsselector-fnkp","author":"root","text":"Synced from Beads: lettatoolsselector-ct9\n\n---\nHuly Issue: LTSEL-75","created_at":"2025-12-29T21:21:09Z"}]}
{"id":"lettatoolsselector-fo371","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:13.799145806Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:14.326673579Z","closed_at":"2026-01-02T04:20:14.326673579Z","close_reason":"Closed","comments":[{"id":2368,"issue_id":"lettatoolsselector-fo371","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T04:20:14Z"}]}
{"id":"lettatoolsselector-fo4z0","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:03:15.256266088Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:15.763559374Z","closed_at":"2026-01-02T07:03:15.763559374Z","close_reason":"Closed","comments":[{"id":2689,"issue_id":"lettatoolsselector-fo4z0","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T07:03:15Z"}]}
{"id":"lettatoolsselector-foazj","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:08.930772306Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:09.329713499Z","closed_at":"2026-01-02T03:30:09.329713499Z","close_reason":"Closed","comments":[{"id":2092,"issue_id":"lettatoolsselector-foazj","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T03:30:09Z"}]}
{"id":"lettatoolsselector-foc4t","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:46.222616906Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:46.850175288Z","closed_at":"2026-01-02T14:29:46.850175288Z","close_reason":"Closed","comments":[{"id":3451,"issue_id":"lettatoolsselector-foc4t","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T14:29:46Z"}]}
{"id":"lettatoolsselector-fotzn","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:45:53.087724754Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:45:53.660135599Z","closed_at":"2026-01-02T15:45:53.660135599Z","close_reason":"Closed","comments":[{"id":3591,"issue_id":"lettatoolsselector-fotzn","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T15:45:53Z"}]}
{"id":"lettatoolsselector-fozvq","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:29.98121076Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:29.98121076Z","comments":[{"id":2188,"issue_id":"lettatoolsselector-fozvq","author":"root","text":"Synced from Huly: LTSEL-700","created_at":"2026-01-02T03:43:30Z"}]}
{"id":"lettatoolsselector-fp83t","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:03:19.638827688Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:20.027081552Z","closed_at":"2026-01-02T08:03:20.027081552Z","close_reason":"Closed"}
{"id":"lettatoolsselector-fpikw","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:18.477838165Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:18.940400938Z","closed_at":"2026-01-02T05:41:18.940400938Z","close_reason":"Closed","comments":[{"id":2492,"issue_id":"lettatoolsselector-fpikw","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T05:41:18Z"}]}
{"id":"lettatoolsselector-fpn5p","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:35:52.084682082Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:35:52.528072532Z","closed_at":"2026-01-02T11:35:52.528072532Z","close_reason":"Closed"}
{"id":"lettatoolsselector-fqkel","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:41:49.46659618Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:50.003985618Z","closed_at":"2026-01-02T09:41:50.003985618Z","close_reason":"Closed","comments":[{"id":3007,"issue_id":"lettatoolsselector-fqkel","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T09:41:49Z"}]}
{"id":"lettatoolsselector-fr20","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:21:41.871565176Z","updated_at":"2025-12-30T01:56:52.32144876Z","comments":[{"id":1011,"issue_id":"lettatoolsselector-fr20","author":"root","text":"Synced from Beads: lettatoolsselector-m9u\n\n---\nHuly Issue: LTSEL-77","created_at":"2025-12-29T21:21:42Z"}]}
{"id":"lettatoolsselector-fr95m","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:28.300844166Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:28.773774702Z","closed_at":"2026-01-02T07:02:28.773774702Z","close_reason":"Closed","comments":[{"id":2646,"issue_id":"lettatoolsselector-fr95m","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T07:02:28Z"}]}
{"id":"lettatoolsselector-frsu0","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:11:44.969078931Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:11:45.53093682Z","closed_at":"2026-01-02T16:11:45.53093682Z","close_reason":"Closed","comments":[{"id":3647,"issue_id":"lettatoolsselector-frsu0","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T16:11:45Z"}]}
{"id":"lettatoolsselector-fsfn6","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:24:00.009942514Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:00.608087944Z","closed_at":"2026-01-02T07:24:00.608087944Z","close_reason":"Closed","comments":[{"id":2713,"issue_id":"lettatoolsselector-fsfn6","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T07:24:00Z"}]}
{"id":"lettatoolsselector-ft3t6","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:41:00.396624816Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:41:01.029526769Z","closed_at":"2026-01-02T19:41:01.029526769Z","close_reason":"Closed","comments":[{"id":3997,"issue_id":"lettatoolsselector-ft3t6","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T19:41:00Z"}]}
{"id":"lettatoolsselector-ftlv","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:41:06.364429192Z","updated_at":"2025-12-29T21:33:23.595312769Z","closed_at":"2025-12-29T21:33:23.595312769Z","close_reason":"Duplicate","comments":[{"id":654,"issue_id":"lettatoolsselector-ftlv","author":"root","text":"Synced from Beads: lettatoolsselector-6p9\n\n---\nHuly Issue: LTSEL-148","created_at":"2025-12-29T20:41:06Z"}]}
{"id":"lettatoolsselector-ftrgr","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:19:02.892735648Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:03.362015001Z","closed_at":"2026-01-02T06:19:03.362015001Z","close_reason":"Closed","comments":[{"id":2584,"issue_id":"lettatoolsselector-ftrgr","author":"root","text":"Synced from Huly: LTSEL-53","created_at":"2026-01-02T06:19:03Z"}]}
{"id":"lettatoolsselector-ftutu","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:11:14.195332923Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:14.721079107Z","closed_at":"2026-01-02T11:11:14.721079107Z","close_reason":"Closed","comments":[{"id":3190,"issue_id":"lettatoolsselector-ftutu","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T11:11:14Z"}]}
{"id":"lettatoolsselector-fubtm","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:00:06.481769849Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:06.789731051Z","closed_at":"2026-01-02T06:00:06.789731051Z","close_reason":"Closed"}
{"id":"lettatoolsselector-fudoe","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:32.294534984Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:32.294534984Z","comments":[{"id":2041,"issue_id":"lettatoolsselector-fudoe","author":"root","text":"Synced from Beads: lettatoolsselector-xkm9\n\n---\nHuly Issue: LTSEL-274","created_at":"2026-01-02T03:29:32Z"}]}
{"id":"lettatoolsselector-fufs","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:10.060142695Z","updated_at":"2025-12-30T01:57:39.848449381Z","comments":[{"id":1018,"issue_id":"lettatoolsselector-fufs","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-84","created_at":"2025-12-29T21:22:10Z"}]}
{"id":"lettatoolsselector-fuw98","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:26.156832561Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:26.850226016Z","closed_at":"2026-01-02T09:40:26.850226016Z","close_reason":"Closed","comments":[{"id":2995,"issue_id":"lettatoolsselector-fuw98","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T09:40:26Z"}]}
{"id":"lettatoolsselector-fuyr6","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:23:58.508749572Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:23:59.201907611Z","closed_at":"2026-01-02T20:23:59.201907611Z","close_reason":"Closed","comments":[{"id":4102,"issue_id":"lettatoolsselector-fuyr6","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T20:23:58Z"}]}
{"id":"lettatoolsselector-fv0","title":"[Perf] Add TTL cache for search results","description":"## Problem\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** `services/tool_search.py`, `weaviate_tool_search_with_reranking.py`\n\n## Impact\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\nAdd TTL-based cache for search results (60-300 seconds):\n\n```python\nfrom cachetools import TTLCache\n\n_search_cache = TTLCache(maxsize=1000, ttl=60)\n\ndef search_tools(query: str, limit: int = 10, reranker_config: dict = None):\n    # Create cache key from query params\n    cache_key = f\"{query}:{limit}:{hash(str(reranker_config))}\"\n    \n    if cache_key in _search_cache:\n        logger.debug(f\"Cache hit for query: {query}\")\n        return _search_cache[cache_key]\n    \n    # ... perform search ...\n    \n    _search_cache[cache_key] = results\n    return results\n```\n\n## Configuration\n- TTL configurable via env var `SEARCH_CACHE_TTL_SECONDS` (default: 60)\n- Max size configurable via `SEARCH_CACHE_MAX_SIZE` (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:49:42.255551437Z","updated_at":"2025-12-29T16:13:42.500990485Z","closed_at":"2025-12-29T16:13:42.500990485Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-fv757","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:20.124770884Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:20.640874998Z","closed_at":"2026-01-02T10:36:20.640874998Z","close_reason":"Closed","comments":[{"id":3088,"issue_id":"lettatoolsselector-fv757","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T10:36:20Z"}]}
{"id":"lettatoolsselector-fv89m","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:28.389752594Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:28.890913066Z","closed_at":"2026-01-02T07:42:28.890913066Z","close_reason":"Closed","comments":[{"id":2746,"issue_id":"lettatoolsselector-fv89m","author":"root","text":"Synced from Huly: LTSEL-43","created_at":"2026-01-02T07:42:28Z"}]}
{"id":"lettatoolsselector-fvk","title":"[Code Quality] Add Optional type hints for nullable parameters","description":"Several functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\nParameters that can be None but aren't typed as Optional:\n- `new_run_id: str = None` should be `new_run_id: Optional[str] = None`\n- `tool_names: list = None` should be `tool_names: Optional[List[str]] = None`\n- `query: str = None` should be `query: Optional[str] = None`\n\n### _send_trigger_message (line 898)\n- Similar nullable parameter issues\n\n### Other locations\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-28T17:13:10.07216349Z","updated_at":"2025-12-29T19:24:34.88561713Z","closed_at":"2025-12-29T19:24:34.88561713Z","close_reason":"Already done: agent_service.py functions already use Optional type hints"}
{"id":"lettatoolsselector-fw3rj","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:26.572826471Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:27.057925509Z","closed_at":"2026-01-02T07:42:27.057925509Z","close_reason":"Closed","comments":[{"id":2744,"issue_id":"lettatoolsselector-fw3rj","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T07:42:26Z"}]}
{"id":"lettatoolsselector-fw8eh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:25.633519926Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:25.633519926Z","comments":[{"id":2127,"issue_id":"lettatoolsselector-fw8eh","author":"root","text":"Synced from Beads: lettatoolsselector-zxm\n\n---\nHuly Issue: LTSEL-213","created_at":"2026-01-02T03:31:25Z"}]}
{"id":"lettatoolsselector-fwq0h","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:22:59.657779948Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:01.038104523Z","closed_at":"2026-01-02T07:23:01.038104523Z","close_reason":"Closed","comments":[{"id":2691,"issue_id":"lettatoolsselector-fwq0h","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T07:23:00Z"}]}
{"id":"lettatoolsselector-fx1qj","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:21:59.110718386Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:21:59.794410209Z","closed_at":"2026-01-02T19:21:59.794410209Z","close_reason":"Closed","comments":[{"id":3945,"issue_id":"lettatoolsselector-fx1qj","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T19:21:59Z"}]}
{"id":"lettatoolsselector-fx26","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:19:36.303628406Z","updated_at":"2025-12-30T01:55:29.53413435Z","comments":[{"id":999,"issue_id":"lettatoolsselector-fx26","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-84","created_at":"2025-12-29T21:19:36Z"}]}
{"id":"lettatoolsselector-fxali","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:10.143558472Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:10.656658641Z","closed_at":"2026-01-02T09:40:10.656658641Z","close_reason":"Closed","comments":[{"id":2988,"issue_id":"lettatoolsselector-fxali","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T09:40:10Z"}]}
{"id":"lettatoolsselector-fykpb","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:21:09.043923213Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:21:09.713211248Z","closed_at":"2026-01-02T22:21:09.713211248Z","close_reason":"Closed","comments":[{"id":4319,"issue_id":"lettatoolsselector-fykpb","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T22:21:09Z"}]}
{"id":"lettatoolsselector-fyole","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:44:42.271256751Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:44:42.901566813Z","closed_at":"2026-01-02T09:44:42.901566813Z","close_reason":"Closed","comments":[{"id":3023,"issue_id":"lettatoolsselector-fyole","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T09:44:42Z"}]}
{"id":"lettatoolsselector-fz3ps","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:58.809495073Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:59.237805382Z","closed_at":"2026-01-02T03:29:59.237805382Z","close_reason":"Closed","comments":[{"id":2080,"issue_id":"lettatoolsselector-fz3ps","author":"root","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2026-01-02T03:29:59Z"}]}
{"id":"lettatoolsselector-fz65e","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T05:41:22.013466924Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:22.346779879Z","closed_at":"2026-01-02T05:41:22.346779879Z","close_reason":"Closed"}
{"id":"lettatoolsselector-fzatg","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:39.668882676Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:40.102137228Z","closed_at":"2026-01-02T04:20:40.102137228Z","close_reason":"Closed","comments":[{"id":2385,"issue_id":"lettatoolsselector-fzatg","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T04:20:39Z"}]}
{"id":"lettatoolsselector-fzjm6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:19.233809977Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:19.233809977Z","comments":[{"id":2012,"issue_id":"lettatoolsselector-fzjm6","author":"root","text":"Synced from Beads: lettatoolsselector-x3qd\n\n---\nHuly Issue: LTSEL-303","created_at":"2026-01-02T03:29:19Z"}]}
{"id":"lettatoolsselector-fzljy","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:05.757848035Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:05.757848035Z","comments":[{"id":2170,"issue_id":"lettatoolsselector-fzljy","author":"root","text":"Synced from Beads: lettatoolsselector-445\n\n---\nHuly Issue: LTSEL-774","created_at":"2026-01-02T03:43:06Z"}]}
{"id":"lettatoolsselector-fzn1e","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:30.714763218Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:30.714763218Z","comments":[{"id":1910,"issue_id":"lettatoolsselector-fzn1e","author":"root","text":"Synced from Beads: lettatoolsselector-gidt\n\n---\nHuly Issue: LTSEL-424","created_at":"2026-01-02T03:28:31Z"}]}
{"id":"lettatoolsselector-g0s","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:54:41.618524307Z","updated_at":"2025-12-29T21:33:45.378634114Z","closed_at":"2025-12-29T21:33:45.378634114Z","close_reason":"Duplicate","comments":[{"id":256,"issue_id":"lettatoolsselector-g0s","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T19:54:41Z"}]}
{"id":"lettatoolsselector-g0yzy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:37.266721588Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:37.266721588Z","comments":[{"id":1787,"issue_id":"lettatoolsselector-g0yzy","author":"root","text":"Synced from Beads: lettatoolsselector-97pf\n\n---\nHuly Issue: LTSEL-589","created_at":"2026-01-02T03:27:37Z"}]}
{"id":"lettatoolsselector-g27z7","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:17:40.154788685Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:17:40.663658008Z","closed_at":"2026-01-02T22:17:40.663658008Z","close_reason":"Closed"}
{"id":"lettatoolsselector-g2byv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:34.639327264Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:34.639327264Z","comments":[{"id":1919,"issue_id":"lettatoolsselector-g2byv","author":"root","text":"Synced from Beads: lettatoolsselector-8pez\n\n---\nHuly Issue: LTSEL-411","created_at":"2026-01-02T03:28:34Z"}]}
{"id":"lettatoolsselector-g3r9w","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:45.352632132Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:45.996433137Z","closed_at":"2026-01-02T15:20:45.996433137Z","close_reason":"Closed","comments":[{"id":3542,"issue_id":"lettatoolsselector-g3r9w","author":"root","text":"Synced from Huly: LTSEL-40","created_at":"2026-01-02T15:20:45Z"}]}
{"id":"lettatoolsselector-g3w1","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:56.368797755Z","updated_at":"2025-12-29T21:33:43.673884518Z","closed_at":"2025-12-29T21:33:43.673884518Z","close_reason":"Duplicate","comments":[{"id":440,"issue_id":"lettatoolsselector-g3w1","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T20:21:56Z"}]}
{"id":"lettatoolsselector-g42am","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:33.021404025Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:33.021404025Z","comments":[{"id":2281,"issue_id":"lettatoolsselector-g42am","author":"root","text":"Synced from Huly: LTSEL-355","created_at":"2026-01-02T03:45:33Z"}]}
{"id":"lettatoolsselector-g485h","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:32.147376057Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:32.612424151Z","closed_at":"2026-01-02T07:42:32.612424151Z","close_reason":"Closed","comments":[{"id":2750,"issue_id":"lettatoolsselector-g485h","author":"root","text":"Synced from Huly: LTSEL-39","created_at":"2026-01-02T07:42:32Z"}]}
{"id":"lettatoolsselector-g4a3n","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:03.918730908Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:04.455018215Z","closed_at":"2026-01-02T13:36:04.455018215Z","close_reason":"Closed","comments":[{"id":3349,"issue_id":"lettatoolsselector-g4a3n","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T13:36:04Z"}]}
{"id":"lettatoolsselector-g6gs4","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:33:01.26668578Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:33:04.135449536Z","closed_at":"2026-01-02T21:33:04.135449536Z","close_reason":"Closed","comments":[{"id":4230,"issue_id":"lettatoolsselector-g6gs4","author":"root","text":"Synced from Huly: LTSEL-53","created_at":"2026-01-02T21:33:03Z"}]}
{"id":"lettatoolsselector-g6ilr","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:08.560778439Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:08.899005482Z","closed_at":"2026-01-02T06:00:08.899005482Z","close_reason":"Closed"}
{"id":"lettatoolsselector-g6jtn","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:36:40.878739514Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:41.484086313Z","closed_at":"2026-01-02T10:36:41.484086313Z","close_reason":"Closed","comments":[{"id":3094,"issue_id":"lettatoolsselector-g6jtn","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T10:36:41Z"}]}
{"id":"lettatoolsselector-g6ljd","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:10:16.129679211Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:10:16.706533045Z","closed_at":"2026-01-02T16:10:16.706533045Z","close_reason":"Closed","comments":[{"id":3637,"issue_id":"lettatoolsselector-g6ljd","author":"root","text":"Synced from Huly: LTSEL-46","created_at":"2026-01-02T16:10:16Z"}]}
{"id":"lettatoolsselector-g75nm","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:34.300126127Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:34.843557499Z","closed_at":"2026-01-02T11:09:34.843557499Z","close_reason":"Closed","comments":[{"id":3176,"issue_id":"lettatoolsselector-g75nm","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T11:09:34Z"}]}
{"id":"lettatoolsselector-g7kxx","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:51.692262698Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:52.148978036Z","closed_at":"2026-01-02T06:36:52.148978036Z","close_reason":"Closed","comments":[{"id":2615,"issue_id":"lettatoolsselector-g7kxx","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T06:36:51Z"}]}
{"id":"lettatoolsselector-g7tx","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:01.247464387Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:01.495579838Z","closed_at":"2026-01-02T02:20:01.495579838Z","close_reason":"Closed"}
{"id":"lettatoolsselector-g7z6x","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:41.883797981Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:41.883797981Z","comments":[{"id":2200,"issue_id":"lettatoolsselector-g7z6x","author":"root","text":"Synced from Beads: lettatoolsselector-nuq6\n\n---\nHuly Issue: LTSEL-656","created_at":"2026-01-02T03:43:42Z"}]}
{"id":"lettatoolsselector-g83d7","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:42:59.714633193Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:00.050037736Z","closed_at":"2026-01-02T07:43:00.050037736Z","close_reason":"Closed"}
{"id":"lettatoolsselector-g8eji","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:23:56.54146234Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:23:57.22059454Z","closed_at":"2026-01-02T22:23:57.22059454Z","close_reason":"Closed","comments":[{"id":4327,"issue_id":"lettatoolsselector-g8eji","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T22:23:56Z"}]}
{"id":"lettatoolsselector-g92hm","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:39:35.432858805Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:35.855033393Z","closed_at":"2026-01-02T20:39:35.855033393Z","close_reason":"Closed"}
{"id":"lettatoolsselector-g96t8","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:53:50.117602284Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:53:50.592611602Z","closed_at":"2026-01-02T18:53:50.592611602Z","close_reason":"Closed"}
{"id":"lettatoolsselector-g9b5b","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:54:54.426588418Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:54:55.001925151Z","closed_at":"2026-01-02T18:54:55.001925151Z","close_reason":"Closed","comments":[{"id":3907,"issue_id":"lettatoolsselector-g9b5b","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T18:54:54Z"}]}
{"id":"lettatoolsselector-g9ceq","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:10:13.033269193Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:10:13.56707968Z","closed_at":"2026-01-02T11:10:13.56707968Z","close_reason":"Closed","comments":[{"id":3182,"issue_id":"lettatoolsselector-g9ceq","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T11:10:13Z"}]}
{"id":"lettatoolsselector-g9gi","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:38.033444573Z","updated_at":"2025-12-29T21:33:26.057414309Z","closed_at":"2025-12-29T21:33:26.057414309Z","close_reason":"Duplicate","comments":[{"id":552,"issue_id":"lettatoolsselector-g9gi","author":"root","text":"Synced from Beads: lettatoolsselector-n7f\n\n---\nHuly Issue: LTSEL-163","created_at":"2025-12-29T20:30:38Z"}]}
{"id":"lettatoolsselector-g9spu","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:30:28.416463773Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:28.942711653Z","closed_at":"2026-01-02T03:30:28.942711653Z","close_reason":"Closed","comments":[{"id":2107,"issue_id":"lettatoolsselector-g9spu","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T03:30:28Z"}]}
{"id":"lettatoolsselector-ga3e5","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:06:45.63017937Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:45.859578502Z","closed_at":"2026-01-02T03:06:45.859578502Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gb24x","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:30:29.414329383Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:29.69017664Z","closed_at":"2026-01-02T03:30:29.69017664Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gb8m3","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:32.574036866Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:33.751315711Z","closed_at":"2026-01-02T08:20:33.751315711Z","close_reason":"Closed","comments":[{"id":2853,"issue_id":"lettatoolsselector-gb8m3","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T08:20:33Z"}]}
{"id":"lettatoolsselector-gbduv","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:41:51.395147249Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:51.807810011Z","closed_at":"2026-01-02T20:41:51.807810011Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gbebk","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:57:20.921845195Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:21.424951333Z","closed_at":"2026-01-02T09:57:21.424951333Z","close_reason":"Closed","comments":[{"id":3054,"issue_id":"lettatoolsselector-gbebk","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T09:57:21Z"}]}
{"id":"lettatoolsselector-gbkjb","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:37.991683808Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:38.554226523Z","closed_at":"2026-01-02T10:59:38.554226523Z","close_reason":"Closed","comments":[{"id":3152,"issue_id":"lettatoolsselector-gbkjb","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T10:59:38Z"}]}
{"id":"lettatoolsselector-gc9sr","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:03:46.493255356Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:47.081274742Z","closed_at":"2026-01-02T20:03:47.081274742Z","close_reason":"Closed","comments":[{"id":4046,"issue_id":"lettatoolsselector-gc9sr","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T20:03:46Z"}]}
{"id":"lettatoolsselector-gcc4a","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:16:12.04472333Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:16:12.444883542Z","closed_at":"2026-01-02T16:16:12.444883542Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gcyq3","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:59.193670664Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:59.90249648Z","closed_at":"2026-01-02T20:55:59.90249648Z","close_reason":"Closed","comments":[{"id":4162,"issue_id":"lettatoolsselector-gcyq3","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T20:55:59Z"}]}
{"id":"lettatoolsselector-gd18r","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:30:22.566201765Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:22.83651995Z","closed_at":"2026-01-02T03:30:22.83651995Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gd1jl","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:57:54.625559911Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:55.129106287Z","closed_at":"2026-01-02T08:57:55.129106287Z","close_reason":"Closed","comments":[{"id":2924,"issue_id":"lettatoolsselector-gd1jl","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T08:57:54Z"}]}
{"id":"lettatoolsselector-gd841","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T05:41:07.13239809Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:07.617819841Z","closed_at":"2026-01-02T05:41:07.617819841Z","close_reason":"Closed","comments":[{"id":2485,"issue_id":"lettatoolsselector-gd841","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T05:41:07Z"}]}
{"id":"lettatoolsselector-gdncc","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:12:27.878538041Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:12:28.493626775Z","closed_at":"2026-01-02T16:12:28.493626775Z","close_reason":"Closed","comments":[{"id":3653,"issue_id":"lettatoolsselector-gdncc","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T16:12:28Z"}]}
{"id":"lettatoolsselector-gdp27","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:07.436233679Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:08.02708255Z","closed_at":"2026-01-02T11:34:08.02708255Z","close_reason":"Closed","comments":[{"id":3222,"issue_id":"lettatoolsselector-gdp27","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T11:34:07Z"}]}
{"id":"lettatoolsselector-gdphx","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:41:27.118346377Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:27.764841204Z","closed_at":"2026-01-02T20:41:27.764841204Z","close_reason":"Closed","comments":[{"id":4134,"issue_id":"lettatoolsselector-gdphx","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T20:41:27Z"}]}
{"id":"lettatoolsselector-gdwyd","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:29.877002396Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:30.320007745Z","closed_at":"2026-01-02T04:39:30.320007745Z","close_reason":"Closed","comments":[{"id":2417,"issue_id":"lettatoolsselector-gdwyd","author":"root","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2026-01-02T04:39:30Z"}]}
{"id":"lettatoolsselector-ge46","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:28.640905374Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:28.963277982Z","closed_at":"2026-01-02T01:08:28.963277982Z","close_reason":"Closed","comments":[{"id":1186,"issue_id":"lettatoolsselector-ge46","author":"root","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2026-01-02T01:08:28Z"}]}
{"id":"lettatoolsselector-gfh5n","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:37:25.13638177Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:25.672189628Z","closed_at":"2026-01-02T10:37:25.672189628Z","close_reason":"Closed","comments":[{"id":3101,"issue_id":"lettatoolsselector-gfh5n","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T10:37:25Z"}]}
{"id":"lettatoolsselector-gfhn9","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:05:12.516133608Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:05:12.943952592Z","closed_at":"2026-01-02T17:05:12.943952592Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gfu0z","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:19:04.520525025Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:05.008354228Z","closed_at":"2026-01-02T06:19:05.008354228Z","close_reason":"Closed","comments":[{"id":2585,"issue_id":"lettatoolsselector-gfu0z","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T06:19:04Z"}]}
{"id":"lettatoolsselector-gfvni","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:58:36.595042171Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:58:37.210387883Z","closed_at":"2026-01-02T19:58:37.210387883Z","close_reason":"Closed","comments":[{"id":4022,"issue_id":"lettatoolsselector-gfvni","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T19:58:36Z"}]}
{"id":"lettatoolsselector-gg4ak","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:24:41.089971507Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:41.623590157Z","closed_at":"2026-01-02T07:24:41.623590157Z","close_reason":"Closed","comments":[{"id":2731,"issue_id":"lettatoolsselector-gg4ak","author":"root","text":"Synced from Huly: LTSEL-49","created_at":"2026-01-02T07:24:41Z"}]}
{"id":"lettatoolsselector-gg4bb","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:22:38.313479762Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:38.802343592Z","closed_at":"2026-01-02T09:22:38.802343592Z","close_reason":"Closed","comments":[{"id":2974,"issue_id":"lettatoolsselector-gg4bb","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T09:22:38Z"}]}
{"id":"lettatoolsselector-gha6a","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:44.245433679Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:44.245433679Z","comments":[{"id":1803,"issue_id":"lettatoolsselector-gha6a","author":"root","text":"Synced from Beads: lettatoolsselector-eam2\n\n---\nHuly Issue: LTSEL-567","created_at":"2026-01-02T03:27:44Z"}]}
{"id":"lettatoolsselector-ghbug","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:00.352102993Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:00.903088044Z","closed_at":"2026-01-02T06:37:00.903088044Z","close_reason":"Closed","comments":[{"id":2623,"issue_id":"lettatoolsselector-ghbug","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T06:37:00Z"}]}
{"id":"lettatoolsselector-ghids","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:21:47.545911222Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:47.929032635Z","closed_at":"2026-01-02T08:21:47.929032635Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gi7b7","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:41:33.352517119Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:33.644167149Z","closed_at":"2026-01-02T04:41:33.644167149Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gidt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:08:51.512168797Z","updated_at":"2025-12-30T04:14:19.864973083Z","comments":[{"id":898,"issue_id":"lettatoolsselector-gidt","author":"root","text":"Synced from Beads: lettatoolsselector-jnc\n\n---\nHuly Issue: LTSEL-104","created_at":"2025-12-29T21:08:51Z"}]}
{"id":"lettatoolsselector-gip3r","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:52.051307856Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:52.491124691Z","closed_at":"2026-01-02T03:29:52.491124691Z","close_reason":"Closed","comments":[{"id":2072,"issue_id":"lettatoolsselector-gip3r","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T03:29:52Z"}]}
{"id":"lettatoolsselector-girmh","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:22:04.150855003Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:04.669746822Z","closed_at":"2026-01-02T09:22:04.669746822Z","close_reason":"Closed","comments":[{"id":2964,"issue_id":"lettatoolsselector-girmh","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T09:22:04Z"}]}
{"id":"lettatoolsselector-giw0r","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:38:28.237377192Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:38:28.871229223Z","closed_at":"2026-01-02T10:38:28.871229223Z","close_reason":"Closed","comments":[{"id":3109,"issue_id":"lettatoolsselector-giw0r","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T10:38:28Z"}]}
{"id":"lettatoolsselector-gj910","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:21:05.889987831Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:06.496942578Z","closed_at":"2026-01-02T04:21:06.496942578Z","close_reason":"Closed","comments":[{"id":2393,"issue_id":"lettatoolsselector-gj910","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T04:21:06Z"}]}
{"id":"lettatoolsselector-gjcfb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:16.748225714Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:16.748225714Z","comments":[{"id":1878,"issue_id":"lettatoolsselector-gjcfb","author":"root","text":"Synced from Beads: lettatoolsselector-b7bv\n\n---\nHuly Issue: LTSEL-471","created_at":"2026-01-02T03:28:17Z"}]}
{"id":"lettatoolsselector-gjfe","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:31:48.964969742Z","updated_at":"2025-12-30T02:05:58.646490163Z","comments":[{"id":1062,"issue_id":"lettatoolsselector-gjfe","author":"root","text":"Synced from Beads: lettatoolsselector-ksi\n\n---\nHuly Issue: LTSEL-64","created_at":"2025-12-29T21:31:49Z"}]}
{"id":"lettatoolsselector-gk05m","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:45.170116036Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:45.646298638Z","closed_at":"2026-01-02T07:42:45.646298638Z","close_reason":"Closed","comments":[{"id":2760,"issue_id":"lettatoolsselector-gk05m","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T07:42:45Z"}]}
{"id":"lettatoolsselector-gk9w6","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:03:26.990713435Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:27.478157758Z","closed_at":"2026-01-02T20:03:27.478157758Z","close_reason":"Closed"}
{"id":"lettatoolsselector-glvvm","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:41:52.012133943Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:52.554090869Z","closed_at":"2026-01-02T09:41:52.554090869Z","close_reason":"Closed","comments":[{"id":3008,"issue_id":"lettatoolsselector-glvvm","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T09:41:52Z"}]}
{"id":"lettatoolsselector-gm61r","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:33:52.572756927Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:33:53.260008349Z","closed_at":"2026-01-02T21:33:53.260008349Z","close_reason":"Closed","comments":[{"id":4234,"issue_id":"lettatoolsselector-gm61r","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T21:33:52Z"}]}
{"id":"lettatoolsselector-gmzy0","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:15:31.307326214Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:15:32.030061477Z","closed_at":"2026-01-02T22:15:32.030061477Z","close_reason":"Closed","comments":[{"id":4300,"issue_id":"lettatoolsselector-gmzy0","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T22:15:31Z"}]}
{"id":"lettatoolsselector-gnb6j","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:31.441030842Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:32.055889099Z","closed_at":"2026-01-02T14:57:32.055889099Z","close_reason":"Closed","comments":[{"id":3489,"issue_id":"lettatoolsselector-gnb6j","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T14:57:31Z"}]}
{"id":"lettatoolsselector-gnoc4","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:06:42.339498078Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:42.749425241Z","closed_at":"2026-01-02T03:06:42.749425241Z","close_reason":"Closed","comments":[{"id":1562,"issue_id":"lettatoolsselector-gnoc4","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T03:06:42Z"}]}
{"id":"lettatoolsselector-gnsrt","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:06:14.388399921Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:06:16.389863701Z","closed_at":"2026-01-02T21:06:16.389863701Z","close_reason":"Closed","comments":[{"id":4193,"issue_id":"lettatoolsselector-gnsrt","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T21:06:16Z"}]}
{"id":"lettatoolsselector-go0y5","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:23:24.685102328Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:25.244967916Z","closed_at":"2026-01-02T15:23:25.244967916Z","close_reason":"Closed","comments":[{"id":3569,"issue_id":"lettatoolsselector-go0y5","author":"root","text":"Synced from Huly: LTSEL-221","created_at":"2026-01-02T15:23:25Z"}]}
{"id":"lettatoolsselector-go5ig","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:21:36.972959139Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:37.466921034Z","closed_at":"2026-01-02T09:21:37.466921034Z","close_reason":"Closed","comments":[{"id":2954,"issue_id":"lettatoolsselector-go5ig","author":"root","text":"Synced from Huly: LTSEL-241","created_at":"2026-01-02T09:21:37Z"}]}
{"id":"lettatoolsselector-goq2v","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:54.27830551Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:54.865095149Z","closed_at":"2026-01-02T07:23:54.865095149Z","close_reason":"Closed","comments":[{"id":2709,"issue_id":"lettatoolsselector-goq2v","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T07:23:54Z"}]}
{"id":"lettatoolsselector-gpb9z","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:42:48.749132291Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:49.218840095Z","closed_at":"2026-01-02T07:42:49.218840095Z","close_reason":"Closed","comments":[{"id":2763,"issue_id":"lettatoolsselector-gpb9z","author":"root","text":"Synced from Huly: LTSEL-247","created_at":"2026-01-02T07:42:49Z"}]}
{"id":"lettatoolsselector-gpdu","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:25.278239064Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:25.715980689Z","closed_at":"2026-01-02T02:19:25.715980689Z","close_reason":"Closed","comments":[{"id":1272,"issue_id":"lettatoolsselector-gpdu","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T02:19:25Z"}]}
{"id":"lettatoolsselector-gpo","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:51:44.752460034Z","updated_at":"2025-12-29T21:33:45.635329625Z","closed_at":"2025-12-29T21:33:45.635329625Z","close_reason":"Duplicate","comments":[{"id":247,"issue_id":"lettatoolsselector-gpo","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T19:51:45Z"}]}
{"id":"lettatoolsselector-gpqp3","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:37:16.287773763Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:37:16.90928475Z","closed_at":"2026-01-02T11:37:16.90928475Z","close_reason":"Closed","comments":[{"id":3246,"issue_id":"lettatoolsselector-gpqp3","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T11:37:16Z"}]}
{"id":"lettatoolsselector-gpzt1","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:21:47.555176563Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:47.979271327Z","closed_at":"2026-01-02T04:21:47.979271327Z","close_reason":"Closed","comments":[{"id":2397,"issue_id":"lettatoolsselector-gpzt1","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T04:21:47Z"}]}
{"id":"lettatoolsselector-gq4ch","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:50:15.955734509Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:50:16.643230621Z","closed_at":"2026-01-02T18:50:16.643230621Z","close_reason":"Closed","comments":[{"id":3888,"issue_id":"lettatoolsselector-gq4ch","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T18:50:16Z"}]}
{"id":"lettatoolsselector-gq4d1","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:13:05.552444335Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:13:06.146805776Z","closed_at":"2026-01-02T16:13:06.146805776Z","close_reason":"Closed","comments":[{"id":3655,"issue_id":"lettatoolsselector-gq4d1","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T16:13:05Z"}]}
{"id":"lettatoolsselector-gq6e","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:10.650570871Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:10.872729704Z","closed_at":"2026-01-02T01:25:10.872729704Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gq6ya","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:56.611736216Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:57.142967755Z","closed_at":"2026-01-02T05:59:57.142967755Z","close_reason":"Closed","comments":[{"id":2513,"issue_id":"lettatoolsselector-gq6ya","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T05:59:56Z"}]}
{"id":"lettatoolsselector-gqab","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:34.85471384Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:35.073965848Z","closed_at":"2026-01-02T01:08:35.073965848Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gqoq8","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:51:15.394193445Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:51:16.237684022Z","closed_at":"2026-01-02T21:51:16.237684022Z","close_reason":"Closed","comments":[{"id":4273,"issue_id":"lettatoolsselector-gqoq8","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T21:51:15Z"}]}
{"id":"lettatoolsselector-gqpgc","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:02:41.740193952Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:42.175381115Z","closed_at":"2026-01-02T12:02:42.175381115Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gqqbg","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:58:47.133063606Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:47.596683187Z","closed_at":"2026-01-02T14:58:47.596683187Z","close_reason":"Closed"}
{"id":"lettatoolsselector-grw93","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:21:13.001249011Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:21:13.590216219Z","closed_at":"2026-01-02T19:21:13.590216219Z","close_reason":"Closed","comments":[{"id":3940,"issue_id":"lettatoolsselector-grw93","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T19:21:13Z"}]}
{"id":"lettatoolsselector-gs6z8","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:01.981070254Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:02.418182983Z","closed_at":"2026-01-02T04:20:02.418182983Z","close_reason":"Closed","comments":[{"id":2353,"issue_id":"lettatoolsselector-gs6z8","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T04:20:02Z"}]}
{"id":"lettatoolsselector-gsaac","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:55.953581438Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:55.953581438Z","comments":[{"id":1965,"issue_id":"lettatoolsselector-gsaac","author":"root","text":"Synced from Beads: lettatoolsselector-kj6l\n\n---\nHuly Issue: LTSEL-353","created_at":"2026-01-02T03:28:56Z"}]}
{"id":"lettatoolsselector-gt0pj","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:02.570464126Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:03.124321392Z","closed_at":"2026-01-02T11:59:03.124321392Z","close_reason":"Closed","comments":[{"id":3258,"issue_id":"lettatoolsselector-gt0pj","author":"root","text":"Synced from Huly: LTSEL-42","created_at":"2026-01-02T11:59:02Z"}]}
{"id":"lettatoolsselector-gt3rx","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:17:09.608118143Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:17:10.499316538Z","closed_at":"2026-01-02T22:17:10.499316538Z","close_reason":"Closed","comments":[{"id":4310,"issue_id":"lettatoolsselector-gt3rx","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T22:17:10Z"}]}
{"id":"lettatoolsselector-gt93i","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:42.081147242Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:42.081147242Z","comments":[{"id":1798,"issue_id":"lettatoolsselector-gt93i","author":"root","text":"Synced from Beads: lettatoolsselector-w72s\n\n---\nHuly Issue: LTSEL-576","created_at":"2026-01-02T03:27:42Z"}]}
{"id":"lettatoolsselector-gtb7","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:03.341094787Z","updated_at":"2025-12-29T21:33:25.711961938Z","closed_at":"2025-12-29T21:33:25.711961938Z","close_reason":"Duplicate","comments":[{"id":562,"issue_id":"lettatoolsselector-gtb7","author":"root","text":"## Purpose\n\nGuard against regression where pagination is forgotten and only partial tools returned.\n\n## Test Scenario\n\n1. Mock Letta API to return 10 tools per page (3 pages total = 30 tools)\n2. Call list_agent_tools(agent_id)\n3. Assert: Returns all 30 tools\n4. Assert: Makes correct number of API calls\n\n## Acceptance Criteria\n\n- [ ] Test uses mocked responses (no real API)\n- [ ] Covers edge cases: 0 tools, exactly 1 page, multiple pages\n- [ ] Fails if fewer tools returned than expected\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock or responses library\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-21","created_at":"2025-12-29T20:32:03Z"}]}
{"id":"lettatoolsselector-gtnjy","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:57:14.16665432Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:14.507770312Z","closed_at":"2026-01-02T08:57:14.507770312Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gtxm","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T01:08:32.994112782Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:33.315339795Z","closed_at":"2026-01-02T01:08:33.315339795Z","close_reason":"Closed","comments":[{"id":1194,"issue_id":"lettatoolsselector-gtxm","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T01:08:33Z"}]}
{"id":"lettatoolsselector-gtykm","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:52:02.185029805Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:52:03.020128573Z","closed_at":"2026-01-02T22:52:03.020128573Z","close_reason":"Closed","comments":[{"id":4383,"issue_id":"lettatoolsselector-gtykm","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T22:52:02Z"}]}
{"id":"lettatoolsselector-guhm","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:34:59.160322696Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:34:59.528259401Z","closed_at":"2026-01-02T02:34:59.528259401Z","close_reason":"Closed","comments":[{"id":1318,"issue_id":"lettatoolsselector-guhm","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T02:34:59Z"}]}
{"id":"lettatoolsselector-gutl1","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:36:09.661908175Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:36:10.244263069Z","closed_at":"2026-01-02T14:36:10.244263069Z","close_reason":"Closed","comments":[{"id":3483,"issue_id":"lettatoolsselector-gutl1","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T14:36:10Z"}]}
{"id":"lettatoolsselector-gv296","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:58:10.109908525Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:10.674513081Z","closed_at":"2026-01-02T14:58:10.674513081Z","close_reason":"Closed","comments":[{"id":3503,"issue_id":"lettatoolsselector-gv296","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T14:58:10Z"}]}
{"id":"lettatoolsselector-gvcwn","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:02:25.499505093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:26.068289469Z","closed_at":"2026-01-02T12:02:26.068289469Z","close_reason":"Closed","comments":[{"id":3279,"issue_id":"lettatoolsselector-gvcwn","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T12:02:25Z"}]}
{"id":"lettatoolsselector-gvngt","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:44.419278339Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:44.827573541Z","closed_at":"2026-01-02T03:46:44.827573541Z","close_reason":"Closed","comments":[{"id":2284,"issue_id":"lettatoolsselector-gvngt","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T03:46:44Z"}]}
{"id":"lettatoolsselector-gw1vr","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:42:25.801153769Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:42:26.220359938Z","closed_at":"2026-01-02T19:42:26.220359938Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gwavb","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:04:18.264923925Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:04:18.828431028Z","closed_at":"2026-01-02T08:04:18.828431028Z","close_reason":"Closed","comments":[{"id":2835,"issue_id":"lettatoolsselector-gwavb","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T08:04:18Z"}]}
{"id":"lettatoolsselector-gwm8j","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:30:12.050675252Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:12.482798102Z","closed_at":"2026-01-02T03:30:12.482798102Z","close_reason":"Closed","comments":[{"id":2096,"issue_id":"lettatoolsselector-gwm8j","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T03:30:12Z"}]}
{"id":"lettatoolsselector-gwsmv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:58.859447343Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:58.859447343Z","comments":[{"id":1971,"issue_id":"lettatoolsselector-gwsmv","author":"root","text":"Synced from Beads: lettatoolsselector-p29d\n\n---\nHuly Issue: LTSEL-346","created_at":"2026-01-02T03:28:59Z"}]}
{"id":"lettatoolsselector-gww5","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:18:59.649696769Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:00.123834908Z","closed_at":"2026-01-02T02:19:00.123834908Z","close_reason":"Closed","comments":[{"id":1265,"issue_id":"lettatoolsselector-gww5","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T02:18:59Z"}]}
{"id":"lettatoolsselector-gx3ea","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:29:29.350624197Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:29.756193937Z","closed_at":"2026-01-02T18:29:29.756193937Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gy1vs","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:57:32.622530829Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:57:33.387702925Z","closed_at":"2026-01-02T20:57:33.387702925Z","close_reason":"Closed","comments":[{"id":4169,"issue_id":"lettatoolsselector-gy1vs","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T20:57:33Z"}]}
{"id":"lettatoolsselector-gy2y","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:02:35.99696406Z","updated_at":"2025-12-30T04:14:05.362397814Z","comments":[{"id":833,"issue_id":"lettatoolsselector-gy2y","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-109","created_at":"2025-12-29T21:02:36Z"}]}
{"id":"lettatoolsselector-gygm","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:09.28510151Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:09.723134139Z","closed_at":"2026-01-02T02:35:09.723134139Z","close_reason":"Closed","comments":[{"id":1335,"issue_id":"lettatoolsselector-gygm","author":"root","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2026-01-02T02:35:09Z"}]}
{"id":"lettatoolsselector-gyjoc","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:10.634766332Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:11.174649795Z","closed_at":"2026-01-02T11:09:11.174649795Z","close_reason":"Closed","comments":[{"id":3166,"issue_id":"lettatoolsselector-gyjoc","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T11:09:10Z"}]}
{"id":"lettatoolsselector-gyl0b","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:59.807708645Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:26:00.580734179Z","closed_at":"2026-01-02T17:26:00.580734179Z","close_reason":"Closed","comments":[{"id":3739,"issue_id":"lettatoolsselector-gyl0b","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T17:26:00Z"}]}
{"id":"lettatoolsselector-gyt91","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:15:25.782884244Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:15:26.530800817Z","closed_at":"2026-01-02T22:15:26.530800817Z","close_reason":"Closed","comments":[{"id":4299,"issue_id":"lettatoolsselector-gyt91","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T22:15:26Z"}]}
{"id":"lettatoolsselector-gzccc","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:04.43761573Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:04.770199679Z","closed_at":"2026-01-02T06:37:04.770199679Z","close_reason":"Closed"}
{"id":"lettatoolsselector-gzt83","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:14.386686162Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:14.883574057Z","closed_at":"2026-01-02T06:37:14.883574057Z","close_reason":"Closed","comments":[{"id":2635,"issue_id":"lettatoolsselector-gzt83","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T06:37:14Z"}]}
{"id":"lettatoolsselector-gzzkd","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T19:40:51.252501148Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:40:51.890860287Z","closed_at":"2026-01-02T19:40:51.890860287Z","close_reason":"Closed","comments":[{"id":3996,"issue_id":"lettatoolsselector-gzzkd","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T19:40:51Z"}]}
{"id":"lettatoolsselector-h00ir","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:25.866172038Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:27.202326163Z","closed_at":"2026-01-02T07:02:27.202326163Z","close_reason":"Closed","comments":[{"id":2644,"issue_id":"lettatoolsselector-h00ir","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T07:02:26Z"}]}
{"id":"lettatoolsselector-h0jie","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:10.157896957Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:10.605868621Z","closed_at":"2026-01-02T03:47:10.605868621Z","close_reason":"Closed","comments":[{"id":2308,"issue_id":"lettatoolsselector-h0jie","author":"root","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2026-01-02T03:47:10Z"}]}
{"id":"lettatoolsselector-h0m4e","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:12.823579979Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:12.823579979Z","comments":[{"id":2000,"issue_id":"lettatoolsselector-h0m4e","author":"root","text":"Synced from Beads: lettatoolsselector-kgpe\n\n---\nHuly Issue: LTSEL-315","created_at":"2026-01-02T03:29:13Z"}]}
{"id":"lettatoolsselector-h0ur","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:02.765277126Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:03.180226339Z","closed_at":"2026-01-02T02:35:03.180226339Z","close_reason":"Closed","comments":[{"id":1324,"issue_id":"lettatoolsselector-h0ur","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T02:35:03Z"}]}
{"id":"lettatoolsselector-h1b2y","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:01.882600965Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:01.882600965Z","comments":[{"id":1844,"issue_id":"lettatoolsselector-h1b2y","author":"root","text":"Synced from Beads: lettatoolsselector-tife\n\n---\nHuly Issue: LTSEL-508","created_at":"2026-01-02T03:28:02Z"}]}
{"id":"lettatoolsselector-h1bnv","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:43.805567433Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:43.805567433Z","comments":[{"id":2201,"issue_id":"lettatoolsselector-h1bnv","author":"root","text":"Synced from Beads: lettatoolsselector-4hc2\n\n---\nHuly Issue: LTSEL-654","created_at":"2026-01-02T03:43:44Z"}]}
{"id":"lettatoolsselector-h1j60","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:03:20.581855105Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:21.028902713Z","closed_at":"2026-01-02T08:03:21.028902713Z","close_reason":"Closed"}
{"id":"lettatoolsselector-h350i","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:16:30.014282037Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:16:30.794983853Z","closed_at":"2026-01-02T22:16:30.794983853Z","close_reason":"Closed","comments":[{"id":4305,"issue_id":"lettatoolsselector-h350i","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T22:16:30Z"}]}
{"id":"lettatoolsselector-h39kz","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:41:47.00614787Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:47.448118313Z","closed_at":"2026-01-02T04:41:47.448118313Z","close_reason":"Closed","comments":[{"id":2448,"issue_id":"lettatoolsselector-h39kz","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T04:41:47Z"}]}
{"id":"lettatoolsselector-h3w6z","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:48:49.436629208Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:49.914959364Z","closed_at":"2026-01-02T03:48:49.914959364Z","close_reason":"Closed","comments":[{"id":2341,"issue_id":"lettatoolsselector-h3w6z","author":"root","text":"Synced from Huly: LTSEL-236","created_at":"2026-01-02T03:48:49Z"}]}
{"id":"lettatoolsselector-h4zxo","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:02:38.958087889Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:39.49152451Z","closed_at":"2026-01-02T12:02:39.49152451Z","close_reason":"Closed","comments":[{"id":3282,"issue_id":"lettatoolsselector-h4zxo","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T12:02:39Z"}]}
{"id":"lettatoolsselector-h54p","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:12.799660276Z","updated_at":"2025-12-29T21:33:26.31685767Z","closed_at":"2025-12-29T21:33:26.31685767Z","close_reason":"Duplicate","comments":[{"id":535,"issue_id":"lettatoolsselector-h54p","author":"root","text":"Synced from Beads: lettatoolsselector-9xp\n\n---\nHuly Issue: LTSEL-181","created_at":"2025-12-29T20:29:13Z"}]}
{"id":"lettatoolsselector-h55k0","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:45.909734898Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:46.467132668Z","closed_at":"2026-01-02T08:54:46.467132668Z","close_reason":"Closed","comments":[{"id":2886,"issue_id":"lettatoolsselector-h55k0","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T08:54:46Z"}]}
{"id":"lettatoolsselector-h62ab","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:27:39.520317101Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:27:40.018289199Z","closed_at":"2026-01-02T21:27:40.018289199Z","close_reason":"Closed"}
{"id":"lettatoolsselector-h6lj8","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:43.966841273Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:44.485049301Z","closed_at":"2026-01-02T10:57:44.485049301Z","close_reason":"Closed","comments":[{"id":3117,"issue_id":"lettatoolsselector-h6lj8","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T10:57:44Z"}]}
{"id":"lettatoolsselector-h6lw","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:35:28.408423998Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:28.766359415Z","closed_at":"2026-01-02T02:35:28.766359415Z","close_reason":"Closed","comments":[{"id":1359,"issue_id":"lettatoolsselector-h6lw","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T02:35:28Z"}]}
{"id":"lettatoolsselector-h6oy4","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:58:23.871272771Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:58:24.476731953Z","closed_at":"2026-01-02T19:58:24.476731953Z","close_reason":"Closed","comments":[{"id":4021,"issue_id":"lettatoolsselector-h6oy4","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T19:58:24Z"}]}
{"id":"lettatoolsselector-h6u11","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:57:09.29198517Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:09.858908525Z","closed_at":"2026-01-02T12:57:09.858908525Z","close_reason":"Closed","comments":[{"id":3323,"issue_id":"lettatoolsselector-h6u11","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T12:57:09Z"}]}
{"id":"lettatoolsselector-h7366","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:40:12.947836464Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:13.901340656Z","closed_at":"2026-01-02T04:40:13.901340656Z","close_reason":"Closed","comments":[{"id":2435,"issue_id":"lettatoolsselector-h7366","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T04:40:13Z"}]}
{"id":"lettatoolsselector-h7o2t","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:32.38420721Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:32.38420721Z","comments":[{"id":2193,"issue_id":"lettatoolsselector-h7o2t","author":"root","text":"Synced from Beads: lettatoolsselector-9q81\n\n---\nHuly Issue: LTSEL-676","created_at":"2026-01-02T03:43:32Z"}]}
{"id":"lettatoolsselector-h88b2","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:42:10.646207046Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:42:11.014256188Z","closed_at":"2026-01-02T09:42:11.014256188Z","close_reason":"Closed"}
{"id":"lettatoolsselector-h8dmk","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:04:43.427198265Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:04:44.967563569Z","closed_at":"2026-01-02T14:04:44.967563569Z","close_reason":"Closed","comments":[{"id":3387,"issue_id":"lettatoolsselector-h8dmk","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T14:04:44Z"}]}
{"id":"lettatoolsselector-h8kn9","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:01:58.991592997Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:01:59.525459265Z","closed_at":"2026-01-02T08:01:59.525459265Z","close_reason":"Closed","comments":[{"id":2794,"issue_id":"lettatoolsselector-h8kn9","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T08:01:59Z"}]}
{"id":"lettatoolsselector-ha124","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:18:01.357132564Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:01.885659492Z","closed_at":"2026-01-02T06:18:01.885659492Z","close_reason":"Closed","comments":[{"id":2567,"issue_id":"lettatoolsselector-ha124","author":"root","text":"Synced from Huly: LTSEL-219","created_at":"2026-01-02T06:18:01Z"}]}
{"id":"lettatoolsselector-haj6w","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:25:12.119524807Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:25:12.506061372Z","closed_at":"2026-01-02T15:25:12.506061372Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hauo7","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:00:06.106082342Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:00:06.50420059Z","closed_at":"2026-01-02T20:00:06.50420059Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hbal1","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:34.294503456Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:34.688205537Z","closed_at":"2026-01-02T03:06:34.688205537Z","close_reason":"Closed","comments":[{"id":1556,"issue_id":"lettatoolsselector-hbal1","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T03:06:34Z"}]}
{"id":"lettatoolsselector-hbhlo","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:30:16.750048146Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:30:18.612366343Z","closed_at":"2026-01-02T18:30:18.612366343Z","close_reason":"Closed","comments":[{"id":3863,"issue_id":"lettatoolsselector-hbhlo","author":"root","text":"Synced from Huly: LTSEL-53","created_at":"2026-01-02T18:30:18Z"}]}
{"id":"lettatoolsselector-hbnka","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:21.152960363Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:21.152960363Z","comments":[{"id":2016,"issue_id":"lettatoolsselector-hbnka","author":"root","text":"Synced from Beads: lettatoolsselector-c8lu\n\n---\nHuly Issue: LTSEL-299","created_at":"2026-01-02T03:29:21Z"}]}
{"id":"lettatoolsselector-hcbw7","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:57:08.174103735Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:57:08.79941682Z","closed_at":"2026-01-02T20:57:08.79941682Z","close_reason":"Closed","comments":[{"id":4165,"issue_id":"lettatoolsselector-hcbw7","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T20:57:08Z"}]}
{"id":"lettatoolsselector-hcmf","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:08.233271865Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:08.700832398Z","closed_at":"2026-01-02T01:25:08.700832398Z","close_reason":"Closed","comments":[{"id":1245,"issue_id":"lettatoolsselector-hcmf","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T01:25:08Z"}]}
{"id":"lettatoolsselector-hcns","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:03:35.233788534Z","updated_at":"2025-12-30T04:14:08.424858387Z","comments":[{"id":844,"issue_id":"lettatoolsselector-hcns","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-60","created_at":"2025-12-29T21:03:35Z"}]}
{"id":"lettatoolsselector-hcts4","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:27:03.171697958Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:27:03.760394801Z","closed_at":"2026-01-02T18:27:03.760394801Z","close_reason":"Closed","comments":[{"id":3850,"issue_id":"lettatoolsselector-hcts4","author":"root","text":"Synced from Huly: LTSEL-226","created_at":"2026-01-02T18:27:03Z"}]}
{"id":"lettatoolsselector-hd9ph","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:39.467143624Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:39.467143624Z","comments":[{"id":1792,"issue_id":"lettatoolsselector-hd9ph","author":"root","text":"Synced from Beads: lettatoolsselector-rcqy\n\n---\nHuly Issue: LTSEL-584","created_at":"2026-01-02T03:27:39Z"}]}
{"id":"lettatoolsselector-hdcyr","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:51:11.755536847Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:51:12.316571932Z","closed_at":"2026-01-02T21:51:12.316571932Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hdddy","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:59:34.089973334Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:34.443997044Z","closed_at":"2026-01-02T10:59:34.443997044Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hdluq","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:57:22.431741707Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:22.806322151Z","closed_at":"2026-01-02T09:57:22.806322151Z","close_reason":"Closed"}
{"id":"lettatoolsselector-he6fm","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:06:41.262927826Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:41.523454211Z","closed_at":"2026-01-02T03:06:41.523454211Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hepkk","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:31:20.361722669Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:31:21.032849024Z","closed_at":"2026-01-02T17:31:21.032849024Z","close_reason":"Closed","comments":[{"id":3768,"issue_id":"lettatoolsselector-hepkk","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T17:31:20Z"}]}
{"id":"lettatoolsselector-hfzdx","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:15.682462751Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:16.203803969Z","closed_at":"2026-01-02T07:24:16.203803969Z","close_reason":"Closed","comments":[{"id":2719,"issue_id":"lettatoolsselector-hfzdx","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T07:24:15Z"}]}
{"id":"lettatoolsselector-hg23j","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:07.67585082Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:07.67585082Z","comments":[{"id":1857,"issue_id":"lettatoolsselector-hg23j","author":"root","text":"Synced from Beads: lettatoolsselector-msav\n\n---\nHuly Issue: LTSEL-493","created_at":"2026-01-02T03:28:07Z"}]}
{"id":"lettatoolsselector-hgaot","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:48:17.476782173Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:17.890603451Z","closed_at":"2026-01-02T03:48:17.890603451Z","close_reason":"Closed","comments":[{"id":2333,"issue_id":"lettatoolsselector-hgaot","author":"root","text":"Synced from Huly: LTSEL-228","created_at":"2026-01-02T03:48:17Z"}]}
{"id":"lettatoolsselector-hgo2","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:03.0788416Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:03.320211542Z","closed_at":"2026-01-02T02:20:03.320211542Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hgqzr","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:41.335305188Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:41.335305188Z","comments":[{"id":2199,"issue_id":"lettatoolsselector-hgqzr","author":"root","text":"Synced from Beads: lettatoolsselector-np74\n\n---\nHuly Issue: LTSEL-660","created_at":"2026-01-02T03:43:41Z"}]}
{"id":"lettatoolsselector-hhcw9","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:58:39.624601373Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:58:40.21311585Z","closed_at":"2026-01-02T19:58:40.21311585Z","close_reason":"Closed","comments":[{"id":4023,"issue_id":"lettatoolsselector-hhcw9","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T19:58:39Z"}]}
{"id":"lettatoolsselector-hhl","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:28.031316453Z","updated_at":"2025-12-29T18:55:57.998322623Z","closed_at":"2025-12-29T18:55:57.998322623Z","close_reason":"Duplicate of closed lettatoolsselector-4tm","comments":[{"id":12,"issue_id":"lettatoolsselector-hhl","author":"node","text":"## Problem\n\nTool management logic is duplicated across webhook-receiver and tool-selector repos, causing drift and inconsistent behavior.\n\n## Solution\n\nCreate a shared Python package  that can be installed in both repos.\n\n## Acceptance Criteria\n\n- [ ] Package scaffold with  and proper versioning\n- [ ] Package published to private PyPI or installable via git+https\n- [ ] Basic CI/CD pipeline for testing and publishing\n- [ ] README with installation and usage instructions\n\n## Technical Notes\n\n- Use  layout for clean imports\n- Target Python 3.11+\n- Include type hints throughout\n\n---\nHuly Issue: LTSEL-1","created_at":"2025-12-22T23:46:28Z"}]}
{"id":"lettatoolsselector-hifal","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T04:40:59.083345605Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:59.629158667Z","closed_at":"2026-01-02T04:40:59.629158667Z","close_reason":"Closed","comments":[{"id":2439,"issue_id":"lettatoolsselector-hifal","author":"root","text":"Synced from Huly: LTSEL-245","created_at":"2026-01-02T04:40:59Z"}]}
{"id":"lettatoolsselector-hiyze","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:06.646868968Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:07.05993435Z","closed_at":"2026-01-02T03:30:07.05993435Z","close_reason":"Closed","comments":[{"id":2089,"issue_id":"lettatoolsselector-hiyze","author":"root","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2026-01-02T03:30:06Z"}]}
{"id":"lettatoolsselector-hj12h","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T05:41:11.298860001Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:11.696415263Z","closed_at":"2026-01-02T05:41:11.696415263Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hjhu7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:41.590809343Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:41.590809343Z","comments":[{"id":1797,"issue_id":"lettatoolsselector-hjhu7","author":"root","text":"Synced from Beads: lettatoolsselector-dm03\n\n---\nHuly Issue: LTSEL-577","created_at":"2026-01-02T03:27:41Z"}]}
{"id":"lettatoolsselector-hjnxo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:29.474701521Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:29.474701521Z","comments":[{"id":1907,"issue_id":"lettatoolsselector-hjnxo","author":"root","text":"Synced from Beads: lettatoolsselector-yhqa\n\n---\nHuly Issue: LTSEL-428","created_at":"2026-01-02T03:28:29Z"}]}
{"id":"lettatoolsselector-hjo1n","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:31:21.247594561Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:31:21.803402594Z","closed_at":"2026-01-02T14:31:21.803402594Z","close_reason":"Closed","comments":[{"id":3463,"issue_id":"lettatoolsselector-hjo1n","author":"root","text":"Synced from Huly: LTSEL-241","created_at":"2026-01-02T14:31:21Z"}]}
{"id":"lettatoolsselector-hk1g6","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:18:08.998828382Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:18:09.596201633Z","closed_at":"2026-01-02T16:18:09.596201633Z","close_reason":"Closed","comments":[{"id":3671,"issue_id":"lettatoolsselector-hk1g6","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T16:18:09Z"}]}
{"id":"lettatoolsselector-hka1i","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:45.912862196Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:46.459105778Z","closed_at":"2026-01-02T11:59:46.459105778Z","close_reason":"Closed","comments":[{"id":3269,"issue_id":"lettatoolsselector-hka1i","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T11:59:46Z"}]}
{"id":"lettatoolsselector-hklk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:15:52.689084678Z","updated_at":"2025-12-30T01:50:35.32686544Z","comments":[{"id":967,"issue_id":"lettatoolsselector-hklk","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-82","created_at":"2025-12-29T21:15:53Z"}]}
{"id":"lettatoolsselector-hmch","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:27.388654134Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:27.817384369Z","closed_at":"2026-01-02T01:08:27.817384369Z","close_reason":"Closed","comments":[{"id":1184,"issue_id":"lettatoolsselector-hmch","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T01:08:27Z"}]}
{"id":"lettatoolsselector-hmwmc","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:28:04.83643273Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:28:05.463612524Z","closed_at":"2026-01-02T22:28:05.463612524Z","close_reason":"Closed","comments":[{"id":4333,"issue_id":"lettatoolsselector-hmwmc","author":"root","text":"Synced from Huly: LTSEL-236","created_at":"2026-01-02T22:28:05Z"}]}
{"id":"lettatoolsselector-hng3e","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:39.262102982Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:39.262102982Z","comments":[{"id":1929,"issue_id":"lettatoolsselector-hng3e","author":"root","text":"Synced from Beads: lettatoolsselector-9lc7\n\n---\nHuly Issue: LTSEL-399","created_at":"2026-01-02T03:28:39Z"}]}
{"id":"lettatoolsselector-hnlqx","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:47:35.785168408Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:47:36.270047635Z","closed_at":"2026-01-02T15:47:36.270047635Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hnqcy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:03.136769447Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:03.136769447Z","comments":[{"id":1847,"issue_id":"lettatoolsselector-hnqcy","author":"root","text":"Synced from Beads: lettatoolsselector-w6w0\n\n---\nHuly Issue: LTSEL-504","created_at":"2026-01-02T03:28:03Z"}]}
{"id":"lettatoolsselector-hnt3","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:10.007060585Z","updated_at":"2025-12-29T21:33:25.14490105Z","closed_at":"2025-12-29T21:33:25.14490105Z","close_reason":"Duplicate","comments":[{"id":589,"issue_id":"lettatoolsselector-hnt3","author":"root","text":"Synced from Beads: lettatoolsselector-c33\n\n---\nHuly Issue: LTSEL-172","created_at":"2025-12-29T20:34:10Z"}]}
{"id":"lettatoolsselector-hnydl","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:20:22.139734267Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:22.589968448Z","closed_at":"2026-01-02T04:20:22.589968448Z","close_reason":"Closed","comments":[{"id":2378,"issue_id":"lettatoolsselector-hnydl","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T04:20:22Z"}]}
{"id":"lettatoolsselector-hodq6","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:23:46.807049552Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:23:47.453773948Z","closed_at":"2026-01-02T22:23:47.453773948Z","close_reason":"Closed","comments":[{"id":4326,"issue_id":"lettatoolsselector-hodq6","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T22:23:47Z"}]}
{"id":"lettatoolsselector-hp3mf","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:19:27.790738367Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:19:28.255598672Z","closed_at":"2026-01-02T20:19:28.255598672Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hp8np","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:22:53.235403371Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:22:53.892129211Z","closed_at":"2026-01-02T21:22:53.892129211Z","close_reason":"Closed","comments":[{"id":4202,"issue_id":"lettatoolsselector-hp8np","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T21:22:53Z"}]}
{"id":"lettatoolsselector-hpsw","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:39.414665542Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:39.74333537Z","closed_at":"2026-01-02T01:08:39.74333537Z","close_reason":"Closed","comments":[{"id":1201,"issue_id":"lettatoolsselector-hpsw","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T01:08:39Z"}]}
{"id":"lettatoolsselector-hpy","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:07:56.242227298Z","updated_at":"2025-12-29T21:33:44.769482748Z","closed_at":"2025-12-29T21:33:44.769482748Z","close_reason":"Duplicate","comments":[{"id":292,"issue_id":"lettatoolsselector-hpy","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T20:07:56Z"}]}
{"id":"lettatoolsselector-hqc5j","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:52:09.703553216Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:52:10.329195056Z","closed_at":"2026-01-02T18:52:10.329195056Z","close_reason":"Closed","comments":[{"id":3902,"issue_id":"lettatoolsselector-hqc5j","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T18:52:10Z"}]}
{"id":"lettatoolsselector-hqgrz","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:30:33.729813346Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:30:34.333138773Z","closed_at":"2026-01-02T18:30:34.333138773Z","close_reason":"Closed","comments":[{"id":3866,"issue_id":"lettatoolsselector-hqgrz","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T18:30:34Z"}]}
{"id":"lettatoolsselector-hqimk","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:43:26.404017415Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:43:27.010424302Z","closed_at":"2026-01-02T19:43:27.010424302Z","close_reason":"Closed","comments":[{"id":4009,"issue_id":"lettatoolsselector-hqimk","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T19:43:26Z"}]}
{"id":"lettatoolsselector-hqw47","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:20:32.587692426Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:33.079582763Z","closed_at":"2026-01-02T04:20:33.079582763Z","close_reason":"Closed","comments":[{"id":2381,"issue_id":"lettatoolsselector-hqw47","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T04:20:32Z"}]}
{"id":"lettatoolsselector-hrh7w","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:21.253562753Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:21.885367182Z","closed_at":"2026-01-02T19:38:21.885367182Z","close_reason":"Closed","comments":[{"id":3973,"issue_id":"lettatoolsselector-hrh7w","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T19:38:21Z"}]}
{"id":"lettatoolsselector-hru9w","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:39:26.589378044Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:27.270155997Z","closed_at":"2026-01-02T19:39:27.270155997Z","close_reason":"Closed","comments":[{"id":3987,"issue_id":"lettatoolsselector-hru9w","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T19:39:27Z"}]}
{"id":"lettatoolsselector-hrvq2","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:28.131123823Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:28.652915174Z","closed_at":"2026-01-02T08:02:28.652915174Z","close_reason":"Closed","comments":[{"id":2805,"issue_id":"lettatoolsselector-hrvq2","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T08:02:28Z"}]}
{"id":"lettatoolsselector-hs2tp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:29.044589405Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:29.179753276Z","comments":[{"id":2321,"issue_id":"lettatoolsselector-hs2tp","author":"root","text":"Synced from Beads: lettatoolsselector-uj0r\n\n\n\n---\nHuly Issue: LTSEL-252","created_at":"2026-01-02T03:47:29Z"}]}
{"id":"lettatoolsselector-hs89r","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:44:59.647951958Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:45:00.265356935Z","closed_at":"2026-01-02T19:45:00.265356935Z","close_reason":"Closed","comments":[{"id":4010,"issue_id":"lettatoolsselector-hs89r","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T19:45:00Z"}]}
{"id":"lettatoolsselector-hsjri","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:29:45.184126111Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:45.584223722Z","closed_at":"2026-01-02T17:29:45.584223722Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hskje","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:41:45.690619746Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:41:46.42859021Z","closed_at":"2026-01-02T22:41:46.42859021Z","close_reason":"Closed","comments":[{"id":4361,"issue_id":"lettatoolsselector-hskje","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T22:41:46Z"}]}
{"id":"lettatoolsselector-hsye3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:31.738395101Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:31.738395101Z","comments":[{"id":1774,"issue_id":"lettatoolsselector-hsye3","author":"root","text":"Synced from Beads: lettatoolsselector-t4bq\n\n---\nHuly Issue: LTSEL-602","created_at":"2026-01-02T03:27:31Z"}]}
{"id":"lettatoolsselector-ht1su","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:49.905445858Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:50.424597721Z","closed_at":"2026-01-02T07:43:50.424597721Z","close_reason":"Closed","comments":[{"id":2782,"issue_id":"lettatoolsselector-ht1su","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T07:43:50Z"}]}
{"id":"lettatoolsselector-htlhh","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:21:32.395865639Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:32.886500915Z","closed_at":"2026-01-02T09:21:32.886500915Z","close_reason":"Closed","comments":[{"id":2950,"issue_id":"lettatoolsselector-htlhh","author":"root","text":"Synced from Huly: LTSEL-226","created_at":"2026-01-02T09:21:32Z"}]}
{"id":"lettatoolsselector-hupc7","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:24.832154948Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:25.550627081Z","closed_at":"2026-01-02T19:38:25.550627081Z","close_reason":"Closed","comments":[{"id":3975,"issue_id":"lettatoolsselector-hupc7","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T19:38:25Z"}]}
{"id":"lettatoolsselector-hv1s","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:11.309214279Z","updated_at":"2025-12-29T21:33:30.057691068Z","closed_at":"2025-12-29T21:33:30.057691068Z","close_reason":"Duplicate","comments":[{"id":367,"issue_id":"lettatoolsselector-hv1s","author":"root","text":"Synced from Beads: lettatoolsselector-b2i\n\n---\nHuly Issue: LTSEL-208","created_at":"2025-12-29T20:15:11Z"}]}
{"id":"lettatoolsselector-hvq4","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:05.026266209Z","updated_at":"2025-12-29T21:33:26.112314692Z","closed_at":"2025-12-29T21:33:26.112314692Z","close_reason":"Duplicate","comments":[{"id":548,"issue_id":"lettatoolsselector-hvq4","author":"root","text":"Synced from Beads: lettatoolsselector-eln\n\n---\nHuly Issue: LTSEL-174","created_at":"2025-12-29T20:30:05Z"}]}
{"id":"lettatoolsselector-hwbfo","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:55:02.682346684Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:55:03.253427086Z","closed_at":"2026-01-02T17:55:03.253427086Z","close_reason":"Closed","comments":[{"id":3809,"issue_id":"lettatoolsselector-hwbfo","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T17:55:03Z"}]}
{"id":"lettatoolsselector-hwi2u","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:21.172119741Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:21.476374443Z","closed_at":"2026-01-02T06:00:21.476374443Z","close_reason":"Closed"}
{"id":"lettatoolsselector-hwii","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:51.7560916Z","updated_at":"2025-12-29T21:33:43.028241789Z","closed_at":"2025-12-29T21:33:43.028241789Z","close_reason":"Duplicate","comments":[{"id":502,"issue_id":"lettatoolsselector-hwii","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:26:52Z"}]}
{"id":"lettatoolsselector-hwnua","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:21:18.03193626Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:18.595713436Z","closed_at":"2026-01-02T15:21:18.595713436Z","close_reason":"Closed","comments":[{"id":3556,"issue_id":"lettatoolsselector-hwnua","author":"root","text":"Synced from Huly: LTSEL-247","created_at":"2026-01-02T15:21:18Z"}]}
{"id":"lettatoolsselector-hwtje","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:41.996296884Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:42.433517488Z","closed_at":"2026-01-02T03:29:42.433517488Z","close_reason":"Closed","comments":[{"id":2062,"issue_id":"lettatoolsselector-hwtje","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T03:29:42Z"}]}
{"id":"lettatoolsselector-hxen5","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:50.676676037Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:50.676676037Z","comments":[{"id":2216,"issue_id":"lettatoolsselector-hxen5","author":"root","text":"Synced from Beads: lettatoolsselector-zs7p\n\n---\nHuly Issue: LTSEL-621","created_at":"2026-01-02T03:43:51Z"}]}
{"id":"lettatoolsselector-hxr27","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:03.683894145Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:04.272677118Z","closed_at":"2026-01-02T07:23:04.272677118Z","close_reason":"Closed","comments":[{"id":2693,"issue_id":"lettatoolsselector-hxr27","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T07:23:04Z"}]}
{"id":"lettatoolsselector-hyai3","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:40:20.597787881Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:40:21.1759892Z","closed_at":"2026-01-02T13:40:21.1759892Z","close_reason":"Closed","comments":[{"id":3380,"issue_id":"lettatoolsselector-hyai3","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T13:40:20Z"}]}
{"id":"lettatoolsselector-hzm5d","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:25:12.589779506Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:25:13.259580823Z","closed_at":"2026-01-02T07:25:13.259580823Z","close_reason":"Closed","comments":[{"id":2739,"issue_id":"lettatoolsselector-hzm5d","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T07:25:13Z"}]}
{"id":"lettatoolsselector-i08r8","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:37:03.629660805Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:04.118446822Z","closed_at":"2026-01-02T06:37:04.118446822Z","close_reason":"Closed","comments":[{"id":2626,"issue_id":"lettatoolsselector-i08r8","author":"root","text":"Synced from Huly: LTSEL-245","created_at":"2026-01-02T06:37:03Z"}]}
{"id":"lettatoolsselector-i0dh1","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:53.472104626Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:53.977535875Z","closed_at":"2026-01-02T03:29:53.977535875Z","close_reason":"Closed","comments":[{"id":2074,"issue_id":"lettatoolsselector-i0dh1","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T03:29:53Z"}]}
{"id":"lettatoolsselector-i0dov","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:51:27.885193378Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:51:28.486401843Z","closed_at":"2026-01-02T17:51:28.486401843Z","close_reason":"Closed","comments":[{"id":3794,"issue_id":"lettatoolsselector-i0dov","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T17:51:28Z"}]}
{"id":"lettatoolsselector-i0njw","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:17:25.05084359Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:17:26.92874194Z","closed_at":"2026-01-02T20:17:26.92874194Z","close_reason":"Closed","comments":[{"id":4078,"issue_id":"lettatoolsselector-i0njw","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T20:17:26Z"}]}
{"id":"lettatoolsselector-i14ku","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:26.864629441Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:27.481791587Z","closed_at":"2026-01-02T19:38:27.481791587Z","close_reason":"Closed","comments":[{"id":3976,"issue_id":"lettatoolsselector-i14ku","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T19:38:27Z"}]}
{"id":"lettatoolsselector-i28hl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:56.968153631Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:56.968153631Z","comments":[{"id":1967,"issue_id":"lettatoolsselector-i28hl","author":"root","text":"Synced from Beads: lettatoolsselector-xdhk\n\n---\nHuly Issue: LTSEL-351","created_at":"2026-01-02T03:28:57Z"}]}
{"id":"lettatoolsselector-i2zao","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:50.400329252Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:51.006220809Z","closed_at":"2026-01-02T19:38:51.006220809Z","close_reason":"Closed","comments":[{"id":3978,"issue_id":"lettatoolsselector-i2zao","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T19:38:50Z"}]}
{"id":"lettatoolsselector-i30tc","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:33:45.546345626Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:33:45.933809254Z","closed_at":"2026-01-02T14:33:45.933809254Z","close_reason":"Closed"}
{"id":"lettatoolsselector-i3cuw","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:34.8075568Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:35.428267176Z","closed_at":"2026-01-02T09:54:35.428267176Z","close_reason":"Closed","comments":[{"id":3031,"issue_id":"lettatoolsselector-i3cuw","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T09:54:35Z"}]}
{"id":"lettatoolsselector-i3ghe","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:30.576474748Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:30.576474748Z","comments":[{"id":2277,"issue_id":"lettatoolsselector-i3ghe","author":"root","text":"Synced from Beads: lettatoolsselector-1y3g\n\n---\nHuly Issue: LTSEL-377","created_at":"2026-01-02T03:45:30Z"}]}
{"id":"lettatoolsselector-i3inq","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:39.254521079Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:39.679302392Z","closed_at":"2026-01-02T04:39:39.679302392Z","close_reason":"Closed","comments":[{"id":2423,"issue_id":"lettatoolsselector-i3inq","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T04:39:39Z"}]}
{"id":"lettatoolsselector-i4e3z","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:58:03.538715525Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:04.078770128Z","closed_at":"2026-01-02T14:58:04.078770128Z","close_reason":"Closed","comments":[{"id":3501,"issue_id":"lettatoolsselector-i4e3z","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T14:58:03Z"}]}
{"id":"lettatoolsselector-i4wb2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:39.785414214Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:39.785414214Z","comments":[{"id":1930,"issue_id":"lettatoolsselector-i4wb2","author":"root","text":"Synced from Beads: lettatoolsselector-4t4g\n\n---\nHuly Issue: LTSEL-397","created_at":"2026-01-02T03:28:40Z"}]}
{"id":"lettatoolsselector-i5e5t","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:35:51.69828569Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:35:52.207417901Z","closed_at":"2026-01-02T10:35:52.207417901Z","close_reason":"Closed","comments":[{"id":3072,"issue_id":"lettatoolsselector-i5e5t","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T10:35:52Z"}]}
{"id":"lettatoolsselector-i5v4l","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:35.981739846Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:35.981739846Z","comments":[{"id":1784,"issue_id":"lettatoolsselector-i5v4l","author":"root","text":"Synced from Beads: lettatoolsselector-5zta\n\n---\nHuly Issue: LTSEL-592","created_at":"2026-01-02T03:27:36Z"}]}
{"id":"lettatoolsselector-i5y3p","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:48:16.751366471Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:48:17.488458287Z","closed_at":"2026-01-02T22:48:17.488458287Z","close_reason":"Closed","comments":[{"id":4371,"issue_id":"lettatoolsselector-i5y3p","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T22:48:17Z"}]}
{"id":"lettatoolsselector-i6rwg","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:43:51.570280543Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:52.057357988Z","closed_at":"2026-01-02T07:43:52.057357988Z","close_reason":"Closed","comments":[{"id":2784,"issue_id":"lettatoolsselector-i6rwg","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T07:43:51Z"}]}
{"id":"lettatoolsselector-i6sta","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:05.07192111Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:05.07192111Z","comments":[{"id":2264,"issue_id":"lettatoolsselector-i6sta","author":"root","text":"Synced from Beads: lettatoolsselector-5trc\n\n---\nHuly Issue: LTSEL-431","created_at":"2026-01-02T03:45:05Z"}]}
{"id":"lettatoolsselector-i6uvi","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:38.702029517Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:39.274070038Z","closed_at":"2026-01-02T15:20:39.274070038Z","close_reason":"Closed","comments":[{"id":3539,"issue_id":"lettatoolsselector-i6uvi","author":"root","text":"Synced from Huly: LTSEL-43","created_at":"2026-01-02T15:20:39Z"}]}
{"id":"lettatoolsselector-i7cmg","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:41:38.929955954Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:41:39.362136161Z","closed_at":"2026-01-02T22:41:39.362136161Z","close_reason":"Closed"}
{"id":"lettatoolsselector-i7ikd","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:21.933554565Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:22.702043632Z","closed_at":"2026-01-02T09:21:22.702043632Z","close_reason":"Closed","comments":[{"id":2945,"issue_id":"lettatoolsselector-i7ikd","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T09:21:22Z"}]}
{"id":"lettatoolsselector-i7ob9","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:10.418925149Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:10.886564302Z","closed_at":"2026-01-02T03:30:10.886564302Z","close_reason":"Closed","comments":[{"id":2094,"issue_id":"lettatoolsselector-i7ob9","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2026-01-02T03:30:10Z"}]}
{"id":"lettatoolsselector-i7pec","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:04:38.459502399Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:04:39.166209443Z","closed_at":"2026-01-02T21:04:39.166209443Z","close_reason":"Closed","comments":[{"id":4190,"issue_id":"lettatoolsselector-i7pec","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T21:04:38Z"}]}
{"id":"lettatoolsselector-i8gyo","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:11:31.450978283Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:11:32.052277774Z","closed_at":"2026-01-02T16:11:32.052277774Z","close_reason":"Closed","comments":[{"id":3644,"issue_id":"lettatoolsselector-i8gyo","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T16:11:31Z"}]}
{"id":"lettatoolsselector-i8pn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:14.83423717Z","updated_at":"2025-12-30T04:14:20.652253265Z","comments":[{"id":901,"issue_id":"lettatoolsselector-i8pn","author":"root","text":"Synced from Beads: lettatoolsselector-0qv\n\n---\nHuly Issue: LTSEL-93","created_at":"2025-12-29T21:09:15Z"}]}
{"id":"lettatoolsselector-i94y5","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:40.082860678Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:40.5803299Z","closed_at":"2026-01-02T07:42:40.5803299Z","close_reason":"Closed","comments":[{"id":2757,"issue_id":"lettatoolsselector-i94y5","author":"root","text":"Synced from Huly: LTSEL-17","created_at":"2026-01-02T07:42:40Z"}]}
{"id":"lettatoolsselector-i9d7d","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:03:03.611962522Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:04.019730414Z","closed_at":"2026-01-02T07:03:04.019730414Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ia6mu","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T11:10:21.188382693Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:10:21.541589381Z","closed_at":"2026-01-02T11:10:21.541589381Z","close_reason":"Closed"}
{"id":"lettatoolsselector-iaoiv","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:42:44.357321682Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:42:44.789963905Z","closed_at":"2026-01-02T04:42:44.789963905Z","close_reason":"Closed","comments":[{"id":2453,"issue_id":"lettatoolsselector-iaoiv","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T04:42:44Z"}]}
{"id":"lettatoolsselector-iawva","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:43.948902082Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:44.510688319Z","closed_at":"2026-01-02T14:29:44.510688319Z","close_reason":"Closed","comments":[{"id":3450,"issue_id":"lettatoolsselector-iawva","author":"root","text":"Synced from Huly: LTSEL-33","created_at":"2026-01-02T14:29:44Z"}]}
{"id":"lettatoolsselector-ibbej","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:04:31.397272866Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:04:31.949807335Z","closed_at":"2026-01-02T15:04:31.949807335Z","close_reason":"Closed","comments":[{"id":3529,"issue_id":"lettatoolsselector-ibbej","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T15:04:31Z"}]}
{"id":"lettatoolsselector-ibbzr","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:35.854314698Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:36.681516517Z","closed_at":"2026-01-02T19:20:36.681516517Z","close_reason":"Closed","comments":[{"id":3932,"issue_id":"lettatoolsselector-ibbzr","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T19:20:36Z"}]}
{"id":"lettatoolsselector-iblm","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:38.762362841Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:39.103322155Z","closed_at":"2026-01-02T02:19:39.103322155Z","close_reason":"Closed","comments":[{"id":1282,"issue_id":"lettatoolsselector-iblm","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T02:19:38Z"}]}
{"id":"lettatoolsselector-ibzsj","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:00:02.824188072Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:00:03.391475147Z","closed_at":"2026-01-02T13:00:03.391475147Z","close_reason":"Closed","comments":[{"id":3338,"issue_id":"lettatoolsselector-ibzsj","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T13:00:03Z"}]}
{"id":"lettatoolsselector-icpwg","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:34.241903905Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:34.241903905Z","comments":[{"id":1780,"issue_id":"lettatoolsselector-icpwg","author":"root","text":"Synced from Beads: lettatoolsselector-s4nk\n\n---\nHuly Issue: LTSEL-596","created_at":"2026-01-02T03:27:34Z"}]}
{"id":"lettatoolsselector-iddz8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:30.038323079Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:30.038323079Z","comments":[{"id":2132,"issue_id":"lettatoolsselector-iddz8","author":"root","text":"Synced from Beads: lettatoolsselector-b2i\n\n---\nHuly Issue: LTSEL-208","created_at":"2026-01-02T03:31:30Z"}]}
{"id":"lettatoolsselector-idln","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:10:31.845261513Z","updated_at":"2025-12-30T04:14:23.905377629Z","comments":[{"id":915,"issue_id":"lettatoolsselector-idln","author":"root","text":"Synced from Beads: lettatoolsselector-mwe\n\n---\nHuly Issue: LTSEL-108","created_at":"2025-12-29T21:10:32Z"}]}
{"id":"lettatoolsselector-idoh","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:39.944889157Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:40.157736292Z","closed_at":"2026-01-02T01:08:40.157736292Z","close_reason":"Closed"}
{"id":"lettatoolsselector-idpbe","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:05.150322431Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:05.573327335Z","closed_at":"2026-01-02T04:20:05.573327335Z","close_reason":"Closed","comments":[{"id":2357,"issue_id":"lettatoolsselector-idpbe","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T04:20:05Z"}]}
{"id":"lettatoolsselector-ieg1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:17:28.247870267Z","updated_at":"2025-12-30T01:53:14.416563491Z","comments":[{"id":981,"issue_id":"lettatoolsselector-ieg1","author":"root","text":"Synced from Beads: lettatoolsselector-leh\n\n---\nHuly Issue: LTSEL-80","created_at":"2025-12-29T21:17:28Z"}]}
{"id":"lettatoolsselector-ienr1","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:59.533503149Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:06:00.07630863Z","closed_at":"2026-01-02T14:06:00.07630863Z","close_reason":"Closed","comments":[{"id":3406,"issue_id":"lettatoolsselector-ienr1","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T14:05:59Z"}]}
{"id":"lettatoolsselector-ier","title":"[Refactor] Phase 6: Dependency injection and app factory","description":"Implement dependency injection and Flask app factory pattern for testability.\n\n## Depends On\n- lettatoolsselector-sbw (Phase 5: Route blueprints)\n\n## Goals\n1. Make services injectable for testing\n2. Create app factory for different configurations\n3. Establish clear initialization order\n\n## Implementation\n\n### App Factory (`app.py`)\n```python\ndef create_app(config: AppConfig = None) -\u003e Flask:\n    app = Flask(__name__)\n    \n    # Load config\n    config = config or load_config_from_env()\n    app.config.from_object(config)\n    \n    # Initialize clients\n    weaviate_client = init_weaviate(config.weaviate)\n    letta_client = init_letta(config.letta)\n    reranker_client = init_reranker(config.reranker)\n    \n    # Initialize services\n    search_service = SearchService(weaviate_client, reranker_client)\n    agent_service = AgentService(letta_client, config.webhook_url)\n    tool_manager = ToolManager(letta_client, weaviate_client, search_service)\n    \n    # Store in app context\n    app.services = ServiceContainer(\n        search=search_service,\n        agent=agent_service,\n        tools=tool_manager\n    )\n    \n    # Register blueprints\n    from routes import tools_bp, config_bp, health_bp, ...\n    app.register_blueprint(tools_bp)\n    app.register_blueprint(config_bp)\n    ...\n    \n    return app\n```\n\n### Service Container\n```python\n@dataclass\nclass ServiceContainer:\n    search: SearchService\n    agent: AgentService\n    tools: ToolManager\n    cache: CacheService\n    \ndef get_services() -\u003e ServiceContainer:\n    return current_app.services\n```\n\n### Route Handler Pattern\n```python\n@tools_bp.route('/attach', methods=['POST'])\nasync def attach_tools():\n    services = get_services()\n    request_data = AttachRequest.from_json(request.json)\n    \n    result = await services.tools.attach_tools_for_query(\n        agent_id=request_data.agent_id,\n        query=request_data.query,\n        ...\n    )\n    \n    return jsonify(result.to_dict())\n```\n\n### Testing Pattern\n```python\ndef test_attach_tools():\n    # Create mock services\n    mock_tool_manager = MockToolManager()\n    mock_tool_manager.attach_tools_for_query.return_value = AttachResponse(...)\n    \n    # Create app with mocks\n    app = create_app(config=TestConfig())\n    app.services.tools = mock_tool_manager\n    \n    # Test\n    with app.test_client() as client:\n        response = client.post('/api/v1/tools/attach', json={...})\n        assert response.status_code == 200\n```\n\n## Acceptance Criteria\n- [ ] App factory pattern implemented\n- [ ] ServiceContainer holds all services\n- [ ] Routes use get_services() helper\n- [ ] Tests can inject mock services\n- [ ] Configuration is centralized\n- [ ] All tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:38:36.125814136Z","updated_at":"2025-12-29T19:11:19.37715482Z","closed_at":"2025-12-29T19:11:19.37715482Z","close_reason":"Phase 6 complete: app_factory with full blueprint registration, main.py entry point created, 389 tests passing"}
{"id":"lettatoolsselector-ietk","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:43.770835176Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:43.982590467Z","closed_at":"2026-01-02T01:08:43.982590467Z","close_reason":"Closed"}
{"id":"lettatoolsselector-iez49","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:51:10.704618819Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:51:11.282813723Z","closed_at":"2026-01-02T15:51:11.282813723Z","close_reason":"Closed","comments":[{"id":3621,"issue_id":"lettatoolsselector-iez49","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T15:51:11Z"}]}
{"id":"lettatoolsselector-ifze7","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:43:24.167156554Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:24.497405005Z","closed_at":"2026-01-02T07:43:24.497405005Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ig17","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:54.331414054Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:54.701849309Z","closed_at":"2026-01-02T01:24:54.701849309Z","close_reason":"Closed","comments":[{"id":1226,"issue_id":"lettatoolsselector-ig17","author":"root","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2026-01-02T01:24:54Z"}]}
{"id":"lettatoolsselector-iga5g","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:03:14.956622182Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:03:15.594900112Z","closed_at":"2026-01-02T12:03:15.594900112Z","close_reason":"Closed","comments":[{"id":3291,"issue_id":"lettatoolsselector-iga5g","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T12:03:15Z"}]}
{"id":"lettatoolsselector-igzx2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:59.279298253Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:59.279298253Z","comments":[{"id":1972,"issue_id":"lettatoolsselector-igzx2","author":"root","text":"Synced from Beads: lettatoolsselector-ieg1\n\n---\nHuly Issue: LTSEL-345","created_at":"2026-01-02T03:28:59Z"}]}
{"id":"lettatoolsselector-ih97","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:34.537892943Z","updated_at":"2025-12-29T21:33:25.344734851Z","closed_at":"2025-12-29T21:33:25.344734851Z","close_reason":"Duplicate","comments":[{"id":579,"issue_id":"lettatoolsselector-ih97","author":"root","text":"Synced from Beads: lettatoolsselector-x82\n\n---\nHuly Issue: LTSEL-159","created_at":"2025-12-29T20:33:34Z"}]}
{"id":"lettatoolsselector-ihgkb","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:10:19.042351975Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:10:19.635837081Z","closed_at":"2026-01-02T16:10:19.635837081Z","close_reason":"Closed","comments":[{"id":3638,"issue_id":"lettatoolsselector-ihgkb","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T16:10:19Z"}]}
{"id":"lettatoolsselector-ihlk3","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:19:57.513289142Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:19:58.261533777Z","closed_at":"2026-01-02T08:19:58.261533777Z","close_reason":"Closed","comments":[{"id":2839,"issue_id":"lettatoolsselector-ihlk3","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T08:19:57Z"}]}
{"id":"lettatoolsselector-ihuw","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:13.174677428Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:13.403758911Z","closed_at":"2026-01-02T01:25:13.403758911Z","close_reason":"Closed"}
{"id":"lettatoolsselector-iiczn","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:56:47.599567778Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:48.098613136Z","closed_at":"2026-01-02T08:56:48.098613136Z","close_reason":"Closed","comments":[{"id":2911,"issue_id":"lettatoolsselector-iiczn","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T08:56:47Z"}]}
{"id":"lettatoolsselector-iinmq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:08.153831256Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:08.153831256Z","comments":[{"id":1991,"issue_id":"lettatoolsselector-iinmq","author":"root","text":"Synced from Beads: lettatoolsselector-4rnv\n\n---\nHuly Issue: LTSEL-325","created_at":"2026-01-02T03:29:08Z"}]}
{"id":"lettatoolsselector-ij1zw","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:00:17.499591357Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:00:17.989757349Z","closed_at":"2026-01-02T20:00:17.989757349Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ij7j2","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:43.70867417Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:44.390094318Z","closed_at":"2026-01-02T06:17:44.390094318Z","close_reason":"Closed","comments":[{"id":2558,"issue_id":"lettatoolsselector-ij7j2","author":"root","text":"Synced from Huly: LTSEL-37","created_at":"2026-01-02T06:17:44Z"}]}
{"id":"lettatoolsselector-ijg8v","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:10.746632594Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:11.335776257Z","closed_at":"2026-01-02T12:54:11.335776257Z","close_reason":"Closed","comments":[{"id":3307,"issue_id":"lettatoolsselector-ijg8v","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T12:54:11Z"}]}
{"id":"lettatoolsselector-ijkdd","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:33:36.643697507Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:33:37.275007689Z","closed_at":"2026-01-02T17:33:37.275007689Z","close_reason":"Closed","comments":[{"id":3772,"issue_id":"lettatoolsselector-ijkdd","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T17:33:37Z"}]}
{"id":"lettatoolsselector-ijqxt","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:10.071424751Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:10.863764421Z","closed_at":"2026-01-02T09:21:10.863764421Z","close_reason":"Closed","comments":[{"id":2942,"issue_id":"lettatoolsselector-ijqxt","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T09:21:10Z"}]}
{"id":"lettatoolsselector-ijrjj","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:57:51.969270355Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:52.506754378Z","closed_at":"2026-01-02T08:57:52.506754378Z","close_reason":"Closed","comments":[{"id":2923,"issue_id":"lettatoolsselector-ijrjj","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T08:57:52Z"}]}
{"id":"lettatoolsselector-ijw4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:13:26.58242913Z","updated_at":"2025-12-30T01:45:56.295709832Z","comments":[{"id":943,"issue_id":"lettatoolsselector-ijw4","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-85","created_at":"2025-12-29T21:13:26Z"}]}
{"id":"lettatoolsselector-ijynb","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:39.018178372Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:39.540514277Z","closed_at":"2026-01-02T11:33:39.540514277Z","close_reason":"Closed","comments":[{"id":3210,"issue_id":"lettatoolsselector-ijynb","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T11:33:39Z"}]}
{"id":"lettatoolsselector-ik2e9","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:58:59.817303202Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:00.358502702Z","closed_at":"2026-01-02T11:59:00.358502702Z","close_reason":"Closed","comments":[{"id":3257,"issue_id":"lettatoolsselector-ik2e9","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T11:59:00Z"}]}
{"id":"lettatoolsselector-ilbc1","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:29:51.946627723Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:52.3226626Z","closed_at":"2026-01-02T17:29:52.3226626Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ilktn","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:41:08.818677094Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:41:09.441441913Z","closed_at":"2026-01-02T19:41:09.441441913Z","close_reason":"Closed","comments":[{"id":3999,"issue_id":"lettatoolsselector-ilktn","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T19:41:09Z"}]}
{"id":"lettatoolsselector-ill3m","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:36.489361084Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:37.030433441Z","closed_at":"2026-01-02T08:02:37.030433441Z","close_reason":"Closed","comments":[{"id":2810,"issue_id":"lettatoolsselector-ill3m","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T08:02:36Z"}]}
{"id":"lettatoolsselector-im2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:10:04.984351411Z","updated_at":"2025-12-29T21:33:44.549382036Z","closed_at":"2025-12-29T21:33:44.549382036Z","close_reason":"Duplicate","comments":[{"id":312,"issue_id":"lettatoolsselector-im2","author":"root","text":"Synced from Beads: lettatoolsselector-gda\n\n---\nHuly Issue: LTSEL-114","created_at":"2025-12-29T20:10:05Z"}]}
{"id":"lettatoolsselector-im54c","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:50.067850752Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:50.736577197Z","closed_at":"2026-01-02T21:48:50.736577197Z","close_reason":"Closed","comments":[{"id":4263,"issue_id":"lettatoolsselector-im54c","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T21:48:50Z"}]}
{"id":"lettatoolsselector-immmk","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:18.085251543Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:18.432246992Z","closed_at":"2026-01-02T07:24:18.432246992Z","close_reason":"Closed"}
{"id":"lettatoolsselector-io9f4","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:58:22.488139761Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:22.929661049Z","closed_at":"2026-01-02T09:58:22.929661049Z","close_reason":"Closed"}
{"id":"lettatoolsselector-iovq","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:09.36267139Z","updated_at":"2025-12-29T21:33:30.898443334Z","closed_at":"2025-12-29T21:33:30.898443334Z","close_reason":"Duplicate","comments":[{"id":343,"issue_id":"lettatoolsselector-iovq","author":"root","text":"Synced from Beads: lettatoolsselector-le1\n\n---\nHuly Issue: LTSEL-198","created_at":"2025-12-29T20:13:09Z"}]}
{"id":"lettatoolsselector-ip686","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:48:19.831213259Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:20.294353964Z","closed_at":"2026-01-02T03:48:20.294353964Z","close_reason":"Closed","comments":[{"id":2335,"issue_id":"lettatoolsselector-ip686","author":"root","text":"Synced from Huly: LTSEL-227","created_at":"2026-01-02T03:48:20Z"}]}
{"id":"lettatoolsselector-iph08","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:48.028519537Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:48.515931377Z","closed_at":"2026-01-02T07:43:48.515931377Z","close_reason":"Closed","comments":[{"id":2781,"issue_id":"lettatoolsselector-iph08","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T07:43:48Z"}]}
{"id":"lettatoolsselector-iphd","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:27.568286427Z","updated_at":"2025-12-29T21:33:26.708388025Z","closed_at":"2025-12-29T21:33:26.708388025Z","close_reason":"Duplicate","comments":[{"id":514,"issue_id":"lettatoolsselector-iphd","author":"root","text":"Synced from Beads: lettatoolsselector-l5y\n\n---\nHuly Issue: LTSEL-179","created_at":"2025-12-29T20:27:27Z"}]}
{"id":"lettatoolsselector-ipl3b","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:40.102585526Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:40.751093548Z","closed_at":"2026-01-02T22:39:40.751093548Z","close_reason":"Closed","comments":[{"id":4347,"issue_id":"lettatoolsselector-ipl3b","author":"root","text":"Synced from Huly: LTSEL-37","created_at":"2026-01-02T22:39:40Z"}]}
{"id":"lettatoolsselector-ipnk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:07.551626522Z","updated_at":"2025-12-30T01:57:18.654155241Z","comments":[{"id":1015,"issue_id":"lettatoolsselector-ipnk","author":"root","text":"Synced from Beads: lettatoolsselector-cgd\n\n---\nHuly Issue: LTSEL-73","created_at":"2025-12-29T21:22:07Z"}]}
{"id":"lettatoolsselector-ipt9z","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:50.929772765Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:51.392637685Z","closed_at":"2026-01-02T06:36:51.392637685Z","close_reason":"Closed","comments":[{"id":2614,"issue_id":"lettatoolsselector-ipt9z","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T06:36:51Z"}]}
{"id":"lettatoolsselector-iqik","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:57.251512473Z","updated_at":"2025-12-29T21:33:29.228491349Z","closed_at":"2025-12-29T21:33:29.228491349Z","close_reason":"Duplicate","comments":[{"id":395,"issue_id":"lettatoolsselector-iqik","author":"root","text":"Synced from Beads: lettatoolsselector-iji\n\n---\nHuly Issue: LTSEL-191","created_at":"2025-12-29T20:17:57Z"}]}
{"id":"lettatoolsselector-iqtxv","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:22.820588847Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:22.820588847Z","comments":[{"id":2181,"issue_id":"lettatoolsselector-iqtxv","author":"root","text":"Synced from Beads: lettatoolsselector-1ehg\n\n---\nHuly Issue: LTSEL-732","created_at":"2026-01-02T03:43:23Z"}]}
{"id":"lettatoolsselector-iskrp","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:41.693666003Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:42.294407646Z","closed_at":"2026-01-02T07:02:42.294407646Z","close_reason":"Closed","comments":[{"id":2662,"issue_id":"lettatoolsselector-iskrp","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T07:02:42Z"}]}
{"id":"lettatoolsselector-isv5e","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:10:34.697760463Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:10:35.075579284Z","closed_at":"2026-01-02T11:10:35.075579284Z","close_reason":"Closed"}
{"id":"lettatoolsselector-isy8","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:38.313290301Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:38.728220349Z","closed_at":"2026-01-02T02:20:38.728220349Z","close_reason":"Closed","comments":[{"id":1309,"issue_id":"lettatoolsselector-isy8","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T02:20:38Z"}]}
{"id":"lettatoolsselector-itbrk","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:58:48.223441296Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:48.759423934Z","closed_at":"2026-01-02T09:58:48.759423934Z","close_reason":"Closed","comments":[{"id":3068,"issue_id":"lettatoolsselector-itbrk","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T09:58:48Z"}]}
{"id":"lettatoolsselector-itmp5","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:47:50.007394908Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:50.282443843Z","closed_at":"2026-01-02T03:47:50.282443843Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ito9","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:35:31.91332606Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:32.272556497Z","closed_at":"2026-01-02T02:35:32.272556497Z","close_reason":"Closed","comments":[{"id":1362,"issue_id":"lettatoolsselector-ito9","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T02:35:32Z"}]}
{"id":"lettatoolsselector-iual","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:10.554974914Z","updated_at":"2025-12-29T21:33:25.372713111Z","closed_at":"2025-12-29T21:33:25.372713111Z","close_reason":"Duplicate","comments":[{"id":577,"issue_id":"lettatoolsselector-iual","author":"root","text":"Synced from Beads: lettatoolsselector-eln\n\n---\nHuly Issue: LTSEL-174","created_at":"2025-12-29T20:33:10Z"}]}
{"id":"lettatoolsselector-iud7q","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:41.303531985Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:41.913934715Z","closed_at":"2026-01-02T18:25:41.913934715Z","close_reason":"Closed","comments":[{"id":3841,"issue_id":"lettatoolsselector-iud7q","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T18:25:41Z"}]}
{"id":"lettatoolsselector-iuh0k","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:21:59.451882652Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:00.011312807Z","closed_at":"2026-01-02T09:22:00.011312807Z","close_reason":"Closed","comments":[{"id":2962,"issue_id":"lettatoolsselector-iuh0k","author":"root","text":"Synced from Huly: LTSEL-240","created_at":"2026-01-02T09:21:59Z"}]}
{"id":"lettatoolsselector-iuoxz","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:29.303396244Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:29.78605151Z","closed_at":"2026-01-02T07:42:29.78605151Z","close_reason":"Closed","comments":[{"id":2747,"issue_id":"lettatoolsselector-iuoxz","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T07:42:29Z"}]}
{"id":"lettatoolsselector-iuwu4","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:20:36.840419383Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:20:37.616381506Z","closed_at":"2026-01-02T22:20:37.616381506Z","close_reason":"Closed","comments":[{"id":4316,"issue_id":"lettatoolsselector-iuwu4","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T22:20:37Z"}]}
{"id":"lettatoolsselector-ivahc","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:07:47.673574299Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:07:48.318913408Z","closed_at":"2026-01-02T17:07:48.318913408Z","close_reason":"Closed","comments":[{"id":3724,"issue_id":"lettatoolsselector-ivahc","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T17:07:48Z"}]}
{"id":"lettatoolsselector-ivl2t","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:31:32.110114659Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:31:32.540252546Z","closed_at":"2026-01-02T17:31:32.540252546Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ivrsb","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:11:08.051456789Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:08.402431539Z","closed_at":"2026-01-02T11:11:08.402431539Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ivskx","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:36:35.168682024Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:35.722986786Z","closed_at":"2026-01-02T11:36:35.722986786Z","close_reason":"Closed","comments":[{"id":3242,"issue_id":"lettatoolsselector-ivskx","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T11:36:35Z"}]}
{"id":"lettatoolsselector-iw56p","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:34.811734421Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:35.440124881Z","closed_at":"2026-01-02T06:17:35.440124881Z","close_reason":"Closed","comments":[{"id":2550,"issue_id":"lettatoolsselector-iw56p","author":"root","text":"Synced from Huly: LTSEL-46","created_at":"2026-01-02T06:17:35Z"}]}
{"id":"lettatoolsselector-iw7dr","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:43.822135612Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:44.334055454Z","closed_at":"2026-01-02T05:40:44.334055454Z","close_reason":"Closed","comments":[{"id":2458,"issue_id":"lettatoolsselector-iw7dr","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T05:40:44Z"}]}
{"id":"lettatoolsselector-iwpxx","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:54.478830866Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:54.921872202Z","closed_at":"2026-01-02T05:40:54.921872202Z","close_reason":"Closed","comments":[{"id":2472,"issue_id":"lettatoolsselector-iwpxx","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T05:40:54Z"}]}
{"id":"lettatoolsselector-iwvp","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:39.409272449Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:39.754728912Z","closed_at":"2026-01-02T02:19:39.754728912Z","close_reason":"Closed","comments":[{"id":1283,"issue_id":"lettatoolsselector-iwvp","author":"root","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2026-01-02T02:19:39Z"}]}
{"id":"lettatoolsselector-iyyb","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:21.179637441Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:21.524960234Z","closed_at":"2026-01-02T01:25:21.524960234Z","close_reason":"Closed","comments":[{"id":1261,"issue_id":"lettatoolsselector-iyyb","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T01:25:21Z"}]}
{"id":"lettatoolsselector-j0b3t","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:25:11.630454345Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:25:12.21955479Z","closed_at":"2026-01-02T07:25:12.21955479Z","close_reason":"Closed","comments":[{"id":2738,"issue_id":"lettatoolsselector-j0b3t","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T07:25:11Z"}]}
{"id":"lettatoolsselector-j0gju","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:54.63600412Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:54.63600412Z","comments":[{"id":1827,"issue_id":"lettatoolsselector-j0gju","author":"root","text":"Synced from Beads: lettatoolsselector-rxb9\n\n---\nHuly Issue: LTSEL-527","created_at":"2026-01-02T03:27:54Z"}]}
{"id":"lettatoolsselector-j10gb","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:23:40.061376626Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:23:40.660735151Z","closed_at":"2026-01-02T08:23:40.660735151Z","close_reason":"Closed","comments":[{"id":2878,"issue_id":"lettatoolsselector-j10gb","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T08:23:40Z"}]}
{"id":"lettatoolsselector-j1b92","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:26.615789618Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:26.615789618Z","comments":[{"id":2028,"issue_id":"lettatoolsselector-j1b92","author":"root","text":"Synced from Beads: lettatoolsselector-cspn\n\n---\nHuly Issue: LTSEL-287","created_at":"2026-01-02T03:29:26Z"}]}
{"id":"lettatoolsselector-j1g8","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:50.689679427Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:51.037942725Z","closed_at":"2026-01-02T01:24:51.037942725Z","close_reason":"Closed","comments":[{"id":1220,"issue_id":"lettatoolsselector-j1g8","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T01:24:50Z"}]}
{"id":"lettatoolsselector-j1m3x","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:58.389111768Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:58.389111768Z","comments":[{"id":1836,"issue_id":"lettatoolsselector-j1m3x","author":"root","text":"Synced from Beads: lettatoolsselector-cy7g\n\n---\nHuly Issue: LTSEL-517","created_at":"2026-01-02T03:27:58Z"}]}
{"id":"lettatoolsselector-j25z","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:02.512648289Z","updated_at":"2025-12-29T21:33:44.105939114Z","closed_at":"2025-12-29T21:33:44.105939114Z","close_reason":"Duplicate","comments":[{"id":373,"issue_id":"lettatoolsselector-j25z","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T20:16:02Z"}]}
{"id":"lettatoolsselector-j2ez","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:50.745082019Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:51.093914443Z","closed_at":"2026-01-02T02:19:51.093914443Z","close_reason":"Closed","comments":[{"id":1293,"issue_id":"lettatoolsselector-j2ez","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T02:19:50Z"}]}
{"id":"lettatoolsselector-j2p1q","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:24:46.553629125Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:24:47.31284558Z","closed_at":"2026-01-02T20:24:47.31284558Z","close_reason":"Closed","comments":[{"id":4105,"issue_id":"lettatoolsselector-j2p1q","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T20:24:47Z"}]}
{"id":"lettatoolsselector-j2xl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:03:34.178327281Z","updated_at":"2025-12-30T04:14:08.113510579Z","comments":[{"id":843,"issue_id":"lettatoolsselector-j2xl","author":"root","text":"Synced from Beads: lettatoolsselector-mwe\n\n---\nHuly Issue: LTSEL-108","created_at":"2025-12-29T21:03:34Z"}]}
{"id":"lettatoolsselector-j35oc","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:19:26.525769485Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:27.049774736Z","closed_at":"2026-01-02T06:19:27.049774736Z","close_reason":"Closed","comments":[{"id":2593,"issue_id":"lettatoolsselector-j35oc","author":"root","text":"Synced from Huly: LTSEL-48","created_at":"2026-01-02T06:19:26Z"}]}
{"id":"lettatoolsselector-j3lnj","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:08.538833271Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:09.143330197Z","closed_at":"2026-01-02T09:21:09.143330197Z","close_reason":"Closed","comments":[{"id":2941,"issue_id":"lettatoolsselector-j3lnj","author":"root","text":"Synced from Huly: LTSEL-28","created_at":"2026-01-02T09:21:08Z"}]}
{"id":"lettatoolsselector-j4b7t","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:00:36.548816217Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:00:37.107727722Z","closed_at":"2026-01-02T17:00:37.107727722Z","close_reason":"Closed","comments":[{"id":3681,"issue_id":"lettatoolsselector-j4b7t","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T17:00:36Z"}]}
{"id":"lettatoolsselector-j5agh","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:42:25.877075933Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:42:26.337325107Z","closed_at":"2026-01-02T04:42:26.337325107Z","close_reason":"Closed","comments":[{"id":2451,"issue_id":"lettatoolsselector-j5agh","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T04:42:26Z"}]}
{"id":"lettatoolsselector-j5dax","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:35:10.689749374Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:35:11.256023335Z","closed_at":"2026-01-02T14:35:11.256023335Z","close_reason":"Closed","comments":[{"id":3477,"issue_id":"lettatoolsselector-j5dax","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T14:35:11Z"}]}
{"id":"lettatoolsselector-j5gtn","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:18:10.010700122Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:10.493704502Z","closed_at":"2026-01-02T06:18:10.493704502Z","close_reason":"Closed","comments":[{"id":2572,"issue_id":"lettatoolsselector-j5gtn","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T06:18:10Z"}]}
{"id":"lettatoolsselector-j5okx","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:42:20.50941922Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:42:21.111016621Z","closed_at":"2026-01-02T19:42:21.111016621Z","close_reason":"Closed","comments":[{"id":4006,"issue_id":"lettatoolsselector-j5okx","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T19:42:20Z"}]}
{"id":"lettatoolsselector-j63f7","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:34.491726643Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:35.072284602Z","closed_at":"2026-01-02T06:36:35.072284602Z","close_reason":"Closed","comments":[{"id":2603,"issue_id":"lettatoolsselector-j63f7","author":"root","text":"Synced from Huly: LTSEL-44","created_at":"2026-01-02T06:36:34Z"}]}
{"id":"lettatoolsselector-j6bp6","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:02:30.001970546Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:30.545600199Z","closed_at":"2026-01-02T12:02:30.545600199Z","close_reason":"Closed","comments":[{"id":3281,"issue_id":"lettatoolsselector-j6bp6","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T12:02:30Z"}]}
{"id":"lettatoolsselector-j6pov","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:45.352249212Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:45.980301776Z","closed_at":"2026-01-02T18:25:45.980301776Z","close_reason":"Closed","comments":[{"id":3842,"issue_id":"lettatoolsselector-j6pov","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T18:25:45Z"}]}
{"id":"lettatoolsselector-j6xnl","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:02:51.931120019Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:52.533146302Z","closed_at":"2026-01-02T08:02:52.533146302Z","close_reason":"Closed","comments":[{"id":2815,"issue_id":"lettatoolsselector-j6xnl","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T08:02:52Z"}]}
{"id":"lettatoolsselector-j7ewu","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:54:32.334432691Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:54:32.91437824Z","closed_at":"2026-01-02T17:54:32.91437824Z","close_reason":"Closed","comments":[{"id":3805,"issue_id":"lettatoolsselector-j7ewu","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T17:54:32Z"}]}
{"id":"lettatoolsselector-j7jw","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:17.048308703Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:17.403460875Z","closed_at":"2026-01-02T01:25:17.403460875Z","close_reason":"Closed","comments":[{"id":1255,"issue_id":"lettatoolsselector-j7jw","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T01:25:17Z"}]}
{"id":"lettatoolsselector-j88c","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:01.163250808Z","updated_at":"2025-12-29T21:33:28.179368185Z","closed_at":"2025-12-29T21:33:28.179368185Z","close_reason":"Duplicate","comments":[{"id":442,"issue_id":"lettatoolsselector-j88c","author":"root","text":"Synced from Beads: lettatoolsselector-bpa\n\n---\nHuly Issue: LTSEL-183","created_at":"2025-12-29T20:22:01Z"}]}
{"id":"lettatoolsselector-j8r7b","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:25:28.562170185Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:25:29.380804189Z","closed_at":"2026-01-02T15:25:29.380804189Z","close_reason":"Closed","comments":[{"id":3577,"issue_id":"lettatoolsselector-j8r7b","author":"root","text":"Synced from Huly: LTSEL-50","created_at":"2026-01-02T15:25:29Z"}]}
{"id":"lettatoolsselector-j8xld","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:15:37.228759915Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:15:37.965865122Z","closed_at":"2026-01-02T22:15:37.965865122Z","close_reason":"Closed","comments":[{"id":4302,"issue_id":"lettatoolsselector-j8xld","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T22:15:37Z"}]}
{"id":"lettatoolsselector-j923t","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:43.55154552Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:43.55154552Z","comments":[{"id":1938,"issue_id":"lettatoolsselector-j923t","author":"root","text":"Synced from Beads: lettatoolsselector-d5va\n\n---\nHuly Issue: LTSEL-385","created_at":"2026-01-02T03:28:43Z"}]}
{"id":"lettatoolsselector-j947m","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:42:42.129205523Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:42:42.558723232Z","closed_at":"2026-01-02T04:42:42.558723232Z","close_reason":"Closed","comments":[{"id":2452,"issue_id":"lettatoolsselector-j947m","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T04:42:42Z"}]}
{"id":"lettatoolsselector-j9ap","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:33:10.87104862Z","updated_at":"2025-12-30T02:38:47.597835451Z","comments":[{"id":1065,"issue_id":"lettatoolsselector-j9ap","author":"root","text":"Synced from Beads: lettatoolsselector-mhi\n\n---\nHuly Issue: LTSEL-61","created_at":"2025-12-29T21:33:11Z"}]}
{"id":"lettatoolsselector-j9asc","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:44.733099747Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:45.294034576Z","closed_at":"2026-01-02T13:36:45.294034576Z","close_reason":"Closed","comments":[{"id":3362,"issue_id":"lettatoolsselector-j9asc","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T13:36:45Z"}]}
{"id":"lettatoolsselector-j9tbl","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:21:51.457471596Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:51.824669429Z","closed_at":"2026-01-02T08:21:51.824669429Z","close_reason":"Closed"}
{"id":"lettatoolsselector-j9z3","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:09.217665717Z","updated_at":"2025-12-29T21:33:30.144972135Z","closed_at":"2025-12-29T21:33:30.144972135Z","close_reason":"Duplicate","comments":[{"id":364,"issue_id":"lettatoolsselector-j9z3","author":"root","text":"Synced from Beads: lettatoolsselector-toy\n\n---\nHuly Issue: LTSEL-194","created_at":"2025-12-29T20:15:09Z"}]}
{"id":"lettatoolsselector-ja0s9","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:35:21.93337012Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:35:22.482554793Z","closed_at":"2026-01-02T14:35:22.482554793Z","close_reason":"Closed","comments":[{"id":3481,"issue_id":"lettatoolsselector-ja0s9","author":"root","text":"Synced from Huly: LTSEL-238","created_at":"2026-01-02T14:35:22Z"}]}
{"id":"lettatoolsselector-jai0","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:42.182175774Z","updated_at":"2025-12-29T21:33:29.942127444Z","closed_at":"2025-12-29T21:33:29.942127444Z","close_reason":"Duplicate","comments":[{"id":372,"issue_id":"lettatoolsselector-jai0","author":"root","text":"Synced from Beads: lettatoolsselector-vnx\n\n---\nHuly Issue: LTSEL-207","created_at":"2025-12-29T20:15:42Z"}]}
{"id":"lettatoolsselector-jalj1","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:25.427478733Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:26.195810405Z","closed_at":"2026-01-02T08:55:26.195810405Z","close_reason":"Closed","comments":[{"id":2898,"issue_id":"lettatoolsselector-jalj1","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T08:55:25Z"}]}
{"id":"lettatoolsselector-jane1","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:56:09.127887581Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:56:09.708466028Z","closed_at":"2026-01-02T09:56:09.708466028Z","close_reason":"Closed","comments":[{"id":3045,"issue_id":"lettatoolsselector-jane1","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T09:56:09Z"}]}
{"id":"lettatoolsselector-janfn","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:19.516860077Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:20.091748099Z","closed_at":"2026-01-02T11:34:20.091748099Z","close_reason":"Closed","comments":[{"id":3227,"issue_id":"lettatoolsselector-janfn","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T11:34:19Z"}]}
{"id":"lettatoolsselector-jao6k","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:18.396682446Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:18.968392292Z","closed_at":"2026-01-02T17:01:18.968392292Z","close_reason":"Closed","comments":[{"id":3691,"issue_id":"lettatoolsselector-jao6k","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T17:01:18Z"}]}
{"id":"lettatoolsselector-japs5","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:27:28.391286708Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:27:28.982730923Z","closed_at":"2026-01-02T15:27:28.982730923Z","close_reason":"Closed","comments":[{"id":3580,"issue_id":"lettatoolsselector-japs5","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T15:27:28Z"}]}
{"id":"lettatoolsselector-jcnhq","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:47:58.150284685Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:48:00.212108782Z","closed_at":"2026-01-02T23:48:00.212108782Z","close_reason":"Closed","comments":[{"id":4384,"issue_id":"lettatoolsselector-jcnhq","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T23:47:59Z"}]}
{"id":"lettatoolsselector-jcpe","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:36:28.017195693Z","updated_at":"2025-12-29T21:33:24.67820256Z","closed_at":"2025-12-29T21:33:24.67820256Z","close_reason":"Duplicate","comments":[{"id":613,"issue_id":"lettatoolsselector-jcpe","author":"root","text":"Synced from Beads: lettatoolsselector-omu\n\n---\nHuly Issue: LTSEL-157","created_at":"2025-12-29T20:36:28Z"}]}
{"id":"lettatoolsselector-jd0cz","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:23:35.890693844Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:23:36.477440551Z","closed_at":"2026-01-02T08:23:36.477440551Z","close_reason":"Closed","comments":[{"id":2877,"issue_id":"lettatoolsselector-jd0cz","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T08:23:36Z"}]}
{"id":"lettatoolsselector-jdh0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:24.708260769Z","updated_at":"2025-12-30T02:07:15.017054254Z","comments":[{"id":923,"issue_id":"lettatoolsselector-jdh0","author":"root","text":"Synced from Beads: lettatoolsselector-0ye\n\n---\nHuly Issue: LTSEL-92","created_at":"2025-12-29T21:11:25Z"}]}
{"id":"lettatoolsselector-jdm9b","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:10:28.300900652Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:10:29.902873975Z","closed_at":"2026-01-02T14:10:29.902873975Z","close_reason":"Closed","comments":[{"id":3432,"issue_id":"lettatoolsselector-jdm9b","author":"root","text":"Synced from Huly: LTSEL-48","created_at":"2026-01-02T14:10:29Z"}]}
{"id":"lettatoolsselector-jdy3x","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:51.023863736Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:51.443797003Z","closed_at":"2026-01-02T03:30:51.443797003Z","close_reason":"Closed","comments":[{"id":2118,"issue_id":"lettatoolsselector-jdy3x","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T03:30:51Z"}]}
{"id":"lettatoolsselector-je97","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:26.253183684Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:26.476711896Z","closed_at":"2026-01-02T02:20:26.476711896Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jelhj","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:06:31.260929753Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:31.887337677Z","closed_at":"2026-01-02T03:06:31.887337677Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jepam","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:29.564254929Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:30.154728118Z","closed_at":"2026-01-02T17:01:30.154728118Z","close_reason":"Closed","comments":[{"id":3695,"issue_id":"lettatoolsselector-jepam","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T17:01:29Z"}]}
{"id":"lettatoolsselector-jf0zr","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:35:53.221450696Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:35:53.740025703Z","closed_at":"2026-01-02T10:35:53.740025703Z","close_reason":"Closed","comments":[{"id":3073,"issue_id":"lettatoolsselector-jf0zr","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T10:35:53Z"}]}
{"id":"lettatoolsselector-jfod5","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:41:31.534856769Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:32.260545755Z","closed_at":"2026-01-02T20:41:32.260545755Z","close_reason":"Closed","comments":[{"id":4135,"issue_id":"lettatoolsselector-jfod5","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T20:41:32Z"}]}
{"id":"lettatoolsselector-jgczs","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:39:50.675322317Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:51.136880319Z","closed_at":"2026-01-02T20:39:51.136880319Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jgew","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:33:50.966372834Z","updated_at":"2025-12-30T02:38:59.211228817Z","comments":[{"id":1066,"issue_id":"lettatoolsselector-jgew","author":"root","text":"Synced from Beads: lettatoolsselector-7dj\n\n---\nHuly Issue: LTSEL-60","created_at":"2025-12-29T21:33:51Z"}]}
{"id":"lettatoolsselector-jgkbz","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:58:06.187782954Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:06.790096236Z","closed_at":"2026-01-02T09:58:06.790096236Z","close_reason":"Closed","comments":[{"id":3057,"issue_id":"lettatoolsselector-jgkbz","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T09:58:06Z"}]}
{"id":"lettatoolsselector-jgsv0","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:56:40.273448855Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:40.825090111Z","closed_at":"2026-01-02T08:56:40.825090111Z","close_reason":"Closed","comments":[{"id":2908,"issue_id":"lettatoolsselector-jgsv0","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T08:56:40Z"}]}
{"id":"lettatoolsselector-jh1x7","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:54.803240303Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:55.281350468Z","closed_at":"2026-01-02T06:36:55.281350468Z","close_reason":"Closed","comments":[{"id":2619,"issue_id":"lettatoolsselector-jh1x7","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T06:36:55Z"}]}
{"id":"lettatoolsselector-jh3","title":"[Perf] Use dict-based O(1) lookup for tool filtering","description":"## Problem\n`_filter_mcp_results()` performs O(n*m) linear search looking up each result in the tools cache.\n\n**Location:** `routes/tools.py:144-168`\n\n```python\n# Line 150 - O(n) lookup per result\ncached_tool = next((t for t in tools_cache if t.get('name') == tool_name), None)\n```\n\n## Impact\n- **Latency:** 10-50ms with 500+ tools in cache and 50 results (25,000+ comparisons)\n- **Priority:** MEDIUM-HIGH - easy fix with good payoff\n\n## Solution\nConvert `tools_cache` to a dictionary keyed by name at cache load time:\n\n```python\n# In ToolCacheService or at cache load time\n_tool_cache_by_name: Dict[str, dict] = {}\n\nasync def read_tool_cache(self, force_reload=False):\n    tools = await self._load_cache()\n    self._tool_cache_by_name = {t.get('name'): t for t in tools}\n    return tools\n\n# In _filter_mcp_results - O(1) lookup\ncached_tool = cache_service.get_tool_by_name(tool_name)\n```\n\n## Acceptance Criteria\n- [ ] ToolCacheService maintains name-indexed dict\n- [ ] `_filter_mcp_results()` uses O(1) dict lookup\n- [ ] Dict rebuilt on cache refresh\n- [ ] All unit tests pass\n- [ ] Add benchmark test comparing old vs new performance","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T01:49:55.722342789Z","updated_at":"2025-12-29T17:51:45.149742746Z","closed_at":"2025-12-29T17:51:45.149742746Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-jh6nn","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:07:13.177532321Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:07:13.726826928Z","closed_at":"2026-01-02T14:07:13.726826928Z","close_reason":"Closed","comments":[{"id":3412,"issue_id":"lettatoolsselector-jh6nn","author":"root","text":"Synced from Huly: LTSEL-222","created_at":"2026-01-02T14:07:13Z"}]}
{"id":"lettatoolsselector-jh7xz","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T05:41:05.76439008Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:06.082026543Z","closed_at":"2026-01-02T05:41:06.082026543Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jhhi0","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:19.822726008Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:20.507349429Z","closed_at":"2026-01-02T18:25:20.507349429Z","close_reason":"Closed","comments":[{"id":3837,"issue_id":"lettatoolsselector-jhhi0","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T18:25:20Z"}]}
{"id":"lettatoolsselector-jhwvz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:47.301664791Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:47.301664791Z","comments":[{"id":1946,"issue_id":"lettatoolsselector-jhwvz","author":"root","text":"Synced from Beads: lettatoolsselector-5yds\n\n---\nHuly Issue: LTSEL-376","created_at":"2026-01-02T03:28:47Z"}]}
{"id":"lettatoolsselector-ji3p4","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:00:50.826183742Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:00:51.420084661Z","closed_at":"2026-01-02T17:00:51.420084661Z","close_reason":"Closed","comments":[{"id":3687,"issue_id":"lettatoolsselector-ji3p4","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T17:00:51Z"}]}
{"id":"lettatoolsselector-ji5k5","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:39:17.387521382Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:17.963270212Z","closed_at":"2026-01-02T13:39:17.963270212Z","close_reason":"Closed","comments":[{"id":3371,"issue_id":"lettatoolsselector-ji5k5","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T13:39:17Z"}]}
{"id":"lettatoolsselector-jidvs","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T10:58:31.047170819Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:31.52756083Z","closed_at":"2026-01-02T10:58:31.52756083Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jiia","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:18:59.020895788Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:18:59.410761861Z","closed_at":"2026-01-02T02:18:59.410761861Z","close_reason":"Closed","comments":[{"id":1264,"issue_id":"lettatoolsselector-jiia","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T02:18:59Z"}]}
{"id":"lettatoolsselector-jiov4","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:18:07.577107883Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:08.137555256Z","closed_at":"2026-01-02T06:18:08.137555256Z","close_reason":"Closed","comments":[{"id":2570,"issue_id":"lettatoolsselector-jiov4","author":"root","text":"Synced from Huly: LTSEL-226","created_at":"2026-01-02T06:18:07Z"}]}
{"id":"lettatoolsselector-jish7","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:34:02.69060883Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:34:03.298123926Z","closed_at":"2026-01-02T17:34:03.298123926Z","close_reason":"Closed","comments":[{"id":3773,"issue_id":"lettatoolsselector-jish7","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T17:34:03Z"}]}
{"id":"lettatoolsselector-jiv06","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:12.345280214Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:12.345280214Z","comments":[{"id":2270,"issue_id":"lettatoolsselector-jiv06","author":"root","text":"Synced from Beads: lettatoolsselector-phds\n\n---\nHuly Issue: LTSEL-408","created_at":"2026-01-02T03:45:12Z"}]}
{"id":"lettatoolsselector-jiv5w","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:25.969091909Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:26.340617094Z","closed_at":"2026-01-02T10:59:26.340617094Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jjkdx","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:41.857938834Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:42.466357325Z","closed_at":"2026-01-02T08:54:42.466357325Z","close_reason":"Closed","comments":[{"id":2885,"issue_id":"lettatoolsselector-jjkdx","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T08:54:42Z"}]}
{"id":"lettatoolsselector-jjlaj","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:34.256005383Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:34.827059239Z","closed_at":"2026-01-02T17:25:34.827059239Z","close_reason":"Closed","comments":[{"id":3731,"issue_id":"lettatoolsselector-jjlaj","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T17:25:34Z"}]}
{"id":"lettatoolsselector-jjmho","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:19:34.388279284Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:34.874077394Z","closed_at":"2026-01-02T06:19:34.874077394Z","close_reason":"Closed","comments":[{"id":2595,"issue_id":"lettatoolsselector-jjmho","author":"root","text":"Synced from Huly: LTSEL-236","created_at":"2026-01-02T06:19:34Z"}]}
{"id":"lettatoolsselector-jjx","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:54:23.006956448Z","updated_at":"2025-12-29T21:33:45.440194048Z","closed_at":"2025-12-29T21:33:45.440194048Z","close_reason":"Duplicate","comments":[{"id":254,"issue_id":"lettatoolsselector-jjx","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T19:54:23Z"}]}
{"id":"lettatoolsselector-jkco4","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:33:09.776643604Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:33:10.63623215Z","closed_at":"2026-01-02T21:33:10.63623215Z","close_reason":"Closed","comments":[{"id":4231,"issue_id":"lettatoolsselector-jkco4","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T21:33:10Z"}]}
{"id":"lettatoolsselector-jkfoi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:03.000634201Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:03.000634201Z","comments":[{"id":1980,"issue_id":"lettatoolsselector-jkfoi","author":"root","text":"Synced from Beads: lettatoolsselector-uxdc\n\n---\nHuly Issue: LTSEL-336","created_at":"2026-01-02T03:29:03Z"}]}
{"id":"lettatoolsselector-jkwzx","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:43:44.101082738Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:45.359776382Z","closed_at":"2026-01-02T07:43:45.359776382Z","close_reason":"Closed","comments":[{"id":2777,"issue_id":"lettatoolsselector-jkwzx","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T07:43:45Z"}]}
{"id":"lettatoolsselector-jlhuk","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:57.475496967Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:57.996615045Z","closed_at":"2026-01-02T09:21:57.996615045Z","close_reason":"Closed","comments":[{"id":2961,"issue_id":"lettatoolsselector-jlhuk","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T09:21:57Z"}]}
{"id":"lettatoolsselector-jlqr","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:13.565063805Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:13.990022501Z","closed_at":"2026-01-02T02:35:13.990022501Z","close_reason":"Closed","comments":[{"id":1342,"issue_id":"lettatoolsselector-jlqr","author":"root","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2026-01-02T02:35:13Z"}]}
{"id":"lettatoolsselector-jm3uq","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:12.569310813Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:12.869515479Z","closed_at":"2026-01-02T05:41:12.869515479Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jmd3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:19:59.421251189Z","updated_at":"2025-12-30T01:56:08.567528505Z","comments":[{"id":1004,"issue_id":"lettatoolsselector-jmd3","author":"root","text":"Synced from Beads: lettatoolsselector-dg2\n\n---\nHuly Issue: LTSEL-87","created_at":"2025-12-29T21:19:59Z"}]}
{"id":"lettatoolsselector-jmorf","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:29.50479333Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:29.969333765Z","closed_at":"2026-01-02T06:00:29.969333765Z","close_reason":"Closed","comments":[{"id":2544,"issue_id":"lettatoolsselector-jmorf","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T06:00:29Z"}]}
{"id":"lettatoolsselector-jmzed","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:49:43.136924368Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:49:43.811421682Z","closed_at":"2026-01-02T23:49:43.811421682Z","close_reason":"Closed","comments":[{"id":4389,"issue_id":"lettatoolsselector-jmzed","author":"root","text":"Synced from Huly: LTSEL-44","created_at":"2026-01-02T23:49:43Z"}]}
{"id":"lettatoolsselector-jn4t","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T02:35:25.93953025Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:26.304567057Z","closed_at":"2026-01-02T02:35:26.304567057Z","close_reason":"Closed","comments":[{"id":1356,"issue_id":"lettatoolsselector-jn4t","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T02:35:26Z"}]}
{"id":"lettatoolsselector-jnp2r","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:52.517834396Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:53.145031664Z","closed_at":"2026-01-02T09:54:53.145031664Z","close_reason":"Closed","comments":[{"id":3037,"issue_id":"lettatoolsselector-jnp2r","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T09:54:52Z"}]}
{"id":"lettatoolsselector-jnrp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:29:34.710332702Z","updated_at":"2025-12-30T02:03:10.385652012Z","comments":[{"id":1049,"issue_id":"lettatoolsselector-jnrp","author":"root","text":"Synced from Beads: lettatoolsselector-57s\n\n---\nHuly Issue: LTSEL-59","created_at":"2025-12-29T21:29:35Z"}]}
{"id":"lettatoolsselector-jnt40","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:04:45.81881724Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:04:46.259388978Z","closed_at":"2026-01-02T20:04:46.259388978Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jo5u2","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:31.589716925Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:32.265290268Z","closed_at":"2026-01-02T19:20:32.265290268Z","close_reason":"Closed","comments":[{"id":3931,"issue_id":"lettatoolsselector-jo5u2","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T19:20:32Z"}]}
{"id":"lettatoolsselector-jocd3","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:57:32.151966782Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:32.50291027Z","closed_at":"2026-01-02T12:57:32.50291027Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jp10n","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:43.069451369Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:43.524372013Z","closed_at":"2026-01-02T05:40:43.524372013Z","close_reason":"Closed","comments":[{"id":2457,"issue_id":"lettatoolsselector-jp10n","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T05:40:43Z"}]}
{"id":"lettatoolsselector-jp57s","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:22:53.242066665Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:22:53.802395452Z","closed_at":"2026-01-02T15:22:53.802395452Z","close_reason":"Closed","comments":[{"id":3561,"issue_id":"lettatoolsselector-jp57s","author":"root","text":"Synced from Huly: LTSEL-239","created_at":"2026-01-02T15:22:53Z"}]}
{"id":"lettatoolsselector-jpb1r","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:43:53.00766633Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:43:53.43096584Z","closed_at":"2026-01-02T22:43:53.43096584Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jpnq","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:19.566626637Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:19.960104334Z","closed_at":"2026-01-02T01:08:19.960104334Z","close_reason":"Closed","comments":[{"id":1170,"issue_id":"lettatoolsselector-jpnq","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T01:08:19Z"}]}
{"id":"lettatoolsselector-jpri1","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:39:54.549456456Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:54.99861514Z","closed_at":"2026-01-02T19:39:54.99861514Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jptt","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:50.080261161Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:50.468192103Z","closed_at":"2026-01-02T01:24:50.468192103Z","close_reason":"Closed","comments":[{"id":1219,"issue_id":"lettatoolsselector-jptt","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T01:24:50Z"}]}
{"id":"lettatoolsselector-jpy9v","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:03:56.137663795Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:56.810205188Z","closed_at":"2026-01-02T08:03:56.810205188Z","close_reason":"Closed","comments":[{"id":2826,"issue_id":"lettatoolsselector-jpy9v","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T08:03:56Z"}]}
{"id":"lettatoolsselector-jpz7g","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:54:52.196953227Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:54:52.786818077Z","closed_at":"2026-01-02T17:54:52.786818077Z","close_reason":"Closed","comments":[{"id":3808,"issue_id":"lettatoolsselector-jpz7g","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T17:54:52Z"}]}
{"id":"lettatoolsselector-jq2w3","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:22.861678478Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:23.404138988Z","closed_at":"2026-01-02T08:20:23.404138988Z","close_reason":"Closed","comments":[{"id":2850,"issue_id":"lettatoolsselector-jq2w3","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T08:20:23Z"}]}
{"id":"lettatoolsselector-jq8xa","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:42.513217092Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:42.513217092Z","comments":[{"id":1799,"issue_id":"lettatoolsselector-jq8xa","author":"root","text":"Synced from Beads: lettatoolsselector-7whu\n\n---\nHuly Issue: LTSEL-574","created_at":"2026-01-02T03:27:42Z"}]}
{"id":"lettatoolsselector-jql","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:28.165403794Z","updated_at":"2025-12-29T18:56:32.145572895Z","closed_at":"2025-12-29T18:56:32.145572895Z","close_reason":"Duplicate of lettatoolsselector-vly (performance test)","comments":[{"id":13,"issue_id":"lettatoolsselector-jql","author":"node","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2025-12-22T23:46:28Z"}]}
{"id":"lettatoolsselector-jqmme","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:22:04.557277478Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:22:04.976898218Z","closed_at":"2026-01-02T20:22:04.976898218Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jr5zq","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:34.421385378Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:35.006912709Z","closed_at":"2026-01-02T14:57:35.006912709Z","close_reason":"Closed","comments":[{"id":3490,"issue_id":"lettatoolsselector-jr5zq","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T14:57:34Z"}]}
{"id":"lettatoolsselector-jr8s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:01:37.21428921Z","updated_at":"2025-12-30T04:11:48.198049669Z","comments":[{"id":826,"issue_id":"lettatoolsselector-jr8s","author":"root","text":"Synced from Beads: lettatoolsselector-xei\n\n---\nHuly Issue: LTSEL-126","created_at":"2025-12-29T21:01:37Z"}]}
{"id":"lettatoolsselector-jruwr","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:18:58.90638423Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:18:59.538740955Z","closed_at":"2026-01-02T20:18:59.538740955Z","close_reason":"Closed","comments":[{"id":4079,"issue_id":"lettatoolsselector-jruwr","author":"root","text":"Synced from Huly: LTSEL-219","created_at":"2026-01-02T20:18:59Z"}]}
{"id":"lettatoolsselector-jsfm","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T01:08:33.916149522Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:34.127870678Z","closed_at":"2026-01-02T01:08:34.127870678Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ju9kw","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:57.146333569Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:57.721068737Z","closed_at":"2026-01-02T17:25:57.721068737Z","close_reason":"Closed","comments":[{"id":3738,"issue_id":"lettatoolsselector-ju9kw","author":"root","text":"Synced from Huly: LTSEL-39","created_at":"2026-01-02T17:25:57Z"}]}
{"id":"lettatoolsselector-jvjvc","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:51:30.524425565Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:51:30.96282223Z","closed_at":"2026-01-02T21:51:30.96282223Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jwie6","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:13.767611517Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:14.897150748Z","closed_at":"2026-01-02T04:39:14.897150748Z","close_reason":"Closed","comments":[{"id":2407,"issue_id":"lettatoolsselector-jwie6","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T04:39:14Z"}]}
{"id":"lettatoolsselector-jwo1p","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T19:24:58.697357813Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:24:59.377259497Z","closed_at":"2026-01-02T19:24:59.377259497Z","close_reason":"Closed","comments":[{"id":3951,"issue_id":"lettatoolsselector-jwo1p","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T19:24:59Z"}]}
{"id":"lettatoolsselector-jwqgh","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:44:41.373968595Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:44:41.932889824Z","closed_at":"2026-01-02T09:44:41.932889824Z","close_reason":"Closed","comments":[{"id":3022,"issue_id":"lettatoolsselector-jwqgh","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T09:44:41Z"}]}
{"id":"lettatoolsselector-jwstw","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:10.508522473Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:11.13048575Z","closed_at":"2026-01-02T18:25:11.13048575Z","close_reason":"Closed","comments":[{"id":3835,"issue_id":"lettatoolsselector-jwstw","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T18:25:10Z"}]}
{"id":"lettatoolsselector-jwtk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:02:37.647538708Z","updated_at":"2025-12-30T04:14:06.181142745Z","comments":[{"id":835,"issue_id":"lettatoolsselector-jwtk","author":"root","text":"Synced from Beads: lettatoolsselector-y0e\n\n---\nHuly Issue: LTSEL-124","created_at":"2025-12-29T21:02:37Z"}]}
{"id":"lettatoolsselector-jwyb","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:09.768619908Z","updated_at":"2025-12-29T21:33:30.11871245Z","closed_at":"2025-12-29T21:33:30.11871245Z","close_reason":"Duplicate","comments":[{"id":365,"issue_id":"lettatoolsselector-jwyb","author":"root","text":"Synced from Beads: lettatoolsselector-bte\n\n---\nHuly Issue: LTSEL-197","created_at":"2025-12-29T20:15:10Z"}]}
{"id":"lettatoolsselector-jxbgw","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:24:40.721243275Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:24:41.358802754Z","closed_at":"2026-01-02T18:24:41.358802754Z","close_reason":"Closed","comments":[{"id":3831,"issue_id":"lettatoolsselector-jxbgw","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T18:24:41Z"}]}
{"id":"lettatoolsselector-jxct","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:06:06.55370298Z","updated_at":"2025-12-30T04:14:13.734378336Z","comments":[{"id":871,"issue_id":"lettatoolsselector-jxct","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-101","created_at":"2025-12-29T21:06:06Z"}]}
{"id":"lettatoolsselector-jxeaa","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:06:51.337479473Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:06:51.919472252Z","closed_at":"2026-01-02T17:06:51.919472252Z","close_reason":"Closed","comments":[{"id":3716,"issue_id":"lettatoolsselector-jxeaa","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T17:06:51Z"}]}
{"id":"lettatoolsselector-jy5u3","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:21:07.912969746Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:08.550905343Z","closed_at":"2026-01-02T20:21:08.550905343Z","close_reason":"Closed","comments":[{"id":4090,"issue_id":"lettatoolsselector-jy5u3","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T20:21:08Z"}]}
{"id":"lettatoolsselector-jywai","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:00:05.73688368Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:06.187288753Z","closed_at":"2026-01-02T06:00:06.187288753Z","close_reason":"Closed","comments":[{"id":2524,"issue_id":"lettatoolsselector-jywai","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T06:00:05Z"}]}
{"id":"lettatoolsselector-jyxte","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T13:39:22.666798239Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:23.373292249Z","closed_at":"2026-01-02T13:39:23.373292249Z","close_reason":"Closed","comments":[{"id":3373,"issue_id":"lettatoolsselector-jyxte","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T13:39:23Z"}]}
{"id":"lettatoolsselector-jyzz","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:05.867914384Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:06.097606586Z","closed_at":"2026-01-02T01:25:06.097606586Z","close_reason":"Closed"}
{"id":"lettatoolsselector-jzl","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:54:42.138028411Z","updated_at":"2025-12-29T21:33:45.35193816Z","closed_at":"2025-12-29T21:33:45.35193816Z","close_reason":"Duplicate","comments":[{"id":257,"issue_id":"lettatoolsselector-jzl","author":"root","text":"Synced from Beads: lettatoolsselector-bo9\n\n---\nHuly Issue: LTSEL-137","created_at":"2025-12-29T19:54:42Z"}]}
{"id":"lettatoolsselector-k0dpq","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:37.964889267Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:38.574334577Z","closed_at":"2026-01-02T17:50:38.574334577Z","close_reason":"Closed","comments":[{"id":3784,"issue_id":"lettatoolsselector-k0dpq","author":"root","text":"Synced from Huly: LTSEL-42","created_at":"2026-01-02T17:50:38Z"}]}
{"id":"lettatoolsselector-k0fla","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T13:39:09.755678798Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:10.431852961Z","closed_at":"2026-01-02T13:39:10.431852961Z","close_reason":"Closed","comments":[{"id":3368,"issue_id":"lettatoolsselector-k0fla","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T13:39:10Z"}]}
{"id":"lettatoolsselector-k174d","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:24:22.379869152Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:22.957842891Z","closed_at":"2026-01-02T07:24:22.957842891Z","close_reason":"Closed","comments":[{"id":2723,"issue_id":"lettatoolsselector-k174d","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T07:24:22Z"}]}
{"id":"lettatoolsselector-k1dxr","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:59.646801058Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:00.159342544Z","closed_at":"2026-01-02T10:58:00.159342544Z","close_reason":"Closed","comments":[{"id":3128,"issue_id":"lettatoolsselector-k1dxr","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T10:57:59Z"}]}
{"id":"lettatoolsselector-k1nns","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:22:31.752988341Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:22:33.668895982Z","closed_at":"2026-01-02T21:22:33.668895982Z","close_reason":"Closed","comments":[{"id":4198,"issue_id":"lettatoolsselector-k1nns","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T21:22:33Z"}]}
{"id":"lettatoolsselector-k2lky","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:07.967196788Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:08.508194095Z","closed_at":"2026-01-02T14:05:08.508194095Z","close_reason":"Closed","comments":[{"id":3394,"issue_id":"lettatoolsselector-k2lky","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T14:05:08Z"}]}
{"id":"lettatoolsselector-k2lof","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:33.848685483Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:33.848685483Z","comments":[{"id":1779,"issue_id":"lettatoolsselector-k2lof","author":"root","text":"Synced from Beads: lettatoolsselector-2jrd\n\n---\nHuly Issue: LTSEL-597","created_at":"2026-01-02T03:27:34Z"}]}
{"id":"lettatoolsselector-k2pmr","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:38:59.783817912Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:00.246353108Z","closed_at":"2026-01-02T04:39:00.246353108Z","close_reason":"Closed","comments":[{"id":2401,"issue_id":"lettatoolsselector-k2pmr","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T04:39:00Z"}]}
{"id":"lettatoolsselector-k2s4w","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:56:37.757960427Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:38.347618956Z","closed_at":"2026-01-02T08:56:38.347618956Z","close_reason":"Closed","comments":[{"id":2907,"issue_id":"lettatoolsselector-k2s4w","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T08:56:38Z"}]}
{"id":"lettatoolsselector-k30he","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:39:21.43281191Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:22.018105211Z","closed_at":"2026-01-02T13:39:22.018105211Z","close_reason":"Closed","comments":[{"id":3372,"issue_id":"lettatoolsselector-k30he","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T13:39:21Z"}]}
{"id":"lettatoolsselector-k31qu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:47.427002608Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:47.427002608Z","comments":[{"id":1810,"issue_id":"lettatoolsselector-k31qu","author":"root","text":"Synced from Beads: lettatoolsselector-4t5u\n\n---\nHuly Issue: LTSEL-556","created_at":"2026-01-02T03:27:47Z"}]}
{"id":"lettatoolsselector-k3dkv","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:22:43.774335181Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:44.300247678Z","closed_at":"2026-01-02T09:22:44.300247678Z","close_reason":"Closed","comments":[{"id":2975,"issue_id":"lettatoolsselector-k3dkv","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T09:22:44Z"}]}
{"id":"lettatoolsselector-k3e9y","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:22.856088032Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:23.430186275Z","closed_at":"2026-01-02T17:01:23.430186275Z","close_reason":"Closed","comments":[{"id":3693,"issue_id":"lettatoolsselector-k3e9y","author":"root","text":"Synced from Huly: LTSEL-28","created_at":"2026-01-02T17:01:23Z"}]}
{"id":"lettatoolsselector-k3ehf","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:04:12.788161808Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:04:13.374395052Z","closed_at":"2026-01-02T08:04:13.374395052Z","close_reason":"Closed","comments":[{"id":2833,"issue_id":"lettatoolsselector-k3ehf","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T08:04:13Z"}]}
{"id":"lettatoolsselector-k3fq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:26:10.709349141Z","updated_at":"2025-12-30T02:01:10.163016367Z","comments":[{"id":1037,"issue_id":"lettatoolsselector-k3fq","author":"root","text":"Synced from Beads: lettatoolsselector-ct9\n\n---\nHuly Issue: LTSEL-75","created_at":"2025-12-29T21:26:11Z"}]}
{"id":"lettatoolsselector-k4e5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:12:24.022587404Z","updated_at":"2025-12-30T02:10:23.443667572Z","comments":[{"id":936,"issue_id":"lettatoolsselector-k4e5","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-101","created_at":"2025-12-29T21:12:24Z"}]}
{"id":"lettatoolsselector-k4j9q","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:18:53.871192805Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:54.373622416Z","closed_at":"2026-01-02T06:18:54.373622416Z","close_reason":"Closed","comments":[{"id":2581,"issue_id":"lettatoolsselector-k4j9q","author":"root","text":"Synced from Huly: LTSEL-240","created_at":"2026-01-02T06:18:54Z"}]}
{"id":"lettatoolsselector-k4sfd","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:57:23.893535188Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:24.486843816Z","closed_at":"2026-01-02T09:57:24.486843816Z","close_reason":"Closed","comments":[{"id":3055,"issue_id":"lettatoolsselector-k4sfd","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T09:57:24Z"}]}
{"id":"lettatoolsselector-k5m9z","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:22.538810496Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:23.173588935Z","closed_at":"2026-01-02T19:20:23.173588935Z","close_reason":"Closed","comments":[{"id":3928,"issue_id":"lettatoolsselector-k5m9z","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T19:20:22Z"}]}
{"id":"lettatoolsselector-k5rkl","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:45:56.973183449Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:45:57.536902234Z","closed_at":"2026-01-02T15:45:57.536902234Z","close_reason":"Closed","comments":[{"id":3592,"issue_id":"lettatoolsselector-k5rkl","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T15:45:57Z"}]}
{"id":"lettatoolsselector-k6468","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:54.094554785Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:54.72100275Z","closed_at":"2026-01-02T18:25:54.72100275Z","close_reason":"Closed","comments":[{"id":3843,"issue_id":"lettatoolsselector-k6468","author":"root","text":"Synced from Huly: LTSEL-16","created_at":"2026-01-02T18:25:54Z"}]}
{"id":"lettatoolsselector-k667u","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:04:43.973792905Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:04:44.59522044Z","closed_at":"2026-01-02T20:04:44.59522044Z","close_reason":"Closed","comments":[{"id":4047,"issue_id":"lettatoolsselector-k667u","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T20:04:44Z"}]}
{"id":"lettatoolsselector-k6oth","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:03:10.21842669Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:10.706424878Z","closed_at":"2026-01-02T07:03:10.706424878Z","close_reason":"Closed","comments":[{"id":2684,"issue_id":"lettatoolsselector-k6oth","author":"root","text":"Synced from Huly: LTSEL-50","created_at":"2026-01-02T07:03:10Z"}]}
{"id":"lettatoolsselector-k72ww","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:31.060954786Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:31.640062042Z","closed_at":"2026-01-02T15:46:31.640062042Z","close_reason":"Closed","comments":[{"id":3602,"issue_id":"lettatoolsselector-k72ww","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T15:46:31Z"}]}
{"id":"lettatoolsselector-k7e2","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:51.332982865Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:51.685798709Z","closed_at":"2026-01-02T01:24:51.685798709Z","close_reason":"Closed","comments":[{"id":1221,"issue_id":"lettatoolsselector-k7e2","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T01:24:51Z"}]}
{"id":"lettatoolsselector-k7gyp","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:44:43.248228746Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:44:43.840237234Z","closed_at":"2026-01-02T09:44:43.840237234Z","close_reason":"Closed","comments":[{"id":3024,"issue_id":"lettatoolsselector-k7gyp","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T09:44:43Z"}]}
{"id":"lettatoolsselector-k84ah","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:30:53.438970778Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:30:53.981010581Z","closed_at":"2026-01-02T14:30:53.981010581Z","close_reason":"Closed","comments":[{"id":3457,"issue_id":"lettatoolsselector-k84ah","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T14:30:53Z"}]}
{"id":"lettatoolsselector-k8ssk","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:21:43.068870199Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:43.664636761Z","closed_at":"2026-01-02T08:21:43.664636761Z","close_reason":"Closed","comments":[{"id":2864,"issue_id":"lettatoolsselector-k8ssk","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T08:21:43Z"}]}
{"id":"lettatoolsselector-k909","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:38.398022523Z","updated_at":"2025-12-29T21:33:26.493045962Z","closed_at":"2025-12-29T21:33:26.493045962Z","close_reason":"Duplicate","comments":[{"id":527,"issue_id":"lettatoolsselector-k909","author":"root","text":"Synced from Beads: lettatoolsselector-22q\n\n---\nHuly Issue: LTSEL-170","created_at":"2025-12-29T20:28:38Z"}]}
{"id":"lettatoolsselector-k918c","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:36:39.785009615Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:40.142627485Z","closed_at":"2026-01-02T10:36:40.142627485Z","close_reason":"Closed"}
{"id":"lettatoolsselector-k94dx","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:32:27.995242405Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:32:28.540934173Z","closed_at":"2026-01-02T14:32:28.540934173Z","close_reason":"Closed","comments":[{"id":3464,"issue_id":"lettatoolsselector-k94dx","author":"root","text":"Synced from Huly: LTSEL-239","created_at":"2026-01-02T14:32:28Z"}]}
{"id":"lettatoolsselector-k9duv","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:36:55.575596803Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:56.037058189Z","closed_at":"2026-01-02T06:36:56.037058189Z","close_reason":"Closed","comments":[{"id":2620,"issue_id":"lettatoolsselector-k9duv","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T06:36:55Z"}]}
{"id":"lettatoolsselector-k9ji","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:16.711387419Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:17.05773566Z","closed_at":"2026-01-02T03:06:17.05773566Z","close_reason":"Closed","comments":[{"id":1530,"issue_id":"lettatoolsselector-k9ji","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T03:06:16Z"}]}
{"id":"lettatoolsselector-k9spn","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:11.530602291Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:12.159377226Z","closed_at":"2026-01-02T17:01:12.159377226Z","close_reason":"Closed","comments":[{"id":3688,"issue_id":"lettatoolsselector-k9spn","author":"root","text":"Synced from Huly: LTSEL-40","created_at":"2026-01-02T17:01:11Z"}]}
{"id":"lettatoolsselector-kaed5","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:21:18.219260325Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:18.895219773Z","closed_at":"2026-01-02T08:21:18.895219773Z","close_reason":"Closed","comments":[{"id":2861,"issue_id":"lettatoolsselector-kaed5","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T08:21:18Z"}]}
{"id":"lettatoolsselector-kaqkx","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:57.939999111Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:58.458130715Z","closed_at":"2026-01-02T10:57:58.458130715Z","close_reason":"Closed","comments":[{"id":3127,"issue_id":"lettatoolsselector-kaqkx","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T10:57:58Z"}]}
{"id":"lettatoolsselector-kaw45","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:34.224897617Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:34.854567367Z","closed_at":"2026-01-02T07:42:34.854567367Z","close_reason":"Closed","comments":[{"id":2752,"issue_id":"lettatoolsselector-kaw45","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T07:42:34Z"}]}
{"id":"lettatoolsselector-kazer","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:41:01.949542282Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:02.463642391Z","closed_at":"2026-01-02T09:41:02.463642391Z","close_reason":"Closed","comments":[{"id":3002,"issue_id":"lettatoolsselector-kazer","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T09:41:02Z"}]}
{"id":"lettatoolsselector-kb7on","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:02.56138643Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:03.103486559Z","closed_at":"2026-01-02T09:40:03.103486559Z","close_reason":"Closed","comments":[{"id":2985,"issue_id":"lettatoolsselector-kb7on","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T09:40:02Z"}]}
{"id":"lettatoolsselector-kbege","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:03:35.543846977Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:03:35.967875532Z","closed_at":"2026-01-02T15:03:35.967875532Z","close_reason":"Closed"}
{"id":"lettatoolsselector-kbmk","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:56.44274267Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:57.068427914Z","closed_at":"2026-01-02T02:20:57.068427914Z","close_reason":"Closed","comments":[{"id":1315,"issue_id":"lettatoolsselector-kbmk","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T02:20:56Z"}]}
{"id":"lettatoolsselector-kc3a9","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:32.961912355Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:33.591605655Z","closed_at":"2026-01-02T08:02:33.591605655Z","close_reason":"Closed","comments":[{"id":2808,"issue_id":"lettatoolsselector-kc3a9","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T08:02:33Z"}]}
{"id":"lettatoolsselector-kcesd","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:20:59.321841143Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:59.751319162Z","closed_at":"2026-01-02T04:20:59.751319162Z","close_reason":"Closed","comments":[{"id":2389,"issue_id":"lettatoolsselector-kcesd","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T04:20:59Z"}]}
{"id":"lettatoolsselector-kcezl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:56.518267079Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:56.518267079Z","comments":[{"id":1966,"issue_id":"lettatoolsselector-kcezl","author":"root","text":"Synced from Beads: lettatoolsselector-4isq\n\n---\nHuly Issue: LTSEL-352","created_at":"2026-01-02T03:28:56Z"}]}
{"id":"lettatoolsselector-kf4vz","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:34.778767682Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:35.300227948Z","closed_at":"2026-01-02T10:59:35.300227948Z","close_reason":"Closed","comments":[{"id":3149,"issue_id":"lettatoolsselector-kf4vz","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T10:59:35Z"}]}
{"id":"lettatoolsselector-kf6r","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:02.25814639Z","updated_at":"2025-12-30T02:06:37.147859717Z","comments":[{"id":920,"issue_id":"lettatoolsselector-kf6r","author":"root","text":"Synced from Beads: lettatoolsselector-jnc\n\n---\nHuly Issue: LTSEL-105","created_at":"2025-12-29T21:11:02Z"}]}
{"id":"lettatoolsselector-kf7","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.088411302Z","updated_at":"2025-12-29T18:56:12.157849446Z","closed_at":"2025-12-29T18:56:12.157849446Z","close_reason":"Duplicate of closed lettatoolsselector-trs","comments":[{"id":1,"issue_id":"lettatoolsselector-kf7","author":"node","text":"## Problem\n\nTool selector API has MAX_TOTAL_TOOLS=20 but only enforces it loosely. Agents like Meridian accumulated 44 tools because pruning doesn't run proactively.\n\n## Solution\n\nBefore attaching new tools, prune existing tools to make room within the limit.\n\n## Acceptance Criteria\n\n- [ ] Before any attach operation, fetch current tool count\n- [ ] If current + new \u003e MAX_TOTAL_TOOLS, detach lowest-scored tools first\n- [ ] Protected tools are never detached (use PROTECTED_TOOLS env var)\n- [ ] Return detailed response showing what was pruned and why\n- [ ] Log pruning decisions for debugging\n\n## Technical Notes\n\n- Pruning order: oldest first, then lowest relevance score\n- Consider keeping tools attached in last 24h as \"recent\" protection\n- MAX_TOTAL_TOOLS is now 20\n\n---\nHuly Issue: LTSEL-7","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-kfb80","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:59:26.690904327Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:27.24899191Z","closed_at":"2026-01-02T10:59:27.24899191Z","close_reason":"Closed","comments":[{"id":3144,"issue_id":"lettatoolsselector-kfb80","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T10:59:27Z"}]}
{"id":"lettatoolsselector-kfhui","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:40:11.593481419Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:40:12.152722661Z","closed_at":"2026-01-02T13:40:12.152722661Z","close_reason":"Closed","comments":[{"id":3377,"issue_id":"lettatoolsselector-kfhui","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T13:40:11Z"}]}
{"id":"lettatoolsselector-kfno3","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:04:49.476010221Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:04:50.234125444Z","closed_at":"2026-01-02T21:04:50.234125444Z","close_reason":"Closed","comments":[{"id":4192,"issue_id":"lettatoolsselector-kfno3","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T21:04:49Z"}]}
{"id":"lettatoolsselector-kfrp9","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:41:48.643426458Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:41:49.370627702Z","closed_at":"2026-01-02T19:41:49.370627702Z","close_reason":"Closed","comments":[{"id":4001,"issue_id":"lettatoolsselector-kfrp9","author":"root","text":"Synced from Huly: LTSEL-53","created_at":"2026-01-02T19:41:49Z"}]}
{"id":"lettatoolsselector-kgh5w","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:54.021547092Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:54.627827072Z","closed_at":"2026-01-02T19:20:54.627827072Z","close_reason":"Closed","comments":[{"id":3937,"issue_id":"lettatoolsselector-kgh5w","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T19:20:54Z"}]}
{"id":"lettatoolsselector-kgpe","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:09.234743626Z","updated_at":"2025-12-30T01:57:33.256744822Z","comments":[{"id":1017,"issue_id":"lettatoolsselector-kgpe","author":"root","text":"Synced from Beads: lettatoolsselector-b0j\n\n---\nHuly Issue: LTSEL-80","created_at":"2025-12-29T21:22:09Z"}]}
{"id":"lettatoolsselector-kgwyo","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:28.159198093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:28.748818058Z","closed_at":"2026-01-02T08:55:28.748818058Z","close_reason":"Closed","comments":[{"id":2899,"issue_id":"lettatoolsselector-kgwyo","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T08:55:28Z"}]}
{"id":"lettatoolsselector-kh4c","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:59.430551259Z","updated_at":"2025-12-29T21:33:26.806756614Z","closed_at":"2025-12-29T21:33:26.806756614Z","close_reason":"Duplicate","comments":[{"id":507,"issue_id":"lettatoolsselector-kh4c","author":"root","text":"Synced from Beads: lettatoolsselector-72a\n\n---\nHuly Issue: LTSEL-185","created_at":"2025-12-29T20:26:59Z"}]}
{"id":"lettatoolsselector-ki23l","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:01:12.117294806Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:01:13.035747394Z","closed_at":"2026-01-02T21:01:13.035747394Z","close_reason":"Closed","comments":[{"id":4181,"issue_id":"lettatoolsselector-ki23l","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T21:01:12Z"}]}
{"id":"lettatoolsselector-kii4e","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:58:36.023763419Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:36.413460993Z","closed_at":"2026-01-02T10:58:36.413460993Z","close_reason":"Closed"}
{"id":"lettatoolsselector-kijye","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:14.058039374Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:14.058039374Z","comments":[{"id":2002,"issue_id":"lettatoolsselector-kijye","author":"root","text":"Synced from Beads: lettatoolsselector-qtyk\n\n---\nHuly Issue: LTSEL-313","created_at":"2026-01-02T03:29:14Z"}]}
{"id":"lettatoolsselector-kiyjv","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:36:37.145572092Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:37.821818054Z","closed_at":"2026-01-02T10:36:37.821818054Z","close_reason":"Closed","comments":[{"id":3093,"issue_id":"lettatoolsselector-kiyjv","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T10:36:37Z"}]}
{"id":"lettatoolsselector-kj6l","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:16:18.929695549Z","updated_at":"2025-12-30T01:51:18.344726684Z","comments":[{"id":973,"issue_id":"lettatoolsselector-kj6l","author":"root","text":"Synced from Beads: lettatoolsselector-5na\n\n---\nHuly Issue: LTSEL-83","created_at":"2025-12-29T21:16:19Z"}]}
{"id":"lettatoolsselector-kk3gj","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:25:05.487048812Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:25:05.896193713Z","closed_at":"2026-01-02T19:25:05.896193713Z","close_reason":"Closed"}
{"id":"lettatoolsselector-kk6a","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:00.000885608Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:00.398850801Z","closed_at":"2026-01-02T02:20:00.398850801Z","close_reason":"Closed","comments":[{"id":1296,"issue_id":"lettatoolsselector-kk6a","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T02:20:00Z"}]}
{"id":"lettatoolsselector-kkhr","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T02:35:29.382099093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:29.618128454Z","closed_at":"2026-01-02T02:35:29.618128454Z","close_reason":"Closed"}
{"id":"lettatoolsselector-kl0gv","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:32.592243585Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:33.155922759Z","closed_at":"2026-01-02T06:36:33.155922759Z","close_reason":"Closed","comments":[{"id":2601,"issue_id":"lettatoolsselector-kl0gv","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T06:36:32Z"}]}
{"id":"lettatoolsselector-klqjl","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:05.87608775Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:06.560597669Z","closed_at":"2026-01-02T11:34:06.560597669Z","close_reason":"Closed","comments":[{"id":3221,"issue_id":"lettatoolsselector-klqjl","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T11:34:06Z"}]}
{"id":"lettatoolsselector-kltcw","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:25.932600583Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:26.479608Z","closed_at":"2026-01-02T14:29:26.479608Z","close_reason":"Closed","comments":[{"id":3444,"issue_id":"lettatoolsselector-kltcw","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T14:29:26Z"}]}
{"id":"lettatoolsselector-klw4t","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:56:51.095817293Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:51.429684895Z","closed_at":"2026-01-02T08:56:51.429684895Z","close_reason":"Closed"}
{"id":"lettatoolsselector-klw6r","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:56:53.996235975Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:54.32321366Z","closed_at":"2026-01-02T08:56:54.32321366Z","close_reason":"Closed"}
{"id":"lettatoolsselector-km955","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:41:57.543451137Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:57.956725059Z","closed_at":"2026-01-02T20:41:57.956725059Z","close_reason":"Closed"}
{"id":"lettatoolsselector-kmunj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:26.068523479Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:26.068523479Z","comments":[{"id":2128,"issue_id":"lettatoolsselector-kmunj","author":"root","text":"Synced from Beads: lettatoolsselector-6pf\n\n---\nHuly Issue: LTSEL-212","created_at":"2026-01-02T03:31:26Z"}]}
{"id":"lettatoolsselector-kn4ss","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:41.188356751Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:41.188356751Z","comments":[{"id":1796,"issue_id":"lettatoolsselector-kn4ss","author":"root","text":"Synced from Beads: lettatoolsselector-yxla\n\n---\nHuly Issue: LTSEL-579","created_at":"2026-01-02T03:27:41Z"}]}
{"id":"lettatoolsselector-knji9","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:18:06.623602302Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:06.92989896Z","closed_at":"2026-01-02T06:18:06.92989896Z","close_reason":"Closed"}
{"id":"lettatoolsselector-knqn3","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:53.713541444Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:54.163722706Z","closed_at":"2026-01-02T05:40:54.163722706Z","close_reason":"Closed","comments":[{"id":2471,"issue_id":"lettatoolsselector-knqn3","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T05:40:53Z"}]}
{"id":"lettatoolsselector-kns63","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:37:18.834136394Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:19.341773706Z","closed_at":"2026-01-02T10:37:19.341773706Z","close_reason":"Closed","comments":[{"id":3099,"issue_id":"lettatoolsselector-kns63","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T10:37:19Z"}]}
{"id":"lettatoolsselector-ko29j","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:40.568258202Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:41.052113377Z","closed_at":"2026-01-02T03:30:41.052113377Z","close_reason":"Closed","comments":[{"id":2111,"issue_id":"lettatoolsselector-ko29j","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T03:30:40Z"}]}
{"id":"lettatoolsselector-ko3j","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:22.543457687Z","updated_at":"2025-12-29T21:33:29.106078112Z","closed_at":"2025-12-29T21:33:29.106078112Z","close_reason":"Duplicate","comments":[{"id":399,"issue_id":"lettatoolsselector-ko3j","author":"root","text":"Synced from Beads: lettatoolsselector-zzl\n\n---\nHuly Issue: LTSEL-190","created_at":"2025-12-29T20:18:22Z"}]}
{"id":"lettatoolsselector-ko3v","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:56.469792322Z","updated_at":"2025-12-29T21:33:24.357890227Z","closed_at":"2025-12-29T21:33:24.357890227Z","close_reason":"Duplicate","comments":[{"id":629,"issue_id":"lettatoolsselector-ko3v","author":"root","text":"Synced from Beads: lettatoolsselector-4pp\n\n---\nHuly Issue: LTSEL-151","created_at":"2025-12-29T20:37:56Z"}]}
{"id":"lettatoolsselector-kodjm","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:52.317294533Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:52.317294533Z","comments":[{"id":2252,"issue_id":"lettatoolsselector-kodjm","author":"root","text":"Synced from Beads: lettatoolsselector-22ul\n\n---\nHuly Issue: LTSEL-468","created_at":"2026-01-02T03:44:52Z"}]}
{"id":"lettatoolsselector-kp8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:05:41.501617526Z","updated_at":"2025-12-29T21:33:44.932386063Z","closed_at":"2025-12-29T21:33:44.932386063Z","close_reason":"Duplicate","comments":[{"id":276,"issue_id":"lettatoolsselector-kp8","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:05:41Z"}]}
{"id":"lettatoolsselector-kpt90","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:58:13.330762216Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:58:13.825101625Z","closed_at":"2026-01-02T20:58:13.825101625Z","close_reason":"Closed"}
{"id":"lettatoolsselector-kqbr0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:01.47208687Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:01.47208687Z","comments":[{"id":1843,"issue_id":"lettatoolsselector-kqbr0","author":"root","text":"Synced from Beads: lettatoolsselector-yczo\n\n---\nHuly Issue: LTSEL-509","created_at":"2026-01-02T03:28:01Z"}]}
{"id":"lettatoolsselector-kqwfs","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:18.240811523Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:18.240811523Z","comments":[{"id":2010,"issue_id":"lettatoolsselector-kqwfs","author":"root","text":"Synced from Beads: lettatoolsselector-p2ek\n\n---\nHuly Issue: LTSEL-305","created_at":"2026-01-02T03:29:18Z"}]}
{"id":"lettatoolsselector-krsd6","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:59:55.389730381Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:56.023578348Z","closed_at":"2026-01-02T19:59:56.023578348Z","close_reason":"Closed","comments":[{"id":4035,"issue_id":"lettatoolsselector-krsd6","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T19:59:55Z"}]}
{"id":"lettatoolsselector-kruwf","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:52.96251178Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:53.582802973Z","closed_at":"2026-01-02T17:25:53.582802973Z","close_reason":"Closed","comments":[{"id":3737,"issue_id":"lettatoolsselector-kruwf","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T17:25:53Z"}]}
{"id":"lettatoolsselector-ks8d","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:05.283374974Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:05.63670069Z","closed_at":"2026-01-02T02:19:05.63670069Z","close_reason":"Closed","comments":[{"id":1266,"issue_id":"lettatoolsselector-ks8d","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T02:19:05Z"}]}
{"id":"lettatoolsselector-ksfai","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:16:03.801169359Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:16:04.441320921Z","closed_at":"2026-01-02T22:16:04.441320921Z","close_reason":"Closed","comments":[{"id":4304,"issue_id":"lettatoolsselector-ksfai","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T22:16:04Z"}]}
{"id":"lettatoolsselector-ksmp7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:52.499184546Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:52.499184546Z","comments":[{"id":1822,"issue_id":"lettatoolsselector-ksmp7","author":"root","text":"Synced from Beads: lettatoolsselector-q6vf\n\n---\nHuly Issue: LTSEL-536","created_at":"2026-01-02T03:27:52Z"}]}
{"id":"lettatoolsselector-kspd8","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:55:01.24486654Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:55:01.781639519Z","closed_at":"2026-01-02T09:55:01.781639519Z","close_reason":"Closed","comments":[{"id":3038,"issue_id":"lettatoolsselector-kspd8","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T09:55:01Z"}]}
{"id":"lettatoolsselector-ksq26","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:24:02.079705719Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:24:02.686483985Z","closed_at":"2026-01-02T20:24:02.686483985Z","close_reason":"Closed","comments":[{"id":4103,"issue_id":"lettatoolsselector-ksq26","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T20:24:02Z"}]}
{"id":"lettatoolsselector-ksqfe","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:11.045600729Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:11.662615032Z","closed_at":"2026-01-02T15:46:11.662615032Z","close_reason":"Closed","comments":[{"id":3597,"issue_id":"lettatoolsselector-ksqfe","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T15:46:11Z"}]}
{"id":"lettatoolsselector-ksunj","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:27.783759203Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:27.783759203Z","comments":[{"id":1903,"issue_id":"lettatoolsselector-ksunj","author":"root","text":"Synced from Beads: lettatoolsselector-nive\n\n---\nHuly Issue: LTSEL-434","created_at":"2026-01-02T03:28:27Z"}]}
{"id":"lettatoolsselector-ktbbf","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:52:35.806616219Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:52:36.63268894Z","closed_at":"2026-01-02T17:52:36.63268894Z","close_reason":"Closed","comments":[{"id":3800,"issue_id":"lettatoolsselector-ktbbf","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T17:52:36Z"}]}
{"id":"lettatoolsselector-ktcbb","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:47:19.600200708Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:20.052579602Z","closed_at":"2026-01-02T03:47:20.052579602Z","close_reason":"Closed","comments":[{"id":2316,"issue_id":"lettatoolsselector-ktcbb","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T03:47:19Z"}]}
{"id":"lettatoolsselector-ktil","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:34.326932954Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:34.66343698Z","closed_at":"2026-01-02T01:08:34.66343698Z","close_reason":"Closed","comments":[{"id":1195,"issue_id":"lettatoolsselector-ktil","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T01:08:34Z"}]}
{"id":"lettatoolsselector-ktk0z","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:41.158620708Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:41.864012002Z","closed_at":"2026-01-02T07:23:41.864012002Z","close_reason":"Closed","comments":[{"id":2697,"issue_id":"lettatoolsselector-ktk0z","author":"root","text":"Synced from Huly: LTSEL-43","created_at":"2026-01-02T07:23:41Z"}]}
{"id":"lettatoolsselector-kuad","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:56.543810223Z","updated_at":"2025-12-30T01:58:39.708680134Z","comments":[{"id":1022,"issue_id":"lettatoolsselector-kuad","author":"root","text":"Synced from Beads: lettatoolsselector-m03\n\n---\nHuly Issue: LTSEL-71","created_at":"2025-12-29T21:22:57Z"}]}
{"id":"lettatoolsselector-kukd0","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:56:16.708767304Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:56:17.270732695Z","closed_at":"2026-01-02T09:56:17.270732695Z","close_reason":"Closed","comments":[{"id":3048,"issue_id":"lettatoolsselector-kukd0","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T09:56:17Z"}]}
{"id":"lettatoolsselector-kukru","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:31:23.771022238Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:31:24.38805382Z","closed_at":"2026-01-02T17:31:24.38805382Z","close_reason":"Closed","comments":[{"id":3769,"issue_id":"lettatoolsselector-kukru","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T17:31:24Z"}]}
{"id":"lettatoolsselector-kurl","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:41:07.798661186Z","updated_at":"2025-12-29T21:33:23.529894825Z","closed_at":"2025-12-29T21:33:23.529894825Z","close_reason":"Duplicate","comments":[{"id":656,"issue_id":"lettatoolsselector-kurl","author":"root","text":"Synced from Beads: lettatoolsselector-aru\n\n---\nHuly Issue: LTSEL-160","created_at":"2025-12-29T20:41:08Z"}]}
{"id":"lettatoolsselector-kw4h","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:04.052660941Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:04.395614902Z","closed_at":"2026-01-02T02:35:04.395614902Z","close_reason":"Closed","comments":[{"id":1326,"issue_id":"lettatoolsselector-kw4h","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T02:35:04Z"}]}
{"id":"lettatoolsselector-kwbu","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:25.859684086Z","updated_at":"2025-12-29T21:33:26.769728172Z","closed_at":"2025-12-29T21:33:26.769728172Z","close_reason":"Duplicate","comments":[{"id":512,"issue_id":"lettatoolsselector-kwbu","author":"root","text":"Synced from Beads: lettatoolsselector-r2m\n\n---\nHuly Issue: LTSEL-169","created_at":"2025-12-29T20:27:26Z"}]}
{"id":"lettatoolsselector-kwfbe","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:58:26.273819529Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:26.794857774Z","closed_at":"2026-01-02T10:58:26.794857774Z","close_reason":"Closed","comments":[{"id":3135,"issue_id":"lettatoolsselector-kwfbe","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T10:58:26Z"}]}
{"id":"lettatoolsselector-kwtyl","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:41:17.758648062Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:18.502686192Z","closed_at":"2026-01-02T09:41:18.502686192Z","close_reason":"Closed","comments":[{"id":3005,"issue_id":"lettatoolsselector-kwtyl","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T09:41:18Z"}]}
{"id":"lettatoolsselector-kxlth","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:38:22.923436648Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:38:23.583866381Z","closed_at":"2026-01-02T19:38:23.583866381Z","close_reason":"Closed","comments":[{"id":3974,"issue_id":"lettatoolsselector-kxlth","author":"root","text":"Synced from Huly: LTSEL-43","created_at":"2026-01-02T19:38:23Z"}]}
{"id":"lettatoolsselector-kxw5j","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:03:37.564831076Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:03:38.173034392Z","closed_at":"2026-01-02T15:03:38.173034392Z","close_reason":"Closed","comments":[{"id":3527,"issue_id":"lettatoolsselector-kxw5j","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T15:03:37Z"}]}
{"id":"lettatoolsselector-ky3v5","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:56:51.654883309Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:56:52.330700853Z","closed_at":"2026-01-02T17:56:52.330700853Z","close_reason":"Closed","comments":[{"id":3816,"issue_id":"lettatoolsselector-ky3v5","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T17:56:52Z"}]}
{"id":"lettatoolsselector-ky4u","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:13.058645933Z","updated_at":"2025-12-29T21:33:42.937061476Z","closed_at":"2025-12-29T21:33:42.937061476Z","close_reason":"Duplicate","comments":[{"id":509,"issue_id":"lettatoolsselector-ky4u","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:27:13Z"}]}
{"id":"lettatoolsselector-kysuo","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:49.38497421Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:49.38497421Z","comments":[{"id":2213,"issue_id":"lettatoolsselector-kysuo","author":"root","text":"Synced from Beads: lettatoolsselector-lguy\n\n---\nHuly Issue: LTSEL-626","created_at":"2026-01-02T03:43:49Z"}]}
{"id":"lettatoolsselector-kz40","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:27.56816378Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:27.980233296Z","closed_at":"2026-01-02T02:19:27.980233296Z","close_reason":"Closed","comments":[{"id":1274,"issue_id":"lettatoolsselector-kz40","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T02:19:27Z"}]}
{"id":"lettatoolsselector-kzmoq","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:51:42.40811139Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:51:43.205477384Z","closed_at":"2026-01-02T22:51:43.205477384Z","close_reason":"Closed","comments":[{"id":4380,"issue_id":"lettatoolsselector-kzmoq","author":"root","text":"Synced from Huly: LTSEL-233","created_at":"2026-01-02T22:51:42Z"}]}
{"id":"lettatoolsselector-l0n4w","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:58:33.034559428Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:33.577249693Z","closed_at":"2026-01-02T10:58:33.577249693Z","close_reason":"Closed","comments":[{"id":3138,"issue_id":"lettatoolsselector-l0n4w","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T10:58:33Z"}]}
{"id":"lettatoolsselector-l0vfa","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:33.703961242Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:33.703961242Z","comments":[{"id":1917,"issue_id":"lettatoolsselector-l0vfa","author":"root","text":"Synced from Beads: lettatoolsselector-m2l1\n\n---\nHuly Issue: LTSEL-414","created_at":"2026-01-02T03:28:33Z"}]}
{"id":"lettatoolsselector-l14r0","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:16.015591016Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:16.486008354Z","closed_at":"2026-01-02T04:39:16.486008354Z","close_reason":"Closed","comments":[{"id":2408,"issue_id":"lettatoolsselector-l14r0","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T04:39:16Z"}]}
{"id":"lettatoolsselector-l1670","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:17.393889235Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:17.896382531Z","closed_at":"2026-01-02T04:39:17.896382531Z","close_reason":"Closed","comments":[{"id":2409,"issue_id":"lettatoolsselector-l1670","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T04:39:17Z"}]}
{"id":"lettatoolsselector-l1il","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:01:35.302580762Z","updated_at":"2025-12-30T04:11:37.62538485Z","comments":[{"id":824,"issue_id":"lettatoolsselector-l1il","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-112","created_at":"2025-12-29T21:01:35Z"}]}
{"id":"lettatoolsselector-l1lfz","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:22:06.201132331Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:22:06.800524507Z","closed_at":"2026-01-02T20:22:06.800524507Z","close_reason":"Closed","comments":[{"id":4100,"issue_id":"lettatoolsselector-l1lfz","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T20:22:06Z"}]}
{"id":"lettatoolsselector-l2ifw","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:18.448072552Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:19.060840048Z","closed_at":"2026-01-02T09:40:19.060840048Z","close_reason":"Closed","comments":[{"id":2991,"issue_id":"lettatoolsselector-l2ifw","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T09:40:18Z"}]}
{"id":"lettatoolsselector-l32y","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:56:17.314445517Z","updated_at":"2025-12-29T21:33:20.991364574Z","closed_at":"2025-12-29T21:33:20.991364574Z","close_reason":"Duplicate","comments":[{"id":774,"issue_id":"lettatoolsselector-l32y","author":"root","text":"Synced from Beads: lettatoolsselector-gei\n\n---\nHuly Issue: LTSEL-133","created_at":"2025-12-29T20:56:17Z"}]}
{"id":"lettatoolsselector-l38qq","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:47:55.284536124Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:55.812601877Z","closed_at":"2026-01-02T03:47:55.812601877Z","close_reason":"Closed","comments":[{"id":2329,"issue_id":"lettatoolsselector-l38qq","author":"root","text":"Synced from Huly: LTSEL-231","created_at":"2026-01-02T03:47:55Z"}]}
{"id":"lettatoolsselector-l39zt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:29.924548705Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:29.924548705Z","comments":[{"id":2276,"issue_id":"lettatoolsselector-l39zt","author":"root","text":"Synced from Huly: LTSEL-386","created_at":"2026-01-02T03:45:30Z"}]}
{"id":"lettatoolsselector-l3np6","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:49.264393104Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:49.648539731Z","closed_at":"2026-01-02T03:06:49.648539731Z","close_reason":"Closed","comments":[{"id":1569,"issue_id":"lettatoolsselector-l3np6","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T03:06:49Z"}]}
{"id":"lettatoolsselector-l3nv","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:59.056030305Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:59.515162515Z","closed_at":"2026-01-02T01:24:59.515162515Z","close_reason":"Closed","comments":[{"id":1234,"issue_id":"lettatoolsselector-l3nv","author":"root","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2026-01-02T01:24:59Z"}]}
{"id":"lettatoolsselector-l3sya","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:03:21.499969857Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:21.890626956Z","closed_at":"2026-01-02T08:03:21.890626956Z","close_reason":"Closed"}
{"id":"lettatoolsselector-l42u","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:02.100210191Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:02.474027288Z","closed_at":"2026-01-02T02:20:02.474027288Z","close_reason":"Closed","comments":[{"id":1297,"issue_id":"lettatoolsselector-l42u","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T02:20:02Z"}]}
{"id":"lettatoolsselector-l4b89","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:06.44848916Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:07.07277987Z","closed_at":"2026-01-02T04:39:07.07277987Z","close_reason":"Closed","comments":[{"id":2405,"issue_id":"lettatoolsselector-l4b89","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T04:39:06Z"}]}
{"id":"lettatoolsselector-l5546","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:03:21.374400592Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:03:21.987668246Z","closed_at":"2026-01-02T15:03:21.987668246Z","close_reason":"Closed","comments":[{"id":3524,"issue_id":"lettatoolsselector-l5546","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T15:03:21Z"}]}
{"id":"lettatoolsselector-l5hop","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T14:59:39.433620978Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:59:39.984542644Z","closed_at":"2026-01-02T14:59:39.984542644Z","close_reason":"Closed","comments":[{"id":3514,"issue_id":"lettatoolsselector-l5hop","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T14:59:39Z"}]}
{"id":"lettatoolsselector-l66ze","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:37:10.07151611Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:10.580859806Z","closed_at":"2026-01-02T06:37:10.580859806Z","close_reason":"Closed","comments":[{"id":2631,"issue_id":"lettatoolsselector-l66ze","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T06:37:10Z"}]}
{"id":"lettatoolsselector-l6h6f","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:22:06.772710305Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:07.274290204Z","closed_at":"2026-01-02T09:22:07.274290204Z","close_reason":"Closed","comments":[{"id":2965,"issue_id":"lettatoolsselector-l6h6f","author":"root","text":"Synced from Huly: LTSEL-231","created_at":"2026-01-02T09:22:07Z"}]}
{"id":"lettatoolsselector-l6sf5","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:20.015281817Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:20.555498659Z","closed_at":"2026-01-02T13:36:20.555498659Z","close_reason":"Closed","comments":[{"id":3357,"issue_id":"lettatoolsselector-l6sf5","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T13:36:20Z"}]}
{"id":"lettatoolsselector-l73o8","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:04:32.364843656Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:04:33.044948896Z","closed_at":"2026-01-02T21:04:33.044948896Z","close_reason":"Closed","comments":[{"id":4188,"issue_id":"lettatoolsselector-l73o8","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T21:04:32Z"}]}
{"id":"lettatoolsselector-l8esi","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:15:37.988742035Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:15:38.742442731Z","closed_at":"2026-01-02T16:15:38.742442731Z","close_reason":"Closed"}
{"id":"lettatoolsselector-l8j7c","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:39.03890077Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:39.561068177Z","closed_at":"2026-01-02T07:24:39.561068177Z","close_reason":"Closed","comments":[{"id":2729,"issue_id":"lettatoolsselector-l8j7c","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T07:24:39Z"}]}
{"id":"lettatoolsselector-l8n4","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:50.687346377Z","updated_at":"2025-12-29T21:33:43.092931359Z","closed_at":"2025-12-29T21:33:43.092931359Z","close_reason":"Duplicate","comments":[{"id":500,"issue_id":"lettatoolsselector-l8n4","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:26:50Z"}]}
{"id":"lettatoolsselector-l8n7w","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:48:38.86361581Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:48:39.587417063Z","closed_at":"2026-01-02T22:48:39.587417063Z","close_reason":"Closed","comments":[{"id":4373,"issue_id":"lettatoolsselector-l8n7w","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T22:48:39Z"}]}
{"id":"lettatoolsselector-l8ymz","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:14.990731999Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:15.56842134Z","closed_at":"2026-01-02T08:20:15.56842134Z","close_reason":"Closed","comments":[{"id":2845,"issue_id":"lettatoolsselector-l8ymz","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T08:20:15Z"}]}
{"id":"lettatoolsselector-l92kw","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:41:10.586455489Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:11.249021082Z","closed_at":"2026-01-02T09:41:11.249021082Z","close_reason":"Closed","comments":[{"id":3003,"issue_id":"lettatoolsselector-l92kw","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T09:41:11Z"}]}
{"id":"lettatoolsselector-l9c8g","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:49:38.618192597Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:49:39.355029241Z","closed_at":"2026-01-02T23:49:39.355029241Z","close_reason":"Closed","comments":[{"id":4388,"issue_id":"lettatoolsselector-l9c8g","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T23:49:39Z"}]}
{"id":"lettatoolsselector-l9yqn","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:58:42.334665073Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:58:42.933686206Z","closed_at":"2026-01-02T19:58:42.933686206Z","close_reason":"Closed","comments":[{"id":4024,"issue_id":"lettatoolsselector-l9yqn","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T19:58:42Z"}]}
{"id":"lettatoolsselector-lak89","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:59:36.086586316Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:36.62956117Z","closed_at":"2026-01-02T10:59:36.62956117Z","close_reason":"Closed","comments":[{"id":3150,"issue_id":"lettatoolsselector-lak89","author":"root","text":"Synced from Huly: LTSEL-228","created_at":"2026-01-02T10:59:36Z"}]}
{"id":"lettatoolsselector-lan","title":"[Refactor] Phase 4: Extract service layer - AgentService","description":"Extract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService (`services/agent_service.py`)\n\nMove these from api_server.py:\n\n| Function | Lines | Responsibility |\n|----------|-------|----------------|\n| `fetch_agent_info()` | 828-847 | Get agent name/details |\n| `fetch_agent_tools()` | 849-867 | Get agent's current tools |\n| `register_tool()` | 869-896 | Register tool with Letta |\n| `_send_trigger_message()` | 898-974 | Send trigger message to agent |\n| `trigger_agent_loop()` | 1037-1081 | Spawn background trigger |\n| `_emit_matrix_bridge_webhook()` | 976-1035 | Notify Matrix bridge |\n\n### Interface\n```python\nclass AgentService:\n    def __init__(self, letta_client, webhook_url: Optional[str] = None):\n        self.letta = letta_client\n        self.webhook_url = webhook_url\n    \n    async def get_agent_info(self, agent_id: str) -\u003e AgentInfo:\n        ...\n    \n    async def get_agent_tools(self, agent_id: str) -\u003e AgentToolSet:\n        ...\n    \n    async def register_tool(self, tool_name: str, server_name: str) -\u003e Tool:\n        ...\n    \n    async def trigger_loop(\n        self,\n        agent_id: str,\n        attached_tools: List[Tool],\n        query: Optional[str] = None\n    ) -\u003e TriggerResult:\n        ...\n    \n    async def notify_webhook(\n        self,\n        agent_id: str,\n        run_id: str,\n        tools: List[str],\n        query: str\n    ) -\u003e bool:\n        ...\n```\n\n### Consolidate with letta_sdk_client.py\nConsider merging functionality from `letta_sdk_client.py` into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:37:54.612565801Z","updated_at":"2025-12-29T19:02:08.719539925Z","closed_at":"2025-12-29T19:02:08.719539925Z","close_reason":"AgentService extracted to agent_service.py (384 lines)"}
{"id":"lettatoolsselector-lb4m7","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:41:02.840592558Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:03.262587538Z","closed_at":"2026-01-02T04:41:03.262587538Z","close_reason":"Closed","comments":[{"id":2440,"issue_id":"lettatoolsselector-lb4m7","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T04:41:03Z"}]}
{"id":"lettatoolsselector-lbmuy","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:51.009503657Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:51.636200684Z","closed_at":"2026-01-02T22:39:51.636200684Z","close_reason":"Closed","comments":[{"id":4350,"issue_id":"lettatoolsselector-lbmuy","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T22:39:51Z"}]}
{"id":"lettatoolsselector-lbnz","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:00.819243214Z","updated_at":"2025-12-29T21:33:29.662240737Z","closed_at":"2025-12-29T21:33:29.662240737Z","close_reason":"Duplicate","comments":[{"id":385,"issue_id":"lettatoolsselector-lbnz","author":"root","text":"Synced from Beads: lettatoolsselector-zzl\n\n---\nHuly Issue: LTSEL-190","created_at":"2025-12-29T20:17:01Z"}]}
{"id":"lettatoolsselector-lc2o0","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:33:37.834001764Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:33:38.35541027Z","closed_at":"2026-01-02T14:33:38.35541027Z","close_reason":"Closed"}
{"id":"lettatoolsselector-lc76d","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:52:45.91816743Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:52:46.510368458Z","closed_at":"2026-01-02T17:52:46.510368458Z","close_reason":"Closed","comments":[{"id":3802,"issue_id":"lettatoolsselector-lc76d","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T17:52:46Z"}]}
{"id":"lettatoolsselector-lcees","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:48:44.946837917Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:45.295860919Z","closed_at":"2026-01-02T03:48:45.295860919Z","close_reason":"Closed"}
{"id":"lettatoolsselector-lcp4d","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:26.831092562Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:27.363506665Z","closed_at":"2026-01-02T10:36:27.363506665Z","close_reason":"Closed","comments":[{"id":3090,"issue_id":"lettatoolsselector-lcp4d","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T10:36:27Z"}]}
{"id":"lettatoolsselector-lcs8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:26:11.494307985Z","updated_at":"2025-12-30T02:01:17.726002914Z","comments":[{"id":1038,"issue_id":"lettatoolsselector-lcs8","author":"root","text":"Synced from Beads: lettatoolsselector-563\n\n---\nHuly Issue: LTSEL-79","created_at":"2025-12-29T21:26:11Z"}]}
{"id":"lettatoolsselector-ld65","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:51.305694946Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:51.733980064Z","closed_at":"2026-01-02T02:19:51.733980064Z","close_reason":"Closed","comments":[{"id":1294,"issue_id":"lettatoolsselector-ld65","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T02:19:51Z"}]}
{"id":"lettatoolsselector-ldb6h","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:55.515050826Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:55.515050826Z","comments":[{"id":1964,"issue_id":"lettatoolsselector-ldb6h","author":"root","text":"Synced from Beads: lettatoolsselector-t9zb\n\n---\nHuly Issue: LTSEL-354","created_at":"2026-01-02T03:28:55Z"}]}
{"id":"lettatoolsselector-ldfn8","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:56:29.844081604Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:56:30.518600812Z","closed_at":"2026-01-02T12:56:30.518600812Z","close_reason":"Closed","comments":[{"id":3320,"issue_id":"lettatoolsselector-ldfn8","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T12:56:30Z"}]}
{"id":"lettatoolsselector-ldjbq","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:53:39.095316241Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:53:40.614399369Z","closed_at":"2026-01-02T12:53:40.614399369Z","close_reason":"Closed","comments":[{"id":3297,"issue_id":"lettatoolsselector-ldjbq","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T12:53:40Z"}]}
{"id":"lettatoolsselector-ldkma","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:58:19.110835324Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:19.741257749Z","closed_at":"2026-01-02T09:58:19.741257749Z","close_reason":"Closed","comments":[{"id":3062,"issue_id":"lettatoolsselector-ldkma","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T09:58:19Z"}]}
{"id":"lettatoolsselector-ldlyn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:26.071185096Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:26.071185096Z","comments":[{"id":1899,"issue_id":"lettatoolsselector-ldlyn","author":"root","text":"Synced from Beads: lettatoolsselector-2e52\n\n---\nHuly Issue: LTSEL-438","created_at":"2026-01-02T03:28:26Z"}]}
{"id":"lettatoolsselector-ldy13","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:11.210953775Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:11.683932474Z","closed_at":"2026-01-02T04:20:11.683932474Z","close_reason":"Closed","comments":[{"id":2365,"issue_id":"lettatoolsselector-ldy13","author":"root","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2026-01-02T04:20:11Z"}]}
{"id":"lettatoolsselector-le0zp","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:51.673158606Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:52.085204032Z","closed_at":"2026-01-02T03:46:52.085204032Z","close_reason":"Closed","comments":[{"id":2291,"issue_id":"lettatoolsselector-le0zp","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T03:46:51Z"}]}
{"id":"lettatoolsselector-le5b","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:41.616988759Z","updated_at":"2025-12-29T21:33:30.507730162Z","closed_at":"2025-12-29T21:33:30.507730162Z","close_reason":"Duplicate","comments":[{"id":349,"issue_id":"lettatoolsselector-le5b","author":"root","text":"Synced from Beads: lettatoolsselector-8pi\n\n---\nHuly Issue: LTSEL-200","created_at":"2025-12-29T20:13:41Z"}]}
{"id":"lettatoolsselector-lecot","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:33:06.318980984Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:33:06.917676397Z","closed_at":"2026-01-02T18:33:06.917676397Z","close_reason":"Closed","comments":[{"id":3875,"issue_id":"lettatoolsselector-lecot","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T18:33:06Z"}]}
{"id":"lettatoolsselector-lekl","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:06.816500348Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:07.240880746Z","closed_at":"2026-01-02T02:35:07.240880746Z","close_reason":"Closed","comments":[{"id":1331,"issue_id":"lettatoolsselector-lekl","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T02:35:07Z"}]}
{"id":"lettatoolsselector-leupu","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:18.15940382Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:18.586692248Z","closed_at":"2026-01-02T03:47:18.586692248Z","close_reason":"Closed","comments":[{"id":2315,"issue_id":"lettatoolsselector-leupu","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T03:47:18Z"}]}
{"id":"lettatoolsselector-lf6ij","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:58:34.921288999Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:35.542886433Z","closed_at":"2026-01-02T10:58:35.542886433Z","close_reason":"Closed","comments":[{"id":3139,"issue_id":"lettatoolsselector-lf6ij","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T10:58:35Z"}]}
{"id":"lettatoolsselector-lf6ko","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:55:23.754091931Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:55:24.233232026Z","closed_at":"2026-01-02T18:55:24.233232026Z","close_reason":"Closed"}
{"id":"lettatoolsselector-lf7uw","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:30:59.987000837Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:31:00.578914692Z","closed_at":"2026-01-02T17:31:00.578914692Z","close_reason":"Closed","comments":[{"id":3764,"issue_id":"lettatoolsselector-lf7uw","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T17:31:00Z"}]}
{"id":"lettatoolsselector-lfmiy","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:43:31.009310477Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:31.536572113Z","closed_at":"2026-01-02T07:43:31.536572113Z","close_reason":"Closed","comments":[{"id":2773,"issue_id":"lettatoolsselector-lfmiy","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T07:43:31Z"}]}
{"id":"lettatoolsselector-lfqi","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:31.889690725Z","updated_at":"2025-12-29T21:33:24.415139833Z","closed_at":"2025-12-29T21:33:24.415139833Z","close_reason":"Duplicate","comments":[{"id":627,"issue_id":"lettatoolsselector-lfqi","author":"root","text":"## Purpose\n\nGuard against regression where pagination is forgotten and only partial tools returned.\n\n## Test Scenario\n\n1. Mock Letta API to return 10 tools per page (3 pages total = 30 tools)\n2. Call list_agent_tools(agent_id)\n3. Assert: Returns all 30 tools\n4. Assert: Makes correct number of API calls\n\n## Acceptance Criteria\n\n- [ ] Test uses mocked responses (no real API)\n- [ ] Covers edge cases: 0 tools, exactly 1 page, multiple pages\n- [ ] Fails if fewer tools returned than expected\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock or responses library\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-21","created_at":"2025-12-29T20:37:32Z"}]}
{"id":"lettatoolsselector-lfw85","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:02:29.145584843Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:29.514313776Z","closed_at":"2026-01-02T12:02:29.514313776Z","close_reason":"Closed"}
{"id":"lettatoolsselector-lhmv5","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:09:11.398416713Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:11.772284988Z","closed_at":"2026-01-02T14:09:11.772284988Z","close_reason":"Closed"}
{"id":"lettatoolsselector-lhqxu","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:56:43.108304911Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:43.529096799Z","closed_at":"2026-01-02T08:56:43.529096799Z","close_reason":"Closed"}
{"id":"lettatoolsselector-li0n0","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:53.479659946Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:53.961166318Z","closed_at":"2026-01-02T05:59:53.961166318Z","close_reason":"Closed","comments":[{"id":2509,"issue_id":"lettatoolsselector-li0n0","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T05:59:53Z"}]}
{"id":"lettatoolsselector-lipj","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:01.115226335Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:01.459684743Z","closed_at":"2026-01-02T02:35:01.459684743Z","close_reason":"Closed","comments":[{"id":1321,"issue_id":"lettatoolsselector-lipj","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T02:35:01Z"}]}
{"id":"lettatoolsselector-lj0yd","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T12:02:42.876232595Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:43.31792827Z","closed_at":"2026-01-02T12:02:43.31792827Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ljeqn","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:03:11.645787847Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:12.147189649Z","closed_at":"2026-01-02T07:03:12.147189649Z","close_reason":"Closed","comments":[{"id":2685,"issue_id":"lettatoolsselector-ljeqn","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T07:03:11Z"}]}
{"id":"lettatoolsselector-ljk73","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:01.650457492Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:01.650457492Z","comments":[{"id":1977,"issue_id":"lettatoolsselector-ljk73","author":"root","text":"Synced from Beads: lettatoolsselector-4j1q\n\n---\nHuly Issue: LTSEL-339","created_at":"2026-01-02T03:29:01Z"}]}
{"id":"lettatoolsselector-lkgn3","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:40:07.080178784Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:07.664183051Z","closed_at":"2026-01-02T04:40:07.664183051Z","close_reason":"Closed","comments":[{"id":2434,"issue_id":"lettatoolsselector-lkgn3","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T04:40:07Z"}]}
{"id":"lettatoolsselector-lkpf3","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:20:10.329027673Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:20:11.066792068Z","closed_at":"2026-01-02T16:20:11.066792068Z","close_reason":"Closed","comments":[{"id":3677,"issue_id":"lettatoolsselector-lkpf3","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T16:20:10Z"}]}
{"id":"lettatoolsselector-lkt41","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:02:46.465485331Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:46.79256632Z","closed_at":"2026-01-02T07:02:46.79256632Z","close_reason":"Closed"}
{"id":"lettatoolsselector-lkxjb","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:57:01.431648284Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:57:02.146333611Z","closed_at":"2026-01-02T18:57:02.146333611Z","close_reason":"Closed","comments":[{"id":3911,"issue_id":"lettatoolsselector-lkxjb","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T18:57:01Z"}]}
{"id":"lettatoolsselector-lky6n","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:43:31.85678632Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:43:32.57016645Z","closed_at":"2026-01-02T09:43:32.57016645Z","close_reason":"Closed","comments":[{"id":3015,"issue_id":"lettatoolsselector-lky6n","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T09:43:32Z"}]}
{"id":"lettatoolsselector-llj4g","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:35.516595537Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:35.948161778Z","closed_at":"2026-01-02T04:39:35.948161778Z","close_reason":"Closed","comments":[{"id":2421,"issue_id":"lettatoolsselector-llj4g","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T04:39:35Z"}]}
{"id":"lettatoolsselector-lm5m","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:19:57.481161309Z","updated_at":"2025-12-30T01:55:58.159398632Z","comments":[{"id":1002,"issue_id":"lettatoolsselector-lm5m","author":"root","text":"Synced from Beads: lettatoolsselector-563\n\n---\nHuly Issue: LTSEL-79","created_at":"2025-12-29T21:19:57Z"}]}
{"id":"lettatoolsselector-lmb1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:21:43.493335169Z","updated_at":"2025-12-30T01:57:06.263547251Z","comments":[{"id":1013,"issue_id":"lettatoolsselector-lmb1","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-84","created_at":"2025-12-29T21:21:43Z"}]}
{"id":"lettatoolsselector-lmgmr","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:26:03.925213279Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:26:04.644167192Z","closed_at":"2026-01-02T21:26:04.644167192Z","close_reason":"Closed","comments":[{"id":4220,"issue_id":"lettatoolsselector-lmgmr","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T21:26:04Z"}]}
{"id":"lettatoolsselector-ln7wk","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:49:32.043303787Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:49:32.877035798Z","closed_at":"2026-01-02T23:49:32.877035798Z","close_reason":"Closed","comments":[{"id":4387,"issue_id":"lettatoolsselector-ln7wk","author":"root","text":"Synced from Huly: LTSEL-46","created_at":"2026-01-02T23:49:32Z"}]}
{"id":"lettatoolsselector-lnohs","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:44.608511578Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:45.013758298Z","closed_at":"2026-01-02T03:30:45.013758298Z","close_reason":"Closed","comments":[{"id":2115,"issue_id":"lettatoolsselector-lnohs","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T03:30:44Z"}]}
{"id":"lettatoolsselector-losm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:23:32.65241724Z","updated_at":"2025-12-30T01:58:54.420259268Z","comments":[{"id":1025,"issue_id":"lettatoolsselector-losm","author":"root","text":"Synced from Beads: lettatoolsselector-cgd\n\n---\nHuly Issue: LTSEL-73","created_at":"2025-12-29T21:23:33Z"}]}
{"id":"lettatoolsselector-lpk3r","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:50:08.873298855Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:50:09.249186187Z","closed_at":"2026-01-02T15:50:09.249186187Z","close_reason":"Closed"}
{"id":"lettatoolsselector-lr5kr","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:56:41.217513921Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:41.963356129Z","closed_at":"2026-01-02T08:56:41.963356129Z","close_reason":"Closed","comments":[{"id":2909,"issue_id":"lettatoolsselector-lr5kr","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T08:56:41Z"}]}
{"id":"lettatoolsselector-lrkvf","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:19.276571368Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:19.785532515Z","closed_at":"2026-01-02T10:36:19.785532515Z","close_reason":"Closed","comments":[{"id":3087,"issue_id":"lettatoolsselector-lrkvf","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T10:36:19Z"}]}
{"id":"lettatoolsselector-lruz6","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:36:24.176646083Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:24.533702344Z","closed_at":"2026-01-02T11:36:24.533702344Z","close_reason":"Closed"}
{"id":"lettatoolsselector-lrw0","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:35:24.384765703Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:24.60026651Z","closed_at":"2026-01-02T02:35:24.60026651Z","close_reason":"Closed"}
{"id":"lettatoolsselector-lrwum","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T12:56:25.617874577Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:56:25.981709332Z","closed_at":"2026-01-02T12:56:25.981709332Z","close_reason":"Closed"}
{"id":"lettatoolsselector-lwgvd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:04.550919213Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:04.550919213Z","comments":[{"id":1850,"issue_id":"lettatoolsselector-lwgvd","author":"root","text":"Synced from Beads: lettatoolsselector-689a\n\n---\nHuly Issue: LTSEL-500","created_at":"2026-01-02T03:28:04Z"}]}
{"id":"lettatoolsselector-lwm2z","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T05:40:59.843990913Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:00.309600965Z","closed_at":"2026-01-02T05:41:00.309600965Z","close_reason":"Closed","comments":[{"id":2479,"issue_id":"lettatoolsselector-lwm2z","author":"root","text":"Synced from Huly: LTSEL-247","created_at":"2026-01-02T05:41:00Z"}]}
{"id":"lettatoolsselector-lwnvq","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:05.837030681Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:06.268773162Z","closed_at":"2026-01-02T04:20:06.268773162Z","close_reason":"Closed","comments":[{"id":2358,"issue_id":"lettatoolsselector-lwnvq","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T04:20:06Z"}]}
{"id":"lettatoolsselector-lwsyo","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:02.901265606Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:03.454985888Z","closed_at":"2026-01-02T08:02:03.454985888Z","close_reason":"Closed","comments":[{"id":2796,"issue_id":"lettatoolsselector-lwsyo","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T08:02:03Z"}]}
{"id":"lettatoolsselector-lxerw","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:08:53.648173814Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:08:54.279996451Z","closed_at":"2026-01-02T11:08:54.279996451Z","close_reason":"Closed","comments":[{"id":3162,"issue_id":"lettatoolsselector-lxerw","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T11:08:54Z"}]}
{"id":"lettatoolsselector-lxju7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:18.048067854Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:18.048067854Z","comments":[{"id":1881,"issue_id":"lettatoolsselector-lxju7","author":"root","text":"Synced from Beads: lettatoolsselector-j2xl\n\n---\nHuly Issue: LTSEL-466","created_at":"2026-01-02T03:28:18Z"}]}
{"id":"lettatoolsselector-lxpp","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:22.946507793Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:23.292754431Z","closed_at":"2026-01-02T03:06:23.292754431Z","close_reason":"Closed","comments":[{"id":1541,"issue_id":"lettatoolsselector-lxpp","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T03:06:23Z"}]}
{"id":"lettatoolsselector-lxzd2","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:29.084030393Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:29.561021677Z","closed_at":"2026-01-02T07:02:29.561021677Z","close_reason":"Closed","comments":[{"id":2647,"issue_id":"lettatoolsselector-lxzd2","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T07:02:29Z"}]}
{"id":"lettatoolsselector-ly6iv","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:10:01.889641573Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:10:03.634132114Z","closed_at":"2026-01-02T16:10:03.634132114Z","close_reason":"Closed","comments":[{"id":3634,"issue_id":"lettatoolsselector-ly6iv","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T16:10:03Z"}]}
{"id":"lettatoolsselector-ly949","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:49.167084781Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:49.586701177Z","closed_at":"2026-01-02T03:46:49.586701177Z","close_reason":"Closed","comments":[{"id":2288,"issue_id":"lettatoolsselector-ly949","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T03:46:49Z"}]}
{"id":"lettatoolsselector-lya9g","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:40.857378601Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:41.522073075Z","closed_at":"2026-01-02T08:55:41.522073075Z","close_reason":"Closed","comments":[{"id":2901,"issue_id":"lettatoolsselector-lya9g","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T08:55:41Z"}]}
{"id":"lettatoolsselector-lz8tn","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:40.933377147Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:41.363548618Z","closed_at":"2026-01-02T04:39:41.363548618Z","close_reason":"Closed","comments":[{"id":2424,"issue_id":"lettatoolsselector-lz8tn","author":"root","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2026-01-02T04:39:41Z"}]}
{"id":"lettatoolsselector-lzjxu","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:00.636334047Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:01.208176456Z","closed_at":"2026-01-02T09:40:01.208176456Z","close_reason":"Closed","comments":[{"id":2984,"issue_id":"lettatoolsselector-lzjxu","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T09:40:00Z"}]}
{"id":"lettatoolsselector-lzn9k","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:24:28.406819839Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:24:29.008882247Z","closed_at":"2026-01-02T18:24:29.008882247Z","close_reason":"Closed","comments":[{"id":3828,"issue_id":"lettatoolsselector-lzn9k","author":"root","text":"Synced from Huly: LTSEL-46","created_at":"2026-01-02T18:24:28Z"}]}
{"id":"lettatoolsselector-m0sy","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:20:35.382976229Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:35.608006633Z","closed_at":"2026-01-02T02:20:35.608006633Z","close_reason":"Closed"}
{"id":"lettatoolsselector-m13wk","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:43:20.324914303Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:43:20.955209451Z","closed_at":"2026-01-02T20:43:20.955209451Z","close_reason":"Closed","comments":[{"id":4146,"issue_id":"lettatoolsselector-m13wk","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T20:43:20Z"}]}
{"id":"lettatoolsselector-m17qk","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:21:02.239772784Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:02.670791877Z","closed_at":"2026-01-02T20:21:02.670791877Z","close_reason":"Closed"}
{"id":"lettatoolsselector-m1bw","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:17.27472639Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:17.620050967Z","closed_at":"2026-01-02T03:06:17.620050967Z","close_reason":"Closed","comments":[{"id":1531,"issue_id":"lettatoolsselector-m1bw","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T03:06:17Z"}]}
{"id":"lettatoolsselector-m2l1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:56.455981709Z","updated_at":"2025-12-30T04:14:22.534989562Z","comments":[{"id":910,"issue_id":"lettatoolsselector-m2l1","author":"root","text":"Synced from Beads: lettatoolsselector-mwe\n\n---\nHuly Issue: LTSEL-108","created_at":"2025-12-29T21:09:56Z"}]}
{"id":"lettatoolsselector-m2o7","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:48.910033033Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:49.339670631Z","closed_at":"2026-01-02T01:24:49.339670631Z","close_reason":"Closed","comments":[{"id":1217,"issue_id":"lettatoolsselector-m2o7","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T01:24:49Z"}]}
{"id":"lettatoolsselector-m34s0","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:58:13.765084811Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:14.30874869Z","closed_at":"2026-01-02T14:58:14.30874869Z","close_reason":"Closed","comments":[{"id":3504,"issue_id":"lettatoolsselector-m34s0","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T14:58:14Z"}]}
{"id":"lettatoolsselector-m432f","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:02:56.56731974Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:02:56.915091625Z","closed_at":"2026-01-02T12:02:56.915091625Z","close_reason":"Closed"}
{"id":"lettatoolsselector-m5og","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:37.866641098Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:38.238664044Z","closed_at":"2026-01-02T02:35:38.238664044Z","close_reason":"Closed","comments":[{"id":1370,"issue_id":"lettatoolsselector-m5og","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T02:35:38Z"}]}
{"id":"lettatoolsselector-m6kqa","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:03:14.287528885Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:03:14.852598398Z","closed_at":"2026-01-02T17:03:14.852598398Z","close_reason":"Closed","comments":[{"id":3700,"issue_id":"lettatoolsselector-m6kqa","author":"root","text":"Synced from Huly: LTSEL-218","created_at":"2026-01-02T17:03:14Z"}]}
{"id":"lettatoolsselector-m6qz9","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:22.620632486Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:23.165022938Z","closed_at":"2026-01-02T11:59:23.165022938Z","close_reason":"Closed","comments":[{"id":3264,"issue_id":"lettatoolsselector-m6qz9","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T11:59:22Z"}]}
{"id":"lettatoolsselector-m74qc","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:00:52.219737805Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:00:52.777938653Z","closed_at":"2026-01-02T12:00:52.777938653Z","close_reason":"Closed","comments":[{"id":3275,"issue_id":"lettatoolsselector-m74qc","author":"root","text":"Synced from Huly: LTSEL-229","created_at":"2026-01-02T12:00:52Z"}]}
{"id":"lettatoolsselector-m77e7","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:53.13363142Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:53.656967504Z","closed_at":"2026-01-02T11:09:53.656967504Z","close_reason":"Closed","comments":[{"id":3180,"issue_id":"lettatoolsselector-m77e7","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T11:09:53Z"}]}
{"id":"lettatoolsselector-m7jnv","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:36:39.745316877Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:40.298875312Z","closed_at":"2026-01-02T11:36:40.298875312Z","close_reason":"Closed","comments":[{"id":3244,"issue_id":"lettatoolsselector-m7jnv","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T11:36:40Z"}]}
{"id":"lettatoolsselector-m8ipq","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:20:52.163204908Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:20:52.7507878Z","closed_at":"2026-01-02T09:20:52.7507878Z","close_reason":"Closed","comments":[{"id":2928,"issue_id":"lettatoolsselector-m8ipq","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T09:20:52Z"}]}
{"id":"lettatoolsselector-m8m3e","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:50:51.323224778Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:50:52.020490886Z","closed_at":"2026-01-02T18:50:52.020490886Z","close_reason":"Closed","comments":[{"id":3892,"issue_id":"lettatoolsselector-m8m3e","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T18:50:51Z"}]}
{"id":"lettatoolsselector-m8znt","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:44.17563359Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:44.801935733Z","closed_at":"2026-01-02T07:23:44.801935733Z","close_reason":"Closed","comments":[{"id":2700,"issue_id":"lettatoolsselector-m8znt","author":"root","text":"Synced from Huly: LTSEL-40","created_at":"2026-01-02T07:23:44Z"}]}
{"id":"lettatoolsselector-m9pri","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:35.452752324Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:35.833559678Z","closed_at":"2026-01-02T03:06:35.833559678Z","close_reason":"Closed","comments":[{"id":1557,"issue_id":"lettatoolsselector-m9pri","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T03:06:35Z"}]}
{"id":"lettatoolsselector-ma4wu","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:27:41.913562536Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:27:42.828428923Z","closed_at":"2026-01-02T15:27:42.828428923Z","close_reason":"Closed","comments":[{"id":3583,"issue_id":"lettatoolsselector-ma4wu","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T15:27:42Z"}]}
{"id":"lettatoolsselector-maos4","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:42.175746971Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:42.699908383Z","closed_at":"2026-01-02T08:02:42.699908383Z","close_reason":"Closed","comments":[{"id":2812,"issue_id":"lettatoolsselector-maos4","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T08:02:42Z"}]}
{"id":"lettatoolsselector-mazjh","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:44:21.824354357Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:44:22.329806987Z","closed_at":"2026-01-02T22:44:22.329806987Z","close_reason":"Closed"}
{"id":"lettatoolsselector-mb8gf","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:30:12.786688147Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:13.042462456Z","closed_at":"2026-01-02T03:30:13.042462456Z","close_reason":"Closed"}
{"id":"lettatoolsselector-mblaf","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:52.353506409Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:52.7832042Z","closed_at":"2026-01-02T04:39:52.7832042Z","close_reason":"Closed","comments":[{"id":2430,"issue_id":"lettatoolsselector-mblaf","author":"root","text":"Synced from Huly: LTSEL-219","created_at":"2026-01-02T04:39:52Z"}]}
{"id":"lettatoolsselector-mbmwo","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:21:37.888137977Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:38.526736624Z","closed_at":"2026-01-02T20:21:38.526736624Z","close_reason":"Closed","comments":[{"id":4093,"issue_id":"lettatoolsselector-mbmwo","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T20:21:38Z"}]}
{"id":"lettatoolsselector-mboh8","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:14.761342581Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:15.020390879Z","closed_at":"2026-01-02T03:30:15.020390879Z","close_reason":"Closed"}
{"id":"lettatoolsselector-mc1lc","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:45.4757069Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:46.005491268Z","closed_at":"2026-01-02T03:46:46.005491268Z","close_reason":"Closed","comments":[{"id":2285,"issue_id":"lettatoolsselector-mc1lc","author":"root","text":"Synced from Huly: LTSEL-51","created_at":"2026-01-02T03:46:45Z"}]}
{"id":"lettatoolsselector-mcdq9","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:28.092860252Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:28.619697908Z","closed_at":"2026-01-02T13:36:28.619697908Z","close_reason":"Closed","comments":[{"id":3359,"issue_id":"lettatoolsselector-mcdq9","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T13:36:28Z"}]}
{"id":"lettatoolsselector-mda21","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:59:49.739391455Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:50.351444909Z","closed_at":"2026-01-02T10:59:50.351444909Z","close_reason":"Closed","comments":[{"id":3156,"issue_id":"lettatoolsselector-mda21","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T10:59:50Z"}]}
{"id":"lettatoolsselector-mdff","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:57.698319533Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:58.048937403Z","closed_at":"2026-01-02T01:24:58.048937403Z","close_reason":"Closed","comments":[{"id":1232,"issue_id":"lettatoolsselector-mdff","author":"root","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2026-01-02T01:24:57Z"}]}
{"id":"lettatoolsselector-mdfn","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:25.889199786Z","updated_at":"2025-12-29T21:33:24.919719776Z","closed_at":"2025-12-29T21:33:24.919719776Z","close_reason":"Duplicate","comments":[{"id":602,"issue_id":"lettatoolsselector-mdfn","author":"root","text":"Synced from Beads: lettatoolsselector-tow\n\n---\nHuly Issue: LTSEL-165","created_at":"2025-12-29T20:35:26Z"}]}
{"id":"lettatoolsselector-mdkpm","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:51.73228036Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:52.31588464Z","closed_at":"2026-01-02T08:54:52.31588464Z","close_reason":"Closed","comments":[{"id":2888,"issue_id":"lettatoolsselector-mdkpm","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T08:54:52Z"}]}
{"id":"lettatoolsselector-mdm","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T19:57:42.889843661Z","updated_at":"2025-12-29T21:33:45.013705965Z","closed_at":"2025-12-29T21:33:45.013705965Z","close_reason":"Duplicate","comments":[{"id":268,"issue_id":"lettatoolsselector-mdm","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T19:57:43Z"}]}
{"id":"lettatoolsselector-mdmn1","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:47:27.052961295Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:47:27.767933229Z","closed_at":"2026-01-02T21:47:27.767933229Z","close_reason":"Closed","comments":[{"id":4247,"issue_id":"lettatoolsselector-mdmn1","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T21:47:27Z"}]}
{"id":"lettatoolsselector-me43g","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:37:36.882942809Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:37:37.52862742Z","closed_at":"2026-01-02T14:37:37.52862742Z","close_reason":"Closed","comments":[{"id":3487,"issue_id":"lettatoolsselector-me43g","author":"root","text":"Synced from Huly: LTSEL-225","created_at":"2026-01-02T14:37:37Z"}]}
{"id":"lettatoolsselector-mfuzp","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:25:47.898862707Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:25:48.617875061Z","closed_at":"2026-01-02T21:25:48.617875061Z","close_reason":"Closed","comments":[{"id":4218,"issue_id":"lettatoolsselector-mfuzp","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T21:25:48Z"}]}
{"id":"lettatoolsselector-mfvh7","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:37.977932229Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:38.397779432Z","closed_at":"2026-01-02T03:30:38.397779432Z","close_reason":"Closed","comments":[{"id":2109,"issue_id":"lettatoolsselector-mfvh7","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T03:30:38Z"}]}
{"id":"lettatoolsselector-mg0vl","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:05:47.751398662Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:05:48.389782326Z","closed_at":"2026-01-02T20:05:48.389782326Z","close_reason":"Closed","comments":[{"id":4054,"issue_id":"lettatoolsselector-mg0vl","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T20:05:48Z"}]}
{"id":"lettatoolsselector-mgk","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:09:10.40752372Z","updated_at":"2025-12-29T21:33:44.659427428Z","closed_at":"2025-12-29T21:33:44.659427428Z","close_reason":"Duplicate","comments":[{"id":302,"issue_id":"lettatoolsselector-mgk","author":"root","text":"Synced from Beads: lettatoolsselector-xxb\n\n---\nHuly Issue: LTSEL-143","created_at":"2025-12-29T20:09:10Z"}]}
{"id":"lettatoolsselector-mgp4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:57.648534333Z","updated_at":"2025-12-30T04:12:19.126913555Z","comments":[{"id":1023,"issue_id":"lettatoolsselector-mgp4","author":"root","text":"Synced from Beads: lettatoolsselector-563\n\n---\nHuly Issue: LTSEL-79","created_at":"2025-12-29T21:22:58Z"}]}
{"id":"lettatoolsselector-mh6mr","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:33:18.14377838Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:33:18.733374017Z","closed_at":"2026-01-02T21:33:18.733374017Z","close_reason":"Closed"}
{"id":"lettatoolsselector-mhe2w","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T10:59:31.318031726Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:31.921711394Z","closed_at":"2026-01-02T10:59:31.921711394Z","close_reason":"Closed","comments":[{"id":3147,"issue_id":"lettatoolsselector-mhe2w","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T10:59:31Z"}]}
{"id":"lettatoolsselector-mhhic","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:16.551815896Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:17.013475741Z","closed_at":"2026-01-02T03:30:17.013475741Z","close_reason":"Closed","comments":[{"id":2099,"issue_id":"lettatoolsselector-mhhic","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T03:30:16Z"}]}
{"id":"lettatoolsselector-mimt8","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:20:24.840664832Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:25.344904846Z","closed_at":"2026-01-02T04:20:25.344904846Z","close_reason":"Closed","comments":[{"id":2380,"issue_id":"lettatoolsselector-mimt8","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T04:20:25Z"}]}
{"id":"lettatoolsselector-miv6","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:15:51.691960157Z","updated_at":"2025-12-30T01:50:27.484091039Z","comments":[{"id":966,"issue_id":"lettatoolsselector-miv6","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T21:15:52Z"}]}
{"id":"lettatoolsselector-mj5uj","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:21:15.587650685Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:21:16.167814631Z","closed_at":"2026-01-02T19:21:16.167814631Z","close_reason":"Closed","comments":[{"id":3941,"issue_id":"lettatoolsselector-mj5uj","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T19:21:15Z"}]}
{"id":"lettatoolsselector-mjt5","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:32.470298179Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:32.789410745Z","closed_at":"2026-01-02T01:08:32.789410745Z","close_reason":"Closed","comments":[{"id":1193,"issue_id":"lettatoolsselector-mjt5","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T01:08:32Z"}]}
{"id":"lettatoolsselector-mk40p","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:58:40.010757885Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:40.5374003Z","closed_at":"2026-01-02T09:58:40.5374003Z","close_reason":"Closed","comments":[{"id":3065,"issue_id":"lettatoolsselector-mk40p","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T09:58:40Z"}]}
{"id":"lettatoolsselector-mke13","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:25:17.166594745Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:25:17.907743568Z","closed_at":"2026-01-02T22:25:17.907743568Z","close_reason":"Closed","comments":[{"id":4330,"issue_id":"lettatoolsselector-mke13","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T22:25:17Z"}]}
{"id":"lettatoolsselector-mkk5m","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:09:55.52586462Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:56.265838775Z","closed_at":"2026-01-02T14:09:56.265838775Z","close_reason":"Closed","comments":[{"id":3429,"issue_id":"lettatoolsselector-mkk5m","author":"root","text":"Synced from Huly: LTSEL-49","created_at":"2026-01-02T14:09:55Z"}]}
{"id":"lettatoolsselector-mkqx8","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:02:48.201223012Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:48.707256145Z","closed_at":"2026-01-02T07:02:48.707256145Z","close_reason":"Closed","comments":[{"id":2667,"issue_id":"lettatoolsselector-mkqx8","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T07:02:48Z"}]}
{"id":"lettatoolsselector-mm72","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T01:25:03.124483196Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:03.443135773Z","closed_at":"2026-01-02T01:25:03.443135773Z","close_reason":"Closed"}
{"id":"lettatoolsselector-mmrg1","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:22:15.337952996Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:22:15.901654054Z","closed_at":"2026-01-02T08:22:15.901654054Z","close_reason":"Closed","comments":[{"id":2871,"issue_id":"lettatoolsselector-mmrg1","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T08:22:15Z"}]}
{"id":"lettatoolsselector-mmx8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:33:00.216003546Z","updated_at":"2025-12-29T21:33:42.137601774Z","closed_at":"2025-12-29T21:33:42.137601774Z","close_reason":"Duplicate","comments":[{"id":573,"issue_id":"lettatoolsselector-mmx8","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T20:33:00Z"}]}
{"id":"lettatoolsselector-mmxyw","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:26:47.059921992Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:26:47.627442226Z","closed_at":"2026-01-02T17:26:47.627442226Z","close_reason":"Closed","comments":[{"id":3745,"issue_id":"lettatoolsselector-mmxyw","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T17:26:47Z"}]}
{"id":"lettatoolsselector-mna","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:28:00.852182385Z","updated_at":"2025-12-29T22:53:33.452746892Z","closed_at":"2025-12-29T22:53:33.452746892Z","close_reason":"Prometheus metrics implemented: /metrics endpoint, search instrumentation, counters and histograms for search/attach/prune operations","comments":[{"id":54,"issue_id":"lettatoolsselector-mna","author":"node","text":"Synced from Beads: lettatoolsselector-sxk\n\n---\nHuly Issue: LTSEL-30","created_at":"2025-12-23T03:28:01Z"}]}
{"id":"lettatoolsselector-mnhx0","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:01:15.669742668Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:01:16.60977319Z","closed_at":"2026-01-02T21:01:16.60977319Z","close_reason":"Closed"}
{"id":"lettatoolsselector-mpv71","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:38.435495049Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:38.435495049Z","comments":[{"id":2055,"issue_id":"lettatoolsselector-mpv71","author":"root","text":"Synced from Beads: lettatoolsselector-s4cy\n\n---\nHuly Issue: LTSEL-260","created_at":"2026-01-02T03:29:38Z"}]}
{"id":"lettatoolsselector-mpwg8","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:20.904298308Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:21.51954518Z","closed_at":"2026-01-02T15:20:21.51954518Z","close_reason":"Closed","comments":[{"id":3534,"issue_id":"lettatoolsselector-mpwg8","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T15:20:21Z"}]}
{"id":"lettatoolsselector-mq2oq","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:50:10.188416927Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:50:10.840336877Z","closed_at":"2026-01-02T18:50:10.840336877Z","close_reason":"Closed","comments":[{"id":3886,"issue_id":"lettatoolsselector-mq2oq","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T18:50:10Z"}]}
{"id":"lettatoolsselector-mq5ey","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:42:25.156877483Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:42:25.839301863Z","closed_at":"2026-01-02T20:42:25.839301863Z","close_reason":"Closed","comments":[{"id":4139,"issue_id":"lettatoolsselector-mq5ey","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T20:42:25Z"}]}
{"id":"lettatoolsselector-mqaju","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:06:45.028353094Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:45.408381749Z","closed_at":"2026-01-02T03:06:45.408381749Z","close_reason":"Closed","comments":[{"id":1565,"issue_id":"lettatoolsselector-mqaju","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T03:06:45Z"}]}
{"id":"lettatoolsselector-mrm7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:58.629257299Z","updated_at":"2025-12-30T01:58:47.246360305Z","comments":[{"id":1024,"issue_id":"lettatoolsselector-mrm7","author":"root","text":"Synced from Beads: lettatoolsselector-5na\n\n---\nHuly Issue: LTSEL-82","created_at":"2025-12-29T21:22:58Z"}]}
{"id":"lettatoolsselector-mrphw","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:59.250574023Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:59.250574023Z","comments":[{"id":2259,"issue_id":"lettatoolsselector-mrphw","author":"root","text":"Synced from Beads: lettatoolsselector-jjzr\n\n---\nHuly Issue: LTSEL-449","created_at":"2026-01-02T03:44:59Z"}]}
{"id":"lettatoolsselector-mstgh","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:59:51.878509369Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:52.474337558Z","closed_at":"2026-01-02T19:59:52.474337558Z","close_reason":"Closed","comments":[{"id":4034,"issue_id":"lettatoolsselector-mstgh","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T19:59:52Z"}]}
{"id":"lettatoolsselector-msx60","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:45:31.419100975Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:45:32.042168554Z","closed_at":"2026-01-02T20:45:32.042168554Z","close_reason":"Closed","comments":[{"id":4150,"issue_id":"lettatoolsselector-msx60","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T20:45:31Z"}]}
{"id":"lettatoolsselector-mtj62","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:04.693595035Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:06.171241136Z","closed_at":"2026-01-02T11:09:06.171241136Z","close_reason":"Closed","comments":[{"id":3164,"issue_id":"lettatoolsselector-mtj62","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T11:09:05Z"}]}
{"id":"lettatoolsselector-mtoe","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:02.05339633Z","updated_at":"2025-12-29T21:33:23.408202989Z","closed_at":"2025-12-29T21:33:23.408202989Z","close_reason":"Duplicate","comments":[{"id":660,"issue_id":"lettatoolsselector-mtoe","author":"root","text":"Synced from Beads: lettatoolsselector-x82\n\n---\nHuly Issue: LTSEL-159","created_at":"2025-12-29T20:42:02Z"}]}
{"id":"lettatoolsselector-mtrq4","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:23:36.694363915Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:23:37.436646498Z","closed_at":"2026-01-02T21:23:37.436646498Z","close_reason":"Closed","comments":[{"id":4210,"issue_id":"lettatoolsselector-mtrq4","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T21:23:37Z"}]}
{"id":"lettatoolsselector-mturr","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:10:10.375936844Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:10:10.914557789Z","closed_at":"2026-01-02T11:10:10.914557789Z","close_reason":"Closed","comments":[{"id":3181,"issue_id":"lettatoolsselector-mturr","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T11:10:10Z"}]}
{"id":"lettatoolsselector-mu0p6","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T11:34:24.592391189Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:25.019847912Z","closed_at":"2026-01-02T11:34:25.019847912Z","close_reason":"Closed"}
{"id":"lettatoolsselector-mu3bi","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:22:01.871439454Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:22:02.484420151Z","closed_at":"2026-01-02T19:22:02.484420151Z","close_reason":"Closed","comments":[{"id":3946,"issue_id":"lettatoolsselector-mu3bi","author":"root","text":"Synced from Huly: LTSEL-222","created_at":"2026-01-02T19:22:02Z"}]}
{"id":"lettatoolsselector-mu4","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.527463806Z","updated_at":"2025-12-29T18:56:09.363003933Z","closed_at":"2025-12-29T18:56:09.363003933Z","close_reason":"Duplicate of closed lettatoolsselector-cvy","comments":[{"id":4,"issue_id":"lettatoolsselector-mu4","author":"node","text":"## Problem\n\nNo audit trail for tool changes. Debugging requires scraping logs from multiple containers.\n\n## Solution\n\nEmit structured events to a queue/stream whenever tools are attached or detached.\n\n## Acceptance Criteria\n\n- [ ] Event schema: {timestamp, agent_id, tool_id, tool_name, action, reason, source}\n- [ ] Events emitted from tool selector API on every attach/detach\n- [ ] Events written to Redis Stream or similar (low overhead)\n- [ ] Events include correlation ID for tracing webhook -\u003e attach flow\n\n## Technical Notes\n\n- Use Redis Streams for simplicity (XADD)\n- Keep 7 days of events by default\n- Consider also writing to structured log for Loki ingestion\n\n---\nHuly Issue: LTSEL-11","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-mucwb","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:21:49.970947877Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:50.567913847Z","closed_at":"2026-01-02T08:21:50.567913847Z","close_reason":"Closed","comments":[{"id":2867,"issue_id":"lettatoolsselector-mucwb","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T08:21:50Z"}]}
{"id":"lettatoolsselector-mulwz","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:41:09.804106199Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:10.26374122Z","closed_at":"2026-01-02T05:41:10.26374122Z","close_reason":"Closed","comments":[{"id":2487,"issue_id":"lettatoolsselector-mulwz","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T05:41:10Z"}]}
{"id":"lettatoolsselector-mv0i3","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:01:56.802001249Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:01:57.42189309Z","closed_at":"2026-01-02T08:01:57.42189309Z","close_reason":"Closed","comments":[{"id":2793,"issue_id":"lettatoolsselector-mv0i3","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T08:01:57Z"}]}
{"id":"lettatoolsselector-mv3b","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:07:31.626321156Z","updated_at":"2025-12-30T04:14:16.248245568Z","comments":[{"id":883,"issue_id":"lettatoolsselector-mv3b","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-112","created_at":"2025-12-29T21:07:32Z"}]}
{"id":"lettatoolsselector-mv3bq","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:03:17.19605995Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:17.743135349Z","closed_at":"2026-01-02T08:03:17.743135349Z","close_reason":"Closed","comments":[{"id":2821,"issue_id":"lettatoolsselector-mv3bq","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T08:03:17Z"}]}
{"id":"lettatoolsselector-mwfu2","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:52:23.714725151Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:52:24.165267388Z","closed_at":"2026-01-02T17:52:24.165267388Z","close_reason":"Closed"}
{"id":"lettatoolsselector-mwpl3","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:57:38.093496342Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:38.427280873Z","closed_at":"2026-01-02T09:57:38.427280873Z","close_reason":"Closed"}
{"id":"lettatoolsselector-mxr13","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:31:18.02892044Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:31:18.621778708Z","closed_at":"2026-01-02T17:31:18.621778708Z","close_reason":"Closed","comments":[{"id":3767,"issue_id":"lettatoolsselector-mxr13","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T17:31:18Z"}]}
{"id":"lettatoolsselector-my12v","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:36.516593832Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:37.733211266Z","closed_at":"2026-01-02T08:20:37.733211266Z","close_reason":"Closed","comments":[{"id":2854,"issue_id":"lettatoolsselector-my12v","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T08:20:37Z"}]}
{"id":"lettatoolsselector-my2p0","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:15:23.107841181Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:15:23.846982276Z","closed_at":"2026-01-02T22:15:23.846982276Z","close_reason":"Closed","comments":[{"id":4298,"issue_id":"lettatoolsselector-my2p0","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T22:15:23Z"}]}
{"id":"lettatoolsselector-myvn","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:14.989135428Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:15.357012789Z","closed_at":"2026-01-02T03:06:15.357012789Z","close_reason":"Closed","comments":[{"id":1527,"issue_id":"lettatoolsselector-myvn","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T03:06:15Z"}]}
{"id":"lettatoolsselector-mz5gs","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:17.049369224Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:17.627848038Z","closed_at":"2026-01-02T17:01:17.627848038Z","close_reason":"Closed","comments":[{"id":3690,"issue_id":"lettatoolsselector-mz5gs","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T17:01:17Z"}]}
{"id":"lettatoolsselector-mzl9y","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:58:16.681072214Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:17.34041117Z","closed_at":"2026-01-02T10:58:17.34041117Z","close_reason":"Closed","comments":[{"id":3132,"issue_id":"lettatoolsselector-mzl9y","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T10:58:17Z"}]}
{"id":"lettatoolsselector-n148e","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:40:25.561961473Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:40:26.11561511Z","closed_at":"2026-01-02T13:40:26.11561511Z","close_reason":"Closed","comments":[{"id":3381,"issue_id":"lettatoolsselector-n148e","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T13:40:25Z"}]}
{"id":"lettatoolsselector-n1fex","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:31:10.209496376Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:31:10.587996729Z","closed_at":"2026-01-02T14:31:10.587996729Z","close_reason":"Closed"}
{"id":"lettatoolsselector-n1p2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:04:02.733487555Z","updated_at":"2025-12-30T04:14:09.874966825Z","comments":[{"id":851,"issue_id":"lettatoolsselector-n1p2","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-113","created_at":"2025-12-29T21:04:03Z"}]}
{"id":"lettatoolsselector-n2819","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:11:47.393534154Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:47.73835715Z","closed_at":"2026-01-02T11:11:47.73835715Z","close_reason":"Closed"}
{"id":"lettatoolsselector-n2hob","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:56:25.254983733Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:56:25.849482247Z","closed_at":"2026-01-02T18:56:25.849482247Z","close_reason":"Closed","comments":[{"id":3909,"issue_id":"lettatoolsselector-n2hob","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T18:56:25Z"}]}
{"id":"lettatoolsselector-n2od5","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:25:50.987936364Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:25:51.586262076Z","closed_at":"2026-01-02T19:25:51.586262076Z","close_reason":"Closed","comments":[{"id":3956,"issue_id":"lettatoolsselector-n2od5","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T19:25:51Z"}]}
{"id":"lettatoolsselector-n3u7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:07:27.857116087Z","updated_at":"2025-12-31T05:19:11.357532611Z","comments":[{"id":880,"issue_id":"lettatoolsselector-n3u7","author":"root","text":"Synced from Beads: lettatoolsselector-w50\n\n---\nHuly Issue: LTSEL-96","created_at":"2025-12-29T21:07:28Z"}]}
{"id":"lettatoolsselector-n49v6","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:57:28.910920077Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:57:29.511008811Z","closed_at":"2026-01-02T18:57:29.511008811Z","close_reason":"Closed","comments":[{"id":3915,"issue_id":"lettatoolsselector-n49v6","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T18:57:29Z"}]}
{"id":"lettatoolsselector-n4fmt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:47.91060706Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:47.91060706Z","comments":[{"id":2210,"issue_id":"lettatoolsselector-n4fmt","author":"root","text":"Synced from Beads: lettatoolsselector-rcdr\n\n---\nHuly Issue: LTSEL-633","created_at":"2026-01-02T03:43:48Z"}]}
{"id":"lettatoolsselector-n4hi7","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:59:29.49532485Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:30.120639665Z","closed_at":"2026-01-02T10:59:30.120639665Z","close_reason":"Closed","comments":[{"id":3146,"issue_id":"lettatoolsselector-n4hi7","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T10:59:29Z"}]}
{"id":"lettatoolsselector-n4jvj","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:00:17.794647235Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:18.272447708Z","closed_at":"2026-01-02T06:00:18.272447708Z","close_reason":"Closed","comments":[{"id":2533,"issue_id":"lettatoolsselector-n4jvj","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T06:00:18Z"}]}
{"id":"lettatoolsselector-n4myj","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:57:06.367742548Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:06.860766561Z","closed_at":"2026-01-02T08:57:06.860766561Z","close_reason":"Closed","comments":[{"id":2916,"issue_id":"lettatoolsselector-n4myj","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T08:57:06Z"}]}
{"id":"lettatoolsselector-n529x","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:09.581009463Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:09.581009463Z","comments":[{"id":2269,"issue_id":"lettatoolsselector-n529x","author":"root","text":"Synced from Beads: lettatoolsselector-a43a\n\n---\nHuly Issue: LTSEL-413","created_at":"2026-01-02T03:45:10Z"}]}
{"id":"lettatoolsselector-n5fba","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:25:30.975464382Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:25:31.374155302Z","closed_at":"2026-01-02T15:25:31.374155302Z","close_reason":"Closed"}
{"id":"lettatoolsselector-n5i8d","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:03:13.706936285Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:14.190394456Z","closed_at":"2026-01-02T07:03:14.190394456Z","close_reason":"Closed","comments":[{"id":2687,"issue_id":"lettatoolsselector-n5i8d","author":"root","text":"Synced from Huly: LTSEL-233","created_at":"2026-01-02T07:03:13Z"}]}
{"id":"lettatoolsselector-n5ibz","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:13.234680795Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:13.234680795Z","comments":[{"id":2271,"issue_id":"lettatoolsselector-n5ibz","author":"root","text":"Synced from Beads: lettatoolsselector-2pg7\n\n---\nHuly Issue: LTSEL-403","created_at":"2026-01-02T03:45:13Z"}]}
{"id":"lettatoolsselector-n5il","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:04.224005791Z","updated_at":"2025-12-29T21:33:28.415116282Z","closed_at":"2025-12-29T21:33:28.415116282Z","close_reason":"Duplicate","comments":[{"id":430,"issue_id":"lettatoolsselector-n5il","author":"root","text":"Synced from Beads: lettatoolsselector-72a\n\n---\nHuly Issue: LTSEL-185","created_at":"2025-12-29T20:21:04Z"}]}
{"id":"lettatoolsselector-n5og","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:07.447615302Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:07.867912273Z","closed_at":"2026-01-02T02:35:07.867912273Z","close_reason":"Closed","comments":[{"id":1332,"issue_id":"lettatoolsselector-n5og","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T02:35:07Z"}]}
{"id":"lettatoolsselector-n5to4","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:43.669568737Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:43.669568737Z","comments":[{"id":2246,"issue_id":"lettatoolsselector-n5to4","author":"root","text":"Synced from Beads: lettatoolsselector-4me3\n\n---\nHuly Issue: LTSEL-528","created_at":"2026-01-02T03:44:43Z"}]}
{"id":"lettatoolsselector-n69na","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:55:51.195132401Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:55:51.854612361Z","closed_at":"2026-01-02T09:55:51.854612361Z","close_reason":"Closed","comments":[{"id":3042,"issue_id":"lettatoolsselector-n69na","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T09:55:51Z"}]}
{"id":"lettatoolsselector-n6yli","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:47:45.505116539Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:45.927758121Z","closed_at":"2026-01-02T03:47:45.927758121Z","close_reason":"Closed","comments":[{"id":2325,"issue_id":"lettatoolsselector-n6yli","author":"root","text":"Synced from Huly: LTSEL-245","created_at":"2026-01-02T03:47:45Z"}]}
{"id":"lettatoolsselector-n7cza","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:48:50.392222433Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:48:51.044996846Z","closed_at":"2026-01-02T18:48:51.044996846Z","close_reason":"Closed","comments":[{"id":3878,"issue_id":"lettatoolsselector-n7cza","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T18:48:50Z"}]}
{"id":"lettatoolsselector-n98o6","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:56:03.66314462Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:04.300295292Z","closed_at":"2026-01-02T08:56:04.300295292Z","close_reason":"Closed","comments":[{"id":2906,"issue_id":"lettatoolsselector-n98o6","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T08:56:04Z"}]}
{"id":"lettatoolsselector-n9rj1","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:23.270531739Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:23.764376029Z","closed_at":"2026-01-02T06:00:23.764376029Z","close_reason":"Closed","comments":[{"id":2537,"issue_id":"lettatoolsselector-n9rj1","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T06:00:23Z"}]}
{"id":"lettatoolsselector-n9t66","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:43.101093493Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:43.101093493Z","comments":[{"id":1937,"issue_id":"lettatoolsselector-n9t66","author":"root","text":"Synced from Beads: lettatoolsselector-k4e5\n\n---\nHuly Issue: LTSEL-388","created_at":"2026-01-02T03:28:43Z"}]}
{"id":"lettatoolsselector-n9xmx","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:34:30.471143534Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:31.055079523Z","closed_at":"2026-01-02T11:34:31.055079523Z","close_reason":"Closed","comments":[{"id":3231,"issue_id":"lettatoolsselector-n9xmx","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T11:34:30Z"}]}
{"id":"lettatoolsselector-n9ztv","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:21:47.815073968Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:48.44339312Z","closed_at":"2026-01-02T20:21:48.44339312Z","close_reason":"Closed","comments":[{"id":4095,"issue_id":"lettatoolsselector-n9ztv","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T20:21:48Z"}]}
{"id":"lettatoolsselector-nav","title":"[Refactor] Phase 2: Extract service layer - ToolManager","description":"Extract tool management logic into a dedicated ToolManager service.\n\n## Status: In Progress\n- [x] Phase 1 complete: models.py created\n- [x] attach_tool, detach_tool, process_tools moved to tool_manager.py\n- [x] api_server.py delegates to tool_manager\n- [ ] _perform_tool_pruning extraction (see sub-issues)\n\n## Sub-Issues (Remaining Work)\n1. **lettatoolsselector-pmp**: Extract fetch_agent_tools to tool_manager\n2. **lettatoolsselector-9yr**: Extract config module for tool limits\n3. **lettatoolsselector-a6c**: Add search_tools callback to tool_manager\n4. **lettatoolsselector-c05**: Extract _perform_tool_pruning to tool_manager\n\n## Completed Functions\n\n| Function | Status | Location |\n|----------|--------|----------|\n| `attach_tool()` | Done | tool_manager.py |\n| `detach_tool()` | Done | tool_manager.py |\n| `process_tools()` | Done | tool_manager.py |\n| `is_letta_core_tool()` | Done | models.py |\n| `_perform_tool_pruning()` | Pending | See lettatoolsselector-c05 |\n| `process_matching_tool()` | Pending | Needs analysis |\n\n## Acceptance Criteria\n- [x] ToolManager module created (tool_manager.py)\n- [x] Core tool operations moved (attach/detach/process)\n- [x] api_server.py uses tool_manager\n- [x] Unit tests updated for tool_manager.configure()\n- [ ] _perform_tool_pruning moved\n- [ ] All 296+ unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:37:24.489690949Z","updated_at":"2025-12-29T19:02:06.853530882Z","closed_at":"2025-12-29T19:02:06.853530882Z","close_reason":"ToolManager extracted to tool_manager.py (727 lines)"}
{"id":"lettatoolsselector-navt","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:53.421676978Z","updated_at":"2025-12-29T21:33:43.177838235Z","closed_at":"2025-12-29T21:33:43.177838235Z","close_reason":"Duplicate","comments":[{"id":489,"issue_id":"lettatoolsselector-navt","author":"root","text":"Synced from Beads: lettatoolsselector-fav\n\n---\nHuly Issue: LTSEL-116","created_at":"2025-12-29T20:25:53Z"}]}
{"id":"lettatoolsselector-nb0zo","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:35:51.597458059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:35:53.170887501Z","closed_at":"2026-01-02T13:35:53.170887501Z","close_reason":"Closed","comments":[{"id":3342,"issue_id":"lettatoolsselector-nb0zo","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T13:35:52Z"}]}
{"id":"lettatoolsselector-nb2nw","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:43:23.266539355Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:23.750882026Z","closed_at":"2026-01-02T07:43:23.750882026Z","close_reason":"Closed","comments":[{"id":2768,"issue_id":"lettatoolsselector-nb2nw","author":"root","text":"Synced from Huly: LTSEL-249","created_at":"2026-01-02T07:43:23Z"}]}
{"id":"lettatoolsselector-nb7m4","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:57.077253047Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:57.622325033Z","closed_at":"2026-01-02T03:29:57.622325033Z","close_reason":"Closed","comments":[{"id":2078,"issue_id":"lettatoolsselector-nb7m4","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T03:29:57Z"}]}
{"id":"lettatoolsselector-nbabj","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:00:42.454735245Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:00:43.058973769Z","closed_at":"2026-01-02T15:00:43.058973769Z","close_reason":"Closed","comments":[{"id":3517,"issue_id":"lettatoolsselector-nbabj","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T15:00:42Z"}]}
{"id":"lettatoolsselector-nbl0o","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:27:39.913946852Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:27:40.574878673Z","closed_at":"2026-01-02T17:27:40.574878673Z","close_reason":"Closed","comments":[{"id":3754,"issue_id":"lettatoolsselector-nbl0o","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T17:27:40Z"}]}
{"id":"lettatoolsselector-nbzp9","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:37:05.066910952Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:05.53432174Z","closed_at":"2026-01-02T06:37:05.53432174Z","close_reason":"Closed","comments":[{"id":2627,"issue_id":"lettatoolsselector-nbzp9","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T06:37:05Z"}]}
{"id":"lettatoolsselector-ncc7k","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:14.632631656Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:15.228509891Z","closed_at":"2026-01-02T20:16:15.228509891Z","close_reason":"Closed","comments":[{"id":4069,"issue_id":"lettatoolsselector-ncc7k","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T20:16:14Z"}]}
{"id":"lettatoolsselector-ncfps","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:29.263821204Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:29.64197119Z","closed_at":"2026-01-02T03:06:29.64197119Z","close_reason":"Closed","comments":[{"id":1552,"issue_id":"lettatoolsselector-ncfps","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T03:06:29Z"}]}
{"id":"lettatoolsselector-nd3fq","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:39:00.232094846Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:00.883847168Z","closed_at":"2026-01-02T20:39:00.883847168Z","close_reason":"Closed","comments":[{"id":4123,"issue_id":"lettatoolsselector-nd3fq","author":"root","text":"Synced from Huly: LTSEL-17","created_at":"2026-01-02T20:39:00Z"}]}
{"id":"lettatoolsselector-nd814","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:05.989883732Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:05.989883732Z","comments":[{"id":1853,"issue_id":"lettatoolsselector-nd814","author":"root","text":"Synced from Beads: lettatoolsselector-kjgm\n\n---\nHuly Issue: LTSEL-497","created_at":"2026-01-02T03:28:06Z"}]}
{"id":"lettatoolsselector-nddrh","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:42:51.669436576Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:42:52.169634411Z","closed_at":"2026-01-02T09:42:52.169634411Z","close_reason":"Closed","comments":[{"id":3013,"issue_id":"lettatoolsselector-nddrh","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T09:42:51Z"}]}
{"id":"lettatoolsselector-ndku5","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:10:22.168746577Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:10:22.731842828Z","closed_at":"2026-01-02T16:10:22.731842828Z","close_reason":"Closed","comments":[{"id":3639,"issue_id":"lettatoolsselector-ndku5","author":"root","text":"Synced from Huly: LTSEL-44","created_at":"2026-01-02T16:10:22Z"}]}
{"id":"lettatoolsselector-ndomy","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:57.222986559Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:58.244543831Z","closed_at":"2026-01-02T07:02:58.244543831Z","close_reason":"Closed","comments":[{"id":2673,"issue_id":"lettatoolsselector-ndomy","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T07:02:57Z"}]}
{"id":"lettatoolsselector-ndrx7","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:03:09.299938302Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:09.900323256Z","closed_at":"2026-01-02T20:03:09.900323256Z","close_reason":"Closed","comments":[{"id":4042,"issue_id":"lettatoolsselector-ndrx7","author":"root","text":"Synced from Huly: LTSEL-245","created_at":"2026-01-02T20:03:09Z"}]}
{"id":"lettatoolsselector-necf6","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:58:58.270981335Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:59:00.104714808Z","closed_at":"2026-01-02T17:59:00.104714808Z","close_reason":"Closed","comments":[{"id":3820,"issue_id":"lettatoolsselector-necf6","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T17:58:59Z"}]}
{"id":"lettatoolsselector-neev4","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:27:23.387423148Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:27:23.987218169Z","closed_at":"2026-01-02T17:27:23.987218169Z","close_reason":"Closed","comments":[{"id":3751,"issue_id":"lettatoolsselector-neev4","author":"root","text":"Synced from Huly: LTSEL-247","created_at":"2026-01-02T17:27:23Z"}]}
{"id":"lettatoolsselector-neply","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:39:35.876089517Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:36.482492767Z","closed_at":"2026-01-02T19:39:36.482492767Z","close_reason":"Closed","comments":[{"id":3988,"issue_id":"lettatoolsselector-neply","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T19:39:36Z"}]}
{"id":"lettatoolsselector-nfrb","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:21.983899222Z","updated_at":"2025-12-29T21:33:29.137364266Z","closed_at":"2025-12-29T21:33:29.137364266Z","close_reason":"Duplicate","comments":[{"id":398,"issue_id":"lettatoolsselector-nfrb","author":"root","text":"Synced from Beads: lettatoolsselector-h76\n\n---\nHuly Issue: LTSEL-188","created_at":"2025-12-29T20:18:22Z"}]}
{"id":"lettatoolsselector-ngd2","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:26.917387059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:27.258569144Z","closed_at":"2026-01-02T02:35:27.258569144Z","close_reason":"Closed","comments":[{"id":1357,"issue_id":"lettatoolsselector-ngd2","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T02:35:27Z"}]}
{"id":"lettatoolsselector-ngegb","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:58:06.612346444Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:07.181873963Z","closed_at":"2026-01-02T14:58:07.181873963Z","close_reason":"Closed","comments":[{"id":3502,"issue_id":"lettatoolsselector-ngegb","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T14:58:06Z"}]}
{"id":"lettatoolsselector-nhbpi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:17.185574477Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:17.185574477Z","comments":[{"id":2008,"issue_id":"lettatoolsselector-nhbpi","author":"root","text":"Synced from Beads: lettatoolsselector-us43\n\n---\nHuly Issue: LTSEL-307","created_at":"2026-01-02T03:29:17Z"}]}
{"id":"lettatoolsselector-nhsjo","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:57:10.41698442Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:10.944981589Z","closed_at":"2026-01-02T09:57:10.944981589Z","close_reason":"Closed","comments":[{"id":3052,"issue_id":"lettatoolsselector-nhsjo","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T09:57:10Z"}]}
{"id":"lettatoolsselector-nhva8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:04.724306629Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:04.724306629Z","comments":[{"id":1984,"issue_id":"lettatoolsselector-nhva8","author":"root","text":"Synced from Beads: lettatoolsselector-o0m1\n\n---\nHuly Issue: LTSEL-332","created_at":"2026-01-02T03:29:04Z"}]}
{"id":"lettatoolsselector-nimh","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:49.469943247Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:49.919774539Z","closed_at":"2026-01-02T02:19:49.919774539Z","close_reason":"Closed","comments":[{"id":1291,"issue_id":"lettatoolsselector-nimh","author":"root","text":"Synced from Beads: lettatoolsselector-388\n\n---\nHuly Issue: LTSEL-31","created_at":"2026-01-02T02:19:49Z"}]}
{"id":"lettatoolsselector-nive","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:07:52.674964559Z","updated_at":"2025-12-30T04:14:17.084163159Z","comments":[{"id":887,"issue_id":"lettatoolsselector-nive","author":"root","text":"Synced from Beads: lettatoolsselector-mwe\n\n---\nHuly Issue: LTSEL-108","created_at":"2025-12-29T21:07:53Z"}]}
{"id":"lettatoolsselector-niwjz","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:08.10590808Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:08.619135978Z","closed_at":"2026-01-02T03:30:08.619135978Z","close_reason":"Closed","comments":[{"id":2091,"issue_id":"lettatoolsselector-niwjz","author":"root","text":"Synced from Beads: lettatoolsselector-sxk\n\n---\nHuly Issue: LTSEL-30","created_at":"2026-01-02T03:30:08Z"}]}
{"id":"lettatoolsselector-nj2dw","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:51:22.505406135Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:51:23.146860743Z","closed_at":"2026-01-02T15:51:23.146860743Z","close_reason":"Closed","comments":[{"id":3622,"issue_id":"lettatoolsselector-nj2dw","author":"root","text":"Synced from Huly: LTSEL-228","created_at":"2026-01-02T15:51:22Z"}]}
{"id":"lettatoolsselector-nk339","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:37:35.725274797Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:37:36.466538185Z","closed_at":"2026-01-02T11:37:36.466538185Z","close_reason":"Closed","comments":[{"id":3250,"issue_id":"lettatoolsselector-nk339","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T11:37:36Z"}]}
{"id":"lettatoolsselector-nkpec","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:37:05.297733332Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:05.649888105Z","closed_at":"2026-01-02T10:37:05.649888105Z","close_reason":"Closed"}
{"id":"lettatoolsselector-nl1kf","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:27.877563993Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:28.363043993Z","closed_at":"2026-01-02T06:00:28.363043993Z","close_reason":"Closed","comments":[{"id":2542,"issue_id":"lettatoolsselector-nl1kf","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T06:00:28Z"}]}
{"id":"lettatoolsselector-nlh3r","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:05:56.18861564Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:05:56.687357678Z","closed_at":"2026-01-02T17:05:56.687357678Z","close_reason":"Closed"}
{"id":"lettatoolsselector-nli6j","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:07.477509415Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:08.147138255Z","closed_at":"2026-01-02T18:25:08.147138255Z","close_reason":"Closed","comments":[{"id":3834,"issue_id":"lettatoolsselector-nli6j","author":"root","text":"Synced from Huly: LTSEL-40","created_at":"2026-01-02T18:25:07Z"}]}
{"id":"lettatoolsselector-nlij7","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:51:29.299734263Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:29.93366202Z","closed_at":"2026-01-02T18:51:29.93366202Z","close_reason":"Closed","comments":[{"id":3897,"issue_id":"lettatoolsselector-nlij7","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T18:51:29Z"}]}
{"id":"lettatoolsselector-nmdhe","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:21:03.014415715Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:03.981148027Z","closed_at":"2026-01-02T08:21:03.981148027Z","close_reason":"Closed","comments":[{"id":2857,"issue_id":"lettatoolsselector-nmdhe","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T08:21:03Z"}]}
{"id":"lettatoolsselector-nmsp1","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:12:55.290210029Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:12:55.924480192Z","closed_at":"2026-01-02T11:12:55.924480192Z","close_reason":"Closed","comments":[{"id":3204,"issue_id":"lettatoolsselector-nmsp1","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T11:12:55Z"}]}
{"id":"lettatoolsselector-nmt9b","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:19:58.08513341Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:19:58.590880895Z","closed_at":"2026-01-02T04:19:58.590880895Z","close_reason":"Closed","comments":[{"id":2348,"issue_id":"lettatoolsselector-nmt9b","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T04:19:58Z"}]}
{"id":"lettatoolsselector-nn4a3","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:23.283722612Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:23.8908876Z","closed_at":"2026-01-02T14:29:23.8908876Z","close_reason":"Closed","comments":[{"id":3443,"issue_id":"lettatoolsselector-nn4a3","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T14:29:23Z"}]}
{"id":"lettatoolsselector-nn4f1","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:58:49.282606387Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:49.962200343Z","closed_at":"2026-01-02T09:58:49.962200343Z","close_reason":"Closed","comments":[{"id":3069,"issue_id":"lettatoolsselector-nn4f1","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T09:58:49Z"}]}
{"id":"lettatoolsselector-no2xk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:21.648962821Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:21.648962821Z","comments":[{"id":2017,"issue_id":"lettatoolsselector-no2xk","author":"root","text":"Synced from Beads: lettatoolsselector-13zz\n\n---\nHuly Issue: LTSEL-298","created_at":"2026-01-02T03:29:21Z"}]}
{"id":"lettatoolsselector-noj00","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:33.308106732Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:33.308106732Z","comments":[{"id":1916,"issue_id":"lettatoolsselector-noj00","author":"root","text":"Synced from Beads: lettatoolsselector-repf\n\n---\nHuly Issue: LTSEL-415","created_at":"2026-01-02T03:28:33Z"}]}
{"id":"lettatoolsselector-noksh","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:30:20.363282027Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:30:20.975595335Z","closed_at":"2026-01-02T18:30:20.975595335Z","close_reason":"Closed","comments":[{"id":3864,"issue_id":"lettatoolsselector-noksh","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T18:30:20Z"}]}
{"id":"lettatoolsselector-noynl","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:41:58.854434211Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:59.202579386Z","closed_at":"2026-01-02T09:41:59.202579386Z","close_reason":"Closed"}
{"id":"lettatoolsselector-nphyy","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:19:07.099488579Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:07.619177972Z","closed_at":"2026-01-02T06:19:07.619177972Z","close_reason":"Closed","comments":[{"id":2588,"issue_id":"lettatoolsselector-nphyy","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T06:19:07Z"}]}
{"id":"lettatoolsselector-nqmqe","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:38:26.589258813Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:38:26.948327969Z","closed_at":"2026-01-02T10:38:26.948327969Z","close_reason":"Closed"}
{"id":"lettatoolsselector-nqufk","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:21:40.370556076Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:40.894340958Z","closed_at":"2026-01-02T08:21:40.894340958Z","close_reason":"Closed","comments":[{"id":2863,"issue_id":"lettatoolsselector-nqufk","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T08:21:40Z"}]}
{"id":"lettatoolsselector-nqx5y","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:02.714886577Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:02.714886577Z","comments":[{"id":1846,"issue_id":"lettatoolsselector-nqx5y","author":"root","text":"Synced from Beads: lettatoolsselector-il3j\n\n---\nHuly Issue: LTSEL-505","created_at":"2026-01-02T03:28:02Z"}]}
{"id":"lettatoolsselector-nr3pq","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:59:40.93115786Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:59:41.547302175Z","closed_at":"2026-01-02T21:59:41.547302175Z","close_reason":"Closed","comments":[{"id":4285,"issue_id":"lettatoolsselector-nr3pq","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T21:59:41Z"}]}
{"id":"lettatoolsselector-nroqq","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:23:21.769980516Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:22.446520612Z","closed_at":"2026-01-02T15:23:22.446520612Z","close_reason":"Closed","comments":[{"id":3568,"issue_id":"lettatoolsselector-nroqq","author":"root","text":"Synced from Huly: LTSEL-240","created_at":"2026-01-02T15:23:22Z"}]}
{"id":"lettatoolsselector-nrwx","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:35.808606559Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:36.02272079Z","closed_at":"2026-01-02T01:08:36.02272079Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ns7tr","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:01.202138505Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:01.647847971Z","closed_at":"2026-01-02T04:20:01.647847971Z","close_reason":"Closed","comments":[{"id":2352,"issue_id":"lettatoolsselector-ns7tr","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T04:20:01Z"}]}
{"id":"lettatoolsselector-nss9q","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:58.341263655Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:58.865413267Z","closed_at":"2026-01-02T09:40:58.865413267Z","close_reason":"Closed","comments":[{"id":3001,"issue_id":"lettatoolsselector-nss9q","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T09:40:58Z"}]}
{"id":"lettatoolsselector-nsw2o","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:00:59.086924184Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:00:59.943665446Z","closed_at":"2026-01-02T21:00:59.943665446Z","close_reason":"Closed","comments":[{"id":4178,"issue_id":"lettatoolsselector-nsw2o","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T21:00:59Z"}]}
{"id":"lettatoolsselector-nswt5","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:49.860049038Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:50.248039778Z","closed_at":"2026-01-02T03:06:50.248039778Z","close_reason":"Closed","comments":[{"id":1570,"issue_id":"lettatoolsselector-nswt5","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T03:06:50Z"}]}
{"id":"lettatoolsselector-ntabv","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:57.2906268Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:57.851229278Z","closed_at":"2026-01-02T15:20:57.851229278Z","close_reason":"Closed","comments":[{"id":3548,"issue_id":"lettatoolsselector-ntabv","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T15:20:57Z"}]}
{"id":"lettatoolsselector-nthie","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:41:54.536472537Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:55.060573457Z","closed_at":"2026-01-02T04:41:55.060573457Z","close_reason":"Closed","comments":[{"id":2450,"issue_id":"lettatoolsselector-nthie","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T04:41:54Z"}]}
{"id":"lettatoolsselector-ntk5e","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:21:48.467570262Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:49.062378884Z","closed_at":"2026-01-02T08:21:49.062378884Z","close_reason":"Closed","comments":[{"id":2866,"issue_id":"lettatoolsselector-ntk5e","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T08:21:48Z"}]}
{"id":"lettatoolsselector-ntm6","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T01:25:12.740355937Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:12.971977804Z","closed_at":"2026-01-02T01:25:12.971977804Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ntzz","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:47.007552291Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:47.348584074Z","closed_at":"2026-01-02T01:24:47.348584074Z","close_reason":"Closed","comments":[{"id":1214,"issue_id":"lettatoolsselector-ntzz","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T01:24:47Z"}]}
{"id":"lettatoolsselector-nurgo","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:58:35.155816432Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:35.862400938Z","closed_at":"2026-01-02T14:58:35.862400938Z","close_reason":"Closed","comments":[{"id":3509,"issue_id":"lettatoolsselector-nurgo","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T14:58:35Z"}]}
{"id":"lettatoolsselector-nvgy1","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:41:03.048843479Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:41:03.45135105Z","closed_at":"2026-01-02T19:41:03.45135105Z","close_reason":"Closed"}
{"id":"lettatoolsselector-nviku","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:36.758207117Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:36.758207117Z","comments":[{"id":2195,"issue_id":"lettatoolsselector-nviku","author":"root","text":"Synced from Beads: lettatoolsselector-xllt\n\n---\nHuly Issue: LTSEL-668","created_at":"2026-01-02T03:43:37Z"}]}
{"id":"lettatoolsselector-nvtp7","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:13.956147733Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:14.371473248Z","closed_at":"2026-01-02T03:47:14.371473248Z","close_reason":"Closed","comments":[{"id":2311,"issue_id":"lettatoolsselector-nvtp7","author":"root","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2026-01-02T03:47:14Z"}]}
{"id":"lettatoolsselector-nwfd9","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:27:42.422737371Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:27:42.833427364Z","closed_at":"2026-01-02T17:27:42.833427364Z","close_reason":"Closed"}
{"id":"lettatoolsselector-nwgls","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:23.051230476Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:23.051230476Z","comments":[{"id":2020,"issue_id":"lettatoolsselector-nwgls","author":"root","text":"Synced from Beads: lettatoolsselector-4xui\n\n---\nHuly Issue: LTSEL-295","created_at":"2026-01-02T03:29:23Z"}]}
{"id":"lettatoolsselector-nwlv","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:12:18.449231827Z","updated_at":"2025-12-30T02:08:54.921774687Z","comments":[{"id":931,"issue_id":"lettatoolsselector-nwlv","author":"root","text":"Synced from Beads: lettatoolsselector-nlt\n\n---\nHuly Issue: LTSEL-34","created_at":"2025-12-29T21:12:18Z"}]}
{"id":"lettatoolsselector-nxp0l","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:13:58.350909616Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:13:58.929259782Z","closed_at":"2026-01-02T16:13:58.929259782Z","close_reason":"Closed","comments":[{"id":3658,"issue_id":"lettatoolsselector-nxp0l","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T16:13:58Z"}]}
{"id":"lettatoolsselector-nxzqx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:11.546915099Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:11.546915099Z","comments":[{"id":1866,"issue_id":"lettatoolsselector-nxzqx","author":"root","text":"Synced from Beads: lettatoolsselector-w2d2\n\n---\nHuly Issue: LTSEL-484","created_at":"2026-01-02T03:28:11Z"}]}
{"id":"lettatoolsselector-ny3e0","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:19:54.710359373Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:19:56.541563619Z","closed_at":"2026-01-02T19:19:56.541563619Z","close_reason":"Closed","comments":[{"id":3922,"issue_id":"lettatoolsselector-ny3e0","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T19:19:56Z"}]}
{"id":"lettatoolsselector-nygp","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:12.740674043Z","updated_at":"2025-12-29T21:33:28.848483023Z","closed_at":"2025-12-29T21:33:28.848483023Z","close_reason":"Duplicate","comments":[{"id":409,"issue_id":"lettatoolsselector-nygp","author":"root","text":"Synced from Beads: lettatoolsselector-rc8\n\n---\nHuly Issue: LTSEL-195","created_at":"2025-12-29T20:19:13Z"}]}
{"id":"lettatoolsselector-nz0k7","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:39:49.069193143Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:49.622270044Z","closed_at":"2026-01-02T13:39:49.622270044Z","close_reason":"Closed","comments":[{"id":3375,"issue_id":"lettatoolsselector-nz0k7","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T13:39:49Z"}]}
{"id":"lettatoolsselector-nzb7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:30:13.325661266Z","updated_at":"2025-12-30T02:04:35.650451732Z","comments":[{"id":1053,"issue_id":"lettatoolsselector-nzb7","author":"root","text":"Synced from Beads: lettatoolsselector-mhi\n\n---\nHuly Issue: LTSEL-61","created_at":"2025-12-29T21:30:13Z"}]}
{"id":"lettatoolsselector-nzgyq","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:23.999852957Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:24.442141965Z","closed_at":"2026-01-02T04:39:24.442141965Z","close_reason":"Closed","comments":[{"id":2413,"issue_id":"lettatoolsselector-nzgyq","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T04:39:24Z"}]}
{"id":"lettatoolsselector-nzkuh","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:51.008715158Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:51.52873033Z","closed_at":"2026-01-02T05:59:51.52873033Z","close_reason":"Closed","comments":[{"id":2506,"issue_id":"lettatoolsselector-nzkuh","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T05:59:51Z"}]}
{"id":"lettatoolsselector-nzs3z","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:37.65518095Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:37.65518095Z","comments":[{"id":1788,"issue_id":"lettatoolsselector-nzs3z","author":"root","text":"Synced from Beads: lettatoolsselector-7e49\n\n---\nHuly Issue: LTSEL-588","created_at":"2026-01-02T03:27:37Z"}]}
{"id":"lettatoolsselector-nzwq6","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:42.970401552Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:43.220690839Z","closed_at":"2026-01-02T03:06:43.220690839Z","close_reason":"Closed"}
{"id":"lettatoolsselector-o0f3n","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:26:06.423092325Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:26:07.192112421Z","closed_at":"2026-01-02T17:26:07.192112421Z","close_reason":"Closed","comments":[{"id":3741,"issue_id":"lettatoolsselector-o0f3n","author":"root","text":"Synced from Huly: LTSEL-33","created_at":"2026-01-02T17:26:06Z"}]}
{"id":"lettatoolsselector-o0m1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:19:35.439934369Z","updated_at":"2025-12-30T01:55:03.447952112Z","comments":[{"id":998,"issue_id":"lettatoolsselector-o0m1","author":"root","text":"Synced from Beads: lettatoolsselector-563\n\n---\nHuly Issue: LTSEL-79","created_at":"2025-12-29T21:19:35Z"}]}
{"id":"lettatoolsselector-o0ser","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:49:54.3764006Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:49:55.008918219Z","closed_at":"2026-01-02T18:49:55.008918219Z","close_reason":"Closed","comments":[{"id":3882,"issue_id":"lettatoolsselector-o0ser","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T18:49:54Z"}]}
{"id":"lettatoolsselector-o0t6q","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:52.596410105Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:52.596410105Z","comments":[{"id":1958,"issue_id":"lettatoolsselector-o0t6q","author":"root","text":"Synced from Beads: lettatoolsselector-74bt\n\n---\nHuly Issue: LTSEL-362","created_at":"2026-01-02T03:28:52Z"}]}
{"id":"lettatoolsselector-o13wa","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:36:30.041728951Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:30.621878678Z","closed_at":"2026-01-02T11:36:30.621878678Z","close_reason":"Closed","comments":[{"id":3240,"issue_id":"lettatoolsselector-o13wa","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T11:36:30Z"}]}
{"id":"lettatoolsselector-o1976","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T12:00:42.223221332Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:00:42.607179112Z","closed_at":"2026-01-02T12:00:42.607179112Z","close_reason":"Closed"}
{"id":"lettatoolsselector-o1be","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:19.99919051Z","updated_at":"2025-12-29T21:33:42.323975165Z","closed_at":"2025-12-29T21:33:42.323975165Z","close_reason":"Duplicate","comments":[{"id":550,"issue_id":"lettatoolsselector-o1be","author":"root","text":"Synced from Beads: lettatoolsselector-cwc\n\n---\nHuly Issue: LTSEL-72","created_at":"2025-12-29T20:30:20Z"}]}
{"id":"lettatoolsselector-o1kn0","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:07:33.284002135Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:07:34.006281265Z","closed_at":"2026-01-02T21:07:34.006281265Z","close_reason":"Closed","comments":[{"id":4195,"issue_id":"lettatoolsselector-o1kn0","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T21:07:33Z"}]}
{"id":"lettatoolsselector-o1oye","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:36:59.727291171Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:00.05076565Z","closed_at":"2026-01-02T06:37:00.05076565Z","close_reason":"Closed"}
{"id":"lettatoolsselector-o24j0","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:23:43.587313416Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:23:44.223360983Z","closed_at":"2026-01-02T22:23:44.223360983Z","close_reason":"Closed","comments":[{"id":4325,"issue_id":"lettatoolsselector-o24j0","author":"root","text":"Synced from Huly: LTSEL-228","created_at":"2026-01-02T22:23:43Z"}]}
{"id":"lettatoolsselector-o2bki","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:03.576060086Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:04.010413144Z","closed_at":"2026-01-02T04:20:04.010413144Z","close_reason":"Closed","comments":[{"id":2355,"issue_id":"lettatoolsselector-o2bki","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T04:20:03Z"}]}
{"id":"lettatoolsselector-o2bvk","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:06.64337465Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:07.265386891Z","closed_at":"2026-01-02T19:20:07.265386891Z","close_reason":"Closed","comments":[{"id":3925,"issue_id":"lettatoolsselector-o2bvk","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T19:20:07Z"}]}
{"id":"lettatoolsselector-o2ix","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:40:37.98964581Z","updated_at":"2025-12-29T21:33:23.684416648Z","closed_at":"2025-12-29T21:33:23.684416648Z","close_reason":"Duplicate","comments":[{"id":651,"issue_id":"lettatoolsselector-o2ix","author":"root","text":"Synced from Beads: lettatoolsselector-53h\n\n---\nHuly Issue: LTSEL-156","created_at":"2025-12-29T20:40:38Z"}]}
{"id":"lettatoolsselector-o2jq4","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:09.940933327Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:10.559253139Z","closed_at":"2026-01-02T20:16:10.559253139Z","close_reason":"Closed","comments":[{"id":4068,"issue_id":"lettatoolsselector-o2jq4","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T20:16:10Z"}]}
{"id":"lettatoolsselector-o2wcn","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:38.238263103Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:38.238263103Z","comments":[{"id":2243,"issue_id":"lettatoolsselector-o2wcn","author":"root","text":"Synced from Beads: lettatoolsselector-rwx7\n\n---\nHuly Issue: LTSEL-535","created_at":"2026-01-02T03:44:38Z"}]}
{"id":"lettatoolsselector-o3qn9","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:40:10.924962747Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:40:11.567356927Z","closed_at":"2026-01-02T22:40:11.567356927Z","close_reason":"Closed","comments":[{"id":4353,"issue_id":"lettatoolsselector-o3qn9","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T22:40:11Z"}]}
{"id":"lettatoolsselector-o4e48","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:21.296061381Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:21.844860906Z","closed_at":"2026-01-02T08:02:21.844860906Z","close_reason":"Closed","comments":[{"id":2802,"issue_id":"lettatoolsselector-o4e48","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T08:02:21Z"}]}
{"id":"lettatoolsselector-o4rl5","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:55.50310419Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:55.992005684Z","closed_at":"2026-01-02T07:23:55.992005684Z","close_reason":"Closed","comments":[{"id":2710,"issue_id":"lettatoolsselector-o4rl5","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T07:23:55Z"}]}
{"id":"lettatoolsselector-o51en","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:37:56.585815764Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:37:58.498538216Z","closed_at":"2026-01-02T20:37:58.498538216Z","close_reason":"Closed","comments":[{"id":4106,"issue_id":"lettatoolsselector-o51en","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T20:37:58Z"}]}
{"id":"lettatoolsselector-o5a1v","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:49:18.929129971Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:49:19.579430307Z","closed_at":"2026-01-02T22:49:19.579430307Z","close_reason":"Closed","comments":[{"id":4376,"issue_id":"lettatoolsselector-o5a1v","author":"root","text":"Synced from Huly: LTSEL-50","created_at":"2026-01-02T22:49:19Z"}]}
{"id":"lettatoolsselector-o5qoc","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:22:18.307505833Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:22:18.844158169Z","closed_at":"2026-01-02T08:22:18.844158169Z","close_reason":"Closed","comments":[{"id":2873,"issue_id":"lettatoolsselector-o5qoc","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T08:22:18Z"}]}
{"id":"lettatoolsselector-o5r0s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:57.153881217Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:57.153881217Z","comments":[{"id":1833,"issue_id":"lettatoolsselector-o5r0s","author":"root","text":"Synced from Beads: lettatoolsselector-41hn\n\n---\nHuly Issue: LTSEL-520","created_at":"2026-01-02T03:27:57Z"}]}
{"id":"lettatoolsselector-o6dck","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:11:15.786765094Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:16.150387274Z","closed_at":"2026-01-02T11:11:16.150387274Z","close_reason":"Closed"}
{"id":"lettatoolsselector-o6h7","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:36.591234399Z","updated_at":"2025-12-29T21:33:26.285967328Z","closed_at":"2025-12-29T21:33:26.285967328Z","close_reason":"Duplicate","comments":[{"id":539,"issue_id":"lettatoolsselector-o6h7","author":"root","text":"Synced from Beads: lettatoolsselector-tow\n\n---\nHuly Issue: LTSEL-165","created_at":"2025-12-29T20:29:36Z"}]}
{"id":"lettatoolsselector-o6k5v","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:45.355132968Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:45.815401983Z","closed_at":"2026-01-02T05:40:45.815401983Z","close_reason":"Closed","comments":[{"id":2460,"issue_id":"lettatoolsselector-o6k5v","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T05:40:45Z"}]}
{"id":"lettatoolsselector-o6ls2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:31.330167348Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:31.330167348Z","comments":[{"id":1773,"issue_id":"lettatoolsselector-o6ls2","author":"root","text":"Synced from Beads: lettatoolsselector-h0ps\n\n---\nHuly Issue: LTSEL-605","created_at":"2026-01-02T03:27:31Z"}]}
{"id":"lettatoolsselector-o6rh","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:17.827060651Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:18.15126606Z","closed_at":"2026-01-02T01:08:18.15126606Z","close_reason":"Closed","comments":[{"id":1167,"issue_id":"lettatoolsselector-o6rh","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T01:08:18Z"}]}
{"id":"lettatoolsselector-o70zs","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:56:20.633261728Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:56:21.056107551Z","closed_at":"2026-01-02T17:56:21.056107551Z","close_reason":"Closed"}
{"id":"lettatoolsselector-o7ac","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:40.822614818Z","updated_at":"2025-12-29T21:33:29.99667149Z","closed_at":"2025-12-29T21:33:29.99667149Z","close_reason":"Duplicate","comments":[{"id":370,"issue_id":"lettatoolsselector-o7ac","author":"root","text":"Synced from Beads: lettatoolsselector-t11\n\n---\nHuly Issue: LTSEL-196","created_at":"2025-12-29T20:15:41Z"}]}
{"id":"lettatoolsselector-o8ccg","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:20:53.2514105Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:20:53.797280232Z","closed_at":"2026-01-02T09:20:53.797280232Z","close_reason":"Closed","comments":[{"id":2929,"issue_id":"lettatoolsselector-o8ccg","author":"root","text":"Synced from Huly: LTSEL-47","created_at":"2026-01-02T09:20:53Z"}]}
{"id":"lettatoolsselector-o8yt","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:17.61621685Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:17.965410054Z","closed_at":"2026-01-02T01:25:17.965410054Z","close_reason":"Closed","comments":[{"id":1256,"issue_id":"lettatoolsselector-o8yt","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T01:25:17Z"}]}
{"id":"lettatoolsselector-o9dri","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:01.485464085Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:02.178022173Z","closed_at":"2026-01-02T06:00:02.178022173Z","close_reason":"Closed","comments":[{"id":2519,"issue_id":"lettatoolsselector-o9dri","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T06:00:01Z"}]}
{"id":"lettatoolsselector-o9kyl","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:13.902567187Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:14.461259744Z","closed_at":"2026-01-02T08:02:14.461259744Z","close_reason":"Closed","comments":[{"id":2798,"issue_id":"lettatoolsselector-o9kyl","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T08:02:14Z"}]}
{"id":"lettatoolsselector-o9nyv","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:51:32.677011517Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:51:33.227540047Z","closed_at":"2026-01-02T15:51:33.227540047Z","close_reason":"Closed","comments":[{"id":3624,"issue_id":"lettatoolsselector-o9nyv","author":"root","text":"Synced from Huly: LTSEL-227","created_at":"2026-01-02T15:51:33Z"}]}
{"id":"lettatoolsselector-oags","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:32.837715909Z","updated_at":"2025-12-29T21:33:27.166411645Z","closed_at":"2025-12-29T21:33:27.166411645Z","close_reason":"Duplicate","comments":[{"id":485,"issue_id":"lettatoolsselector-oags","author":"root","text":"Synced from Beads: lettatoolsselector-h76\n\n---\nHuly Issue: LTSEL-188","created_at":"2025-12-29T20:25:33Z"}]}
{"id":"lettatoolsselector-ob6of","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:36:58.955737244Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:59.436406176Z","closed_at":"2026-01-02T06:36:59.436406176Z","close_reason":"Closed","comments":[{"id":2622,"issue_id":"lettatoolsselector-ob6of","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T06:36:59Z"}]}
{"id":"lettatoolsselector-obuja","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:29:12.141913921Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:12.756428199Z","closed_at":"2026-01-02T18:29:12.756428199Z","close_reason":"Closed","comments":[{"id":3854,"issue_id":"lettatoolsselector-obuja","author":"root","text":"Synced from Huly: LTSEL-249","created_at":"2026-01-02T18:29:12Z"}]}
{"id":"lettatoolsselector-oc2t","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:12:48.667980119Z","updated_at":"2025-12-29T21:33:30.984597339Z","closed_at":"2025-12-29T21:33:30.984597339Z","close_reason":"Duplicate","comments":[{"id":341,"issue_id":"lettatoolsselector-oc2t","author":"root","text":"Synced from Beads: lettatoolsselector-zxm\n\n---\nHuly Issue: LTSEL-213","created_at":"2025-12-29T20:12:48Z"}]}
{"id":"lettatoolsselector-oc84","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:29.702225832Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:30.17532459Z","closed_at":"2026-01-02T01:08:30.17532459Z","close_reason":"Closed","comments":[{"id":1188,"issue_id":"lettatoolsselector-oc84","author":"root","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2026-01-02T01:08:29Z"}]}
{"id":"lettatoolsselector-ocq8a","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:03.894366998Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:05.67906447Z","closed_at":"2026-01-02T08:20:05.67906447Z","close_reason":"Closed","comments":[{"id":2841,"issue_id":"lettatoolsselector-ocq8a","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T08:20:04Z"}]}
{"id":"lettatoolsselector-od6cg","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:43.82341238Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:44.369055239Z","closed_at":"2026-01-02T11:33:44.369055239Z","close_reason":"Closed","comments":[{"id":3215,"issue_id":"lettatoolsselector-od6cg","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T11:33:44Z"}]}
{"id":"lettatoolsselector-odpum","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:52:49.271349539Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:52:49.66865966Z","closed_at":"2026-01-02T17:52:49.66865966Z","close_reason":"Closed"}
{"id":"lettatoolsselector-odq8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:40.141654648Z","updated_at":"2025-12-29T21:33:44.216884626Z","closed_at":"2025-12-29T21:33:44.216884626Z","close_reason":"Duplicate","comments":[{"id":357,"issue_id":"lettatoolsselector-odq8","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T20:14:40Z"}]}
{"id":"lettatoolsselector-odvxz","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:04.541530327Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:05.229802542Z","closed_at":"2026-01-02T11:34:05.229802542Z","close_reason":"Closed","comments":[{"id":3220,"issue_id":"lettatoolsselector-odvxz","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T11:34:04Z"}]}
{"id":"lettatoolsselector-odwg7","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:59:30.515209925Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:30.915777669Z","closed_at":"2026-01-02T10:59:30.915777669Z","close_reason":"Closed"}
{"id":"lettatoolsselector-oe3yd","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:56:59.444706651Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:59.944753235Z","closed_at":"2026-01-02T08:56:59.944753235Z","close_reason":"Closed","comments":[{"id":2914,"issue_id":"lettatoolsselector-oe3yd","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T08:56:59Z"}]}
{"id":"lettatoolsselector-of8w","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:22.469019432Z","updated_at":"2025-12-29T21:33:23.319105432Z","closed_at":"2025-12-29T21:33:23.319105432Z","close_reason":"Duplicate","comments":[{"id":664,"issue_id":"lettatoolsselector-of8w","author":"root","text":"Synced from Beads: lettatoolsselector-kne\n\n---\nHuly Issue: LTSEL-158","created_at":"2025-12-29T20:42:22Z"}]}
{"id":"lettatoolsselector-og395","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:48.516981039Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:48.925419431Z","closed_at":"2026-01-02T03:29:48.925419431Z","close_reason":"Closed","comments":[{"id":2068,"issue_id":"lettatoolsselector-og395","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T03:29:48Z"}]}
{"id":"lettatoolsselector-ogyfg","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:35.406277196Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:36.090814824Z","closed_at":"2026-01-02T18:25:36.090814824Z","close_reason":"Closed","comments":[{"id":3840,"issue_id":"lettatoolsselector-ogyfg","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T18:25:35Z"}]}
{"id":"lettatoolsselector-oh0y","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:43:28.132207175Z","updated_at":"2025-12-29T21:33:23.145392562Z","closed_at":"2025-12-29T21:33:23.145392562Z","close_reason":"Duplicate","comments":[{"id":671,"issue_id":"lettatoolsselector-oh0y","author":"root","text":"Synced from Beads: lettatoolsselector-53h\n\n---\nHuly Issue: LTSEL-156","created_at":"2025-12-29T20:43:28Z"}]}
{"id":"lettatoolsselector-oi63v","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T12:00:44.114514147Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:00:44.464174202Z","closed_at":"2026-01-02T12:00:44.464174202Z","close_reason":"Closed"}
{"id":"lettatoolsselector-oi8if","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:09:59.442311281Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:10:00.008295632Z","closed_at":"2026-01-02T14:10:00.008295632Z","close_reason":"Closed","comments":[{"id":3431,"issue_id":"lettatoolsselector-oi8if","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T14:09:59Z"}]}
{"id":"lettatoolsselector-oim6u","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:29.367720882Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:30.007871988Z","closed_at":"2026-01-02T20:38:30.007871988Z","close_reason":"Closed","comments":[{"id":4115,"issue_id":"lettatoolsselector-oim6u","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T20:38:29Z"}]}
{"id":"lettatoolsselector-oin4x","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:52:42.500302263Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:52:43.061576255Z","closed_at":"2026-01-02T15:52:43.061576255Z","close_reason":"Closed","comments":[{"id":3629,"issue_id":"lettatoolsselector-oin4x","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T15:52:42Z"}]}
{"id":"lettatoolsselector-oiq0s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:38.846651944Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:38.846651944Z","comments":[{"id":2056,"issue_id":"lettatoolsselector-oiq0s","author":"root","text":"Synced from Beads: lettatoolsselector-xhvq\n\n---\nHuly Issue: LTSEL-259","created_at":"2026-01-02T03:29:39Z"}]}
{"id":"lettatoolsselector-oj220","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:31.847903388Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:32.394694585Z","closed_at":"2026-01-02T14:29:32.394694585Z","close_reason":"Closed","comments":[{"id":3446,"issue_id":"lettatoolsselector-oj220","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T14:29:32Z"}]}
{"id":"lettatoolsselector-oj4q4","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:59:39.102354797Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:39.651596436Z","closed_at":"2026-01-02T10:59:39.651596436Z","close_reason":"Closed","comments":[{"id":3153,"issue_id":"lettatoolsselector-oj4q4","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T10:59:39Z"}]}
{"id":"lettatoolsselector-ojfoc","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:20:04.036111763Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:20:04.637612716Z","closed_at":"2026-01-02T16:20:04.637612716Z","close_reason":"Closed","comments":[{"id":3675,"issue_id":"lettatoolsselector-ojfoc","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T16:20:04Z"}]}
{"id":"lettatoolsselector-ojphq","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:03:06.137886379Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:06.732776195Z","closed_at":"2026-01-02T20:03:06.732776195Z","close_reason":"Closed","comments":[{"id":4040,"issue_id":"lettatoolsselector-ojphq","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T20:03:06Z"}]}
{"id":"lettatoolsselector-ojtgs","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:37.161046844Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:37.583327456Z","closed_at":"2026-01-02T04:39:37.583327456Z","close_reason":"Closed","comments":[{"id":2422,"issue_id":"lettatoolsselector-ojtgs","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T04:39:37Z"}]}
{"id":"lettatoolsselector-ojuiz","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:50:17.965585268Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:50:18.35374389Z","closed_at":"2026-01-02T15:50:18.35374389Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ojx5z","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:40.947281137Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:40.947281137Z","comments":[{"id":2245,"issue_id":"lettatoolsselector-ojx5z","author":"root","text":"Synced from Beads: lettatoolsselector-x8xu\n\n---\nHuly Issue: LTSEL-531","created_at":"2026-01-02T03:44:41Z"}]}
{"id":"lettatoolsselector-ojzvz","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:07.023301855Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:07.436256247Z","closed_at":"2026-01-02T03:47:07.436256247Z","close_reason":"Closed","comments":[{"id":2304,"issue_id":"lettatoolsselector-ojzvz","author":"root","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2026-01-02T03:47:07Z"}]}
{"id":"lettatoolsselector-ok336","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:25:08.754579508Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:25:10.199564808Z","closed_at":"2026-01-02T07:25:10.199564808Z","close_reason":"Closed","comments":[{"id":2736,"issue_id":"lettatoolsselector-ok336","author":"root","text":"Synced from Huly: LTSEL-233","created_at":"2026-01-02T07:25:09Z"}]}
{"id":"lettatoolsselector-okvlr","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:51:04.625551424Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:51:05.27997042Z","closed_at":"2026-01-02T23:51:05.27997042Z","close_reason":"Closed","comments":[{"id":4397,"issue_id":"lettatoolsselector-okvlr","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T23:51:05Z"}]}
{"id":"lettatoolsselector-ol1oy","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:12.976542549Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:13.518148309Z","closed_at":"2026-01-02T11:34:13.518148309Z","close_reason":"Closed","comments":[{"id":3225,"issue_id":"lettatoolsselector-ol1oy","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T11:34:13Z"}]}
{"id":"lettatoolsselector-ol36","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:57.132688345Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:57.489266734Z","closed_at":"2026-01-02T01:24:57.489266734Z","close_reason":"Closed","comments":[{"id":1231,"issue_id":"lettatoolsselector-ol36","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T01:24:57Z"}]}
{"id":"lettatoolsselector-ol7u","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:07:30.622951167Z","updated_at":"2025-12-30T04:11:53.563538507Z","comments":[{"id":882,"issue_id":"lettatoolsselector-ol7u","author":"root","text":"Synced from Beads: lettatoolsselector-mwe\n\n---\nHuly Issue: LTSEL-108","created_at":"2025-12-29T21:07:31Z"}]}
{"id":"lettatoolsselector-ol93a","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:11:58.730665706Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:59.271534992Z","closed_at":"2026-01-02T11:11:59.271534992Z","close_reason":"Closed","comments":[{"id":3196,"issue_id":"lettatoolsselector-ol93a","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T11:11:59Z"}]}
{"id":"lettatoolsselector-olcgk","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:30:21.699943842Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:22.195199693Z","closed_at":"2026-01-02T03:30:22.195199693Z","close_reason":"Closed","comments":[{"id":2102,"issue_id":"lettatoolsselector-olcgk","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T03:30:21Z"}]}
{"id":"lettatoolsselector-olcu0","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:47.537346409Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:48.090928011Z","closed_at":"2026-01-02T15:20:48.090928011Z","close_reason":"Closed","comments":[{"id":3543,"issue_id":"lettatoolsselector-olcu0","author":"root","text":"Synced from Huly: LTSEL-39","created_at":"2026-01-02T15:20:47Z"}]}
{"id":"lettatoolsselector-oloml","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:28.819364995Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:28.819364995Z","comments":[{"id":2033,"issue_id":"lettatoolsselector-oloml","author":"root","text":"Synced from Beads: lettatoolsselector-nzb7\n\n---\nHuly Issue: LTSEL-282","created_at":"2026-01-02T03:29:29Z"}]}
{"id":"lettatoolsselector-olpa","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:31:30.311885776Z","updated_at":"2025-12-29T21:33:25.872478238Z","closed_at":"2025-12-29T21:33:25.872478238Z","close_reason":"Duplicate","comments":[{"id":559,"issue_id":"lettatoolsselector-olpa","author":"root","text":"Synced from Beads: lettatoolsselector-c33\n\n---\nHuly Issue: LTSEL-172","created_at":"2025-12-29T20:31:30Z"}]}
{"id":"lettatoolsselector-oltsq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:19.700219245Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:19.700219245Z","comments":[{"id":2013,"issue_id":"lettatoolsselector-oltsq","author":"root","text":"Synced from Beads: lettatoolsselector-c2jv\n\n---\nHuly Issue: LTSEL-302","created_at":"2026-01-02T03:29:19Z"}]}
{"id":"lettatoolsselector-om1c6","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:58:09.145032765Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:09.660192183Z","closed_at":"2026-01-02T10:58:09.660192183Z","close_reason":"Closed","comments":[{"id":3129,"issue_id":"lettatoolsselector-om1c6","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T10:58:09Z"}]}
{"id":"lettatoolsselector-om832","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:23:34.763145365Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:23:35.381687784Z","closed_at":"2026-01-02T22:23:35.381687784Z","close_reason":"Closed","comments":[{"id":4324,"issue_id":"lettatoolsselector-om832","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T22:23:35Z"}]}
{"id":"lettatoolsselector-omxb","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:34.357585823Z","updated_at":"2025-12-29T21:33:42.570830172Z","closed_at":"2025-12-29T21:33:42.570830172Z","close_reason":"Duplicate","comments":[{"id":525,"issue_id":"lettatoolsselector-omxb","author":"root","text":"Synced from Beads: lettatoolsselector-81c\n\n---\nHuly Issue: LTSEL-111","created_at":"2025-12-29T20:28:34Z"}]}
{"id":"lettatoolsselector-ond0x","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:10.378217662Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:10.893896357Z","closed_at":"2026-01-02T10:36:10.893896357Z","close_reason":"Closed","comments":[{"id":3084,"issue_id":"lettatoolsselector-ond0x","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T10:36:10Z"}]}
{"id":"lettatoolsselector-one2a","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:49.387752822Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:49.387752822Z","comments":[{"id":1951,"issue_id":"lettatoolsselector-one2a","author":"root","text":"Synced from Beads: lettatoolsselector-1jsz\n\n---\nHuly Issue: LTSEL-370","created_at":"2026-01-02T03:28:49Z"}]}
{"id":"lettatoolsselector-oohz3","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:06:48.683715705Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:49.052864651Z","closed_at":"2026-01-02T03:06:49.052864651Z","close_reason":"Closed","comments":[{"id":1568,"issue_id":"lettatoolsselector-oohz3","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T03:06:48Z"}]}
{"id":"lettatoolsselector-ooj74","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:32.704946068Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:33.456482839Z","closed_at":"2026-01-02T20:55:33.456482839Z","close_reason":"Closed","comments":[{"id":4156,"issue_id":"lettatoolsselector-ooj74","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T20:55:33Z"}]}
{"id":"lettatoolsselector-ook8","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:16.97956273Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:17.314316625Z","closed_at":"2026-01-02T02:35:17.314316625Z","close_reason":"Closed","comments":[{"id":1348,"issue_id":"lettatoolsselector-ook8","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T02:35:17Z"}]}
{"id":"lettatoolsselector-op3q","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:05:04.460978383Z","updated_at":"2025-12-30T04:11:55.726448556Z","comments":[{"id":858,"issue_id":"lettatoolsselector-op3q","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-100","created_at":"2025-12-29T21:05:04Z"}]}
{"id":"lettatoolsselector-opbhf","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:26:49.408628569Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:26:49.981083216Z","closed_at":"2026-01-02T17:26:49.981083216Z","close_reason":"Closed","comments":[{"id":3746,"issue_id":"lettatoolsselector-opbhf","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T17:26:49Z"}]}
{"id":"lettatoolsselector-opqlr","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:39:50.651849484Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:51.128720478Z","closed_at":"2026-01-02T19:39:51.128720478Z","close_reason":"Closed"}
{"id":"lettatoolsselector-opzv","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:23:10.069212616Z","updated_at":"2025-12-29T21:33:27.967061078Z","closed_at":"2025-12-29T21:33:27.967061078Z","close_reason":"Duplicate","comments":[{"id":453,"issue_id":"lettatoolsselector-opzv","author":"root","text":"Synced from Beads: lettatoolsselector-au5\n\n---\nHuly Issue: LTSEL-178","created_at":"2025-12-29T20:23:10Z"}]}
{"id":"lettatoolsselector-oq1so","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:00:03.900937171Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:00:04.548707511Z","closed_at":"2026-01-02T12:00:04.548707511Z","close_reason":"Closed","comments":[{"id":3272,"issue_id":"lettatoolsselector-oq1so","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T12:00:04Z"}]}
{"id":"lettatoolsselector-oqifw","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:54.434752449Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:55.051958239Z","closed_at":"2026-01-02T17:50:55.051958239Z","close_reason":"Closed","comments":[{"id":3789,"issue_id":"lettatoolsselector-oqifw","author":"root","text":"Synced from Huly: LTSEL-36","created_at":"2026-01-02T17:50:54Z"}]}
{"id":"lettatoolsselector-or7a8","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:01.122656417Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:01.765617971Z","closed_at":"2026-01-02T09:21:01.765617971Z","close_reason":"Closed","comments":[{"id":2935,"issue_id":"lettatoolsselector-or7a8","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T09:21:01Z"}]}
{"id":"lettatoolsselector-or81i","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:03:54.92894336Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:55.463119857Z","closed_at":"2026-01-02T08:03:55.463119857Z","close_reason":"Closed","comments":[{"id":2825,"issue_id":"lettatoolsselector-or81i","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T08:03:55Z"}]}
{"id":"lettatoolsselector-orfvq","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:48:45.600950012Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:46.204399028Z","closed_at":"2026-01-02T03:48:46.204399028Z","close_reason":"Closed","comments":[{"id":2338,"issue_id":"lettatoolsselector-orfvq","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T03:48:45Z"}]}
{"id":"lettatoolsselector-orxyh","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:25:16.342209929Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:25:16.804855147Z","closed_at":"2026-01-02T19:25:16.804855147Z","close_reason":"Closed"}
{"id":"lettatoolsselector-os2oo","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:29:30.732605107Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:31.137940586Z","closed_at":"2026-01-02T17:29:31.137940586Z","close_reason":"Closed"}
{"id":"lettatoolsselector-os4ez","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:56:21.485849002Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:56:22.017743307Z","closed_at":"2026-01-02T12:56:22.017743307Z","close_reason":"Closed","comments":[{"id":3318,"issue_id":"lettatoolsselector-os4ez","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T12:56:21Z"}]}
{"id":"lettatoolsselector-osqh9","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:50:49.471290155Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:50:50.30572371Z","closed_at":"2026-01-02T21:50:50.30572371Z","close_reason":"Closed","comments":[{"id":4269,"issue_id":"lettatoolsselector-osqh9","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T21:50:49Z"}]}
{"id":"lettatoolsselector-otf4n","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:20.909856453Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:22.645609955Z","closed_at":"2026-01-02T17:25:22.645609955Z","close_reason":"Closed","comments":[{"id":3728,"issue_id":"lettatoolsselector-otf4n","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T17:25:22Z"}]}
{"id":"lettatoolsselector-otht6","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T13:36:49.75020956Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:50.277351814Z","closed_at":"2026-01-02T13:36:50.277351814Z","close_reason":"Closed","comments":[{"id":3364,"issue_id":"lettatoolsselector-otht6","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T13:36:50Z"}]}
{"id":"lettatoolsselector-otio4","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:23:58.368916575Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:23:59.066577064Z","closed_at":"2026-01-02T21:23:59.066577064Z","close_reason":"Closed","comments":[{"id":4213,"issue_id":"lettatoolsselector-otio4","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T21:23:58Z"}]}
{"id":"lettatoolsselector-ou6wo","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:41:07.921087942Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:08.371003748Z","closed_at":"2026-01-02T04:41:08.371003748Z","close_reason":"Closed","comments":[{"id":2442,"issue_id":"lettatoolsselector-ou6wo","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T04:41:08Z"}]}
{"id":"lettatoolsselector-ou7o","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:40.600412016Z","updated_at":"2025-12-29T21:33:25.972446677Z","closed_at":"2025-12-29T21:33:25.972446677Z","close_reason":"Duplicate","comments":[{"id":555,"issue_id":"lettatoolsselector-ou7o","author":"root","text":"Synced from Beads: lettatoolsselector-au5\n\n---\nHuly Issue: LTSEL-178","created_at":"2025-12-29T20:30:40Z"}]}
{"id":"lettatoolsselector-ouj57","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:20:47.48607742Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:20:48.098267839Z","closed_at":"2026-01-02T20:20:48.098267839Z","close_reason":"Closed","comments":[{"id":4085,"issue_id":"lettatoolsselector-ouj57","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T20:20:47Z"}]}
{"id":"lettatoolsselector-ouoca","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:02.387564223Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:02.982277926Z","closed_at":"2026-01-02T11:34:02.982277926Z","close_reason":"Closed","comments":[{"id":3218,"issue_id":"lettatoolsselector-ouoca","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T11:34:02Z"}]}
{"id":"lettatoolsselector-ouz2p","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:10:11.986753226Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:10:12.549211785Z","closed_at":"2026-01-02T16:10:12.549211785Z","close_reason":"Closed","comments":[{"id":3636,"issue_id":"lettatoolsselector-ouz2p","author":"root","text":"Synced from Huly: LTSEL-47","created_at":"2026-01-02T16:10:12Z"}]}
{"id":"lettatoolsselector-ov4o","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:24.145331707Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:24.493998557Z","closed_at":"2026-01-02T02:19:24.493998557Z","close_reason":"Closed","comments":[{"id":1270,"issue_id":"lettatoolsselector-ov4o","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T02:19:24Z"}]}
{"id":"lettatoolsselector-ov7i7","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:50:46.807612773Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:50:47.306874049Z","closed_at":"2026-01-02T21:50:47.306874049Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ovaqo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:29.677028092Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:29.677028092Z","comments":[{"id":2035,"issue_id":"lettatoolsselector-ovaqo","author":"root","text":"Synced from Beads: lettatoolsselector-tdnw\n\n---\nHuly Issue: LTSEL-280","created_at":"2026-01-02T03:29:29Z"}]}
{"id":"lettatoolsselector-ovkzi","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:23:27.923454059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:28.490385476Z","closed_at":"2026-01-02T15:23:28.490385476Z","close_reason":"Closed","comments":[{"id":3570,"issue_id":"lettatoolsselector-ovkzi","author":"root","text":"Synced from Huly: LTSEL-231","created_at":"2026-01-02T15:23:28Z"}]}
{"id":"lettatoolsselector-ovucl","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:29.536839097Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:30.170427015Z","closed_at":"2026-01-02T08:02:30.170427015Z","close_reason":"Closed","comments":[{"id":2806,"issue_id":"lettatoolsselector-ovucl","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T08:02:29Z"}]}
{"id":"lettatoolsselector-ow3ls","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T13:36:53.681951505Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:54.052703022Z","closed_at":"2026-01-02T13:36:54.052703022Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ow8ai","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:09.325726307Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:09.325726307Z","comments":[{"id":1861,"issue_id":"lettatoolsselector-ow8ai","author":"root","text":"Synced from Beads: lettatoolsselector-dm1b\n\n---\nHuly Issue: LTSEL-489","created_at":"2026-01-02T03:28:09Z"}]}
{"id":"lettatoolsselector-owl3n","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:42:08.218283087Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:42:08.641036677Z","closed_at":"2026-01-02T09:42:08.641036677Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ox2hh","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:03:12.960992011Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:13.444235764Z","closed_at":"2026-01-02T20:03:13.444235764Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ox6pv","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:56:48.054282055Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:56:48.661658235Z","closed_at":"2026-01-02T17:56:48.661658235Z","close_reason":"Closed","comments":[{"id":3815,"issue_id":"lettatoolsselector-ox6pv","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T17:56:48Z"}]}
{"id":"lettatoolsselector-oxwic","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:23:26.833586154Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:23:27.559313712Z","closed_at":"2026-01-02T21:23:27.559313712Z","close_reason":"Closed","comments":[{"id":4208,"issue_id":"lettatoolsselector-oxwic","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T21:23:27Z"}]}
{"id":"lettatoolsselector-oy5qm","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:47.048540697Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:47.50383031Z","closed_at":"2026-01-02T03:46:47.50383031Z","close_reason":"Closed","comments":[{"id":2286,"issue_id":"lettatoolsselector-oy5qm","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T03:46:47Z"}]}
{"id":"lettatoolsselector-oyhvn","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:19:42.535033886Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:19:43.085880923Z","closed_at":"2026-01-02T20:19:43.085880923Z","close_reason":"Closed"}
{"id":"lettatoolsselector-oyjk","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:10.740388658Z","updated_at":"2025-12-29T21:33:30.689692733Z","closed_at":"2025-12-29T21:33:30.689692733Z","close_reason":"Duplicate","comments":[{"id":345,"issue_id":"lettatoolsselector-oyjk","author":"root","text":"Synced from Beads: lettatoolsselector-vnx\n\n---\nHuly Issue: LTSEL-207","created_at":"2025-12-29T20:13:11Z"}]}
{"id":"lettatoolsselector-oyq42","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:26:32.127400176Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:26:32.546728422Z","closed_at":"2026-01-02T21:26:32.546728422Z","close_reason":"Closed"}
{"id":"lettatoolsselector-oz1l","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:45.813078076Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:46.170402983Z","closed_at":"2026-01-02T01:24:46.170402983Z","close_reason":"Closed","comments":[{"id":1212,"issue_id":"lettatoolsselector-oz1l","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T01:24:46Z"}]}
{"id":"lettatoolsselector-oz1qt","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:39:31.86710893Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:32.255100858Z","closed_at":"2026-01-02T13:39:32.255100858Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ozqdv","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:14.636746454Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:15.090418855Z","closed_at":"2026-01-02T04:20:15.090418855Z","close_reason":"Closed","comments":[{"id":2369,"issue_id":"lettatoolsselector-ozqdv","author":"root","text":"## Problem\n\nIf no webhook runs for an agent, tools accumulate without being pruned. Need a background job to enforce limits.\n\n## Solution\n\nCreate a scheduled job that scans all agents and prunes any that exceed MAX_TOTAL_TOOLS.\n\n## Acceptance Criteria\n\n- [ ] Cron or Celery beat job runs daily\n- [ ] Fetches all agents from Letta API\n- [ ] For each agent exceeding limit, prune to MAX_TOTAL_TOOLS\n- [ ] Respects protected tools list\n- [ ] Logs all pruning actions with agent ID and tool names\n- [ ] Emits metrics for monitoring (agents_pruned, tools_removed)\n\n## Technical Notes\n\n- Run at low-traffic time (e.g., 3 AM)\n- Use batch operations for efficiency\n- Consider rate limiting to avoid overwhelming Letta API\n\n---\nHuly Issue: LTSEL-8","created_at":"2026-01-02T04:20:14Z"}]}
{"id":"lettatoolsselector-oztef","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:54.175261279Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:54.175261279Z","comments":[{"id":2222,"issue_id":"lettatoolsselector-oztef","author":"root","text":"Synced from Huly: LTSEL-608","created_at":"2026-01-02T03:43:54Z"}]}
{"id":"lettatoolsselector-p0e0v","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:29:04.868979998Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:29:05.462910112Z","closed_at":"2026-01-02T19:29:05.462910112Z","close_reason":"Closed","comments":[{"id":3965,"issue_id":"lettatoolsselector-p0e0v","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T19:29:05Z"}]}
{"id":"lettatoolsselector-p0efb","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:58:22.987316639Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:58:23.525941439Z","closed_at":"2026-01-02T12:58:23.525941439Z","close_reason":"Closed","comments":[{"id":3329,"issue_id":"lettatoolsselector-p0efb","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T12:58:23Z"}]}
{"id":"lettatoolsselector-p0iez","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:30:13.325050437Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:13.717845324Z","closed_at":"2026-01-02T03:30:13.717845324Z","close_reason":"Closed"}
{"id":"lettatoolsselector-p0iqv","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:14.939261237Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:15.33469091Z","closed_at":"2026-01-02T06:00:15.33469091Z","close_reason":"Closed"}
{"id":"lettatoolsselector-p1cp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:30:12.595986934Z","updated_at":"2025-12-30T02:03:57.965280435Z","comments":[{"id":1052,"issue_id":"lettatoolsselector-p1cp","author":"root","text":"Synced from Beads: lettatoolsselector-9fs\n\n---\nHuly Issue: LTSEL-58","created_at":"2025-12-29T21:30:12Z"}]}
{"id":"lettatoolsselector-p20go","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:20.533068612Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:21.241567791Z","closed_at":"2026-01-02T22:39:21.241567791Z","close_reason":"Closed","comments":[{"id":4341,"issue_id":"lettatoolsselector-p20go","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T22:39:21Z"}]}
{"id":"lettatoolsselector-p2465","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:01:37.962710816Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:01:38.647523066Z","closed_at":"2026-01-02T21:01:38.647523066Z","close_reason":"Closed","comments":[{"id":4184,"issue_id":"lettatoolsselector-p2465","author":"root","text":"Synced from Huly: LTSEL-231","created_at":"2026-01-02T21:01:38Z"}]}
{"id":"lettatoolsselector-p26xt","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:41:43.960239828Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:44.566844118Z","closed_at":"2026-01-02T20:41:44.566844118Z","close_reason":"Closed","comments":[{"id":4137,"issue_id":"lettatoolsselector-p26xt","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T20:41:44Z"}]}
{"id":"lettatoolsselector-p2810","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T13:39:13.212334818Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:13.900790251Z","closed_at":"2026-01-02T13:39:13.900790251Z","close_reason":"Closed","comments":[{"id":3370,"issue_id":"lettatoolsselector-p2810","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T13:39:13Z"}]}
{"id":"lettatoolsselector-p29d","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:16:56.135688129Z","updated_at":"2025-12-30T01:52:34.139446431Z","comments":[{"id":980,"issue_id":"lettatoolsselector-p29d","author":"root","text":"Synced from Beads: lettatoolsselector-0qv\n\n---\nHuly Issue: LTSEL-93","created_at":"2025-12-29T21:16:56Z"}]}
{"id":"lettatoolsselector-p2ek","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:24:51.121015951Z","updated_at":"2025-12-30T01:59:32.43594446Z","comments":[{"id":1029,"issue_id":"lettatoolsselector-p2ek","author":"root","text":"Synced from Beads: lettatoolsselector-4dj\n\n---\nHuly Issue: LTSEL-68","created_at":"2025-12-29T21:24:51Z"}]}
{"id":"lettatoolsselector-p2fbi","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:41:12.639693851Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:41:13.384101182Z","closed_at":"2026-01-02T22:41:13.384101182Z","close_reason":"Closed","comments":[{"id":4357,"issue_id":"lettatoolsselector-p2fbi","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T22:41:13Z"}]}
{"id":"lettatoolsselector-p2grm","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:04:59.552592608Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:05:00.288504807Z","closed_at":"2026-01-02T20:05:00.288504807Z","close_reason":"Closed","comments":[{"id":4051,"issue_id":"lettatoolsselector-p2grm","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T20:05:00Z"}]}
{"id":"lettatoolsselector-p2lsy","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:15.890220493Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:16.321554415Z","closed_at":"2026-01-02T03:47:16.321554415Z","close_reason":"Closed","comments":[{"id":2313,"issue_id":"lettatoolsselector-p2lsy","author":"root","text":"Synced from Beads: lettatoolsselector-sxk\n\n---\nHuly Issue: LTSEL-30","created_at":"2026-01-02T03:47:16Z"}]}
{"id":"lettatoolsselector-p2ofr","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:13.559005728Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:14.074799336Z","closed_at":"2026-01-02T06:37:14.074799336Z","close_reason":"Closed","comments":[{"id":2634,"issue_id":"lettatoolsselector-p2ofr","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T06:37:13Z"}]}
{"id":"lettatoolsselector-p2she","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:58:45.605086691Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:46.13102525Z","closed_at":"2026-01-02T09:58:46.13102525Z","close_reason":"Closed","comments":[{"id":3066,"issue_id":"lettatoolsselector-p2she","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T09:58:45Z"}]}
{"id":"lettatoolsselector-p35xb","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:00:33.627329596Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:00:34.329973808Z","closed_at":"2026-01-02T15:00:34.329973808Z","close_reason":"Closed","comments":[{"id":3516,"issue_id":"lettatoolsselector-p35xb","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T15:00:34Z"}]}
{"id":"lettatoolsselector-p3bqj","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:53:44.504042806Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:53:45.068965763Z","closed_at":"2026-01-02T12:53:45.068965763Z","close_reason":"Closed","comments":[{"id":3299,"issue_id":"lettatoolsselector-p3bqj","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T12:53:44Z"}]}
{"id":"lettatoolsselector-p3ss1","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:40:42.595621918Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:40:43.072231184Z","closed_at":"2026-01-02T19:40:43.072231184Z","close_reason":"Closed"}
{"id":"lettatoolsselector-p4u17","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:58:33.33577713Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:58:33.998381531Z","closed_at":"2026-01-02T20:58:33.998381531Z","close_reason":"Closed","comments":[{"id":4176,"issue_id":"lettatoolsselector-p4u17","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T20:58:33Z"}]}
{"id":"lettatoolsselector-p4x2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:05:05.317800769Z","updated_at":"2025-12-30T04:14:11.282175276Z","comments":[{"id":859,"issue_id":"lettatoolsselector-p4x2","author":"root","text":"Synced from Beads: lettatoolsselector-jnc\n\n---\nHuly Issue: LTSEL-104","created_at":"2025-12-29T21:05:05Z"}]}
{"id":"lettatoolsselector-p58nx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:37.050862041Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:37.050862041Z","comments":[{"id":2052,"issue_id":"lettatoolsselector-p58nx","author":"root","text":"Synced from Beads: lettatoolsselector-rdyd\n\n---\nHuly Issue: LTSEL-263","created_at":"2026-01-02T03:29:37Z"}]}
{"id":"lettatoolsselector-p5fm3","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:37.200250937Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:37.746675978Z","closed_at":"2026-01-02T14:29:37.746675978Z","close_reason":"Closed","comments":[{"id":3448,"issue_id":"lettatoolsselector-p5fm3","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T14:29:37Z"}]}
{"id":"lettatoolsselector-p5gw0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:57.503897778Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:57.503897778Z","comments":[{"id":1968,"issue_id":"lettatoolsselector-p5gw0","author":"root","text":"Synced from Beads: lettatoolsselector-0vsp\n\n---\nHuly Issue: LTSEL-349","created_at":"2026-01-02T03:28:57Z"}]}
{"id":"lettatoolsselector-p5jr","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:20.825021659Z","updated_at":"2025-12-29T21:33:23.374721956Z","closed_at":"2025-12-29T21:33:23.374721956Z","close_reason":"Duplicate","comments":[{"id":662,"issue_id":"lettatoolsselector-p5jr","author":"root","text":"Synced from Beads: lettatoolsselector-t4d\n\n---\nHuly Issue: LTSEL-146","created_at":"2025-12-29T20:42:21Z"}]}
{"id":"lettatoolsselector-p60wr","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:45:29.37445978Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:45:30.015627553Z","closed_at":"2026-01-02T15:45:30.015627553Z","close_reason":"Closed","comments":[{"id":3585,"issue_id":"lettatoolsselector-p60wr","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T15:45:29Z"}]}
{"id":"lettatoolsselector-p63p3","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:24.850401294Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:25.348058675Z","closed_at":"2026-01-02T06:00:25.348058675Z","close_reason":"Closed","comments":[{"id":2539,"issue_id":"lettatoolsselector-p63p3","author":"root","text":"Synced from Huly: LTSEL-49","created_at":"2026-01-02T06:00:25Z"}]}
{"id":"lettatoolsselector-p679a","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:40:15.503472717Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:15.796480556Z","closed_at":"2026-01-02T04:40:15.796480556Z","close_reason":"Closed"}
{"id":"lettatoolsselector-p6tg5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:12.257898095Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:12.257898095Z","comments":[{"id":1999,"issue_id":"lettatoolsselector-p6tg5","author":"root","text":"Synced from Beads: lettatoolsselector-06do\n\n---\nHuly Issue: LTSEL-316","created_at":"2026-01-02T03:29:12Z"}]}
{"id":"lettatoolsselector-p6uf","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T01:25:03.730168644Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:04.035295652Z","closed_at":"2026-01-02T01:25:04.035295652Z","close_reason":"Closed"}
{"id":"lettatoolsselector-p6vft","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:55:46.561413581Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:47.080399529Z","closed_at":"2026-01-02T08:55:47.080399529Z","close_reason":"Closed","comments":[{"id":2903,"issue_id":"lettatoolsselector-p6vft","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T08:55:46Z"}]}
{"id":"lettatoolsselector-p6yhy","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:27:11.556178134Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:27:12.129557267Z","closed_at":"2026-01-02T17:27:12.129557267Z","close_reason":"Closed","comments":[{"id":3748,"issue_id":"lettatoolsselector-p6yhy","author":"root","text":"Synced from Huly: LTSEL-219","created_at":"2026-01-02T17:27:11Z"}]}
{"id":"lettatoolsselector-p7c4p","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:17.463238954Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:17.885681792Z","closed_at":"2026-01-02T04:20:17.885681792Z","close_reason":"Closed","comments":[{"id":2373,"issue_id":"lettatoolsselector-p7c4p","author":"root","text":"Synced from Beads: lettatoolsselector-388\n\n---\nHuly Issue: LTSEL-31","created_at":"2026-01-02T04:20:17Z"}]}
{"id":"lettatoolsselector-p80i1","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:51:03.331274892Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:03.921406817Z","closed_at":"2026-01-02T18:51:03.921406817Z","close_reason":"Closed","comments":[{"id":3894,"issue_id":"lettatoolsselector-p80i1","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T18:51:03Z"}]}
{"id":"lettatoolsselector-p80kx","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:03.752714143Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:04.349114317Z","closed_at":"2026-01-02T09:21:04.349114317Z","close_reason":"Closed","comments":[{"id":2937,"issue_id":"lettatoolsselector-p80kx","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T09:21:04Z"}]}
{"id":"lettatoolsselector-p83fi","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:37.706433344Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:38.313847164Z","closed_at":"2026-01-02T09:54:38.313847164Z","close_reason":"Closed","comments":[{"id":3032,"issue_id":"lettatoolsselector-p83fi","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T09:54:38Z"}]}
{"id":"lettatoolsselector-p84wg","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:01:03.219504511Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:01:03.908452406Z","closed_at":"2026-01-02T21:01:03.908452406Z","close_reason":"Closed","comments":[{"id":4179,"issue_id":"lettatoolsselector-p84wg","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T21:01:03Z"}]}
{"id":"lettatoolsselector-p8i69","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:39.291239596Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:39.291239596Z","comments":[{"id":2244,"issue_id":"lettatoolsselector-p8i69","author":"root","text":"Synced from Beads: lettatoolsselector-koep\n\n---\nHuly Issue: LTSEL-534","created_at":"2026-01-02T03:44:39Z"}]}
{"id":"lettatoolsselector-p8tgp","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:30.241185855Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:30.775389457Z","closed_at":"2026-01-02T07:42:30.775389457Z","close_reason":"Closed","comments":[{"id":2748,"issue_id":"lettatoolsselector-p8tgp","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T07:42:30Z"}]}
{"id":"lettatoolsselector-p8zr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:18:34.916774725Z","updated_at":"2025-12-30T04:12:13.215072434Z","comments":[{"id":991,"issue_id":"lettatoolsselector-p8zr","author":"root","text":"Synced from Beads: lettatoolsselector-563\n\n---\nHuly Issue: LTSEL-79","created_at":"2025-12-29T21:18:35Z"}]}
{"id":"lettatoolsselector-p931s","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:31:00.771631909Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:31:01.218411083Z","closed_at":"2026-01-02T21:31:01.218411083Z","close_reason":"Closed"}
{"id":"lettatoolsselector-pah","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:06:35.982425134Z","updated_at":"2025-12-29T21:33:44.882055942Z","closed_at":"2025-12-29T21:33:44.882055942Z","close_reason":"Duplicate","comments":[{"id":281,"issue_id":"lettatoolsselector-pah","author":"root","text":"Synced from Beads: lettatoolsselector-dsf\n\n---\nHuly Issue: LTSEL-132","created_at":"2025-12-29T20:06:36Z"}]}
{"id":"lettatoolsselector-pb9br","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:14.5468417Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:14.5468417Z","comments":[{"id":1873,"issue_id":"lettatoolsselector-pb9br","author":"root","text":"Synced from Beads: lettatoolsselector-9irc\n\n---\nHuly Issue: LTSEL-477","created_at":"2026-01-02T03:28:14Z"}]}
{"id":"lettatoolsselector-pbns4","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:23.406236681Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:24.098229204Z","closed_at":"2026-01-02T08:02:24.098229204Z","close_reason":"Closed","comments":[{"id":2803,"issue_id":"lettatoolsselector-pbns4","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T08:02:23Z"}]}
{"id":"lettatoolsselector-pbos5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:23.954432644Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:23.954432644Z","comments":[{"id":2022,"issue_id":"lettatoolsselector-pbos5","author":"root","text":"Synced from Beads: lettatoolsselector-w4kg\n\n---\nHuly Issue: LTSEL-293","created_at":"2026-01-02T03:29:24Z"}]}
{"id":"lettatoolsselector-pbw66","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:24.860415484Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:24.860415484Z","comments":[{"id":2024,"issue_id":"lettatoolsselector-pbw66","author":"root","text":"Synced from Beads: lettatoolsselector-qsb0\n\n---\nHuly Issue: LTSEL-291","created_at":"2026-01-02T03:29:25Z"}]}
{"id":"lettatoolsselector-pc3i","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:37:03.851859594Z","updated_at":"2025-12-30T02:40:56.444955889Z","comments":[{"id":1075,"issue_id":"lettatoolsselector-pc3i","author":"root","text":"Synced from Beads: lettatoolsselector-9fs\n\n---\nHuly Issue: LTSEL-58","created_at":"2025-12-29T21:37:04Z"}]}
{"id":"lettatoolsselector-pc890","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:35.954374836Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:35.954374836Z","comments":[{"id":1922,"issue_id":"lettatoolsselector-pc890","author":"root","text":"Synced from Beads: lettatoolsselector-v3w4\n\n---\nHuly Issue: LTSEL-407","created_at":"2026-01-02T03:28:36Z"}]}
{"id":"lettatoolsselector-pcvah","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:21:10.251583782Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:10.65175546Z","closed_at":"2026-01-02T20:21:10.65175546Z","close_reason":"Closed"}
{"id":"lettatoolsselector-pdtbi","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:43:47.25957317Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:47.72777278Z","closed_at":"2026-01-02T07:43:47.72777278Z","close_reason":"Closed","comments":[{"id":2780,"issue_id":"lettatoolsselector-pdtbi","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T07:43:47Z"}]}
{"id":"lettatoolsselector-peu8h","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:03:16.465863305Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:16.858127286Z","closed_at":"2026-01-02T08:03:16.858127286Z","close_reason":"Closed"}
{"id":"lettatoolsselector-pf12s","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:56.049193608Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:56.693954378Z","closed_at":"2026-01-02T14:05:56.693954378Z","close_reason":"Closed","comments":[{"id":3404,"issue_id":"lettatoolsselector-pf12s","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T14:05:56Z"}]}
{"id":"lettatoolsselector-pf2qo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:05.506272671Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:05.506272671Z","comments":[{"id":1852,"issue_id":"lettatoolsselector-pf2qo","author":"root","text":"Synced from Beads: lettatoolsselector-p978\n\n---\nHuly Issue: LTSEL-498","created_at":"2026-01-02T03:28:05Z"}]}
{"id":"lettatoolsselector-pf77y","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:27.900217519Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:28.942806387Z","closed_at":"2026-01-02T22:39:28.942806387Z","close_reason":"Closed","comments":[{"id":4343,"issue_id":"lettatoolsselector-pf77y","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T22:39:28Z"}]}
{"id":"lettatoolsselector-pfazs","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:26:47.746504329Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:26:48.157632476Z","closed_at":"2026-01-02T19:26:48.157632476Z","close_reason":"Closed"}
{"id":"lettatoolsselector-pfdfm","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:30:41.855776032Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:30:42.28746781Z","closed_at":"2026-01-02T21:30:42.28746781Z","close_reason":"Closed"}
{"id":"lettatoolsselector-pfqz0","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:18:51.565665932Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:52.039773054Z","closed_at":"2026-01-02T06:18:52.039773054Z","close_reason":"Closed","comments":[{"id":2579,"issue_id":"lettatoolsselector-pfqz0","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T06:18:51Z"}]}
{"id":"lettatoolsselector-pg7g","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:16:31.533922872Z","updated_at":"2025-12-29T21:33:29.787703998Z","closed_at":"2025-12-29T21:33:29.787703998Z","close_reason":"Duplicate","comments":[{"id":379,"issue_id":"lettatoolsselector-pg7g","author":"root","text":"Synced from Beads: lettatoolsselector-iji\n\n---\nHuly Issue: LTSEL-191","created_at":"2025-12-29T20:16:31Z"}]}
{"id":"lettatoolsselector-pgjyx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:32.536118523Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:32.536118523Z","comments":[{"id":1776,"issue_id":"lettatoolsselector-pgjyx","author":"root","text":"Synced from Beads: lettatoolsselector-2d06\n\n---\nHuly Issue: LTSEL-600","created_at":"2026-01-02T03:27:32Z"}]}
{"id":"lettatoolsselector-pgsj9","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:42:56.522884071Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:42:57.16264788Z","closed_at":"2026-01-02T09:42:57.16264788Z","close_reason":"Closed","comments":[{"id":3014,"issue_id":"lettatoolsselector-pgsj9","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T09:42:56Z"}]}
{"id":"lettatoolsselector-ph1nt","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:18:15.330088288Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:18:15.924924641Z","closed_at":"2026-01-02T16:18:15.924924641Z","close_reason":"Closed","comments":[{"id":3672,"issue_id":"lettatoolsselector-ph1nt","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T16:18:15Z"}]}
{"id":"lettatoolsselector-ph5jx","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:34:21.68798429Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:34:22.290432498Z","closed_at":"2026-01-02T14:34:22.290432498Z","close_reason":"Closed","comments":[{"id":3473,"issue_id":"lettatoolsselector-ph5jx","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T14:34:22Z"}]}
{"id":"lettatoolsselector-phds","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:10:58.279508185Z","updated_at":"2025-12-30T04:14:24.168726772Z","comments":[{"id":916,"issue_id":"lettatoolsselector-phds","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T21:10:58Z"}]}
{"id":"lettatoolsselector-pih","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","description":"## Problem\nThe `/attach` endpoint calls `fetch_agent_tools()` twice - once at start, and again after pre-attach pruning.\n\n**Location:** `routes/tools.py:371-374, 527-543`\n\n```python\n# Line 371-374 - First fetch\nagent_name, current_agent_tools = await asyncio.gather(\n    _agent_service.fetch_agent_info(agent_id),\n    _tool_manager.fetch_agent_tools(agent_id)\n)\n\n# Line 528 - Redundant re-fetch after pruning\ncurrent_agent_tools = await _tool_manager.fetch_agent_tools(agent_id)\n```\n\n## Impact\n- **Latency:** 100-300ms wasted per attach request (extra Letta API call)\n- **Priority:** HIGH - common operation\n\n## Solution\nModify `perform_tool_pruning()` to return the updated tools list instead of requiring a re-fetch:\n\n```python\n# In tool_manager.py\nasync def perform_tool_pruning(...) -\u003e dict:\n    # ... pruning logic ...\n    return {\n        'success': True,\n        'details': {...},\n        'remaining_tools': remaining_tools  # Add this\n    }\n\n# In routes/tools.py\nprune_result = await _tool_manager.perform_tool_pruning(...)\nif prune_result.get('success'):\n    current_agent_tools = prune_result.get('remaining_tools', [])\n```\n\n## Acceptance Criteria\n- [ ] `perform_tool_pruning()` returns remaining tools\n- [ ] Attach endpoint uses returned tools instead of re-fetching\n- [ ] Only one `fetch_agent_tools()` call per attach request\n- [ ] All unit tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-29T01:49:30.385615524Z","updated_at":"2025-12-29T15:34:13.386981036Z","closed_at":"2025-12-29T15:34:13.386981036Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-pij5h","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:04:37.9185623Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:04:38.531060103Z","closed_at":"2026-01-02T15:04:38.531060103Z","close_reason":"Closed","comments":[{"id":3531,"issue_id":"lettatoolsselector-pij5h","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T15:04:38Z"}]}
{"id":"lettatoolsselector-piz8i","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T19:21:56.905872492Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:21:57.316182696Z","closed_at":"2026-01-02T19:21:57.316182696Z","close_reason":"Closed"}
{"id":"lettatoolsselector-pj0pv","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:34:01.157143679Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:34:01.914253228Z","closed_at":"2026-01-02T21:34:01.914253228Z","close_reason":"Closed","comments":[{"id":4236,"issue_id":"lettatoolsselector-pj0pv","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T21:34:01Z"}]}
{"id":"lettatoolsselector-pk4ud","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:20:19.86943234Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:20:20.436936255Z","closed_at":"2026-01-02T22:20:20.436936255Z","close_reason":"Closed"}
{"id":"lettatoolsselector-pkid2","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:24:33.664254003Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:34.327506866Z","closed_at":"2026-01-02T07:24:34.327506866Z","close_reason":"Closed","comments":[{"id":2726,"issue_id":"lettatoolsselector-pkid2","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T07:24:34Z"}]}
{"id":"lettatoolsselector-pkn76","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:27.024797844Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:27.393229806Z","closed_at":"2026-01-02T07:43:27.393229806Z","close_reason":"Closed"}
{"id":"lettatoolsselector-pl30y","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:20:58.486895878Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:20:59.14869556Z","closed_at":"2026-01-02T09:20:59.14869556Z","close_reason":"Closed","comments":[{"id":2933,"issue_id":"lettatoolsselector-pl30y","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T09:20:58Z"}]}
{"id":"lettatoolsselector-pl7x8","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:57:07.10000093Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:57:07.6753555Z","closed_at":"2026-01-02T17:57:07.6753555Z","close_reason":"Closed","comments":[{"id":3819,"issue_id":"lettatoolsselector-pl7x8","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T17:57:07Z"}]}
{"id":"lettatoolsselector-plt4q","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:46.040712511Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:46.535961094Z","closed_at":"2026-01-02T06:36:46.535961094Z","close_reason":"Closed","comments":[{"id":2608,"issue_id":"lettatoolsselector-plt4q","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T06:36:46Z"}]}
{"id":"lettatoolsselector-pmp","title":"[Refactor] Extract fetch_agent_tools to tool_manager","description":"## Summary\nExtract `fetch_agent_tools` function to `tool_manager.py` to support `_perform_tool_pruning` extraction.\n\n## Current Location\n- `api_server.py:612-630`\n\n## Dependencies\n- Uses `USE_LETTA_SDK`, `get_letta_sdk_client()`, `http_session`, `LETTA_URL`, `HEADERS`\n- All these are already configured via `tool_manager.configure()`\n\n## Implementation\n1. Add `fetch_agent_tools()` to `tool_manager.py`\n2. Update `api_server.py` to delegate to `tool_manager.fetch_agent_tools()`\n3. Add unit tests\n\n## Acceptance Criteria\n- [ ] Function moved to tool_manager.py\n- [ ] api_server.py delegates to tool_manager\n- [ ] Unit tests pass\n- [ ] Integration tests pass\n\n## Parent Issue\nlettatoolsselector-nav","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T20:51:39.444968342Z","updated_at":"2025-12-29T19:03:27.4731106Z","closed_at":"2025-12-29T19:03:27.4731106Z","close_reason":"Already extracted: fetch_agent_tools in tool_manager.py:93"}
{"id":"lettatoolsselector-pmzt","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:38:33.331303103Z","updated_at":"2025-12-29T21:33:24.178431652Z","closed_at":"2025-12-29T21:33:24.178431652Z","close_reason":"Duplicate","comments":[{"id":635,"issue_id":"lettatoolsselector-pmzt","author":"root","text":"Synced from Beads: lettatoolsselector-aru\n\n---\nHuly Issue: LTSEL-160","created_at":"2025-12-29T20:38:33Z"}]}
{"id":"lettatoolsselector-pn14","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:20:34.887052483Z","updated_at":"2025-12-30T01:56:29.168788389Z","comments":[{"id":1007,"issue_id":"lettatoolsselector-pn14","author":"root","text":"Synced from Beads: lettatoolsselector-oij\n\n---\nHuly Issue: LTSEL-86","created_at":"2025-12-29T21:20:35Z"}]}
{"id":"lettatoolsselector-pn24a","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:22:56.476267878Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:56.993465238Z","closed_at":"2026-01-02T09:22:56.993465238Z","close_reason":"Closed","comments":[{"id":2976,"issue_id":"lettatoolsselector-pn24a","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T09:22:56Z"}]}
{"id":"lettatoolsselector-pn6xb","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:18:11.16056785Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:11.607968197Z","closed_at":"2026-01-02T06:18:11.607968197Z","close_reason":"Closed","comments":[{"id":2573,"issue_id":"lettatoolsselector-pn6xb","author":"root","text":"Synced from Huly: LTSEL-243","created_at":"2026-01-02T06:18:11Z"}]}
{"id":"lettatoolsselector-pnew","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:05:06.274867564Z","updated_at":"2025-12-30T04:14:11.551879705Z","comments":[{"id":860,"issue_id":"lettatoolsselector-pnew","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-112","created_at":"2025-12-29T21:05:06Z"}]}
{"id":"lettatoolsselector-pnjec","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:57:26.318901804Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:26.868236267Z","closed_at":"2026-01-02T12:57:26.868236267Z","close_reason":"Closed","comments":[{"id":3327,"issue_id":"lettatoolsselector-pnjec","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T12:57:26Z"}]}
{"id":"lettatoolsselector-pnq6g","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:58.218559895Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:58.794774078Z","closed_at":"2026-01-02T17:50:58.794774078Z","close_reason":"Closed","comments":[{"id":3790,"issue_id":"lettatoolsselector-pnq6g","author":"root","text":"Synced from Huly: LTSEL-33","created_at":"2026-01-02T17:50:58Z"}]}
{"id":"lettatoolsselector-pntzz","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:35:46.462376341Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:35:46.824719314Z","closed_at":"2026-01-02T11:35:46.824719314Z","close_reason":"Closed"}
{"id":"lettatoolsselector-poeg7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:22.042785284Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:22.042785284Z","comments":[{"id":2124,"issue_id":"lettatoolsselector-poeg7","author":"root","text":"Synced from Beads: lettatoolsselector-7q4\n\n---\nHuly Issue: LTSEL-216","created_at":"2026-01-02T03:31:22Z"}]}
{"id":"lettatoolsselector-poyh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:02:36.928923476Z","updated_at":"2025-12-30T04:14:05.758153761Z","comments":[{"id":834,"issue_id":"lettatoolsselector-poyh","author":"root","text":"Synced from Beads: lettatoolsselector-h52\n\n---\nHuly Issue: LTSEL-118","created_at":"2025-12-29T21:02:37Z"}]}
{"id":"lettatoolsselector-pp02m","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:34.374995474Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:34.89476291Z","closed_at":"2026-01-02T09:40:34.89476291Z","close_reason":"Closed","comments":[{"id":2998,"issue_id":"lettatoolsselector-pp02m","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T09:40:34Z"}]}
{"id":"lettatoolsselector-pp32","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:14.281122475Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:14.63547026Z","closed_at":"2026-01-02T01:25:14.63547026Z","close_reason":"Closed","comments":[{"id":1251,"issue_id":"lettatoolsselector-pp32","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T01:25:14Z"}]}
{"id":"lettatoolsselector-pp3mc","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:47.597238041Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:48.031138662Z","closed_at":"2026-01-02T05:40:48.031138662Z","close_reason":"Closed","comments":[{"id":2463,"issue_id":"lettatoolsselector-pp3mc","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T05:40:47Z"}]}
{"id":"lettatoolsselector-pp8","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:07:28.915387991Z","updated_at":"2025-12-29T21:33:44.852339349Z","closed_at":"2025-12-29T21:33:44.852339349Z","close_reason":"Duplicate","comments":[{"id":287,"issue_id":"lettatoolsselector-pp8","author":"root","text":"Synced from Beads: lettatoolsselector-ttt\n\n---\nHuly Issue: LTSEL-119","created_at":"2025-12-29T20:07:29Z"}]}
{"id":"lettatoolsselector-ppg","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.934324694Z","updated_at":"2025-12-29T18:55:58.960199725Z","closed_at":"2025-12-29T18:55:58.960199725Z","close_reason":"Duplicate of closed lettatoolsselector-d0t"}
{"id":"lettatoolsselector-ppydi","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:01:19.281944371Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:01:20.031525575Z","closed_at":"2026-01-02T21:01:20.031525575Z","close_reason":"Closed","comments":[{"id":4182,"issue_id":"lettatoolsselector-ppydi","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T21:01:19Z"}]}
{"id":"lettatoolsselector-pq1cm","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:56.006230046Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:56.477263131Z","closed_at":"2026-01-02T05:40:56.477263131Z","close_reason":"Closed","comments":[{"id":2474,"issue_id":"lettatoolsselector-pq1cm","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T05:40:56Z"}]}
{"id":"lettatoolsselector-pq2em","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:44.09662754Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:44.792318525Z","closed_at":"2026-01-02T22:39:44.792318525Z","close_reason":"Closed","comments":[{"id":4348,"issue_id":"lettatoolsselector-pq2em","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T22:39:44Z"}]}
{"id":"lettatoolsselector-pqtzb","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:23:04.254204296Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:23:04.872768212Z","closed_at":"2026-01-02T21:23:04.872768212Z","close_reason":"Closed","comments":[{"id":4204,"issue_id":"lettatoolsselector-pqtzb","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T21:23:04Z"}]}
{"id":"lettatoolsselector-pr1jk","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:59:27.095372235Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:59:27.750302527Z","closed_at":"2026-01-02T17:59:27.750302527Z","close_reason":"Closed","comments":[{"id":3821,"issue_id":"lettatoolsselector-pr1jk","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T17:59:27Z"}]}
{"id":"lettatoolsselector-pr475","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:21:10.674170105Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:11.274032408Z","closed_at":"2026-01-02T15:21:11.274032408Z","close_reason":"Closed","comments":[{"id":3553,"issue_id":"lettatoolsselector-pr475","author":"root","text":"Synced from Huly: LTSEL-219","created_at":"2026-01-02T15:21:11Z"}]}
{"id":"lettatoolsselector-prkse","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T10:58:31.978283226Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:32.413215547Z","closed_at":"2026-01-02T10:58:32.413215547Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ps349","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:57.987087389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:57.987087389Z","comments":[{"id":1835,"issue_id":"lettatoolsselector-ps349","author":"root","text":"Synced from Beads: lettatoolsselector-zbdc\n\n---\nHuly Issue: LTSEL-518","created_at":"2026-01-02T03:27:58Z"}]}
{"id":"lettatoolsselector-ps8zi","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:26.886319249Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:27.158677178Z","closed_at":"2026-01-02T03:30:27.158677178Z","close_reason":"Closed"}
{"id":"lettatoolsselector-psbe1","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:34:28.209556864Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:28.846855261Z","closed_at":"2026-01-02T11:34:28.846855261Z","close_reason":"Closed","comments":[{"id":3230,"issue_id":"lettatoolsselector-psbe1","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T11:34:28Z"}]}
{"id":"lettatoolsselector-psgm4","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:36.963073958Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:37.505661766Z","closed_at":"2026-01-02T14:05:37.505661766Z","close_reason":"Closed","comments":[{"id":3402,"issue_id":"lettatoolsselector-psgm4","author":"root","text":"Synced from Huly: LTSEL-25","created_at":"2026-01-02T14:05:37Z"}]}
{"id":"lettatoolsselector-psl4u","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:06:30.544254577Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:30.902002224Z","closed_at":"2026-01-02T03:06:30.902002224Z","close_reason":"Closed","comments":[{"id":1554,"issue_id":"lettatoolsselector-psl4u","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T03:06:30Z"}]}
{"id":"lettatoolsselector-psvqs","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:57:05.66668254Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:06.159859417Z","closed_at":"2026-01-02T09:57:06.159859417Z","close_reason":"Closed","comments":[{"id":3051,"issue_id":"lettatoolsselector-psvqs","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T09:57:05Z"}]}
{"id":"lettatoolsselector-pt39r","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:09:45.950346789Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:46.49157818Z","closed_at":"2026-01-02T14:09:46.49157818Z","close_reason":"Closed","comments":[{"id":3424,"issue_id":"lettatoolsselector-pt39r","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T14:09:46Z"}]}
{"id":"lettatoolsselector-puea","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:36:10.927615506Z","updated_at":"2025-12-30T02:40:34.282561525Z","comments":[{"id":1073,"issue_id":"lettatoolsselector-puea","author":"root","text":"Synced from Beads: lettatoolsselector-7dj\n\n---\nHuly Issue: LTSEL-60","created_at":"2025-12-29T21:36:11Z"}]}
{"id":"lettatoolsselector-puew","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:06:45.256139426Z","updated_at":"2025-12-30T04:14:15.188672657Z","comments":[{"id":877,"issue_id":"lettatoolsselector-puew","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-109","created_at":"2025-12-29T21:06:45Z"}]}
{"id":"lettatoolsselector-pugi","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:44.724827694Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:45.068202098Z","closed_at":"2026-01-02T01:08:45.068202098Z","close_reason":"Closed","comments":[{"id":1207,"issue_id":"lettatoolsselector-pugi","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T01:08:44Z"}]}
{"id":"lettatoolsselector-pv84v","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:21:35.309379751Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:35.936710475Z","closed_at":"2026-01-02T20:21:35.936710475Z","close_reason":"Closed","comments":[{"id":4092,"issue_id":"lettatoolsselector-pv84v","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T20:21:35Z"}]}
{"id":"lettatoolsselector-pw2fx","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:21.774832703Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:22.216189128Z","closed_at":"2026-01-02T06:00:22.216189128Z","close_reason":"Closed","comments":[{"id":2535,"issue_id":"lettatoolsselector-pw2fx","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T06:00:22Z"}]}
{"id":"lettatoolsselector-pwkth","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:37:14.105849765Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:37:14.734038666Z","closed_at":"2026-01-02T19:37:14.734038666Z","close_reason":"Closed","comments":[{"id":3970,"issue_id":"lettatoolsselector-pwkth","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T19:37:14Z"}]}
{"id":"lettatoolsselector-pwtta","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:55:44.468274179Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:55:45.469718118Z","closed_at":"2026-01-02T09:55:45.469718118Z","close_reason":"Closed","comments":[{"id":3040,"issue_id":"lettatoolsselector-pwtta","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T09:55:44Z"}]}
{"id":"lettatoolsselector-pxaf8","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:11.214159793Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:11.871218594Z","closed_at":"2026-01-02T13:36:11.871218594Z","close_reason":"Closed","comments":[{"id":3354,"issue_id":"lettatoolsselector-pxaf8","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T13:36:11Z"}]}
{"id":"lettatoolsselector-pxep","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T02:19:59.256054346Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:59.507600491Z","closed_at":"2026-01-02T02:19:59.507600491Z","close_reason":"Closed"}
{"id":"lettatoolsselector-pz07i","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:30.663673981Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:31.193758674Z","closed_at":"2026-01-02T06:36:31.193758674Z","close_reason":"Closed","comments":[{"id":2599,"issue_id":"lettatoolsselector-pz07i","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T06:36:30Z"}]}
{"id":"lettatoolsselector-pz0yv","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:40:20.908486853Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:40:21.544578062Z","closed_at":"2026-01-02T22:40:21.544578062Z","close_reason":"Closed","comments":[{"id":4355,"issue_id":"lettatoolsselector-pz0yv","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T22:40:21Z"}]}
{"id":"lettatoolsselector-pz6x5","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:39:52.98591713Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:39:54.381542173Z","closed_at":"2026-01-02T09:39:54.381542173Z","close_reason":"Closed","comments":[{"id":2980,"issue_id":"lettatoolsselector-pz6x5","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T09:39:54Z"}]}
{"id":"lettatoolsselector-pzo1l","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:43:50.794910926Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:51.270440197Z","closed_at":"2026-01-02T07:43:51.270440197Z","close_reason":"Closed","comments":[{"id":2783,"issue_id":"lettatoolsselector-pzo1l","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T07:43:51Z"}]}
{"id":"lettatoolsselector-q0dqs","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:33.246895353Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:33.624381628Z","closed_at":"2026-01-02T03:06:33.624381628Z","close_reason":"Closed","comments":[{"id":1555,"issue_id":"lettatoolsselector-q0dqs","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T03:06:33Z"}]}
{"id":"lettatoolsselector-q0ldd","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T11:35:49.47940953Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:35:50.10761868Z","closed_at":"2026-01-02T11:35:50.10761868Z","close_reason":"Closed","comments":[{"id":3234,"issue_id":"lettatoolsselector-q0ldd","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T11:35:49Z"}]}
{"id":"lettatoolsselector-q1ds","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:20.181496166Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:20.508909958Z","closed_at":"2026-01-02T01:08:20.508909958Z","close_reason":"Closed","comments":[{"id":1171,"issue_id":"lettatoolsselector-q1ds","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T01:08:20Z"}]}
{"id":"lettatoolsselector-q1g4w","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:04.281000595Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:04.863648416Z","closed_at":"2026-01-02T04:20:04.863648416Z","close_reason":"Closed","comments":[{"id":2356,"issue_id":"lettatoolsselector-q1g4w","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T04:20:04Z"}]}
{"id":"lettatoolsselector-q1uaj","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:44:50.065592733Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:44:50.768477896Z","closed_at":"2026-01-02T20:44:50.768477896Z","close_reason":"Closed","comments":[{"id":4147,"issue_id":"lettatoolsselector-q1uaj","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T20:44:50Z"}]}
{"id":"lettatoolsselector-q2fyn","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:19.811140647Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:20.448828193Z","closed_at":"2026-01-02T08:20:20.448828193Z","close_reason":"Closed","comments":[{"id":2849,"issue_id":"lettatoolsselector-q2fyn","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T08:20:20Z"}]}
{"id":"lettatoolsselector-q2od1","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:20:33.510399684Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:33.891136901Z","closed_at":"2026-01-02T04:20:33.891136901Z","close_reason":"Closed"}
{"id":"lettatoolsselector-q2z2g","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:59:34.577929121Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:59:35.112609156Z","closed_at":"2026-01-02T12:59:35.112609156Z","close_reason":"Closed","comments":[{"id":3337,"issue_id":"lettatoolsselector-q2z2g","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T12:59:34Z"}]}
{"id":"lettatoolsselector-q3fn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:15:19.558465214Z","updated_at":"2025-12-30T01:49:15.46844935Z","comments":[{"id":962,"issue_id":"lettatoolsselector-q3fn","author":"root","text":"Synced from Beads: lettatoolsselector-5na\n\n---\nHuly Issue: LTSEL-82","created_at":"2025-12-29T21:15:19Z"}]}
{"id":"lettatoolsselector-q3mg","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:18.981384755Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:19.352403549Z","closed_at":"2026-01-02T01:08:19.352403549Z","close_reason":"Closed","comments":[{"id":1169,"issue_id":"lettatoolsselector-q3mg","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T01:08:19Z"}]}
{"id":"lettatoolsselector-q3yx8","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T16:13:16.885068449Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:13:17.278616801Z","closed_at":"2026-01-02T16:13:17.278616801Z","close_reason":"Closed"}
{"id":"lettatoolsselector-q45or","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:49.043430466Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:49.532371202Z","closed_at":"2026-01-02T05:40:49.532371202Z","close_reason":"Closed","comments":[{"id":2465,"issue_id":"lettatoolsselector-q45or","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T05:40:49Z"}]}
{"id":"lettatoolsselector-q4840","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:02.536553554Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:02.9614826Z","closed_at":"2026-01-02T03:47:02.9614826Z","close_reason":"Closed","comments":[{"id":2300,"issue_id":"lettatoolsselector-q4840","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T03:47:02Z"}]}
{"id":"lettatoolsselector-q49o1","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:45.666223426Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:45.666223426Z","comments":[{"id":2249,"issue_id":"lettatoolsselector-q49o1","author":"root","text":"Synced from Beads: lettatoolsselector-f8b8\n\n---\nHuly Issue: LTSEL-506","created_at":"2026-01-02T03:44:45Z"}]}
{"id":"lettatoolsselector-q4cc2","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:06:56.571860994Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:06:57.142290588Z","closed_at":"2026-01-02T17:06:57.142290588Z","close_reason":"Closed","comments":[{"id":3718,"issue_id":"lettatoolsselector-q4cc2","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T17:06:56Z"}]}
{"id":"lettatoolsselector-q4f8","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:05.850159571Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:06.226749273Z","closed_at":"2026-01-02T02:19:06.226749273Z","close_reason":"Closed","comments":[{"id":1267,"issue_id":"lettatoolsselector-q4f8","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T02:19:06Z"}]}
{"id":"lettatoolsselector-q4jic","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:03:14.184387927Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:14.876077615Z","closed_at":"2026-01-02T20:03:14.876077615Z","close_reason":"Closed","comments":[{"id":4043,"issue_id":"lettatoolsselector-q4jic","author":"root","text":"Synced from Huly: LTSEL-217","created_at":"2026-01-02T20:03:14Z"}]}
{"id":"lettatoolsselector-q4m32","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:08.481707762Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:08.481707762Z","comments":[{"id":1859,"issue_id":"lettatoolsselector-q4m32","author":"root","text":"Synced from Beads: lettatoolsselector-7it2\n\n---\nHuly Issue: LTSEL-491","created_at":"2026-01-02T03:28:08Z"}]}
{"id":"lettatoolsselector-q55jt","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:24:43.557972722Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:44.06002252Z","closed_at":"2026-01-02T07:24:44.06002252Z","close_reason":"Closed","comments":[{"id":2733,"issue_id":"lettatoolsselector-q55jt","author":"root","text":"Synced from Huly: LTSEL-238","created_at":"2026-01-02T07:24:43Z"}]}
{"id":"lettatoolsselector-q5fv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:08:49.442533989Z","updated_at":"2025-12-30T04:14:19.291885418Z","comments":[{"id":896,"issue_id":"lettatoolsselector-q5fv","author":"root","text":"Synced from Beads: lettatoolsselector-th4\n\n---\nHuly Issue: LTSEL-94","created_at":"2025-12-29T21:08:49Z"}]}
{"id":"lettatoolsselector-q5ib4","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:06:36.614058783Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:06:37.366006442Z","closed_at":"2026-01-02T20:06:37.366006442Z","close_reason":"Closed","comments":[{"id":4058,"issue_id":"lettatoolsselector-q5ib4","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T20:06:37Z"}]}
{"id":"lettatoolsselector-q5m6q","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:15.383890633Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:15.383890633Z","comments":[{"id":1875,"issue_id":"lettatoolsselector-q5m6q","author":"root","text":"Synced from Beads: lettatoolsselector-gy2y\n\n---\nHuly Issue: LTSEL-474","created_at":"2026-01-02T03:28:15Z"}]}
{"id":"lettatoolsselector-q5w2t","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:23:52.211796288Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:23:52.949740852Z","closed_at":"2026-01-02T21:23:52.949740852Z","close_reason":"Closed","comments":[{"id":4212,"issue_id":"lettatoolsselector-q5w2t","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T21:23:52Z"}]}
{"id":"lettatoolsselector-q6l3e","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:56.658417794Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:57.228950301Z","closed_at":"2026-01-02T14:57:57.228950301Z","close_reason":"Closed","comments":[{"id":3498,"issue_id":"lettatoolsselector-q6l3e","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T14:57:56Z"}]}
{"id":"lettatoolsselector-q72hp","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:40.300709339Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:40.300709339Z","comments":[{"id":1794,"issue_id":"lettatoolsselector-q72hp","author":"root","text":"Synced from Beads: lettatoolsselector-hs4b\n\n---\nHuly Issue: LTSEL-582","created_at":"2026-01-02T03:27:40Z"}]}
{"id":"lettatoolsselector-q7bp5","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:07:54.847164703Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:07:55.417754551Z","closed_at":"2026-01-02T17:07:55.417754551Z","close_reason":"Closed","comments":[{"id":3727,"issue_id":"lettatoolsselector-q7bp5","author":"root","text":"Synced from Huly: LTSEL-225","created_at":"2026-01-02T17:07:55Z"}]}
{"id":"lettatoolsselector-q80a4","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:56:35.110859152Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:56:35.524445819Z","closed_at":"2026-01-02T18:56:35.524445819Z","close_reason":"Closed"}
{"id":"lettatoolsselector-q8l5x","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:09:05.305661705Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:05.900737958Z","closed_at":"2026-01-02T14:09:05.900737958Z","close_reason":"Closed","comments":[{"id":3418,"issue_id":"lettatoolsselector-q8l5x","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T14:09:05Z"}]}
{"id":"lettatoolsselector-q9sxa","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:55:59.264280218Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:59.904938719Z","closed_at":"2026-01-02T08:55:59.904938719Z","close_reason":"Closed","comments":[{"id":2905,"issue_id":"lettatoolsselector-q9sxa","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T08:55:59Z"}]}
{"id":"lettatoolsselector-qabzf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:18.503201683Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:18.503201683Z","comments":[{"id":1882,"issue_id":"lettatoolsselector-qabzf","author":"root","text":"Synced from Beads: lettatoolsselector-hcns\n\n---\nHuly Issue: LTSEL-465","created_at":"2026-01-02T03:28:18Z"}]}
{"id":"lettatoolsselector-qaj83","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:17:59.148232482Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:17:59.820874201Z","closed_at":"2026-01-02T16:17:59.820874201Z","close_reason":"Closed","comments":[{"id":3669,"issue_id":"lettatoolsselector-qaj83","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T16:17:59Z"}]}
{"id":"lettatoolsselector-qalm","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:03.384954564Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:03.843439862Z","closed_at":"2026-01-02T02:35:03.843439862Z","close_reason":"Closed","comments":[{"id":1325,"issue_id":"lettatoolsselector-qalm","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T02:35:03Z"}]}
{"id":"lettatoolsselector-qaxh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:50.579306889Z","updated_at":"2025-12-30T02:08:34.030105789Z","comments":[{"id":929,"issue_id":"lettatoolsselector-qaxh","author":"root","text":"Synced from Beads: lettatoolsselector-w50\n\n---\nHuly Issue: LTSEL-97","created_at":"2025-12-29T21:11:51Z"}]}
{"id":"lettatoolsselector-qb1v3","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:35.002955491Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:35.528824708Z","closed_at":"2026-01-02T11:33:35.528824708Z","close_reason":"Closed","comments":[{"id":3208,"issue_id":"lettatoolsselector-qb1v3","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T11:33:35Z"}]}
{"id":"lettatoolsselector-qb21n","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:54.349229651Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:54.739237594Z","closed_at":"2026-01-02T03:06:54.739237594Z","close_reason":"Closed","comments":[{"id":1575,"issue_id":"lettatoolsselector-qb21n","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T03:06:54Z"}]}
{"id":"lettatoolsselector-qb6kg","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:22:13.781374158Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:22:14.410199579Z","closed_at":"2026-01-02T08:22:14.410199579Z","close_reason":"Closed","comments":[{"id":2870,"issue_id":"lettatoolsselector-qb6kg","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T08:22:14Z"}]}
{"id":"lettatoolsselector-qbgt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:49.28185399Z","updated_at":"2025-12-30T02:08:24.651403652Z","comments":[{"id":928,"issue_id":"lettatoolsselector-qbgt","author":"root","text":"Synced from Beads: lettatoolsselector-0ye\n\n---\nHuly Issue: LTSEL-91","created_at":"2025-12-29T21:11:49Z"}]}
{"id":"lettatoolsselector-qbihm","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:18.004609808Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:18.607679496Z","closed_at":"2026-01-02T12:54:18.607679496Z","close_reason":"Closed","comments":[{"id":3311,"issue_id":"lettatoolsselector-qbihm","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T12:54:18Z"}]}
{"id":"lettatoolsselector-qbl7h","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:14.893514709Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:15.323098567Z","closed_at":"2026-01-02T03:47:15.323098567Z","close_reason":"Closed","comments":[{"id":2312,"issue_id":"lettatoolsselector-qbl7h","author":"root","text":"Synced from Beads: lettatoolsselector-388\n\n---\nHuly Issue: LTSEL-31","created_at":"2026-01-02T03:47:15Z"}]}
{"id":"lettatoolsselector-qbpz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:02:06.963559947Z","updated_at":"2025-12-30T04:11:48.672193724Z","comments":[{"id":827,"issue_id":"lettatoolsselector-qbpz","author":"root","text":"Synced from Beads: lettatoolsselector-mwe\n\n---\nHuly Issue: LTSEL-108","created_at":"2025-12-29T21:02:07Z"}]}
{"id":"lettatoolsselector-qbw4n","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:25:19.137025338Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:25:19.725420882Z","closed_at":"2026-01-02T15:25:19.725420882Z","close_reason":"Closed","comments":[{"id":3574,"issue_id":"lettatoolsselector-qbw4n","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T15:25:19Z"}]}
{"id":"lettatoolsselector-qcyq8","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:43.429808001Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:43.788723968Z","closed_at":"2026-01-02T03:06:43.788723968Z","close_reason":"Closed","comments":[{"id":1563,"issue_id":"lettatoolsselector-qcyq8","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T03:06:43Z"}]}
{"id":"lettatoolsselector-qd8nk","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:31.086214675Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:31.879260372Z","closed_at":"2026-01-02T22:39:31.879260372Z","close_reason":"Closed","comments":[{"id":4344,"issue_id":"lettatoolsselector-qd8nk","author":"root","text":"Synced from Huly: LTSEL-41","created_at":"2026-01-02T22:39:31Z"}]}
{"id":"lettatoolsselector-qdtl","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:13.798924041Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:14.205678657Z","closed_at":"2026-01-02T03:06:14.205678657Z","close_reason":"Closed","comments":[{"id":1525,"issue_id":"lettatoolsselector-qdtl","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T03:06:14Z"}]}
{"id":"lettatoolsselector-qf2y2","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:39:11.179661083Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:11.804887684Z","closed_at":"2026-01-02T13:39:11.804887684Z","close_reason":"Closed","comments":[{"id":3369,"issue_id":"lettatoolsselector-qf2y2","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T13:39:11Z"}]}
{"id":"lettatoolsselector-qfpf","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:36.979753352Z","updated_at":"2025-12-29T21:33:28.09059852Z","closed_at":"2025-12-29T21:33:28.09059852Z","close_reason":"Duplicate","comments":[{"id":448,"issue_id":"lettatoolsselector-qfpf","author":"root","text":"Synced from Beads: lettatoolsselector-l5y\n\n---\nHuly Issue: LTSEL-179","created_at":"2025-12-29T20:22:37Z"}]}
{"id":"lettatoolsselector-qg4f4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:24.413172503Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:24.413172503Z","comments":[{"id":2023,"issue_id":"lettatoolsselector-qg4f4","author":"root","text":"Synced from Beads: lettatoolsselector-f5yg\n\n---\nHuly Issue: LTSEL-292","created_at":"2026-01-02T03:29:24Z"}]}
{"id":"lettatoolsselector-qgcsv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:49.894509929Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:49.894509929Z","comments":[{"id":1952,"issue_id":"lettatoolsselector-qgcsv","author":"root","text":"Synced from Beads: lettatoolsselector-dam0\n\n---\nHuly Issue: LTSEL-369","created_at":"2026-01-02T03:28:50Z"}]}
{"id":"lettatoolsselector-qgt","title":"[Refactor] Master: api_server.py modularization roadmap","description":"Master tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n| Phase | Issue | Description | Priority |\n|-------|-------|-------------|----------|\n| 0 | lettatoolsselector-642 | Test coverage for critical paths | P1 |\n| 1 | lettatoolsselector-869 | Extract data models and types | P2 |\n| 2 | lettatoolsselector-nav | Extract ToolManager service | P2 |\n| 3 | lettatoolsselector-4w9 | Extract SearchService | P2 |\n| 4 | lettatoolsselector-lan | Extract AgentService | P2 |\n| 5 | lettatoolsselector-sbw | Extract route blueprints | P2 |\n| 6 | lettatoolsselector-ier | Dependency injection \u0026 app factory | P2 |\n\n## Dependency Graph\n```\nPhase 0 (Tests)\n    \n    \nPhase 1 (Models)\n    \n    \n                        \nPhase 2    Phase 3    Phase 4\n(Tools)    (Search)   (Agent)\n                        \n    \n               \n               \n          Phase 5 (Routes)\n               \n               \n          Phase 6 (DI/Factory)\n```\n\n## Success Metrics\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-28T19:38:55.088312878Z","updated_at":"2025-12-29T19:11:20.606173254Z","closed_at":"2025-12-29T19:11:20.606173254Z","close_reason":"Refactor complete: api_server.py modularized - services extracted, 14 blueprints, app_factory pattern"}
{"id":"lettatoolsselector-qgvv9","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:06:24.216458367Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:06:24.7536108Z","closed_at":"2026-01-02T14:06:24.7536108Z","close_reason":"Closed","comments":[{"id":3410,"issue_id":"lettatoolsselector-qgvv9","author":"root","text":"Synced from Huly: LTSEL-246","created_at":"2026-01-02T14:06:24Z"}]}
{"id":"lettatoolsselector-qgwrl","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:11.409370395Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:11.845841816Z","closed_at":"2026-01-02T03:47:11.845841816Z","close_reason":"Closed","comments":[{"id":2309,"issue_id":"lettatoolsselector-qgwrl","author":"root","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2026-01-02T03:47:11Z"}]}
{"id":"lettatoolsselector-qh54e","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:34:25.649417436Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:26.282802168Z","closed_at":"2026-01-02T11:34:26.282802168Z","close_reason":"Closed","comments":[{"id":3229,"issue_id":"lettatoolsselector-qh54e","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T11:34:26Z"}]}
{"id":"lettatoolsselector-qh7b7","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:13.288960584Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:13.779424422Z","closed_at":"2026-01-02T06:00:13.779424422Z","close_reason":"Closed","comments":[{"id":2529,"issue_id":"lettatoolsselector-qh7b7","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T06:00:13Z"}]}
{"id":"lettatoolsselector-qhc47","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:27:30.911686971Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:27:31.614321547Z","closed_at":"2026-01-02T17:27:31.614321547Z","close_reason":"Closed","comments":[{"id":3753,"issue_id":"lettatoolsselector-qhc47","author":"root","text":"Synced from Huly: LTSEL-222","created_at":"2026-01-02T17:27:31Z"}]}
{"id":"lettatoolsselector-qhckh","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:03:09.874000825Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:03:10.256380717Z","closed_at":"2026-01-02T15:03:10.256380717Z","close_reason":"Closed"}
{"id":"lettatoolsselector-qi8w2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:20.46562618Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:20.46562618Z","comments":[{"id":2234,"issue_id":"lettatoolsselector-qi8w2","author":"root","text":"Synced from Beads: lettatoolsselector-vnck\n\n---\nHuly Issue: LTSEL-558","created_at":"2026-01-02T03:44:20Z"}]}
{"id":"lettatoolsselector-qi9f","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:35:28.969306066Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:29.184925939Z","closed_at":"2026-01-02T02:35:29.184925939Z","close_reason":"Closed"}
{"id":"lettatoolsselector-qja1j","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:42.471863014Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:43.128343563Z","closed_at":"2026-01-02T08:55:43.128343563Z","close_reason":"Closed","comments":[{"id":2902,"issue_id":"lettatoolsselector-qja1j","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T08:55:42Z"}]}
{"id":"lettatoolsselector-qjl2","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T01:08:38.46927471Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:38.8321826Z","closed_at":"2026-01-02T01:08:38.8321826Z","close_reason":"Closed","comments":[{"id":1200,"issue_id":"lettatoolsselector-qjl2","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T01:08:38Z"}]}
{"id":"lettatoolsselector-qjsfl","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:37:15.946441122Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:16.465158479Z","closed_at":"2026-01-02T06:37:16.465158479Z","close_reason":"Closed","comments":[{"id":2637,"issue_id":"lettatoolsselector-qjsfl","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T06:37:16Z"}]}
{"id":"lettatoolsselector-qk3pv","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:51:08.779792812Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:51:09.462351728Z","closed_at":"2026-01-02T21:51:09.462351728Z","close_reason":"Closed","comments":[{"id":4272,"issue_id":"lettatoolsselector-qk3pv","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T21:51:09Z"}]}
{"id":"lettatoolsselector-qk8k4","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:41:06.716368146Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:07.144970707Z","closed_at":"2026-01-02T04:41:07.144970707Z","close_reason":"Closed","comments":[{"id":2441,"issue_id":"lettatoolsselector-qk8k4","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T04:41:06Z"}]}
{"id":"lettatoolsselector-qkam0","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:58.932919052Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:59.359937717Z","closed_at":"2026-01-02T03:46:59.359937717Z","close_reason":"Closed","comments":[{"id":2295,"issue_id":"lettatoolsselector-qkam0","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T03:46:59Z"}]}
{"id":"lettatoolsselector-qkn9n","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:52.90843474Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:53.439301755Z","closed_at":"2026-01-02T10:57:53.439301755Z","close_reason":"Closed","comments":[{"id":3124,"issue_id":"lettatoolsselector-qkn9n","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T10:57:53Z"}]}
{"id":"lettatoolsselector-qlezd","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:00:49.901786283Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:00:50.259730755Z","closed_at":"2026-01-02T12:00:50.259730755Z","close_reason":"Closed"}
{"id":"lettatoolsselector-qm3iv","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:20.971001124Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:21.577409873Z","closed_at":"2026-01-02T09:21:21.577409873Z","close_reason":"Closed","comments":[{"id":2944,"issue_id":"lettatoolsselector-qm3iv","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T09:21:21Z"}]}
{"id":"lettatoolsselector-qmha8","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T19:39:43.951468952Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:44.365165155Z","closed_at":"2026-01-02T19:39:44.365165155Z","close_reason":"Closed"}
{"id":"lettatoolsselector-qn44","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:57.235626078Z","updated_at":"2025-12-29T21:33:43.784816114Z","closed_at":"2025-12-29T21:33:43.784816114Z","close_reason":"Duplicate","comments":[{"id":428,"issue_id":"lettatoolsselector-qn44","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:20:57Z"}]}
{"id":"lettatoolsselector-qn9b1","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:36:25.14035203Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:25.667008933Z","closed_at":"2026-01-02T11:36:25.667008933Z","close_reason":"Closed","comments":[{"id":3239,"issue_id":"lettatoolsselector-qn9b1","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T11:36:25Z"}]}
{"id":"lettatoolsselector-qpi1","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:08:41.428475484Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:41.647882106Z","closed_at":"2026-01-02T01:08:41.647882106Z","close_reason":"Closed"}
{"id":"lettatoolsselector-qpuxb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:29.70624788Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:29.70624788Z","comments":[{"id":1769,"issue_id":"lettatoolsselector-qpuxb","author":"root","text":"Synced from Beads: lettatoolsselector-xly4\n\n---\nHuly Issue: LTSEL-612","created_at":"2026-01-02T03:27:29Z"}]}
{"id":"lettatoolsselector-qpvl6","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:02:49.122955954Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:49.443389745Z","closed_at":"2026-01-02T07:02:49.443389745Z","close_reason":"Closed"}
{"id":"lettatoolsselector-qpzlj","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:30.082946659Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:30.74491066Z","closed_at":"2026-01-02T17:25:30.74491066Z","close_reason":"Closed","comments":[{"id":3730,"issue_id":"lettatoolsselector-qpzlj","author":"root","text":"Synced from Huly: LTSEL-47","created_at":"2026-01-02T17:25:30Z"}]}
{"id":"lettatoolsselector-qq7z","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:49:51.93777504Z","updated_at":"2025-12-29T21:33:22.344278436Z","closed_at":"2025-12-29T21:33:22.344278436Z","close_reason":"Duplicate","comments":[{"id":714,"issue_id":"lettatoolsselector-qq7z","author":"root","text":"Synced from Beads: lettatoolsselector-egp\n\n---\nHuly Issue: LTSEL-141","created_at":"2025-12-29T20:49:52Z"}]}
{"id":"lettatoolsselector-qq8lt","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:44.231271672Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:44.717478844Z","closed_at":"2026-01-02T06:36:44.717478844Z","close_reason":"Closed","comments":[{"id":2606,"issue_id":"lettatoolsselector-qq8lt","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T06:36:44Z"}]}
{"id":"lettatoolsselector-qqtb9","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T05:40:59.095171823Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:59.56295318Z","closed_at":"2026-01-02T05:40:59.56295318Z","close_reason":"Closed","comments":[{"id":2478,"issue_id":"lettatoolsselector-qqtb9","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T05:40:59Z"}]}
{"id":"lettatoolsselector-qquy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:18:04.902911771Z","updated_at":"2025-12-30T01:53:51.959501378Z","comments":[{"id":986,"issue_id":"lettatoolsselector-qquy","author":"root","text":"Synced from Beads: lettatoolsselector-563\n\n---\nHuly Issue: LTSEL-79","created_at":"2025-12-29T21:18:05Z"}]}
{"id":"lettatoolsselector-qqzlo","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:12:00.81101727Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:12:01.403292949Z","closed_at":"2026-01-02T16:12:01.403292949Z","close_reason":"Closed","comments":[{"id":3650,"issue_id":"lettatoolsselector-qqzlo","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T16:12:01Z"}]}
{"id":"lettatoolsselector-qrjho","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:55.79403012Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:56.335879539Z","closed_at":"2026-01-02T05:59:56.335879539Z","close_reason":"Closed","comments":[{"id":2512,"issue_id":"lettatoolsselector-qrjho","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T05:59:56Z"}]}
{"id":"lettatoolsselector-qs0x9","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:03.334506146Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:03.661182643Z","closed_at":"2026-01-02T05:41:03.661182643Z","close_reason":"Closed"}
{"id":"lettatoolsselector-qs1wd","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:24:38.33477864Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:24:39.077156036Z","closed_at":"2026-01-02T18:24:39.077156036Z","close_reason":"Closed","comments":[{"id":3830,"issue_id":"lettatoolsselector-qs1wd","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T18:24:38Z"}]}
{"id":"lettatoolsselector-qs5ze","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:36:05.567014367Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:05.952047342Z","closed_at":"2026-01-02T11:36:05.952047342Z","close_reason":"Closed"}
{"id":"lettatoolsselector-qsb0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:28:10.795315212Z","updated_at":"2025-12-30T02:02:27.800980852Z","comments":[{"id":1044,"issue_id":"lettatoolsselector-qsb0","author":"root","text":"Synced from Beads: lettatoolsselector-1kj\n\n---\nHuly Issue: LTSEL-76","created_at":"2025-12-29T21:28:11Z"}]}
{"id":"lettatoolsselector-qscw","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:37.955198361Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:38.282106352Z","closed_at":"2026-01-02T01:08:38.282106352Z","close_reason":"Closed","comments":[{"id":1199,"issue_id":"lettatoolsselector-qscw","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T01:08:38Z"}]}
{"id":"lettatoolsselector-qsunr","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:41:19.613311162Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:41:20.345453678Z","closed_at":"2026-01-02T22:41:20.345453678Z","close_reason":"Closed","comments":[{"id":4358,"issue_id":"lettatoolsselector-qsunr","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T22:41:20Z"}]}
{"id":"lettatoolsselector-qt28b","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:33:47.197729607Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:33:47.935106212Z","closed_at":"2026-01-02T14:33:47.935106212Z","close_reason":"Closed","comments":[{"id":3471,"issue_id":"lettatoolsselector-qt28b","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T14:33:47Z"}]}
{"id":"lettatoolsselector-qtpes","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:19.565461162Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:20.021942809Z","closed_at":"2026-01-02T04:20:20.021942809Z","close_reason":"Closed","comments":[{"id":2376,"issue_id":"lettatoolsselector-qtpes","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T04:20:19Z"}]}
{"id":"lettatoolsselector-qtyk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:30.305035163Z","updated_at":"2025-12-30T01:57:46.203403968Z","comments":[{"id":1019,"issue_id":"lettatoolsselector-qtyk","author":"root","text":"Synced from Beads: lettatoolsselector-ct9\n\n---\nHuly Issue: LTSEL-75","created_at":"2025-12-29T21:22:30Z"}]}
{"id":"lettatoolsselector-qudhw","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:44.281672152Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:44.281672152Z","comments":[{"id":2202,"issue_id":"lettatoolsselector-qudhw","author":"root","text":"Synced from Beads: lettatoolsselector-7gkz\n\n---\nHuly Issue: LTSEL-653","created_at":"2026-01-02T03:43:44Z"}]}
{"id":"lettatoolsselector-quhhn","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:35.344494025Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:35.907839422Z","closed_at":"2026-01-02T15:46:35.907839422Z","close_reason":"Closed","comments":[{"id":3603,"issue_id":"lettatoolsselector-quhhn","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T15:46:35Z"}]}
{"id":"lettatoolsselector-qv0jr","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:21:04.717315639Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:05.290290665Z","closed_at":"2026-01-02T15:21:05.290290665Z","close_reason":"Closed","comments":[{"id":3552,"issue_id":"lettatoolsselector-qv0jr","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T15:21:05Z"}]}
{"id":"lettatoolsselector-qvfgs","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:57:26.43036134Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:26.986057703Z","closed_at":"2026-01-02T09:57:26.986057703Z","close_reason":"Closed","comments":[{"id":3056,"issue_id":"lettatoolsselector-qvfgs","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T09:57:26Z"}]}
{"id":"lettatoolsselector-qvk9","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T01:25:02.565428094Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:02.923556479Z","closed_at":"2026-01-02T01:25:02.923556479Z","close_reason":"Closed","comments":[{"id":1240,"issue_id":"lettatoolsselector-qvk9","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T01:25:02Z"}]}
{"id":"lettatoolsselector-qvkrq","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:06.307571273Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:06.307571273Z","comments":[{"id":2265,"issue_id":"lettatoolsselector-qvkrq","author":"root","text":"Synced from Beads: lettatoolsselector-2lnf\n\n---\nHuly Issue: LTSEL-427","created_at":"2026-01-02T03:45:06Z"}]}
{"id":"lettatoolsselector-qvncs","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:45:24.765821567Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:45:26.682026928Z","closed_at":"2026-01-02T15:45:26.682026928Z","close_reason":"Closed","comments":[{"id":3584,"issue_id":"lettatoolsselector-qvncs","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T15:45:26Z"}]}
{"id":"lettatoolsselector-qvsac","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:41:47.281837479Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:47.902090803Z","closed_at":"2026-01-02T20:41:47.902090803Z","close_reason":"Closed","comments":[{"id":4138,"issue_id":"lettatoolsselector-qvsac","author":"root","text":"Synced from Huly: LTSEL-240","created_at":"2026-01-02T20:41:47Z"}]}
{"id":"lettatoolsselector-qwl30","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:11:19.625548011Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:11:20.285596849Z","closed_at":"2026-01-02T16:11:20.285596849Z","close_reason":"Closed","comments":[{"id":3641,"issue_id":"lettatoolsselector-qwl30","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T16:11:20Z"}]}
{"id":"lettatoolsselector-qygih","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:03.096837774Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:03.096837774Z","comments":[{"id":2262,"issue_id":"lettatoolsselector-qygih","author":"root","text":"Synced from Beads: lettatoolsselector-g70n\n\n---\nHuly Issue: LTSEL-444","created_at":"2026-01-02T03:45:03Z"}]}
{"id":"lettatoolsselector-qzv3v","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:10.123601324Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:10.649137808Z","closed_at":"2026-01-02T11:59:10.649137808Z","close_reason":"Closed","comments":[{"id":3260,"issue_id":"lettatoolsselector-qzv3v","author":"root","text":"Synced from Huly: LTSEL-40","created_at":"2026-01-02T11:59:10Z"}]}
{"id":"lettatoolsselector-r042u","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:13:54.755942607Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:13:55.150530835Z","closed_at":"2026-01-02T16:13:55.150530835Z","close_reason":"Closed"}
{"id":"lettatoolsselector-r0a5v","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:33:01.665402453Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:33:02.284975881Z","closed_at":"2026-01-02T18:33:02.284975881Z","close_reason":"Closed","comments":[{"id":3874,"issue_id":"lettatoolsselector-r0a5v","author":"root","text":"Synced from Huly: LTSEL-236","created_at":"2026-01-02T18:33:02Z"}]}
{"id":"lettatoolsselector-r0hk3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:06.776367275Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:06.776367275Z","comments":[{"id":1988,"issue_id":"lettatoolsselector-r0hk3","author":"root","text":"Synced from Beads: lettatoolsselector-lm5m\n\n---\nHuly Issue: LTSEL-328","created_at":"2026-01-02T03:29:07Z"}]}
{"id":"lettatoolsselector-r0m2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:21:10.508380171Z","updated_at":"2025-12-30T01:56:35.896466232Z","comments":[{"id":1009,"issue_id":"lettatoolsselector-r0m2","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-82","created_at":"2025-12-29T21:21:10Z"}]}
{"id":"lettatoolsselector-r14s1","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:57:08.267281978Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:08.780380534Z","closed_at":"2026-01-02T08:57:08.780380534Z","close_reason":"Closed","comments":[{"id":2917,"issue_id":"lettatoolsselector-r14s1","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T08:57:08Z"}]}
{"id":"lettatoolsselector-r18rd","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:41:15.71215389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:16.025778111Z","closed_at":"2026-01-02T05:41:16.025778111Z","close_reason":"Closed"}
{"id":"lettatoolsselector-r19cd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:48.557546449Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:48.557546449Z","comments":[{"id":1949,"issue_id":"lettatoolsselector-r19cd","author":"root","text":"Synced from Beads: lettatoolsselector-0x87\n\n---\nHuly Issue: LTSEL-372","created_at":"2026-01-02T03:28:48Z"}]}
{"id":"lettatoolsselector-r1mjl","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:40:45.764678031Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:40:46.375395385Z","closed_at":"2026-01-02T19:40:46.375395385Z","close_reason":"Closed","comments":[{"id":3994,"issue_id":"lettatoolsselector-r1mjl","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T19:40:46Z"}]}
{"id":"lettatoolsselector-r1pz0","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:02:45.658426649Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:46.159853558Z","closed_at":"2026-01-02T07:02:46.159853558Z","close_reason":"Closed","comments":[{"id":2666,"issue_id":"lettatoolsselector-r1pz0","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T07:02:45Z"}]}
{"id":"lettatoolsselector-r1q0n","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:02:44.22345071Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:44.866849605Z","closed_at":"2026-01-02T08:02:44.866849605Z","close_reason":"Closed","comments":[{"id":2813,"issue_id":"lettatoolsselector-r1q0n","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T08:02:44Z"}]}
{"id":"lettatoolsselector-r1xz8","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:07:27.008769709Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:07:27.7748999Z","closed_at":"2026-01-02T17:07:27.7748999Z","close_reason":"Closed","comments":[{"id":3723,"issue_id":"lettatoolsselector-r1xz8","author":"root","text":"Synced from Huly: LTSEL-48","created_at":"2026-01-02T17:07:27Z"}]}
{"id":"lettatoolsselector-r264x","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:23.823663655Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:23.823663655Z","comments":[{"id":1894,"issue_id":"lettatoolsselector-r264x","author":"root","text":"Synced from Beads: lettatoolsselector-xy18\n\n---\nHuly Issue: LTSEL-445","created_at":"2026-01-02T03:28:24Z"}]}
{"id":"lettatoolsselector-r26ws","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:02.466041946Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:03.006385673Z","closed_at":"2026-01-02T06:00:03.006385673Z","close_reason":"Closed","comments":[{"id":2520,"issue_id":"lettatoolsselector-r26ws","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T06:00:02Z"}]}
{"id":"lettatoolsselector-r3byh","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:24.094348613Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:24.603651766Z","closed_at":"2026-01-02T11:09:24.603651766Z","close_reason":"Closed","comments":[{"id":3172,"issue_id":"lettatoolsselector-r3byh","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T11:09:24Z"}]}
{"id":"lettatoolsselector-r3rvs","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:37:21.855580111Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:37:22.483435026Z","closed_at":"2026-01-02T14:37:22.483435026Z","close_reason":"Closed","comments":[{"id":3485,"issue_id":"lettatoolsselector-r3rvs","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T14:37:22Z"}]}
{"id":"lettatoolsselector-r4h9w","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:30:54.011926342Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:30:54.44116495Z","closed_at":"2026-01-02T21:30:54.44116495Z","close_reason":"Closed"}
{"id":"lettatoolsselector-r4kz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:01.520355902Z","updated_at":"2025-12-30T02:06:18.566653086Z","comments":[{"id":919,"issue_id":"lettatoolsselector-r4kz","author":"root","text":"Synced from Beads: lettatoolsselector-mnp\n\n---\nHuly Issue: LTSEL-99","created_at":"2025-12-29T21:11:01Z"}]}
{"id":"lettatoolsselector-r4mrr","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:34:18.348922773Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:18.923335673Z","closed_at":"2026-01-02T11:34:18.923335673Z","close_reason":"Closed","comments":[{"id":3226,"issue_id":"lettatoolsselector-r4mrr","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T11:34:18Z"}]}
{"id":"lettatoolsselector-r4qy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:08:22.201428124Z","updated_at":"2025-12-30T04:14:18.168937746Z","comments":[{"id":891,"issue_id":"lettatoolsselector-r4qy","author":"root","text":"Synced from Beads: lettatoolsselector-th4\n\n---\nHuly Issue: LTSEL-94","created_at":"2025-12-29T21:08:22Z"}]}
{"id":"lettatoolsselector-r56p0","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:55:35.081661848Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:55:35.79498218Z","closed_at":"2026-01-02T21:55:35.79498218Z","close_reason":"Closed","comments":[{"id":4281,"issue_id":"lettatoolsselector-r56p0","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T21:55:35Z"}]}
{"id":"lettatoolsselector-r596r","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:38.822304753Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:39.432633493Z","closed_at":"2026-01-02T20:38:39.432633493Z","close_reason":"Closed","comments":[{"id":4118,"issue_id":"lettatoolsselector-r596r","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T20:38:39Z"}]}
{"id":"lettatoolsselector-r5ab3","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:05.742892998Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:06.284073893Z","closed_at":"2026-01-02T10:36:06.284073893Z","close_reason":"Closed","comments":[{"id":3081,"issue_id":"lettatoolsselector-r5ab3","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T10:36:06Z"}]}
{"id":"lettatoolsselector-r5e4y","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:03:11.005631325Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:11.325702918Z","closed_at":"2026-01-02T07:03:11.325702918Z","close_reason":"Closed"}
{"id":"lettatoolsselector-r72ld","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:46.491315129Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:46.941709797Z","closed_at":"2026-01-02T03:29:46.941709797Z","close_reason":"Closed","comments":[{"id":2066,"issue_id":"lettatoolsselector-r72ld","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T03:29:46Z"}]}
{"id":"lettatoolsselector-r7ms5","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:47:24.956906711Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:25.381738174Z","closed_at":"2026-01-02T03:47:25.381738174Z","close_reason":"Closed","comments":[{"id":2318,"issue_id":"lettatoolsselector-r7ms5","author":"root","text":"Synced from Huly: LTSEL-229","created_at":"2026-01-02T03:47:25Z"}]}
{"id":"lettatoolsselector-r7oj","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:40.05122795Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:40.392510227Z","closed_at":"2026-01-02T02:19:40.392510227Z","close_reason":"Closed","comments":[{"id":1284,"issue_id":"lettatoolsselector-r7oj","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T02:19:40Z"}]}
{"id":"lettatoolsselector-r81s","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:20:40.116614303Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:40.462055317Z","closed_at":"2026-01-02T02:20:40.462055317Z","close_reason":"Closed","comments":[{"id":1311,"issue_id":"lettatoolsselector-r81s","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T02:20:40Z"}]}
{"id":"lettatoolsselector-r87oc","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:27:28.821129363Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:27:29.403203532Z","closed_at":"2026-01-02T17:27:29.403203532Z","close_reason":"Closed","comments":[{"id":3752,"issue_id":"lettatoolsselector-r87oc","author":"root","text":"Synced from Huly: LTSEL-226","created_at":"2026-01-02T17:27:29Z"}]}
{"id":"lettatoolsselector-r8ci2","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:29.079134601Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:30.369422256Z","closed_at":"2026-01-02T06:36:30.369422256Z","close_reason":"Closed","comments":[{"id":2598,"issue_id":"lettatoolsselector-r8ci2","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T06:36:30Z"}]}
{"id":"lettatoolsselector-r91fr","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:18:19.744030588Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:18:20.161177482Z","closed_at":"2026-01-02T22:18:20.161177482Z","close_reason":"Closed"}
{"id":"lettatoolsselector-r92kz","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:38.010719865Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:38.010719865Z","comments":[{"id":2054,"issue_id":"lettatoolsselector-r92kz","author":"root","text":"Synced from Beads: lettatoolsselector-au4n\n\n---\nHuly Issue: LTSEL-261","created_at":"2026-01-02T03:29:38Z"}]}
{"id":"lettatoolsselector-r9fcc","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:21.297494222Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:22.19328316Z","closed_at":"2026-01-02T21:48:22.19328316Z","close_reason":"Closed","comments":[{"id":4259,"issue_id":"lettatoolsselector-r9fcc","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T21:48:21Z"}]}
{"id":"lettatoolsselector-r9y0c","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:41:07.766794824Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:08.104635981Z","closed_at":"2026-01-02T09:41:08.104635981Z","close_reason":"Closed"}
{"id":"lettatoolsselector-r9y4n","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:12:17.503523312Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:12:18.085770281Z","closed_at":"2026-01-02T16:12:18.085770281Z","close_reason":"Closed","comments":[{"id":3651,"issue_id":"lettatoolsselector-r9y4n","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T16:12:17Z"}]}
{"id":"lettatoolsselector-rbazs","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:31.154216796Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:31.154216796Z","comments":[{"id":2278,"issue_id":"lettatoolsselector-rbazs","author":"root","text":"Synced from Huly: LTSEL-373","created_at":"2026-01-02T03:45:31Z"}]}
{"id":"lettatoolsselector-rbm0h","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:20:43.755053042Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:20:44.261730963Z","closed_at":"2026-01-02T22:20:44.261730963Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rc7x2","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:42:32.576423397Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:42:33.060848703Z","closed_at":"2026-01-02T20:42:33.060848703Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rc9gu","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:51:44.329775737Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:51:44.886884367Z","closed_at":"2026-01-02T15:51:44.886884367Z","close_reason":"Closed","comments":[{"id":3627,"issue_id":"lettatoolsselector-rc9gu","author":"root","text":"Synced from Huly: LTSEL-238","created_at":"2026-01-02T15:51:44Z"}]}
{"id":"lettatoolsselector-rcb58","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:31.253033709Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:31.684119246Z","closed_at":"2026-01-02T04:39:31.684119246Z","close_reason":"Closed","comments":[{"id":2418,"issue_id":"lettatoolsselector-rcb58","author":"root","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2026-01-02T04:39:31Z"}]}
{"id":"lettatoolsselector-rcgiy","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:31:00.259253225Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:31:00.829676768Z","closed_at":"2026-01-02T14:31:00.829676768Z","close_reason":"Closed","comments":[{"id":3459,"issue_id":"lettatoolsselector-rcgiy","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T14:31:00Z"}]}
{"id":"lettatoolsselector-rckhz","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:40:09.918302322Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:10.214289129Z","closed_at":"2026-01-02T04:40:10.214289129Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rcykq","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:27.279754591Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:27.916861976Z","closed_at":"2026-01-02T20:38:27.916861976Z","close_reason":"Closed","comments":[{"id":4114,"issue_id":"lettatoolsselector-rcykq","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T20:38:27Z"}]}
{"id":"lettatoolsselector-rdkqz","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:38:13.820606967Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:38:14.462915245Z","closed_at":"2026-01-02T22:38:14.462915245Z","close_reason":"Closed","comments":[{"id":4338,"issue_id":"lettatoolsselector-rdkqz","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T22:38:14Z"}]}
{"id":"lettatoolsselector-rdt7r","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T13:39:28.711972171Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:29.129026858Z","closed_at":"2026-01-02T13:39:29.129026858Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rdyd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:36:37.189381384Z","updated_at":"2025-12-30T02:40:44.906212211Z","comments":[{"id":1074,"issue_id":"lettatoolsselector-rdyd","author":"root","text":"Synced from Beads: lettatoolsselector-57s\n\n---\nHuly Issue: LTSEL-59","created_at":"2025-12-29T21:36:37Z"}]}
{"id":"lettatoolsselector-re1i","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:19:03.124090168Z","updated_at":"2025-12-30T01:54:52.048031507Z","comments":[{"id":996,"issue_id":"lettatoolsselector-re1i","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-84","created_at":"2025-12-29T21:19:03Z"}]}
{"id":"lettatoolsselector-re4mu","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:30:35.899642097Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:30:36.457158304Z","closed_at":"2026-01-02T14:30:36.457158304Z","close_reason":"Closed","comments":[{"id":3455,"issue_id":"lettatoolsselector-re4mu","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T14:30:36Z"}]}
{"id":"lettatoolsselector-re8ox","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:39:42.852428324Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:43.252360435Z","closed_at":"2026-01-02T20:39:43.252360435Z","close_reason":"Closed"}
{"id":"lettatoolsselector-re92k","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:19.356722923Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:19.356722923Z","comments":[{"id":1884,"issue_id":"lettatoolsselector-re92k","author":"root","text":"Synced from Beads: lettatoolsselector-n1p2\n\n---\nHuly Issue: LTSEL-460","created_at":"2026-01-02T03:28:19Z"}]}
{"id":"lettatoolsselector-recxo","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:23.107618714Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:23.609211516Z","closed_at":"2026-01-02T05:41:23.609211516Z","close_reason":"Closed","comments":[{"id":2496,"issue_id":"lettatoolsselector-recxo","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T05:41:23Z"}]}
{"id":"lettatoolsselector-repf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:55.639777132Z","updated_at":"2025-12-30T04:14:22.265903197Z","comments":[{"id":909,"issue_id":"lettatoolsselector-repf","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-101","created_at":"2025-12-29T21:09:56Z"}]}
{"id":"lettatoolsselector-rfdy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:28:32.645763892Z","updated_at":"2025-12-30T02:02:36.144765529Z","comments":[{"id":1045,"issue_id":"lettatoolsselector-rfdy","author":"root","text":"Synced from Beads: lettatoolsselector-mhi\n\n---\nHuly Issue: LTSEL-61","created_at":"2025-12-29T21:28:33Z"}]}
{"id":"lettatoolsselector-rg20u","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:29:55.014194698Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:29:55.660100611Z","closed_at":"2026-01-02T17:29:55.660100611Z","close_reason":"Closed","comments":[{"id":3762,"issue_id":"lettatoolsselector-rg20u","author":"root","text":"Synced from Huly: LTSEL-231","created_at":"2026-01-02T17:29:55Z"}]}
{"id":"lettatoolsselector-rg2fw","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:19:55.905822939Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:19:56.406986549Z","closed_at":"2026-01-02T04:19:56.406986549Z","close_reason":"Closed","comments":[{"id":2345,"issue_id":"lettatoolsselector-rg2fw","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T04:19:56Z"}]}
{"id":"lettatoolsselector-rgr9i","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:36:32.456437378Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:33.047709193Z","closed_at":"2026-01-02T11:36:33.047709193Z","close_reason":"Closed","comments":[{"id":3241,"issue_id":"lettatoolsselector-rgr9i","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T11:36:32Z"}]}
{"id":"lettatoolsselector-rgx95","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:34:05.105717415Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:34:05.701982223Z","closed_at":"2026-01-02T17:34:05.701982223Z","close_reason":"Closed","comments":[{"id":3774,"issue_id":"lettatoolsselector-rgx95","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T17:34:05Z"}]}
{"id":"lettatoolsselector-rgxgh","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:58:15.911455824Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:16.538886626Z","closed_at":"2026-01-02T09:58:16.538886626Z","close_reason":"Closed","comments":[{"id":3060,"issue_id":"lettatoolsselector-rgxgh","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T09:58:16Z"}]}
{"id":"lettatoolsselector-rh435","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:13.578527293Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:13.578527293Z","comments":[{"id":1871,"issue_id":"lettatoolsselector-rh435","author":"root","text":"Synced from Beads: lettatoolsselector-efft\n\n---\nHuly Issue: LTSEL-479","created_at":"2026-01-02T03:28:13Z"}]}
{"id":"lettatoolsselector-rhn3t","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:09.151643705Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:09.151643705Z","comments":[{"id":1993,"issue_id":"lettatoolsselector-rhn3t","author":"root","text":"Synced from Beads: lettatoolsselector-pn14\n\n---\nHuly Issue: LTSEL-323","created_at":"2026-01-02T03:29:09Z"}]}
{"id":"lettatoolsselector-rhws","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:04.59640172Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:04.936268126Z","closed_at":"2026-01-02T02:35:04.936268126Z","close_reason":"Closed","comments":[{"id":1327,"issue_id":"lettatoolsselector-rhws","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T02:35:04Z"}]}
{"id":"lettatoolsselector-ribrt","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:57:04.723334478Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:57:05.396038151Z","closed_at":"2026-01-02T20:57:05.396038151Z","close_reason":"Closed","comments":[{"id":4164,"issue_id":"lettatoolsselector-ribrt","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T20:57:05Z"}]}
{"id":"lettatoolsselector-rij8r","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:55:57.443928345Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:57.850139965Z","closed_at":"2026-01-02T08:55:57.850139965Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rjjh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:13:04.531419094Z","updated_at":"2025-12-30T02:11:38.858266318Z","comments":[{"id":942,"issue_id":"lettatoolsselector-rjjh","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-100","created_at":"2025-12-29T21:13:04Z"}]}
{"id":"lettatoolsselector-rkb52","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:29.990676151Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:31.498020669Z","closed_at":"2026-01-02T11:33:31.498020669Z","close_reason":"Closed","comments":[{"id":3206,"issue_id":"lettatoolsselector-rkb52","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T11:33:31Z"}]}
{"id":"lettatoolsselector-rkrgr","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:43:31.954771287Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:32.433180428Z","closed_at":"2026-01-02T07:43:32.433180428Z","close_reason":"Closed","comments":[{"id":2774,"issue_id":"lettatoolsselector-rkrgr","author":"root","text":"Synced from Huly: LTSEL-221","created_at":"2026-01-02T07:43:32Z"}]}
{"id":"lettatoolsselector-rl3","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:08:51.316053165Z","updated_at":"2025-12-29T21:33:44.685994116Z","closed_at":"2025-12-29T21:33:44.685994116Z","close_reason":"Duplicate","comments":[{"id":299,"issue_id":"lettatoolsselector-rl3","author":"root","text":"Synced from Beads: lettatoolsselector-hmz\n\n---\nHuly Issue: LTSEL-107","created_at":"2025-12-29T20:08:51Z"}]}
{"id":"lettatoolsselector-rlcgc","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:46.991760724Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:59:48.208575783Z","closed_at":"2026-01-02T05:59:48.208575783Z","close_reason":"Closed","comments":[{"id":2502,"issue_id":"lettatoolsselector-rlcgc","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T05:59:48Z"}]}
{"id":"lettatoolsselector-rlif1","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:57:11.595555074Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:12.08891195Z","closed_at":"2026-01-02T08:57:12.08891195Z","close_reason":"Closed","comments":[{"id":2919,"issue_id":"lettatoolsselector-rlif1","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T08:57:11Z"}]}
{"id":"lettatoolsselector-rm5u6","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:10:29.886891576Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:10:30.261846787Z","closed_at":"2026-01-02T11:10:30.261846787Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rm5zr","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:33.093936236Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:33.620910571Z","closed_at":"2026-01-02T11:33:33.620910571Z","close_reason":"Closed","comments":[{"id":3207,"issue_id":"lettatoolsselector-rm5zr","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T11:33:33Z"}]}
{"id":"lettatoolsselector-rmog0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:21.961141585Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:21.961141585Z","comments":[{"id":1890,"issue_id":"lettatoolsselector-rmog0","author":"root","text":"Synced from Beads: lettatoolsselector-xewq\n\n---\nHuly Issue: LTSEL-452","created_at":"2026-01-02T03:28:22Z"}]}
{"id":"lettatoolsselector-rmtsm","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:36:50.036155467Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:36:50.663780997Z","closed_at":"2026-01-02T21:36:50.663780997Z","close_reason":"Closed","comments":[{"id":4240,"issue_id":"lettatoolsselector-rmtsm","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T21:36:50Z"}]}
{"id":"lettatoolsselector-rncbd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:10.657975794Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:10.657975794Z","comments":[{"id":1864,"issue_id":"lettatoolsselector-rncbd","author":"root","text":"Synced from Beads: lettatoolsselector-pgvo\n\n---\nHuly Issue: LTSEL-486","created_at":"2026-01-02T03:28:10Z"}]}
{"id":"lettatoolsselector-rnfi","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:16.441224338Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:16.844752012Z","closed_at":"2026-01-02T01:25:16.844752012Z","close_reason":"Closed","comments":[{"id":1254,"issue_id":"lettatoolsselector-rnfi","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T01:25:16Z"}]}
{"id":"lettatoolsselector-rni1b","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:41:56.47041901Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:57.021311123Z","closed_at":"2026-01-02T09:41:57.021311123Z","close_reason":"Closed","comments":[{"id":3009,"issue_id":"lettatoolsselector-rni1b","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T09:41:56Z"}]}
{"id":"lettatoolsselector-rnly","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:11.105355518Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:11.491272002Z","closed_at":"2026-01-02T01:25:11.491272002Z","close_reason":"Closed","comments":[{"id":1248,"issue_id":"lettatoolsselector-rnly","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T01:25:11Z"}]}
{"id":"lettatoolsselector-rnpw","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:38.00167022Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:38.554105278Z","closed_at":"2026-01-02T02:19:38.554105278Z","close_reason":"Closed","comments":[{"id":1281,"issue_id":"lettatoolsselector-rnpw","author":"root","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2026-01-02T02:19:38Z"}]}
{"id":"lettatoolsselector-ro6o8","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:41:54.239138076Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:54.648824815Z","closed_at":"2026-01-02T20:41:54.648824815Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ropj","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:26.346430787Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:26.708438226Z","closed_at":"2026-01-02T03:06:26.708438226Z","close_reason":"Closed","comments":[{"id":1547,"issue_id":"lettatoolsselector-ropj","author":"root","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2026-01-02T03:06:26Z"}]}
{"id":"lettatoolsselector-rpq1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:15:54.257561469Z","updated_at":"2025-12-30T01:50:51.287628762Z","comments":[{"id":969,"issue_id":"lettatoolsselector-rpq1","author":"root","text":"Synced from Beads: lettatoolsselector-ix0\n\n---\nHuly Issue: LTSEL-90","created_at":"2025-12-29T21:15:54Z"}]}
{"id":"lettatoolsselector-rq0qt","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:13.522752077Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:14.105413092Z","closed_at":"2026-01-02T08:20:14.105413092Z","close_reason":"Closed","comments":[{"id":2844,"issue_id":"lettatoolsselector-rq0qt","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T08:20:13Z"}]}
{"id":"lettatoolsselector-rq6p4","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:55:53.88893651Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:54.264518323Z","closed_at":"2026-01-02T08:55:54.264518323Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rq909","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:20:54.91190632Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:20:55.498386586Z","closed_at":"2026-01-02T09:20:55.498386586Z","close_reason":"Closed","comments":[{"id":2930,"issue_id":"lettatoolsselector-rq909","author":"root","text":"Synced from Huly: LTSEL-46","created_at":"2026-01-02T09:20:55Z"}]}
{"id":"lettatoolsselector-rqdcm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:20.20747056Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:20.20747056Z","comments":[{"id":2014,"issue_id":"lettatoolsselector-rqdcm","author":"root","text":"Synced from Beads: lettatoolsselector-zzom\n\n---\nHuly Issue: LTSEL-301","created_at":"2026-01-02T03:29:20Z"}]}
{"id":"lettatoolsselector-rqhh","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:13:28.953085258Z","updated_at":"2025-12-30T01:46:19.46427798Z","comments":[{"id":946,"issue_id":"lettatoolsselector-rqhh","author":"root","text":"Synced from Beads: lettatoolsselector-mnp\n\n---\nHuly Issue: LTSEL-99","created_at":"2025-12-29T21:13:29Z"}]}
{"id":"lettatoolsselector-rqsd1","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:19:49.149435492Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:19:49.886554654Z","closed_at":"2026-01-02T20:19:49.886554654Z","close_reason":"Closed","comments":[{"id":4084,"issue_id":"lettatoolsselector-rqsd1","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T20:19:49Z"}]}
{"id":"lettatoolsselector-rrl2j","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:00:06.549968267Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:00:07.341985063Z","closed_at":"2026-01-02T19:00:07.341985063Z","close_reason":"Closed","comments":[{"id":3921,"issue_id":"lettatoolsselector-rrl2j","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T19:00:07Z"}]}
{"id":"lettatoolsselector-rrxdg","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:33.846834475Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:34.079870837Z","closed_at":"2026-01-02T03:06:34.079870837Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rsnbu","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:46.862105513Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:47.310001542Z","closed_at":"2026-01-02T05:40:47.310001542Z","close_reason":"Closed","comments":[{"id":2462,"issue_id":"lettatoolsselector-rsnbu","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T05:40:47Z"}]}
{"id":"lettatoolsselector-rsot","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:25:13.720931837Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:14.077003957Z","closed_at":"2026-01-02T01:25:14.077003957Z","close_reason":"Closed","comments":[{"id":1250,"issue_id":"lettatoolsselector-rsot","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T01:25:13Z"}]}
{"id":"lettatoolsselector-rstwg","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:21:54.145847941Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:54.512493095Z","closed_at":"2026-01-02T08:21:54.512493095Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rsuhi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:06.788108127Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:06.788108127Z","comments":[{"id":1855,"issue_id":"lettatoolsselector-rsuhi","author":"root","text":"Synced from Beads: lettatoolsselector-m7cg\n\n---\nHuly Issue: LTSEL-495","created_at":"2026-01-02T03:28:07Z"}]}
{"id":"lettatoolsselector-rt361","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:57:11.962215358Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:12.497776318Z","closed_at":"2026-01-02T12:57:12.497776318Z","close_reason":"Closed","comments":[{"id":3324,"issue_id":"lettatoolsselector-rt361","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T12:57:12Z"}]}
{"id":"lettatoolsselector-ru4h3","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:31.003279891Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:31.540946203Z","closed_at":"2026-01-02T06:00:31.540946203Z","close_reason":"Closed","comments":[{"id":2546,"issue_id":"lettatoolsselector-ru4h3","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T06:00:31Z"}]}
{"id":"lettatoolsselector-ru6e3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:50.410644468Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:50.410644468Z","comments":[{"id":1817,"issue_id":"lettatoolsselector-ru6e3","author":"root","text":"Synced from Beads: lettatoolsselector-jwg7\n\n---\nHuly Issue: LTSEL-543","created_at":"2026-01-02T03:27:50Z"}]}
{"id":"lettatoolsselector-ruer","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:18:23.829433256Z","updated_at":"2025-12-29T21:33:29.045681468Z","closed_at":"2025-12-29T21:33:29.045681468Z","close_reason":"Duplicate","comments":[{"id":401,"issue_id":"lettatoolsselector-ruer","author":"root","text":"Synced from Beads: lettatoolsselector-mfj\n\n---\nHuly Issue: LTSEL-202","created_at":"2025-12-29T20:18:24Z"}]}
{"id":"lettatoolsselector-rvjku","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T13:40:23.059199025Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:40:23.445980555Z","closed_at":"2026-01-02T13:40:23.445980555Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rvjo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:31:48.070281756Z","updated_at":"2025-12-30T02:05:50.278256221Z","comments":[{"id":1061,"issue_id":"lettatoolsselector-rvjo","author":"root","text":"Synced from Beads: lettatoolsselector-9fs\n\n---\nHuly Issue: LTSEL-56","created_at":"2025-12-29T21:31:48Z"}]}
{"id":"lettatoolsselector-rvkxu","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:25:55.698444151Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:25:56.440974244Z","closed_at":"2026-01-02T21:25:56.440974244Z","close_reason":"Closed","comments":[{"id":4219,"issue_id":"lettatoolsselector-rvkxu","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T21:25:56Z"}]}
{"id":"lettatoolsselector-rvx0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:24:06.43774368Z","updated_at":"2025-12-30T01:59:25.369767771Z","comments":[{"id":1028,"issue_id":"lettatoolsselector-rvx0","author":"root","text":"Synced from Beads: lettatoolsselector-leh\n\n---\nHuly Issue: LTSEL-81","created_at":"2025-12-29T21:24:06Z"}]}
{"id":"lettatoolsselector-rxmki","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:57:57.063716619Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:57.576537697Z","closed_at":"2026-01-02T08:57:57.576537697Z","close_reason":"Closed","comments":[{"id":2925,"issue_id":"lettatoolsselector-rxmki","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T08:57:57Z"}]}
{"id":"lettatoolsselector-ryphz","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:39:51.534192143Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:52.045134023Z","closed_at":"2026-01-02T13:39:52.045134023Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rzpe3","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:19.715321419Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:20.025721845Z","closed_at":"2026-01-02T06:00:20.025721845Z","close_reason":"Closed"}
{"id":"lettatoolsselector-rztd","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:31.956223502Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:32.275685594Z","closed_at":"2026-01-02T01:08:32.275685594Z","close_reason":"Closed","comments":[{"id":1192,"issue_id":"lettatoolsselector-rztd","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T01:08:32Z"}]}
{"id":"lettatoolsselector-rztkp","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:54:40.625265928Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:54:41.264267216Z","closed_at":"2026-01-02T17:54:41.264267216Z","close_reason":"Closed","comments":[{"id":3807,"issue_id":"lettatoolsselector-rztkp","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T17:54:41Z"}]}
{"id":"lettatoolsselector-s00uh","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:03:01.323491951Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:01.886620225Z","closed_at":"2026-01-02T07:03:01.886620225Z","close_reason":"Closed","comments":[{"id":2676,"issue_id":"lettatoolsselector-s00uh","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T07:03:01Z"}]}
{"id":"lettatoolsselector-s0q1i","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:20:23.954037505Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:20:24.683540152Z","closed_at":"2026-01-02T22:20:24.683540152Z","close_reason":"Closed","comments":[{"id":4314,"issue_id":"lettatoolsselector-s0q1i","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T22:20:24Z"}]}
{"id":"lettatoolsselector-s19tj","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:16:55.062623941Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:16:55.680569007Z","closed_at":"2026-01-02T22:16:55.680569007Z","close_reason":"Closed","comments":[{"id":4308,"issue_id":"lettatoolsselector-s19tj","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T22:16:55Z"}]}
{"id":"lettatoolsselector-s1ao5","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:11:17.491267057Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:18.030123541Z","closed_at":"2026-01-02T11:11:18.030123541Z","close_reason":"Closed","comments":[{"id":3191,"issue_id":"lettatoolsselector-s1ao5","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T11:11:17Z"}]}
{"id":"lettatoolsselector-s1flx","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:40:53.900353417Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:40:54.309594308Z","closed_at":"2026-01-02T19:40:54.309594308Z","close_reason":"Closed"}
{"id":"lettatoolsselector-s1x0r","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:20:57.209215662Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:20:57.892929588Z","closed_at":"2026-01-02T09:20:57.892929588Z","close_reason":"Closed","comments":[{"id":2932,"issue_id":"lettatoolsselector-s1x0r","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T09:20:57Z"}]}
{"id":"lettatoolsselector-s1ye5","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:10:36.267987337Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:10:36.931854625Z","closed_at":"2026-01-02T11:10:36.931854625Z","close_reason":"Closed","comments":[{"id":3186,"issue_id":"lettatoolsselector-s1ye5","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T11:10:36Z"}]}
{"id":"lettatoolsselector-s1z28","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:03:16.065018747Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:16.523457624Z","closed_at":"2026-01-02T07:03:16.523457624Z","close_reason":"Closed","comments":[{"id":2690,"issue_id":"lettatoolsselector-s1z28","author":"root","text":"Synced from Huly: LTSEL-225","created_at":"2026-01-02T07:03:16Z"}]}
{"id":"lettatoolsselector-s21ow","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:40:17.376034865Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:40:17.942713805Z","closed_at":"2026-01-02T13:40:17.942713805Z","close_reason":"Closed","comments":[{"id":3379,"issue_id":"lettatoolsselector-s21ow","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T13:40:17Z"}]}
{"id":"lettatoolsselector-s24ry","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:16.411005533Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:16.863393366Z","closed_at":"2026-01-02T05:41:16.863393366Z","close_reason":"Closed","comments":[{"id":2490,"issue_id":"lettatoolsselector-s24ry","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T05:41:16Z"}]}
{"id":"lettatoolsselector-s293h","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:21:19.579332535Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:19.949195873Z","closed_at":"2026-01-02T15:21:19.949195873Z","close_reason":"Closed"}
{"id":"lettatoolsselector-s2eis","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:14:04.090329561Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:14:04.699597017Z","closed_at":"2026-01-02T16:14:04.699597017Z","close_reason":"Closed","comments":[{"id":3659,"issue_id":"lettatoolsselector-s2eis","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T16:14:04Z"}]}
{"id":"lettatoolsselector-s2vqh","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:24.719235636Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:25.411845102Z","closed_at":"2026-01-02T20:55:25.411845102Z","close_reason":"Closed","comments":[{"id":4154,"issue_id":"lettatoolsselector-s2vqh","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T20:55:25Z"}]}
{"id":"lettatoolsselector-s302","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:27:20.731722157Z","updated_at":"2025-12-29T21:33:42.875263269Z","closed_at":"2025-12-29T21:33:42.875263269Z","close_reason":"Duplicate","comments":[{"id":511,"issue_id":"lettatoolsselector-s302","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:27:21Z"}]}
{"id":"lettatoolsselector-s3fgl","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T04:20:42.998333765Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:43.397134269Z","closed_at":"2026-01-02T04:20:43.397134269Z","close_reason":"Closed"}
{"id":"lettatoolsselector-s3mkg","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:52:05.980998871Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:52:06.580580216Z","closed_at":"2026-01-02T17:52:06.580580216Z","close_reason":"Closed","comments":[{"id":3797,"issue_id":"lettatoolsselector-s3mkg","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T17:52:06Z"}]}
{"id":"lettatoolsselector-s3ro","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T02:35:18.15691297Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:18.625748218Z","closed_at":"2026-01-02T02:35:18.625748218Z","close_reason":"Closed","comments":[{"id":1350,"issue_id":"lettatoolsselector-s3ro","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T02:35:18Z"}]}
{"id":"lettatoolsselector-s3sud","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:12.374407337Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:12.374407337Z","comments":[{"id":1868,"issue_id":"lettatoolsselector-s3sud","author":"root","text":"Synced from Beads: lettatoolsselector-4gv1\n\n---\nHuly Issue: LTSEL-482","created_at":"2026-01-02T03:28:12Z"}]}
{"id":"lettatoolsselector-s4cy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:37:54.484166598Z","updated_at":"2025-12-30T02:41:41.862182564Z","comments":[{"id":1077,"issue_id":"lettatoolsselector-s4cy","author":"root","text":"Synced from Beads: lettatoolsselector-7dj\n\n---\nHuly Issue: LTSEL-55","created_at":"2025-12-29T21:37:54Z"}]}
{"id":"lettatoolsselector-s4ub2","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:58:53.893825913Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:58:54.503149657Z","closed_at":"2026-01-02T19:58:54.503149657Z","close_reason":"Closed","comments":[{"id":4026,"issue_id":"lettatoolsselector-s4ub2","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T19:58:54Z"}]}
{"id":"lettatoolsselector-s5axq","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:21:08.691456424Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:09.20681318Z","closed_at":"2026-01-02T04:21:09.20681318Z","close_reason":"Closed","comments":[{"id":2394,"issue_id":"lettatoolsselector-s5axq","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T04:21:09Z"}]}
{"id":"lettatoolsselector-s62vu","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:36.788103191Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:37.227655293Z","closed_at":"2026-01-02T04:20:37.227655293Z","close_reason":"Closed","comments":[{"id":2384,"issue_id":"lettatoolsselector-s62vu","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T04:20:37Z"}]}
{"id":"lettatoolsselector-s65n7","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:26.501314208Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:27.042438464Z","closed_at":"2026-01-02T11:59:27.042438464Z","close_reason":"Closed","comments":[{"id":3265,"issue_id":"lettatoolsselector-s65n7","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T11:59:26Z"}]}
{"id":"lettatoolsselector-s6cv","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:43:26.618847014Z","updated_at":"2025-12-29T21:33:23.204429494Z","closed_at":"2025-12-29T21:33:23.204429494Z","close_reason":"Duplicate","comments":[{"id":669,"issue_id":"lettatoolsselector-s6cv","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-100","created_at":"2025-12-29T20:43:26Z"}]}
{"id":"lettatoolsselector-s6j1t","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:42.189729058Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:42.707996009Z","closed_at":"2026-01-02T10:59:42.707996009Z","close_reason":"Closed","comments":[{"id":3155,"issue_id":"lettatoolsselector-s6j1t","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T10:59:42Z"}]}
{"id":"lettatoolsselector-s6sfp","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:04:35.156970696Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:04:35.83232296Z","closed_at":"2026-01-02T21:04:35.83232296Z","close_reason":"Closed","comments":[{"id":4189,"issue_id":"lettatoolsselector-s6sfp","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T21:04:35Z"}]}
{"id":"lettatoolsselector-s77to","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:39:19.541639152Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:39:20.212310096Z","closed_at":"2026-01-02T10:39:20.212310096Z","close_reason":"Closed","comments":[{"id":3111,"issue_id":"lettatoolsselector-s77to","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T10:39:19Z"}]}
{"id":"lettatoolsselector-s7qvp","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:01.594531565Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:02.003669226Z","closed_at":"2026-01-02T03:30:02.003669226Z","close_reason":"Closed","comments":[{"id":2083,"issue_id":"lettatoolsselector-s7qvp","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T03:30:01Z"}]}
{"id":"lettatoolsselector-s800q","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:45:35.660758351Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:45:36.238795919Z","closed_at":"2026-01-02T22:45:36.238795919Z","close_reason":"Closed"}
{"id":"lettatoolsselector-s8184","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:16:38.18336864Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:16:38.939866973Z","closed_at":"2026-01-02T22:16:38.939866973Z","close_reason":"Closed","comments":[{"id":4307,"issue_id":"lettatoolsselector-s8184","author":"root","text":"Synced from Huly: LTSEL-13","created_at":"2026-01-02T22:16:38Z"}]}
{"id":"lettatoolsselector-s81z1","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:02:50.214626102Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:50.702212968Z","closed_at":"2026-01-02T08:02:50.702212968Z","close_reason":"Closed"}
{"id":"lettatoolsselector-s8b5q","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:34:25.026175202Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:34:25.74070136Z","closed_at":"2026-01-02T21:34:25.74070136Z","close_reason":"Closed","comments":[{"id":4237,"issue_id":"lettatoolsselector-s8b5q","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T21:34:25Z"}]}
{"id":"lettatoolsselector-s8e1u","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:58:47.068815373Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:58:47.613399142Z","closed_at":"2026-01-02T11:58:47.613399142Z","close_reason":"Closed","comments":[{"id":3254,"issue_id":"lettatoolsselector-s8e1u","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T11:58:47Z"}]}
{"id":"lettatoolsselector-s8s1b","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:28.830072263Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:29.310947537Z","closed_at":"2026-01-02T06:37:29.310947537Z","close_reason":"Closed","comments":[{"id":2641,"issue_id":"lettatoolsselector-s8s1b","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T06:37:29Z"}]}
{"id":"lettatoolsselector-s8zm","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:48.155247436Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:48.709351603Z","closed_at":"2026-01-02T01:24:48.709351603Z","close_reason":"Closed","comments":[{"id":1216,"issue_id":"lettatoolsselector-s8zm","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T01:24:48Z"}]}
{"id":"lettatoolsselector-s97u9","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:20.202098162Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:20.624564873Z","closed_at":"2026-01-02T07:24:20.624564873Z","close_reason":"Closed"}
{"id":"lettatoolsselector-s9aoh","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:29.364100628Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:29.848288875Z","closed_at":"2026-01-02T05:41:29.848288875Z","close_reason":"Closed","comments":[{"id":2499,"issue_id":"lettatoolsselector-s9aoh","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T05:41:29Z"}]}
{"id":"lettatoolsselector-s9hx0","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:39.763822035Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:39.763822035Z","comments":[{"id":2058,"issue_id":"lettatoolsselector-s9hx0","author":"root","text":"Synced from Beads: lettatoolsselector-4p4d\n\n---\nHuly Issue: LTSEL-257","created_at":"2026-01-02T03:29:39Z"}]}
{"id":"lettatoolsselector-saha2","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:39:07.242585957Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:07.949084216Z","closed_at":"2026-01-02T19:39:07.949084216Z","close_reason":"Closed","comments":[{"id":3983,"issue_id":"lettatoolsselector-saha2","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T19:39:07Z"}]}
{"id":"lettatoolsselector-saihh","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:00:39.093110626Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:00:39.655673547Z","closed_at":"2026-01-02T17:00:39.655673547Z","close_reason":"Closed","comments":[{"id":3682,"issue_id":"lettatoolsselector-saihh","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T17:00:39Z"}]}
{"id":"lettatoolsselector-saou","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:58.033010578Z","updated_at":"2025-12-29T21:33:24.299760148Z","closed_at":"2025-12-29T21:33:24.299760148Z","close_reason":"Duplicate","comments":[{"id":631,"issue_id":"lettatoolsselector-saou","author":"root","text":"Synced from Beads: lettatoolsselector-2bc\n\n---\nHuly Issue: LTSEL-161","created_at":"2025-12-29T20:37:58Z"}]}
{"id":"lettatoolsselector-sb7dd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:40.755772107Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:40.755772107Z","comments":[{"id":2060,"issue_id":"lettatoolsselector-sb7dd","author":"root","text":"Synced from Beads: lettatoolsselector-v3dy\n\n---\nHuly Issue: LTSEL-255","created_at":"2026-01-02T03:29:40Z"}]}
{"id":"lettatoolsselector-sb95z","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:56:37.86340138Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:56:38.489732874Z","closed_at":"2026-01-02T12:56:38.489732874Z","close_reason":"Closed","comments":[{"id":3322,"issue_id":"lettatoolsselector-sb95z","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T12:56:38Z"}]}
{"id":"lettatoolsselector-sbw","title":"[Refactor] Phase 5: Extract route handlers into blueprints","description":"Split the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint (`routes/tools.py`) - 6 routes\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint (`routes/config.py`) - ~40 routes\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint (`routes/search.py`) - ~8 routes\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint (`routes/benchmark.py`) - ~8 routes\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint (`routes/reranker.py`) - ~6 routes\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint (`routes/maintenance.py`) - ~10 routes\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint (`routes/health.py`) - 2 routes\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint (`routes/cost_control.py`) - ~8 routes\n- /api/v1/cost-control/*\n\n## File Structure\n```\nlettaaugment-source/\n routes/\n    __init__.py\n    tools.py\n    config.py\n    search.py\n    benchmark.py\n    reranker.py\n    maintenance.py\n    health.py\n    cost_control.py\n app.py  # Flask app with blueprints registered\n main.py # Entry point\n```\n\n## Acceptance Criteria\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T19:38:13.931841496Z","updated_at":"2025-12-29T19:02:09.785532515Z","closed_at":"2025-12-29T19:02:09.785532515Z","close_reason":"All routes extracted to 14 blueprints in routes/"}
{"id":"lettatoolsselector-sc3a9","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:24.314106851Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:24.930838794Z","closed_at":"2026-01-02T13:36:24.930838794Z","close_reason":"Closed","comments":[{"id":3358,"issue_id":"lettatoolsselector-sc3a9","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T13:36:24Z"}]}
{"id":"lettatoolsselector-scat4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:00.659786889Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:00.659786889Z","comments":[{"id":1975,"issue_id":"lettatoolsselector-scat4","author":"root","text":"Synced from Beads: lettatoolsselector-vfv7\n\n---\nHuly Issue: LTSEL-342","created_at":"2026-01-02T03:29:00Z"}]}
{"id":"lettatoolsselector-scn9w","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:58:52.367926344Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:53.03492244Z","closed_at":"2026-01-02T14:58:53.03492244Z","close_reason":"Closed","comments":[{"id":3513,"issue_id":"lettatoolsselector-scn9w","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T14:58:52Z"}]}
{"id":"lettatoolsselector-sd0zj","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:01.154697228Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:01.154697228Z","comments":[{"id":2261,"issue_id":"lettatoolsselector-sd0zj","author":"root","text":"Synced from Beads: lettatoolsselector-mc4l\n\n---\nHuly Issue: LTSEL-447","created_at":"2026-01-02T03:45:01Z"}]}
{"id":"lettatoolsselector-sdct9","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:38.346403544Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:38.346403544Z","comments":[{"id":2196,"issue_id":"lettatoolsselector-sdct9","author":"root","text":"Synced from Beads: lettatoolsselector-ppnk\n\n---\nHuly Issue: LTSEL-665","created_at":"2026-01-02T03:43:38Z"}]}
{"id":"lettatoolsselector-sdhxs","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:57:14.213518563Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:57:14.573938599Z","closed_at":"2026-01-02T09:57:14.573938599Z","close_reason":"Closed"}
{"id":"lettatoolsselector-sdrde","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T10:37:11.608330804Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:12.242100649Z","closed_at":"2026-01-02T10:37:12.242100649Z","close_reason":"Closed","comments":[{"id":3098,"issue_id":"lettatoolsselector-sdrde","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T10:37:12Z"}]}
{"id":"lettatoolsselector-sekk2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:51.219193671Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:51.219193671Z","comments":[{"id":2217,"issue_id":"lettatoolsselector-sekk2","author":"root","text":"Synced from Huly: LTSEL-618","created_at":"2026-01-02T03:43:51Z"}]}
{"id":"lettatoolsselector-setb7","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:11:37.508214394Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:11:38.28729946Z","closed_at":"2026-01-02T16:11:38.28729946Z","close_reason":"Closed","comments":[{"id":3645,"issue_id":"lettatoolsselector-setb7","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T16:11:37Z"}]}
{"id":"lettatoolsselector-sfjel","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:33:48.310291331Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:33:48.981074173Z","closed_at":"2026-01-02T21:33:48.981074173Z","close_reason":"Closed","comments":[{"id":4233,"issue_id":"lettatoolsselector-sfjel","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T21:33:48Z"}]}
{"id":"lettatoolsselector-sg8wm","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T12:57:34.731577724Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:35.085783018Z","closed_at":"2026-01-02T12:57:35.085783018Z","close_reason":"Closed"}
{"id":"lettatoolsselector-sggr","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:02.232204641Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:02.565009423Z","closed_at":"2026-01-02T02:35:02.565009423Z","close_reason":"Closed","comments":[{"id":1323,"issue_id":"lettatoolsselector-sggr","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T02:35:02Z"}]}
{"id":"lettatoolsselector-sgxa8","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:06.63296153Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:07.229618977Z","closed_at":"2026-01-02T09:40:07.229618977Z","close_reason":"Closed","comments":[{"id":2987,"issue_id":"lettatoolsselector-sgxa8","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T09:40:07Z"}]}
{"id":"lettatoolsselector-sh6bs","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:43:17.507015226Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:43:17.940055161Z","closed_at":"2026-01-02T20:43:17.940055161Z","close_reason":"Closed"}
{"id":"lettatoolsselector-she4i","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:43:12.819331191Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:43:13.416257078Z","closed_at":"2026-01-02T20:43:13.416257078Z","close_reason":"Closed","comments":[{"id":4145,"issue_id":"lettatoolsselector-she4i","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T20:43:13Z"}]}
{"id":"lettatoolsselector-shrbt","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:22.224580495Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:22.660926806Z","closed_at":"2026-01-02T04:39:22.660926806Z","close_reason":"Closed","comments":[{"id":2412,"issue_id":"lettatoolsselector-shrbt","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T04:39:22Z"}]}
{"id":"lettatoolsselector-si1i0","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:43.098222143Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:43.725850381Z","closed_at":"2026-01-02T15:20:43.725850381Z","close_reason":"Closed","comments":[{"id":3541,"issue_id":"lettatoolsselector-si1i0","author":"root","text":"Synced from Huly: LTSEL-41","created_at":"2026-01-02T15:20:43Z"}]}
{"id":"lettatoolsselector-si3l","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:30:40.11600616Z","updated_at":"2025-12-30T02:04:43.211958679Z","comments":[{"id":1054,"issue_id":"lettatoolsselector-si3l","author":"root","text":"Synced from Beads: lettatoolsselector-9fs\n\n---\nHuly Issue: LTSEL-56","created_at":"2025-12-29T21:30:40Z"}]}
{"id":"lettatoolsselector-sia3o","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:03.635565683Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:03.635565683Z","comments":[{"id":1848,"issue_id":"lettatoolsselector-sia3o","author":"root","text":"Synced from Beads: lettatoolsselector-cvj4\n\n---\nHuly Issue: LTSEL-503","created_at":"2026-01-02T03:28:03Z"}]}
{"id":"lettatoolsselector-sj1o9","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T10:38:03.014119131Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:38:03.642503907Z","closed_at":"2026-01-02T10:38:03.642503907Z","close_reason":"Closed","comments":[{"id":3104,"issue_id":"lettatoolsselector-sj1o9","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T10:38:03Z"}]}
{"id":"lettatoolsselector-skgm6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:32.428554477Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:32.428554477Z","comments":[{"id":1914,"issue_id":"lettatoolsselector-skgm6","author":"root","text":"Synced from Beads: lettatoolsselector-7dny\n\n---\nHuly Issue: LTSEL-419","created_at":"2026-01-02T03:28:32Z"}]}
{"id":"lettatoolsselector-skppl","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:26.212826389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:26.783740584Z","closed_at":"2026-01-02T17:01:26.783740584Z","close_reason":"Closed","comments":[{"id":3694,"issue_id":"lettatoolsselector-skppl","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T17:01:26Z"}]}
{"id":"lettatoolsselector-skq0q","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:18:04.44172637Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:04.911667087Z","closed_at":"2026-01-02T06:18:04.911667087Z","close_reason":"Closed","comments":[{"id":2569,"issue_id":"lettatoolsselector-skq0q","author":"root","text":"Synced from Huly: LTSEL-220","created_at":"2026-01-02T06:18:04Z"}]}
{"id":"lettatoolsselector-skznj","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:08.043757763Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:08.494511631Z","closed_at":"2026-01-02T04:20:08.494511631Z","close_reason":"Closed","comments":[{"id":2361,"issue_id":"lettatoolsselector-skznj","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T04:20:08Z"}]}
{"id":"lettatoolsselector-sl3qo","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:49.437167991Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:49.961808534Z","closed_at":"2026-01-02T09:54:49.961808534Z","close_reason":"Closed","comments":[{"id":3036,"issue_id":"lettatoolsselector-sl3qo","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T09:54:49Z"}]}
{"id":"lettatoolsselector-slpem","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:37:06.446124888Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:06.909502581Z","closed_at":"2026-01-02T06:37:06.909502581Z","close_reason":"Closed","comments":[{"id":2628,"issue_id":"lettatoolsselector-slpem","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T06:37:06Z"}]}
{"id":"lettatoolsselector-sm6q2","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:10:55.670346007Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:10:56.211159794Z","closed_at":"2026-01-02T14:10:56.211159794Z","close_reason":"Closed","comments":[{"id":3434,"issue_id":"lettatoolsselector-sm6q2","author":"root","text":"Synced from Huly: LTSEL-236","created_at":"2026-01-02T14:10:55Z"}]}
{"id":"lettatoolsselector-sm72y","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:47:25.770388374Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:26.04809111Z","closed_at":"2026-01-02T03:47:26.04809111Z","close_reason":"Closed"}
{"id":"lettatoolsselector-sm8hx","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:50:36.203674843Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:50:36.825842453Z","closed_at":"2026-01-02T18:50:36.825842453Z","close_reason":"Closed","comments":[{"id":3889,"issue_id":"lettatoolsselector-sm8hx","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T18:50:36Z"}]}
{"id":"lettatoolsselector-smw5g","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:52:03.44022639Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:52:04.139937341Z","closed_at":"2026-01-02T18:52:04.139937341Z","close_reason":"Closed","comments":[{"id":3901,"issue_id":"lettatoolsselector-smw5g","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T18:52:03Z"}]}
{"id":"lettatoolsselector-sne6j","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:47:00.414083155Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:47:01.164475682Z","closed_at":"2026-01-02T22:47:01.164475682Z","close_reason":"Closed","comments":[{"id":4369,"issue_id":"lettatoolsselector-sne6j","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T22:47:00Z"}]}
{"id":"lettatoolsselector-snmps","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:42:14.418071652Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:42:15.110480208Z","closed_at":"2026-01-02T19:42:15.110480208Z","close_reason":"Closed","comments":[{"id":4004,"issue_id":"lettatoolsselector-snmps","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T19:42:14Z"}]}
{"id":"lettatoolsselector-snn76","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:17.723846456Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:17.723846456Z","comments":[{"id":2009,"issue_id":"lettatoolsselector-snn76","author":"root","text":"Synced from Beads: lettatoolsselector-rvx0\n\n---\nHuly Issue: LTSEL-306","created_at":"2026-01-02T03:29:18Z"}]}
{"id":"lettatoolsselector-snoao","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:05:15.244257474Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:05:16.148803166Z","closed_at":"2026-01-02T17:05:16.148803166Z","close_reason":"Closed","comments":[{"id":3710,"issue_id":"lettatoolsselector-snoao","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T17:05:15Z"}]}
{"id":"lettatoolsselector-snt2w","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:07:17.812322058Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:07:18.442708303Z","closed_at":"2026-01-02T14:07:18.442708303Z","close_reason":"Closed","comments":[{"id":3414,"issue_id":"lettatoolsselector-snt2w","author":"root","text":"Synced from Huly: LTSEL-243","created_at":"2026-01-02T14:07:18Z"}]}
{"id":"lettatoolsselector-sogt","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:30.37298845Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:30.706805161Z","closed_at":"2026-01-02T01:08:30.706805161Z","close_reason":"Closed","comments":[{"id":1189,"issue_id":"lettatoolsselector-sogt","author":"root","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2026-01-02T01:08:30Z"}]}
{"id":"lettatoolsselector-sp22s","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:35:24.853716624Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:35:25.432097781Z","closed_at":"2026-01-02T14:35:25.432097781Z","close_reason":"Closed","comments":[{"id":3482,"issue_id":"lettatoolsselector-sp22s","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T14:35:25Z"}]}
{"id":"lettatoolsselector-spb79","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:45.610895227Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:45.610895227Z","comments":[{"id":2205,"issue_id":"lettatoolsselector-spb79","author":"root","text":"Synced from Beads: lettatoolsselector-0ya8\n\n---\nHuly Issue: LTSEL-647","created_at":"2026-01-02T03:43:45Z"}]}
{"id":"lettatoolsselector-spq4j","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:47.727758475Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:48.189876457Z","closed_at":"2026-01-02T06:36:48.189876457Z","close_reason":"Closed","comments":[{"id":2610,"issue_id":"lettatoolsselector-spq4j","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T06:36:47Z"}]}
{"id":"lettatoolsselector-spsza","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:29:39.50957278Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:40.174942521Z","closed_at":"2026-01-02T18:29:40.174942521Z","close_reason":"Closed"}
{"id":"lettatoolsselector-spy7s","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:00:25.885377196Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:00:26.380257614Z","closed_at":"2026-01-02T20:00:26.380257614Z","close_reason":"Closed"}
{"id":"lettatoolsselector-sqgc","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:25.175167389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:25.490339623Z","closed_at":"2026-01-02T01:08:25.490339623Z","close_reason":"Closed","comments":[{"id":1180,"issue_id":"lettatoolsselector-sqgc","author":"root","text":"## Purpose\n\nGuard against drift between webhook receiver and tool selector API contract.\n\n## Test Scenario\n\n1. Trigger webhook with known payload\n2. Capture the request sent to tool selector API\n3. Assert: Request matches documented contract schema\n4. Assert: All required fields present (agent_id, query, keep_tools)\n\n## Acceptance Criteria\n\n- [ ] Test validates payload structure, not behavior\n- [ ] Uses recorded/mocked tool selector response\n- [ ] Fails if payload doesn't match contract\n- [ ] Runs in webhook-receiver CI\n\n## Technical Notes\n\n- Use pytest with request capture (responses library)\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-23","created_at":"2026-01-02T01:08:25Z"}]}
{"id":"lettatoolsselector-sqyi","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:00.521050501Z","updated_at":"2025-12-29T21:33:23.468961912Z","closed_at":"2025-12-29T21:33:23.468961912Z","close_reason":"Duplicate","comments":[{"id":658,"issue_id":"lettatoolsselector-sqyi","author":"root","text":"Synced from Beads: lettatoolsselector-08q\n\n---\nHuly Issue: LTSEL-147","created_at":"2025-12-29T20:42:00Z"}]}
{"id":"lettatoolsselector-srqc9","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:20:59.351103348Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:00.003576125Z","closed_at":"2026-01-02T20:21:00.003576125Z","close_reason":"Closed","comments":[{"id":4088,"issue_id":"lettatoolsselector-srqc9","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T20:20:59Z"}]}
{"id":"lettatoolsselector-srxly","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:41:16.389521015Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:16.82126139Z","closed_at":"2026-01-02T09:41:16.82126139Z","close_reason":"Closed"}
{"id":"lettatoolsselector-srzpl","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:51:31.16320989Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:51:31.752491322Z","closed_at":"2026-01-02T17:51:31.752491322Z","close_reason":"Closed","comments":[{"id":3795,"issue_id":"lettatoolsselector-srzpl","author":"root","text":"Synced from Huly: LTSEL-16","created_at":"2026-01-02T17:51:31Z"}]}
{"id":"lettatoolsselector-ss2vk","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:22:06.052947795Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:22:06.669160838Z","closed_at":"2026-01-02T08:22:06.669160838Z","close_reason":"Closed","comments":[{"id":2868,"issue_id":"lettatoolsselector-ss2vk","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T08:22:06Z"}]}
{"id":"lettatoolsselector-ssfyb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:45.764960847Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:45.764960847Z","comments":[{"id":1943,"issue_id":"lettatoolsselector-ssfyb","author":"root","text":"Synced from Beads: lettatoolsselector-d3kl\n\n---\nHuly Issue: LTSEL-380","created_at":"2026-01-02T03:28:45Z"}]}
{"id":"lettatoolsselector-ssxh6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:43.746318448Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:43.746318448Z","comments":[{"id":1802,"issue_id":"lettatoolsselector-ssxh6","author":"root","text":"Synced from Beads: lettatoolsselector-ebwh\n\n---\nHuly Issue: LTSEL-568","created_at":"2026-01-02T03:27:43Z"}]}
{"id":"lettatoolsselector-ssy04","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:25.756530202Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:26.421301645Z","closed_at":"2026-01-02T21:48:26.421301645Z","close_reason":"Closed","comments":[{"id":4260,"issue_id":"lettatoolsselector-ssy04","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T21:48:26Z"}]}
{"id":"lettatoolsselector-st16h","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:58:33.433041114Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:58:34.005011103Z","closed_at":"2026-01-02T12:58:34.005011103Z","close_reason":"Closed","comments":[{"id":3332,"issue_id":"lettatoolsselector-st16h","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T12:58:33Z"}]}
{"id":"lettatoolsselector-st9fv","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:05:50.578301345Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:05:51.214641381Z","closed_at":"2026-01-02T17:05:51.214641381Z","close_reason":"Closed","comments":[{"id":3712,"issue_id":"lettatoolsselector-st9fv","author":"root","text":"Synced from Huly: LTSEL-221","created_at":"2026-01-02T17:05:50Z"}]}
{"id":"lettatoolsselector-su9ig","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:11:27.291300026Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:11:28.051457688Z","closed_at":"2026-01-02T16:11:28.051457688Z","close_reason":"Closed","comments":[{"id":3643,"issue_id":"lettatoolsselector-su9ig","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T16:11:27Z"}]}
{"id":"lettatoolsselector-suu6y","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:23:10.439578933Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:11.061937964Z","closed_at":"2026-01-02T15:23:11.061937964Z","close_reason":"Closed","comments":[{"id":3564,"issue_id":"lettatoolsselector-suu6y","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T15:23:10Z"}]}
{"id":"lettatoolsselector-suya7","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:57:48.472337793Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:57:49.065670542Z","closed_at":"2026-01-02T19:57:49.065670542Z","close_reason":"Closed","comments":[{"id":4017,"issue_id":"lettatoolsselector-suya7","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T19:57:48Z"}]}
{"id":"lettatoolsselector-suz6","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:12:58.968609052Z","updated_at":"2025-12-30T02:10:34.060349958Z","comments":[{"id":937,"issue_id":"lettatoolsselector-suz6","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T21:12:59Z"}]}
{"id":"lettatoolsselector-sv3r","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:45.250793051Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:45.592053039Z","closed_at":"2026-01-02T01:24:45.592053039Z","close_reason":"Closed","comments":[{"id":1211,"issue_id":"lettatoolsselector-sv3r","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T01:24:45Z"}]}
{"id":"lettatoolsselector-svx6o","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:40:48.443465342Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:40:49.080873895Z","closed_at":"2026-01-02T19:40:49.080873895Z","close_reason":"Closed","comments":[{"id":3995,"issue_id":"lettatoolsselector-svx6o","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T19:40:48Z"}]}
{"id":"lettatoolsselector-swb7","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:42:47.080303313Z","updated_at":"2025-12-29T21:33:23.291245036Z","closed_at":"2025-12-29T21:33:23.291245036Z","close_reason":"Duplicate","comments":[{"id":666,"issue_id":"lettatoolsselector-swb7","author":"root","text":"Synced from Beads: lettatoolsselector-7mg\n\n---\nHuly Issue: LTSEL-144","created_at":"2025-12-29T20:42:47Z"}]}
{"id":"lettatoolsselector-swdu","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:34.03947067Z","updated_at":"2025-12-29T21:33:43.87166552Z","closed_at":"2025-12-29T21:33:43.87166552Z","close_reason":"Duplicate","comments":[{"id":421,"issue_id":"lettatoolsselector-swdu","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-66","created_at":"2025-12-29T20:20:34Z"}]}
{"id":"lettatoolsselector-swjcw","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:47:52.18661046Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:52.602988636Z","closed_at":"2026-01-02T03:47:52.602988636Z","close_reason":"Closed","comments":[{"id":2328,"issue_id":"lettatoolsselector-swjcw","author":"root","text":"Synced from Huly: LTSEL-240","created_at":"2026-01-02T03:47:52Z"}]}
{"id":"lettatoolsselector-sws7","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:12.203036854Z","updated_at":"2025-12-29T21:33:30.352367572Z","closed_at":"2025-12-29T21:33:30.352367572Z","close_reason":"Duplicate","comments":[{"id":354,"issue_id":"lettatoolsselector-sws7","author":"root","text":"Synced from Beads: lettatoolsselector-ajz\n\n---\nHuly Issue: LTSEL-205","created_at":"2025-12-29T20:14:12Z"}]}
{"id":"lettatoolsselector-swy5","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:14.424717027Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:14.775185425Z","closed_at":"2026-01-02T03:06:14.775185425Z","close_reason":"Closed","comments":[{"id":1526,"issue_id":"lettatoolsselector-swy5","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T03:06:14Z"}]}
{"id":"lettatoolsselector-sx9zp","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:38:11.212207117Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:38:11.954820536Z","closed_at":"2026-01-02T10:38:11.954820536Z","close_reason":"Closed","comments":[{"id":3108,"issue_id":"lettatoolsselector-sx9zp","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T10:38:11Z"}]}
{"id":"lettatoolsselector-sxpin","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:24:55.690239452Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:24:56.421497205Z","closed_at":"2026-01-02T21:24:56.421497205Z","close_reason":"Closed","comments":[{"id":4216,"issue_id":"lettatoolsselector-sxpin","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T21:24:56Z"}]}
{"id":"lettatoolsselector-sxpxn","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:02:56.406571305Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:56.77606883Z","closed_at":"2026-01-02T07:02:56.77606883Z","close_reason":"Closed"}
{"id":"lettatoolsselector-sxue","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:02.964923906Z","updated_at":"2025-12-30T03:51:15.3735835Z","comments":[{"id":444,"issue_id":"lettatoolsselector-sxue","author":"root","text":"Synced from Beads: lettatoolsselector-toy\n\n---\nHuly Issue: LTSEL-194","created_at":"2025-12-29T20:22:03Z"}]}
{"id":"lettatoolsselector-sxuo2","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:20:53.588703475Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:20:54.260504625Z","closed_at":"2026-01-02T20:20:54.260504625Z","close_reason":"Closed","comments":[{"id":4087,"issue_id":"lettatoolsselector-sxuo2","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T20:20:54Z"}]}
{"id":"lettatoolsselector-sy8e","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:10.821972477Z","updated_at":"2025-12-29T21:33:30.416625501Z","closed_at":"2025-12-29T21:33:30.416625501Z","close_reason":"Duplicate","comments":[{"id":352,"issue_id":"lettatoolsselector-sy8e","author":"root","text":"Synced from Beads: lettatoolsselector-t11\n\n---\nHuly Issue: LTSEL-196","created_at":"2025-12-29T20:14:11Z"}]}
{"id":"lettatoolsselector-symt","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:10:29.07710577Z","updated_at":"2025-12-30T04:14:23.076749198Z","comments":[{"id":912,"issue_id":"lettatoolsselector-symt","author":"root","text":"Synced from Beads: lettatoolsselector-0ye\n\n---\nHuly Issue: LTSEL-91","created_at":"2025-12-29T21:10:29Z"}]}
{"id":"lettatoolsselector-synmt","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:15:32.117130057Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:15:32.784597636Z","closed_at":"2026-01-02T20:15:32.784597636Z","close_reason":"Closed","comments":[{"id":4060,"issue_id":"lettatoolsselector-synmt","author":"root","text":"Synced from Huly: LTSEL-51","created_at":"2026-01-02T20:15:32Z"}]}
{"id":"lettatoolsselector-syt2","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:11.423757401Z","updated_at":"2025-12-29T21:33:28.905560001Z","closed_at":"2025-12-29T21:33:28.905560001Z","close_reason":"Duplicate","comments":[{"id":407,"issue_id":"lettatoolsselector-syt2","author":"root","text":"Synced from Beads: lettatoolsselector-ux4\n\n---\nHuly Issue: LTSEL-186","created_at":"2025-12-29T20:19:11Z"}]}
{"id":"lettatoolsselector-sz9fu","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:41.755370815Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:42.12709821Z","closed_at":"2026-01-02T03:06:42.12709821Z","close_reason":"Closed","comments":[{"id":1561,"issue_id":"lettatoolsselector-sz9fu","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T03:06:41Z"}]}
{"id":"lettatoolsselector-sztr5","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:56:22.987764726Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:56:23.549515549Z","closed_at":"2026-01-02T09:56:23.549515549Z","close_reason":"Closed","comments":[{"id":3050,"issue_id":"lettatoolsselector-sztr5","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T09:56:23Z"}]}
{"id":"lettatoolsselector-t0jq0","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:41:04.668958277Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:41:05.207043439Z","closed_at":"2026-01-02T13:41:05.207043439Z","close_reason":"Closed","comments":[{"id":3382,"issue_id":"lettatoolsselector-t0jq0","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T13:41:04Z"}]}
{"id":"lettatoolsselector-t0qqz","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:50:28.472872191Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:50:29.283064996Z","closed_at":"2026-01-02T22:50:29.283064996Z","close_reason":"Closed","comments":[{"id":4379,"issue_id":"lettatoolsselector-t0qqz","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T22:50:28Z"}]}
{"id":"lettatoolsselector-t1a13","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:42.959053747Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:43.585206414Z","closed_at":"2026-01-02T17:25:43.585206414Z","close_reason":"Closed","comments":[{"id":3734,"issue_id":"lettatoolsselector-t1a13","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T17:25:43Z"}]}
{"id":"lettatoolsselector-t22oe","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:19.25396541Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:19.721344257Z","closed_at":"2026-01-02T04:39:19.721344257Z","close_reason":"Closed","comments":[{"id":2410,"issue_id":"lettatoolsselector-t22oe","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T04:39:19Z"}]}
{"id":"lettatoolsselector-t2i8e","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:20:59.805836412Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:00.589018544Z","closed_at":"2026-01-02T09:21:00.589018544Z","close_reason":"Closed","comments":[{"id":2934,"issue_id":"lettatoolsselector-t2i8e","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T09:21:00Z"}]}
{"id":"lettatoolsselector-t2rc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:00.634823821Z","updated_at":"2025-12-29T21:33:43.898712551Z","closed_at":"2025-12-29T21:33:43.898712551Z","close_reason":"Duplicate","comments":[{"id":416,"issue_id":"lettatoolsselector-t2rc","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:20:00Z"}]}
{"id":"lettatoolsselector-t3gzi","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:04.11669114Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:04.605752403Z","closed_at":"2026-01-02T06:00:04.605752403Z","close_reason":"Closed","comments":[{"id":2522,"issue_id":"lettatoolsselector-t3gzi","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T06:00:04Z"}]}
{"id":"lettatoolsselector-t3pyr","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:59:51.827986488Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:59:52.551106684Z","closed_at":"2026-01-02T21:59:52.551106684Z","close_reason":"Closed","comments":[{"id":4287,"issue_id":"lettatoolsselector-t3pyr","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T21:59:52Z"}]}
{"id":"lettatoolsselector-t3v6k","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T13:36:55.753200468Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:56.106356762Z","closed_at":"2026-01-02T13:36:56.106356762Z","close_reason":"Closed"}
{"id":"lettatoolsselector-t3y2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:03:09.634520071Z","updated_at":"2025-12-30T04:14:06.98187074Z","comments":[{"id":838,"issue_id":"lettatoolsselector-t3y2","author":"root","text":"Synced from Beads: lettatoolsselector-lec\n\n---\nHuly Issue: LTSEL-117","created_at":"2025-12-29T21:03:10Z"}]}
{"id":"lettatoolsselector-t3ybb","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:03.951397481Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:04.463175162Z","closed_at":"2026-01-02T05:41:04.463175162Z","close_reason":"Closed","comments":[{"id":2482,"issue_id":"lettatoolsselector-t3ybb","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T05:41:04Z"}]}
{"id":"lettatoolsselector-t41x3","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:21:29.629884627Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:21:30.080200272Z","closed_at":"2026-01-02T22:21:30.080200272Z","close_reason":"Closed"}
{"id":"lettatoolsselector-t4298","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:23:05.957190126Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:06.658883776Z","closed_at":"2026-01-02T15:23:06.658883776Z","close_reason":"Closed","comments":[{"id":3562,"issue_id":"lettatoolsselector-t4298","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T15:23:06Z"}]}
{"id":"lettatoolsselector-t4dg","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:45.933879595Z","updated_at":"2025-12-30T02:08:05.447712276Z","comments":[{"id":926,"issue_id":"lettatoolsselector-t4dg","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T21:11:46Z"}]}
{"id":"lettatoolsselector-t4s66","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:23:07.303072337Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:07.906214339Z","closed_at":"2026-01-02T15:23:07.906214339Z","close_reason":"Closed","comments":[{"id":3563,"issue_id":"lettatoolsselector-t4s66","author":"root","text":"Synced from Huly: LTSEL-234","created_at":"2026-01-02T15:23:07Z"}]}
{"id":"lettatoolsselector-t5hs8","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:19.027800564Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:19.627972475Z","closed_at":"2026-01-02T08:02:19.627972475Z","close_reason":"Closed","comments":[{"id":2801,"issue_id":"lettatoolsselector-t5hs8","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T08:02:19Z"}]}
{"id":"lettatoolsselector-t5ipn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:52.974823555Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:52.974823555Z","comments":[{"id":1823,"issue_id":"lettatoolsselector-t5ipn","author":"root","text":"Synced from Beads: lettatoolsselector-2fi3\n\n---\nHuly Issue: LTSEL-533","created_at":"2026-01-02T03:27:53Z"}]}
{"id":"lettatoolsselector-t5tr","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:01.455948623Z","updated_at":"2025-12-29T21:33:29.634392274Z","closed_at":"2025-12-29T21:33:29.634392274Z","close_reason":"Duplicate","comments":[{"id":386,"issue_id":"lettatoolsselector-t5tr","author":"root","text":"Synced from Beads: lettatoolsselector-88g\n\n---\nHuly Issue: LTSEL-193","created_at":"2025-12-29T20:17:01Z"}]}
{"id":"lettatoolsselector-t5v0w","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:27.311042055Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:27.936466698Z","closed_at":"2026-01-02T15:20:27.936466698Z","close_reason":"Closed","comments":[{"id":3536,"issue_id":"lettatoolsselector-t5v0w","author":"root","text":"Synced from Huly: LTSEL-46","created_at":"2026-01-02T15:20:27Z"}]}
{"id":"lettatoolsselector-t6qg5","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:18:41.047040909Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:41.618850697Z","closed_at":"2026-01-02T06:18:41.618850697Z","close_reason":"Closed","comments":[{"id":2575,"issue_id":"lettatoolsselector-t6qg5","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T06:18:41Z"}]}
{"id":"lettatoolsselector-t6xng","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:56:16.231918185Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:56:16.803399989Z","closed_at":"2026-01-02T17:56:16.803399989Z","close_reason":"Closed","comments":[{"id":3812,"issue_id":"lettatoolsselector-t6xng","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T17:56:16Z"}]}
{"id":"lettatoolsselector-t75d","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:08.680336945Z","updated_at":"2025-12-29T21:33:28.608341088Z","closed_at":"2025-12-29T21:33:28.608341088Z","close_reason":"Duplicate","comments":[{"id":419,"issue_id":"lettatoolsselector-t75d","author":"root","text":"Synced from Beads: lettatoolsselector-88g\n\n---\nHuly Issue: LTSEL-193","created_at":"2025-12-29T20:20:08Z"}]}
{"id":"lettatoolsselector-t7d19","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:26.964731215Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:27.414008558Z","closed_at":"2026-01-02T04:39:27.414008558Z","close_reason":"Closed","comments":[{"id":2415,"issue_id":"lettatoolsselector-t7d19","author":"root","text":"Synced from Huly: LTSEL-26","created_at":"2026-01-02T04:39:27Z"}]}
{"id":"lettatoolsselector-t7g","title":"[Perf] Use persistent HTTP client for reranker calls","description":"## Problem\nUses synchronous `httpx.post()` which creates a new TCP connection per reranker request.\n\n**Location:** `weaviate_tool_search_with_reranking.py:274, 294`\n\n```python\n# Line 294\nresponse = httpx.post(RERANKER_URL, json=payload, timeout=RERANKER_TIMEOUT)\n```\n\n## Impact\n- **Latency:** 10-50ms per call in TCP connection overhead\n- **Priority:** MEDIUM - affects every reranked search\n\n## Solution\nUse a persistent `httpx.Client` with connection pooling:\n\n```python\n# Module-level persistent client\n_reranker_client: httpx.Client = None\n\ndef get_reranker_client() -\u003e httpx.Client:\n    global _reranker_client\n    if _reranker_client is None:\n        _reranker_client = httpx.Client(\n            timeout=RERANKER_TIMEOUT,\n            limits=httpx.Limits(max_keepalive_connections=10, max_connections=20)\n        )\n    return _reranker_client\n\ndef rerank_results(...):\n    client = get_reranker_client()\n    response = client.post(RERANKER_URL, json=payload)\n    # ...\n\n# Cleanup on shutdown\ndef close_reranker_client():\n    global _reranker_client\n    if _reranker_client:\n        _reranker_client.close()\n        _reranker_client = None\n```\n\n## Acceptance Criteria\n- [ ] Persistent httpx.Client used for reranker\n- [ ] Connection pooling configured\n- [ ] Client closed on app shutdown\n- [ ] All unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T01:50:08.273877005Z","updated_at":"2025-12-29T16:46:01.37443623Z","closed_at":"2025-12-29T16:46:01.37443623Z","close_reason":"Closed","labels":["performance"]}
{"id":"lettatoolsselector-t81m4","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:54:31.436361626Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:54:32.006997893Z","closed_at":"2026-01-02T08:54:32.006997893Z","close_reason":"Closed","comments":[{"id":2882,"issue_id":"lettatoolsselector-t81m4","author":"root","text":"Synced from Huly: LTSEL-51","created_at":"2026-01-02T08:54:31Z"}]}
{"id":"lettatoolsselector-t851u","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:04:57.464863604Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:04:58.102441808Z","closed_at":"2026-01-02T20:04:58.102441808Z","close_reason":"Closed","comments":[{"id":4050,"issue_id":"lettatoolsselector-t851u","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T20:04:57Z"}]}
{"id":"lettatoolsselector-t98d1","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:39:55.662719678Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:56.316745488Z","closed_at":"2026-01-02T20:39:56.316745488Z","close_reason":"Closed","comments":[{"id":4132,"issue_id":"lettatoolsselector-t98d1","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T20:39:56Z"}]}
{"id":"lettatoolsselector-t9gbq","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:02:58.654399791Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:02:59.462771598Z","closed_at":"2026-01-02T15:02:59.462771598Z","close_reason":"Closed","comments":[{"id":3520,"issue_id":"lettatoolsselector-t9gbq","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T15:02:59Z"}]}
{"id":"lettatoolsselector-t9lnk","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:43.619413438Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:44.204594898Z","closed_at":"2026-01-02T09:54:44.204594898Z","close_reason":"Closed","comments":[{"id":3034,"issue_id":"lettatoolsselector-t9lnk","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T09:54:44Z"}]}
{"id":"lettatoolsselector-t9r1w","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:59:33.808916518Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:59:34.475010934Z","closed_at":"2026-01-02T17:59:34.475010934Z","close_reason":"Closed","comments":[{"id":3823,"issue_id":"lettatoolsselector-t9r1w","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T17:59:34Z"}]}
{"id":"lettatoolsselector-t9zb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:16:18.200296844Z","updated_at":"2025-12-30T01:51:10.657284722Z","comments":[{"id":972,"issue_id":"lettatoolsselector-t9zb","author":"root","text":"Synced from Beads: lettatoolsselector-leh\n\n---\nHuly Issue: LTSEL-81","created_at":"2025-12-29T21:16:18Z"}]}
{"id":"lettatoolsselector-tad","title":"[Refactor] Migrate config handlers to config blueprint","description":"## Goal\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819  \n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T00:42:57.262348909Z","updated_at":"2025-12-29T15:40:09.842988049Z","closed_at":"2025-12-29T15:40:09.842988049Z","close_reason":"Closed","labels":["refactor","services-layer"]}
{"id":"lettatoolsselector-tb7b","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:03:08.635847722Z","updated_at":"2025-12-30T04:11:50.454118634Z","comments":[{"id":837,"issue_id":"lettatoolsselector-tb7b","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-109","created_at":"2025-12-29T21:03:08Z"}]}
{"id":"lettatoolsselector-tb931","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:39:46.591271725Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:39:47.228206657Z","closed_at":"2026-01-02T13:39:47.228206657Z","close_reason":"Closed","comments":[{"id":3374,"issue_id":"lettatoolsselector-tb931","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T13:39:47Z"}]}
{"id":"lettatoolsselector-tbcq","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:14.998997545Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:15.343565124Z","closed_at":"2026-01-02T01:08:15.343565124Z","close_reason":"Closed","comments":[{"id":1162,"issue_id":"lettatoolsselector-tbcq","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T01:08:15Z"}]}
{"id":"lettatoolsselector-tbds4","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:44:27.699022936Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:44:28.348516367Z","closed_at":"2026-01-02T22:44:28.348516367Z","close_reason":"Closed","comments":[{"id":4366,"issue_id":"lettatoolsselector-tbds4","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T22:44:28Z"}]}
{"id":"lettatoolsselector-tbm87","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:37.055380973Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:37.883397229Z","closed_at":"2026-01-02T22:39:37.883397229Z","close_reason":"Closed","comments":[{"id":4346,"issue_id":"lettatoolsselector-tbm87","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T22:39:37Z"}]}
{"id":"lettatoolsselector-tbnc","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:42.735873997Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:43.065625068Z","closed_at":"2026-01-02T01:08:43.065625068Z","close_reason":"Closed","comments":[{"id":1204,"issue_id":"lettatoolsselector-tbnc","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T01:08:42Z"}]}
{"id":"lettatoolsselector-tbpd","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:35:52.237655239Z","updated_at":"2025-12-29T21:33:41.774600787Z","closed_at":"2025-12-29T21:33:41.774600787Z","close_reason":"Duplicate","comments":[{"id":604,"issue_id":"lettatoolsselector-tbpd","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-65","created_at":"2025-12-29T20:35:52Z"}]}
{"id":"lettatoolsselector-tbsef","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:25:16.364176884Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:25:17.0059461Z","closed_at":"2026-01-02T15:25:17.0059461Z","close_reason":"Closed","comments":[{"id":3573,"issue_id":"lettatoolsselector-tbsef","author":"root","text":"Synced from Huly: LTSEL-228","created_at":"2026-01-02T15:25:16Z"}]}
{"id":"lettatoolsselector-tbtgl","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:39:04.262859492Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:04.857796359Z","closed_at":"2026-01-02T20:39:04.857796359Z","close_reason":"Closed","comments":[{"id":4124,"issue_id":"lettatoolsselector-tbtgl","author":"root","text":"Synced from Huly: LTSEL-16","created_at":"2026-01-02T20:39:04Z"}]}
{"id":"lettatoolsselector-tc6lv","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:30:25.747588638Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:30:26.321394485Z","closed_at":"2026-01-02T14:30:26.321394485Z","close_reason":"Closed","comments":[{"id":3453,"issue_id":"lettatoolsselector-tc6lv","author":"root","text":"Synced from Huly: LTSEL-22","created_at":"2026-01-02T14:30:26Z"}]}
{"id":"lettatoolsselector-td39","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:20.70616423Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:21.031382953Z","closed_at":"2026-01-02T01:08:21.031382953Z","close_reason":"Closed","comments":[{"id":1172,"issue_id":"lettatoolsselector-td39","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T01:08:20Z"}]}
{"id":"lettatoolsselector-tdk7","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:31.45455637Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:31.770228734Z","closed_at":"2026-01-02T01:08:31.770228734Z","close_reason":"Closed","comments":[{"id":1191,"issue_id":"lettatoolsselector-tdk7","author":"root","text":"Synced from Beads: lettatoolsselector-sxk\n\n---\nHuly Issue: LTSEL-30","created_at":"2026-01-02T01:08:31Z"}]}
{"id":"lettatoolsselector-tdnw","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:30:40.876535156Z","updated_at":"2025-12-30T02:04:50.151891198Z","comments":[{"id":1055,"issue_id":"lettatoolsselector-tdnw","author":"root","text":"Synced from Beads: lettatoolsselector-7dj\n\n---\nHuly Issue: LTSEL-60","created_at":"2025-12-29T21:30:41Z"}]}
{"id":"lettatoolsselector-te8e","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:18:33.865446842Z","updated_at":"2025-12-30T04:12:12.189213965Z","comments":[{"id":990,"issue_id":"lettatoolsselector-te8e","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T21:18:34Z"}]}
{"id":"lettatoolsselector-tesxl","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:19:24.162934024Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:19:25.874308167Z","closed_at":"2026-01-02T16:19:25.874308167Z","close_reason":"Closed","comments":[{"id":3674,"issue_id":"lettatoolsselector-tesxl","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T16:19:25Z"}]}
{"id":"lettatoolsselector-tevh1","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:21.326056732Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:21.871106385Z","closed_at":"2026-01-02T09:40:21.871106385Z","close_reason":"Closed","comments":[{"id":2993,"issue_id":"lettatoolsselector-tevh1","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T09:40:21Z"}]}
{"id":"lettatoolsselector-tf788","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:52.957450781Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:53.432234687Z","closed_at":"2026-01-02T07:43:53.432234687Z","close_reason":"Closed","comments":[{"id":2785,"issue_id":"lettatoolsselector-tf788","author":"root","text":"Synced from Huly: LTSEL-223","created_at":"2026-01-02T07:43:53Z"}]}
{"id":"lettatoolsselector-tf9xg","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:13.033716464Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:13.583270705Z","closed_at":"2026-01-02T14:05:13.583270705Z","close_reason":"Closed","comments":[{"id":3395,"issue_id":"lettatoolsselector-tf9xg","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T14:05:13Z"}]}
{"id":"lettatoolsselector-tfe62","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:07.776120484Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:08.302555226Z","closed_at":"2026-01-02T11:59:08.302555226Z","close_reason":"Closed","comments":[{"id":3259,"issue_id":"lettatoolsselector-tfe62","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T11:59:08Z"}]}
{"id":"lettatoolsselector-tfml7","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:53.085662024Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:53.085662024Z","comments":[{"id":2221,"issue_id":"lettatoolsselector-tfml7","author":"root","text":"Synced from Beads: lettatoolsselector-hzmq\n\n---\nHuly Issue: LTSEL-609","created_at":"2026-01-02T03:43:53Z"}]}
{"id":"lettatoolsselector-tglpr","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:00:34.247697709Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:00:34.839047312Z","closed_at":"2026-01-02T17:00:34.839047312Z","close_reason":"Closed","comments":[{"id":3680,"issue_id":"lettatoolsselector-tglpr","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T17:00:34Z"}]}
{"id":"lettatoolsselector-tgvv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:18:07.392099758Z","updated_at":"2025-12-30T01:54:20.679541807Z","comments":[{"id":989,"issue_id":"lettatoolsselector-tgvv","author":"root","text":"Synced from Beads: lettatoolsselector-0ye\n\n---\nHuly Issue: LTSEL-91","created_at":"2025-12-29T21:18:07Z"}]}
{"id":"lettatoolsselector-th96q","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:18:56.272075122Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:56.79203088Z","closed_at":"2026-01-02T06:18:56.79203088Z","close_reason":"Closed","comments":[{"id":2583,"issue_id":"lettatoolsselector-th96q","author":"root","text":"Synced from Huly: LTSEL-231","created_at":"2026-01-02T06:18:56Z"}]}
{"id":"lettatoolsselector-thdtg","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:57:00.167288632Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:57:00.914337978Z","closed_at":"2026-01-02T20:57:00.914337978Z","close_reason":"Closed","comments":[{"id":4163,"issue_id":"lettatoolsselector-thdtg","author":"root","text":"Synced from Huly: LTSEL-37","created_at":"2026-01-02T20:57:00Z"}]}
{"id":"lettatoolsselector-thvfu","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:35.295474702Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:36.003992507Z","closed_at":"2026-01-02T20:38:36.003992507Z","close_reason":"Closed","comments":[{"id":4117,"issue_id":"lettatoolsselector-thvfu","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T20:38:35Z"}]}
{"id":"lettatoolsselector-til22","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:33.695536053Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:34.267269134Z","closed_at":"2026-01-02T13:36:34.267269134Z","close_reason":"Closed","comments":[{"id":3361,"issue_id":"lettatoolsselector-til22","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T13:36:34Z"}]}
{"id":"lettatoolsselector-tiqml","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:20:44.011036037Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:20:44.457334885Z","closed_at":"2026-01-02T20:20:44.457334885Z","close_reason":"Closed"}
{"id":"lettatoolsselector-tjbd","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:26.636062473Z","updated_at":"2025-12-29T21:33:24.00177502Z","closed_at":"2025-12-29T21:33:24.00177502Z","close_reason":"Duplicate","comments":[{"id":641,"issue_id":"lettatoolsselector-tjbd","author":"root","text":"Synced from Beads: lettatoolsselector-6p9\n\n---\nHuly Issue: LTSEL-148","created_at":"2025-12-29T20:39:26Z"}]}
{"id":"lettatoolsselector-tk7ii","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:43.044372881Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:43.453342433Z","closed_at":"2026-01-02T03:30:43.453342433Z","close_reason":"Closed","comments":[{"id":2114,"issue_id":"lettatoolsselector-tk7ii","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T03:30:43Z"}]}
{"id":"lettatoolsselector-tl7n9","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:05.048318959Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:05.542773558Z","closed_at":"2026-01-02T03:30:05.542773558Z","close_reason":"Closed","comments":[{"id":2087,"issue_id":"lettatoolsselector-tl7n9","author":"root","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2026-01-02T03:30:05Z"}]}
{"id":"lettatoolsselector-tm5iw","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:18:27.164324455Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:18:27.826414929Z","closed_at":"2026-01-02T22:18:27.826414929Z","close_reason":"Closed","comments":[{"id":4313,"issue_id":"lettatoolsselector-tm5iw","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T22:18:27Z"}]}
{"id":"lettatoolsselector-tmsqe","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:43:38.050226015Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:43:38.599010394Z","closed_at":"2026-01-02T09:43:38.599010394Z","close_reason":"Closed","comments":[{"id":3018,"issue_id":"lettatoolsselector-tmsqe","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T09:43:38Z"}]}
{"id":"lettatoolsselector-tmvne","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:59:19.620244844Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:20.336973293Z","closed_at":"2026-01-02T19:59:20.336973293Z","close_reason":"Closed","comments":[{"id":4030,"issue_id":"lettatoolsselector-tmvne","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T19:59:20Z"}]}
{"id":"lettatoolsselector-to3pf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:48.661931446Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:48.661931446Z","comments":[{"id":1813,"issue_id":"lettatoolsselector-to3pf","author":"root","text":"Synced from Beads: lettatoolsselector-1tqj\n\n---\nHuly Issue: LTSEL-551","created_at":"2026-01-02T03:27:48Z"}]}
{"id":"lettatoolsselector-tp2d3","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:42:47.656023243Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:48.203665818Z","closed_at":"2026-01-02T07:42:48.203665818Z","close_reason":"Closed","comments":[{"id":2762,"issue_id":"lettatoolsselector-tp2d3","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T07:42:47Z"}]}
{"id":"lettatoolsselector-tp8wo","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:40:05.206617858Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:40:05.826111724Z","closed_at":"2026-01-02T22:40:05.826111724Z","close_reason":"Closed","comments":[{"id":4352,"issue_id":"lettatoolsselector-tp8wo","author":"root","text":"Synced from Huly: LTSEL-22","created_at":"2026-01-02T22:40:05Z"}]}
{"id":"lettatoolsselector-tpdzd","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:35:56.634458256Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:35:57.176138087Z","closed_at":"2026-01-02T13:35:57.176138087Z","close_reason":"Closed","comments":[{"id":3344,"issue_id":"lettatoolsselector-tpdzd","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T13:35:56Z"}]}
{"id":"lettatoolsselector-tpem","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:30.899356732Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:31.269488552Z","closed_at":"2026-01-02T01:08:31.269488552Z","close_reason":"Closed","comments":[{"id":1190,"issue_id":"lettatoolsselector-tpem","author":"root","text":"Synced from Beads: lettatoolsselector-388\n\n---\nHuly Issue: LTSEL-31","created_at":"2026-01-02T01:08:31Z"}]}
{"id":"lettatoolsselector-tpk2w","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:03:15.435047005Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:16.009932793Z","closed_at":"2026-01-02T08:03:16.009932793Z","close_reason":"Closed","comments":[{"id":2820,"issue_id":"lettatoolsselector-tpk2w","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T08:03:15Z"}]}
{"id":"lettatoolsselector-tqwk2","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:36:37.311579091Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:37.833556926Z","closed_at":"2026-01-02T11:36:37.833556926Z","close_reason":"Closed","comments":[{"id":3243,"issue_id":"lettatoolsselector-tqwk2","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T11:36:37Z"}]}
{"id":"lettatoolsselector-tr8d4","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:13.405866655Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:13.405866655Z","comments":[{"id":2177,"issue_id":"lettatoolsselector-tr8d4","author":"root","text":"Synced from Huly: LTSEL-760","created_at":"2026-01-02T03:43:13Z"}]}
{"id":"lettatoolsselector-trls6","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:21:10.276336396Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:21:10.932341262Z","closed_at":"2026-01-02T19:21:10.932341262Z","close_reason":"Closed","comments":[{"id":3939,"issue_id":"lettatoolsselector-trls6","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T19:21:10Z"}]}
{"id":"lettatoolsselector-trs","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:03.021140072Z","updated_at":"2025-12-23T03:23:03.364825813Z","closed_at":"2025-12-23T03:23:03.364825813Z","close_reason":"Closed","comments":[{"id":25,"issue_id":"lettatoolsselector-trs","author":"node","text":"## Problem\n\nTool selector API has MAX_TOTAL_TOOLS=20 but only enforces it loosely. Agents like Meridian accumulated 44 tools because pruning doesn't run proactively.\n\n## Solution\n\nBefore attaching new tools, prune existing tools to make room within the limit.\n\n## Acceptance Criteria\n\n- [ ] Before any attach operation, fetch current tool count\n- [ ] If current + new \u003e MAX_TOTAL_TOOLS, detach lowest-scored tools first\n- [ ] Protected tools are never detached (use PROTECTED_TOOLS env var)\n- [ ] Return detailed response showing what was pruned and why\n- [ ] Log pruning decisions for debugging\n\n## Technical Notes\n\n- Pruning order: oldest first, then lowest relevance score\n- Consider keeping tools attached in last 24h as \"recent\" protection\n- MAX_TOTAL_TOOLS is now 20\n\n---\nHuly Issue: LTSEL-7","created_at":"2025-12-23T03:23:03Z"}]}
{"id":"lettatoolsselector-tsfbj","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:42.450296191Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:43.044685901Z","closed_at":"2026-01-02T20:38:43.044685901Z","close_reason":"Closed","comments":[{"id":4119,"issue_id":"lettatoolsselector-tsfbj","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T20:38:42Z"}]}
{"id":"lettatoolsselector-tslb5","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:31.865419676Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:31.865419676Z","comments":[{"id":2040,"issue_id":"lettatoolsselector-tslb5","author":"root","text":"Synced from Beads: lettatoolsselector-gjfe\n\n---\nHuly Issue: LTSEL-275","created_at":"2026-01-02T03:29:32Z"}]}
{"id":"lettatoolsselector-tsqa5","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:30.326842357Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:31.605070958Z","closed_at":"2026-01-02T06:17:31.605070958Z","close_reason":"Closed","comments":[{"id":2547,"issue_id":"lettatoolsselector-tsqa5","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T06:17:31Z"}]}
{"id":"lettatoolsselector-tst2","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:23.24498763Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:23.637809687Z","closed_at":"2026-01-02T02:20:23.637809687Z","close_reason":"Closed","comments":[{"id":1300,"issue_id":"lettatoolsselector-tst2","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T02:20:23Z"}]}
{"id":"lettatoolsselector-tsucu","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:43:35.989482279Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:43:36.489995973Z","closed_at":"2026-01-02T09:43:36.489995973Z","close_reason":"Closed","comments":[{"id":3017,"issue_id":"lettatoolsselector-tsucu","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T09:43:36Z"}]}
{"id":"lettatoolsselector-tsutw","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:41:01.631332848Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:01.909108303Z","closed_at":"2026-01-02T04:41:01.909108303Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ttay1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:45.331136254Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:45.331136254Z","comments":[{"id":1942,"issue_id":"lettatoolsselector-ttay1","author":"root","text":"Synced from Beads: lettatoolsselector-ijw4\n\n---\nHuly Issue: LTSEL-381","created_at":"2026-01-02T03:28:45Z"}]}
{"id":"lettatoolsselector-ttdlm","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:21:57.069267727Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:57.705239395Z","closed_at":"2026-01-02T20:21:57.705239395Z","close_reason":"Closed","comments":[{"id":4097,"issue_id":"lettatoolsselector-ttdlm","author":"root","text":"Synced from Huly: LTSEL-227","created_at":"2026-01-02T20:21:57Z"}]}
{"id":"lettatoolsselector-tttgr","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:19.506602549Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:19.506602549Z","comments":[{"id":2233,"issue_id":"lettatoolsselector-tttgr","author":"root","text":"Synced from Beads: lettatoolsselector-9vsz\n\n---\nHuly Issue: LTSEL-560","created_at":"2026-01-02T03:44:19Z"}]}
{"id":"lettatoolsselector-tute","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:16.129350415Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:16.458793881Z","closed_at":"2026-01-02T01:08:16.458793881Z","close_reason":"Closed","comments":[{"id":1164,"issue_id":"lettatoolsselector-tute","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T01:08:16Z"}]}
{"id":"lettatoolsselector-tvmkk","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:18.886578615Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:20.099276378Z","closed_at":"2026-01-02T07:42:20.099276378Z","close_reason":"Closed","comments":[{"id":2740,"issue_id":"lettatoolsselector-tvmkk","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T07:42:19Z"}]}
{"id":"lettatoolsselector-tvnf1","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:59:59.835253855Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:00.404302659Z","closed_at":"2026-01-02T06:00:00.404302659Z","close_reason":"Closed","comments":[{"id":2517,"issue_id":"lettatoolsselector-tvnf1","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T06:00:00Z"}]}
{"id":"lettatoolsselector-twu4k","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:55:24.56682856Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:55:25.320117936Z","closed_at":"2026-01-02T21:55:25.320117936Z","close_reason":"Closed","comments":[{"id":4278,"issue_id":"lettatoolsselector-twu4k","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T21:55:25Z"}]}
{"id":"lettatoolsselector-tx0gk","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:01.450260435Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:01.990232531Z","closed_at":"2026-01-02T07:43:01.990232531Z","close_reason":"Closed","comments":[{"id":2766,"issue_id":"lettatoolsselector-tx0gk","author":"root","text":"Synced from Huly: LTSEL-243","created_at":"2026-01-02T07:43:01Z"}]}
{"id":"lettatoolsselector-tx8o4","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:40.590449064Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:42.17425901Z","closed_at":"2026-01-02T10:57:42.17425901Z","close_reason":"Closed","comments":[{"id":3115,"issue_id":"lettatoolsselector-tx8o4","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T10:57:41Z"}]}
{"id":"lettatoolsselector-txe8k","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:14.47008551Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:16.696550133Z","closed_at":"2026-01-02T20:55:16.696550133Z","close_reason":"Closed","comments":[{"id":4152,"issue_id":"lettatoolsselector-txe8k","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T20:55:16Z"}]}
{"id":"lettatoolsselector-ty417","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:47:46.951162576Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:47.269668724Z","closed_at":"2026-01-02T03:47:47.269668724Z","close_reason":"Closed"}
{"id":"lettatoolsselector-tyg6s","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:38:09.28195464Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:38:10.138138982Z","closed_at":"2026-01-02T10:38:10.138138982Z","close_reason":"Closed","comments":[{"id":3107,"issue_id":"lettatoolsselector-tyg6s","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T10:38:09Z"}]}
{"id":"lettatoolsselector-tzmtv","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:47:53.381732365Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:53.691532887Z","closed_at":"2026-01-02T03:47:53.691532887Z","close_reason":"Closed"}
{"id":"lettatoolsselector-tzr","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.069185687Z","updated_at":"2025-12-29T18:56:05.16470506Z","closed_at":"2025-12-29T18:56:05.16470506Z","close_reason":"Duplicate of closed lettatoolsselector-b1t","comments":[{"id":8,"issue_id":"lettatoolsselector-tzr","author":"node","text":"## Problem\n\nWebhook receiver and tool selector have different ideas about what fields are required, what keep_tools means, and how limits work.\n\n## Solution\n\nDefine a formal contract (JSON schema or Pydantic model) that both sides adhere to.\n\n## Acceptance Criteria\n\n- [ ] Document payload schema: query, agent_id, keep_tools, limit, min_score, protected_tools\n- [ ] Document response schema: success, attached, detached, preserved, errors\n- [ ] Document behavior: what happens when limits are exceeded, how protected tools work\n- [ ] Version the contract (v1) to allow future evolution\n- [ ] Both repos reference the same contract documentation\n\n## Technical Notes\n\n- Consider using OpenAPI/Swagger for formal spec\n- Publish contract in shared docs location or SDK repo\n\n---\nHuly Issue: LTSEL-9","created_at":"2025-12-22T23:46:27Z"}]}
{"id":"lettatoolsselector-tzrci","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:41.3590081Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:41.96406609Z","closed_at":"2026-01-02T06:17:41.96406609Z","close_reason":"Closed","comments":[{"id":2556,"issue_id":"lettatoolsselector-tzrci","author":"root","text":"Synced from Huly: LTSEL-40","created_at":"2026-01-02T06:17:41Z"}]}
{"id":"lettatoolsselector-tzslx","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:24:35.318858678Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:24:35.920613723Z","closed_at":"2026-01-02T18:24:35.920613723Z","close_reason":"Closed","comments":[{"id":3829,"issue_id":"lettatoolsselector-tzslx","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T18:24:35Z"}]}
{"id":"lettatoolsselector-tztdb","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:49.822687061Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:50.280087086Z","closed_at":"2026-01-02T05:40:50.280087086Z","close_reason":"Closed","comments":[{"id":2466,"issue_id":"lettatoolsselector-tztdb","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T05:40:50Z"}]}
{"id":"lettatoolsselector-tzuh","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:37.306653579Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:37.651158255Z","closed_at":"2026-01-02T02:35:37.651158255Z","close_reason":"Closed","comments":[{"id":1369,"issue_id":"lettatoolsselector-tzuh","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T02:35:37Z"}]}
{"id":"lettatoolsselector-tzwq","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:25:12.296426157Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:12.520439302Z","closed_at":"2026-01-02T01:25:12.520439302Z","close_reason":"Closed"}
{"id":"lettatoolsselector-tzxz5","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:21.603256904Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:22.072433549Z","closed_at":"2026-01-02T07:42:22.072433549Z","close_reason":"Closed","comments":[{"id":2741,"issue_id":"lettatoolsselector-tzxz5","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T07:42:21Z"}]}
{"id":"lettatoolsselector-u04z3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:46.165282952Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:46.165282952Z","comments":[{"id":1807,"issue_id":"lettatoolsselector-u04z3","author":"root","text":"Synced from Beads: lettatoolsselector-ecmm\n\n---\nHuly Issue: LTSEL-561","created_at":"2026-01-02T03:27:46Z"}]}
{"id":"lettatoolsselector-u0j26","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:09.020315592Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:09.564229758Z","closed_at":"2026-01-02T13:36:09.564229758Z","close_reason":"Closed","comments":[{"id":3352,"issue_id":"lettatoolsselector-u0j26","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T13:36:09Z"}]}
{"id":"lettatoolsselector-u0j7n","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:30:55.185843851Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:30:56.899520631Z","closed_at":"2026-01-02T17:30:56.899520631Z","close_reason":"Closed","comments":[{"id":3763,"issue_id":"lettatoolsselector-u0j7n","author":"root","text":"Synced from Huly: LTSEL-53","created_at":"2026-01-02T17:30:56Z"}]}
{"id":"lettatoolsselector-u0ya5","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:15.771715777Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:15.771715777Z","comments":[{"id":2231,"issue_id":"lettatoolsselector-u0ya5","author":"root","text":"Synced from Beads: lettatoolsselector-dv8m\n\n---\nHuly Issue: LTSEL-566","created_at":"2026-01-02T03:44:16Z"}]}
{"id":"lettatoolsselector-u129y","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:37:28.233500649Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:37:28.800935355Z","closed_at":"2026-01-02T14:37:28.800935355Z","close_reason":"Closed","comments":[{"id":3486,"issue_id":"lettatoolsselector-u129y","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T14:37:28Z"}]}
{"id":"lettatoolsselector-u1pga","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:57:23.83695454Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:24.193789679Z","closed_at":"2026-01-02T12:57:24.193789679Z","close_reason":"Closed"}
{"id":"lettatoolsselector-u1vbd","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:06:21.594579073Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:06:21.964938793Z","closed_at":"2026-01-02T14:06:21.964938793Z","close_reason":"Closed"}
{"id":"lettatoolsselector-u23q","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:08:29.176465144Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:29.509906763Z","closed_at":"2026-01-02T01:08:29.509906763Z","close_reason":"Closed","comments":[{"id":1187,"issue_id":"lettatoolsselector-u23q","author":"root","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2026-01-02T01:08:29Z"}]}
{"id":"lettatoolsselector-u2q8v","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:59:29.89660659Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:59:30.472412568Z","closed_at":"2026-01-02T17:59:30.472412568Z","close_reason":"Closed","comments":[{"id":3822,"issue_id":"lettatoolsselector-u2q8v","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T17:59:30Z"}]}
{"id":"lettatoolsselector-u3ekv","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:41:18.978111013Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:41:20.740834417Z","closed_at":"2026-01-02T20:41:20.740834417Z","close_reason":"Closed"}
{"id":"lettatoolsselector-u3mxm","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:04:17.092090151Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:04:17.657973177Z","closed_at":"2026-01-02T08:04:17.657973177Z","close_reason":"Closed","comments":[{"id":2834,"issue_id":"lettatoolsselector-u3mxm","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T08:04:17Z"}]}
{"id":"lettatoolsselector-u3xp1","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:25:22.025554094Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:25:22.58030124Z","closed_at":"2026-01-02T15:25:22.58030124Z","close_reason":"Closed","comments":[{"id":3575,"issue_id":"lettatoolsselector-u3xp1","author":"root","text":"Synced from Huly: LTSEL-227","created_at":"2026-01-02T15:25:22Z"}]}
{"id":"lettatoolsselector-u4dks","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:27.886735729Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:28.399415808Z","closed_at":"2026-01-02T11:09:28.399415808Z","close_reason":"Closed","comments":[{"id":3174,"issue_id":"lettatoolsselector-u4dks","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T11:09:28Z"}]}
{"id":"lettatoolsselector-u4rf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:13:03.803207095Z","updated_at":"2025-12-30T02:11:29.708523561Z","comments":[{"id":941,"issue_id":"lettatoolsselector-u4rf","author":"root","text":"Synced from Beads: lettatoolsselector-76g\n\n---\nHuly Issue: LTSEL-95","created_at":"2025-12-29T21:13:04Z"}]}
{"id":"lettatoolsselector-u50ht","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:46.305089783Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:46.305089783Z","comments":[{"id":1944,"issue_id":"lettatoolsselector-u50ht","author":"root","text":"Synced from Beads: lettatoolsselector-dmq2\n\n---\nHuly Issue: LTSEL-379","created_at":"2026-01-02T03:28:46Z"}]}
{"id":"lettatoolsselector-u6mps","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:26.383288738Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:26.956998499Z","closed_at":"2026-01-02T08:20:26.956998499Z","close_reason":"Closed","comments":[{"id":2851,"issue_id":"lettatoolsselector-u6mps","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T08:20:26Z"}]}
{"id":"lettatoolsselector-u7z2w","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:29:14.14994292Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:29:14.800477977Z","closed_at":"2026-01-02T19:29:14.800477977Z","close_reason":"Closed","comments":[{"id":3967,"issue_id":"lettatoolsselector-u7z2w","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T19:29:14Z"}]}
{"id":"lettatoolsselector-u8g1r","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:00:01.967287198Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:00:02.581307565Z","closed_at":"2026-01-02T19:00:02.581307565Z","close_reason":"Closed","comments":[{"id":3919,"issue_id":"lettatoolsselector-u8g1r","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T19:00:02Z"}]}
{"id":"lettatoolsselector-u8gb","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:50.12552949Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:50.464176823Z","closed_at":"2026-01-02T02:19:50.464176823Z","close_reason":"Closed","comments":[{"id":1292,"issue_id":"lettatoolsselector-u8gb","author":"root","text":"Synced from Beads: lettatoolsselector-sxk\n\n---\nHuly Issue: LTSEL-30","created_at":"2026-01-02T02:19:50Z"}]}
{"id":"lettatoolsselector-u94q","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:30.726512441Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:31.068091381Z","closed_at":"2026-01-02T02:19:31.068091381Z","close_reason":"Closed","comments":[{"id":1275,"issue_id":"lettatoolsselector-u94q","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T02:19:30Z"}]}
{"id":"lettatoolsselector-u9ksw","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:22.07284923Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:23.596497334Z","closed_at":"2026-01-02T09:54:23.596497334Z","close_reason":"Closed","comments":[{"id":3025,"issue_id":"lettatoolsselector-u9ksw","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T09:54:23Z"}]}
{"id":"lettatoolsselector-uascu","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:10:26.793646774Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:10:27.338274979Z","closed_at":"2026-01-02T11:10:27.338274979Z","close_reason":"Closed","comments":[{"id":3184,"issue_id":"lettatoolsselector-uascu","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T11:10:27Z"}]}
{"id":"lettatoolsselector-uavch","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:23.482724722Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:23.482724722Z","comments":[{"id":2021,"issue_id":"lettatoolsselector-uavch","author":"root","text":"Synced from Beads: lettatoolsselector-e4np\n\n---\nHuly Issue: LTSEL-294","created_at":"2026-01-02T03:29:23Z"}]}
{"id":"lettatoolsselector-ubk","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.486559568Z","updated_at":"2025-12-29T18:56:02.155671516Z","closed_at":"2025-12-29T18:56:02.155671516Z","close_reason":"Duplicate of closed lettatoolsselector-ubl","comments":[{"id":11,"issue_id":"lettatoolsselector-ubk","author":"node","text":"## Problem\n\nIn  function (), there was a bug where detachment results could be incorrectly mapped to tool IDs due to set-to-list conversion happening twice.\n\n### Root Cause\n\n\n\nWhile Python 3.7+ maintains insertion order for sets in practice, converting a set to a list twice creates potential for mismatched mappings between async task results and tool IDs.\n\n## Impact\n\n- **Actual detachment operations worked correctly** - tools were being detached properly\n- **Logging/reporting was potentially incorrect** - wrong tool IDs could be logged as success/failure\n- **Debugging confusion** - audit logs may have shown incorrect tool names for detach operations\n\n## Solution\n\nConvert the set to a list **once** and reuse it:\n\n\n\n## Status\n\n**Fixed** - Applied to  lines 1208-1217. Container restarted to apply changes.\n\n## Related\n\n- Similar pattern in  function was already correct (iterates over list directly)\n- Relates to LTSEL-6 (SDK migration) and LTSEL-11 (structured events for attach/detach)\n\n---\nHuly Issue: LTSEL-27","created_at":"2025-12-22T23:46:27Z"}]}
{"id":"lettatoolsselector-ubl","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:10.726358617Z","updated_at":"2025-12-23T03:23:11.118829205Z","closed_at":"2025-12-23T03:23:11.118829205Z","close_reason":"Closed","comments":[{"id":35,"issue_id":"lettatoolsselector-ubl","author":"node","text":"## Problem\n\nIn  function (), there was a bug where detachment results could be incorrectly mapped to tool IDs due to set-to-list conversion happening twice.\n\n### Root Cause\n\n\n\nWhile Python 3.7+ maintains insertion order for sets in practice, converting a set to a list twice creates potential for mismatched mappings between async task results and tool IDs.\n\n## Impact\n\n- **Actual detachment operations worked correctly** - tools were being detached properly\n- **Logging/reporting was potentially incorrect** - wrong tool IDs could be logged as success/failure\n- **Debugging confusion** - audit logs may have shown incorrect tool names for detach operations\n\n## Solution\n\nConvert the set to a list **once** and reuse it:\n\n\n\n## Status\n\n**Fixed** - Applied to  lines 1208-1217. Container restarted to apply changes.\n\n## Related\n\n- Similar pattern in  function was already correct (iterates over list directly)\n- Relates to LTSEL-6 (SDK migration) and LTSEL-11 (structured events for attach/detach)\n\n---\nHuly Issue: LTSEL-27","created_at":"2025-12-23T03:23:10Z"}]}
{"id":"lettatoolsselector-uc10q","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:23:16.920291959Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:23:17.56318541Z","closed_at":"2026-01-02T15:23:17.56318541Z","close_reason":"Closed","comments":[{"id":3566,"issue_id":"lettatoolsselector-uc10q","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T15:23:17Z"}]}
{"id":"lettatoolsselector-ucg1q","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:22:09.673063703Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:22:10.192534371Z","closed_at":"2026-01-02T19:22:10.192534371Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ucs6v","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:47:20.781718162Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:21.122160936Z","closed_at":"2026-01-02T03:47:21.122160936Z","close_reason":"Closed"}
{"id":"lettatoolsselector-udada","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:03:32.329910009Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:03:32.947544499Z","closed_at":"2026-01-02T15:03:32.947544499Z","close_reason":"Closed","comments":[{"id":3526,"issue_id":"lettatoolsselector-udada","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T15:03:32Z"}]}
{"id":"lettatoolsselector-udmeb","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:41:32.543100341Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:41:33.43638536Z","closed_at":"2026-01-02T22:41:33.43638536Z","close_reason":"Closed","comments":[{"id":4360,"issue_id":"lettatoolsselector-udmeb","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T22:41:33Z"}]}
{"id":"lettatoolsselector-uefh5","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:47:28.579250289Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:47:29.225506446Z","closed_at":"2026-01-02T21:47:29.225506446Z","close_reason":"Closed","comments":[{"id":4248,"issue_id":"lettatoolsselector-uefh5","author":"root","text":"Synced from Huly: LTSEL-44","created_at":"2026-01-02T21:47:28Z"}]}
{"id":"lettatoolsselector-ufbhf","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:48.329907601Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:48.772264186Z","closed_at":"2026-01-02T05:40:48.772264186Z","close_reason":"Closed","comments":[{"id":2464,"issue_id":"lettatoolsselector-ufbhf","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T05:40:48Z"}]}
{"id":"lettatoolsselector-ufru","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:31:04.701361885Z","updated_at":"2025-12-30T02:05:09.268704012Z","comments":[{"id":1057,"issue_id":"lettatoolsselector-ufru","author":"root","text":"Synced from Beads: lettatoolsselector-7dj\n\n---\nHuly Issue: LTSEL-55","created_at":"2025-12-29T21:31:05Z"}]}
{"id":"lettatoolsselector-ufs","title":"[Perf] Reduce excessive logging in hot paths","description":"## Problem\nDEBUG and INFO level logs on every request, even in production. String formatting happens regardless of log level.\n\n**Location:** Throughout `routes/tools.py`, `tool_manager.py`\n\n```python\n# Line 205 in routes/tools.py\nlogger.info(\"Received request for /api/v1/tools/search\")\n\n# Line 247\nlogger.info(f\"Search: {len(results)} total, {len(filtered_results)} after MCP filtering\")\n```\n\n## Impact\n- **Latency:** 1-5ms cumulative per request in string formatting and I/O\n- **Priority:** LOW-MEDIUM\n\n## Solution\nUse lazy formatting and reduce INFO logs in hot paths:\n\n```python\n# Use lazy formatting\nlogger.debug(\"Search: %d total, %d after filtering\", len(results), len(filtered_results))\n\n# Or check level before formatting\nif logger.isEnabledFor(logging.DEBUG):\n    logger.debug(f\"Search: {len(results)} total, {len(filtered_results)} after MCP filtering\")\n```\n\n## Guidelines\n- Request entry/exit: DEBUG level (not INFO)\n- Errors: ERROR level\n- Significant events (attach/prune success): INFO level\n- Detailed diagnostics: DEBUG level\n\n## Acceptance Criteria\n- [ ] Hot path logs reduced to DEBUG level\n- [ ] Lazy formatting used where appropriate\n- [ ] No string formatting when log level disabled\n- [ ] All unit tests pass","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-29T01:50:34.202369804Z","updated_at":"2025-12-29T19:31:33.274637168Z","closed_at":"2025-12-29T19:31:33.274637168Z","close_reason":"Converted hot path logs from INFO to DEBUG, used lazy formatting (logger.debug with %s placeholders)","labels":["performance"]}
{"id":"lettatoolsselector-ug462","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:37.478353504Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:37.478353504Z","comments":[{"id":2053,"issue_id":"lettatoolsselector-ug462","author":"root","text":"Synced from Beads: lettatoolsselector-pc3i\n\n---\nHuly Issue: LTSEL-262","created_at":"2026-01-02T03:29:37Z"}]}
{"id":"lettatoolsselector-uh4qv","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:59:38.288676843Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:59:39.0835575Z","closed_at":"2026-01-02T17:59:39.0835575Z","close_reason":"Closed","comments":[{"id":3824,"issue_id":"lettatoolsselector-uh4qv","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T17:59:38Z"}]}
{"id":"lettatoolsselector-uhslx","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:18:42.529764229Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:42.982658048Z","closed_at":"2026-01-02T06:18:42.982658048Z","close_reason":"Closed","comments":[{"id":2576,"issue_id":"lettatoolsselector-uhslx","author":"root","text":"Synced from Huly: LTSEL-234","created_at":"2026-01-02T06:18:42Z"}]}
{"id":"lettatoolsselector-uhzbe","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:04.967451188Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:04.967451188Z","comments":[{"id":1851,"issue_id":"lettatoolsselector-uhzbe","author":"root","text":"Synced from Beads: lettatoolsselector-94qy\n\n---\nHuly Issue: LTSEL-499","created_at":"2026-01-02T03:28:05Z"}]}
{"id":"lettatoolsselector-ui6g2","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:55.378588177Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:55.378588177Z","comments":[{"id":2255,"issue_id":"lettatoolsselector-ui6g2","author":"root","text":"Synced from Huly: LTSEL-463","created_at":"2026-01-02T03:44:55Z"}]}
{"id":"lettatoolsselector-uj0r","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:06.151065064Z","updated_at":"2025-12-31T05:19:19.78841049Z","comments":[{"id":1014,"issue_id":"lettatoolsselector-uj0r","author":"root","text":"Synced from Beads: lettatoolsselector-nlt\n\n---\nHuly Issue: LTSEL-34","created_at":"2025-12-29T21:22:06Z"}]}
{"id":"lettatoolsselector-ujom","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:40.877191253Z","updated_at":"2025-12-29T21:33:28.526631716Z","closed_at":"2025-12-29T21:33:28.526631716Z","close_reason":"Duplicate","comments":[{"id":424,"issue_id":"lettatoolsselector-ujom","author":"root","text":"Synced from Beads: lettatoolsselector-ux4\n\n---\nHuly Issue: LTSEL-186","created_at":"2025-12-29T20:20:41Z"}]}
{"id":"lettatoolsselector-uk6ud","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:00:15.614404134Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:16.140934402Z","closed_at":"2026-01-02T06:00:16.140934402Z","close_reason":"Closed","comments":[{"id":2531,"issue_id":"lettatoolsselector-uk6ud","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T06:00:15Z"}]}
{"id":"lettatoolsselector-uklpx","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:20.225731962Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:20.225731962Z","comments":[{"id":1886,"issue_id":"lettatoolsselector-uklpx","author":"root","text":"Synced from Beads: lettatoolsselector-wsml\n\n---\nHuly Issue: LTSEL-458","created_at":"2026-01-02T03:28:20Z"}]}
{"id":"lettatoolsselector-ukqu6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:51.111639016Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:51.111639016Z","comments":[{"id":1955,"issue_id":"lettatoolsselector-ukqu6","author":"root","text":"Synced from Beads: lettatoolsselector-36qf\n\n---\nHuly Issue: LTSEL-366","created_at":"2026-01-02T03:28:51Z"}]}
{"id":"lettatoolsselector-ukshf","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:45.419622178Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:45.842087804Z","closed_at":"2026-01-02T04:39:45.842087804Z","close_reason":"Closed","comments":[{"id":2427,"issue_id":"lettatoolsselector-ukshf","author":"root","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2026-01-02T04:39:45Z"}]}
{"id":"lettatoolsselector-ulg06","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:50.456860527Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:50.811304137Z","closed_at":"2026-01-02T03:06:50.811304137Z","close_reason":"Closed","comments":[{"id":1571,"issue_id":"lettatoolsselector-ulg06","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T03:06:50Z"}]}
{"id":"lettatoolsselector-umr2n","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:56:20.311706089Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:56:20.845777509Z","closed_at":"2026-01-02T12:56:20.845777509Z","close_reason":"Closed","comments":[{"id":3317,"issue_id":"lettatoolsselector-umr2n","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T12:56:20Z"}]}
{"id":"lettatoolsselector-unfo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:25.658887147Z","updated_at":"2025-12-30T02:07:24.219221377Z","comments":[{"id":924,"issue_id":"lettatoolsselector-unfo","author":"root","text":"Synced from Beads: lettatoolsselector-9cq\n\n---\nHuly Issue: LTSEL-98","created_at":"2025-12-29T21:11:26Z"}]}
{"id":"lettatoolsselector-ungm","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:07.18083387Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:07.588675548Z","closed_at":"2026-01-02T02:19:07.588675548Z","close_reason":"Closed","comments":[{"id":1269,"issue_id":"lettatoolsselector-ungm","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T02:19:07Z"}]}
{"id":"lettatoolsselector-unm4","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:13:11.300085145Z","updated_at":"2025-12-29T21:33:30.580166267Z","closed_at":"2025-12-29T21:33:30.580166267Z","close_reason":"Duplicate","comments":[{"id":346,"issue_id":"lettatoolsselector-unm4","author":"root","text":"Synced from Beads: lettatoolsselector-6pf\n\n---\nHuly Issue: LTSEL-212","created_at":"2025-12-29T20:13:11Z"}]}
{"id":"lettatoolsselector-up2do","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:24:18.969639407Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:19.500837311Z","closed_at":"2026-01-02T07:24:19.500837311Z","close_reason":"Closed","comments":[{"id":2721,"issue_id":"lettatoolsselector-up2do","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T07:24:19Z"}]}
{"id":"lettatoolsselector-up7pd","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:04:48.020469905Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:04:48.577918582Z","closed_at":"2026-01-02T14:04:48.577918582Z","close_reason":"Closed","comments":[{"id":3389,"issue_id":"lettatoolsselector-up7pd","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T14:04:48Z"}]}
{"id":"lettatoolsselector-upn6d","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:44.73013041Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:44.73013041Z","comments":[{"id":2203,"issue_id":"lettatoolsselector-upn6d","author":"root","text":"Synced from Huly: LTSEL-650","created_at":"2026-01-02T03:43:44Z"}]}
{"id":"lettatoolsselector-upr0","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:20:34.898994576Z","updated_at":"2025-12-29T21:33:43.844279165Z","closed_at":"2025-12-29T21:33:43.844279165Z","close_reason":"Duplicate","comments":[{"id":422,"issue_id":"lettatoolsselector-upr0","author":"root","text":"Synced from Beads: lettatoolsselector-uwy\n\n---\nHuly Issue: LTSEL-78","created_at":"2025-12-29T20:20:35Z"}]}
{"id":"lettatoolsselector-upx9k","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:33.508330309Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:33.508330309Z","comments":[{"id":2282,"issue_id":"lettatoolsselector-upx9k","author":"root","text":"Synced from Beads: lettatoolsselector-e73p\n\n---\nHuly Issue: LTSEL-350","created_at":"2026-01-02T03:45:33Z"}]}
{"id":"lettatoolsselector-upy1t","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:00:49.809578241Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:00:50.42311617Z","closed_at":"2026-01-02T15:00:50.42311617Z","close_reason":"Closed","comments":[{"id":3518,"issue_id":"lettatoolsselector-upy1t","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T15:00:50Z"}]}
{"id":"lettatoolsselector-ur0j3","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:36.771987819Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:36.771987819Z","comments":[{"id":1786,"issue_id":"lettatoolsselector-ur0j3","author":"root","text":"Synced from Beads: lettatoolsselector-rknm\n\n---\nHuly Issue: LTSEL-590","created_at":"2026-01-02T03:27:37Z"}]}
{"id":"lettatoolsselector-ur58f","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:02.564725599Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:03.193273077Z","closed_at":"2026-01-02T09:21:03.193273077Z","close_reason":"Closed","comments":[{"id":2936,"issue_id":"lettatoolsselector-ur58f","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T09:21:02Z"}]}
{"id":"lettatoolsselector-us43","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:23:34.758289085Z","updated_at":"2025-12-30T01:59:17.991388023Z","comments":[{"id":1027,"issue_id":"lettatoolsselector-us43","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-82","created_at":"2025-12-29T21:23:35Z"}]}
{"id":"lettatoolsselector-usbgu","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:03:15.948511819Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:16.368294539Z","closed_at":"2026-01-02T20:03:16.368294539Z","close_reason":"Closed"}
{"id":"lettatoolsselector-usbu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:44:15.138691486Z","updated_at":"2025-12-30T02:42:07.83222037Z","comments":[{"id":1079,"issue_id":"lettatoolsselector-usbu","author":"root","text":"Synced from Beads: lettatoolsselector-yie\n\n---\nHuly Issue: LTSEL-29","created_at":"2025-12-29T21:44:15Z"}]}
{"id":"lettatoolsselector-usdh6","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:44:34.390918467Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:44:34.810936524Z","closed_at":"2026-01-02T22:44:34.810936524Z","close_reason":"Closed"}
{"id":"lettatoolsselector-usmzx","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:41:54.71018939Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:55.097318524Z","closed_at":"2026-01-02T09:41:55.097318524Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ut4st","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:22:01.823109386Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:02.348099451Z","closed_at":"2026-01-02T09:22:02.348099451Z","close_reason":"Closed","comments":[{"id":2963,"issue_id":"lettatoolsselector-ut4st","author":"root","text":"Synced from Huly: LTSEL-221","created_at":"2026-01-02T09:22:02Z"}]}
{"id":"lettatoolsselector-ute7r","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:06:56.126267188Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:56.551037389Z","closed_at":"2026-01-02T03:06:56.551037389Z","close_reason":"Closed","comments":[{"id":1578,"issue_id":"lettatoolsselector-ute7r","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T03:06:56Z"}]}
{"id":"lettatoolsselector-utnls","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:39:46.073547208Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:46.771818678Z","closed_at":"2026-01-02T20:39:46.771818678Z","close_reason":"Closed","comments":[{"id":4131,"issue_id":"lettatoolsselector-utnls","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T20:39:46Z"}]}
{"id":"lettatoolsselector-uu56","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:14:44.157453724Z","updated_at":"2025-12-29T21:33:30.213870951Z","closed_at":"2025-12-29T21:33:30.213870951Z","close_reason":"Duplicate","comments":[{"id":360,"issue_id":"lettatoolsselector-uu56","author":"root","text":"Synced from Beads: lettatoolsselector-mwv\n\n---\nHuly Issue: LTSEL-102","created_at":"2025-12-29T20:14:44Z"}]}
{"id":"lettatoolsselector-uu6jo","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:16.466576446Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:17.123947Z","closed_at":"2026-01-02T20:38:17.123947Z","close_reason":"Closed","comments":[{"id":4111,"issue_id":"lettatoolsselector-uu6jo","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T20:38:16Z"}]}
{"id":"lettatoolsselector-uu9cu","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:41:14.853657269Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:15.402287174Z","closed_at":"2026-01-02T09:41:15.402287174Z","close_reason":"Closed","comments":[{"id":3004,"issue_id":"lettatoolsselector-uu9cu","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T09:41:15Z"}]}
{"id":"lettatoolsselector-uv2da","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:41:31.407303324Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:31.830793765Z","closed_at":"2026-01-02T04:41:31.830793765Z","close_reason":"Closed","comments":[{"id":2443,"issue_id":"lettatoolsselector-uv2da","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T04:41:31Z"}]}
{"id":"lettatoolsselector-uv6mm","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:36.319936543Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:36.736641838Z","closed_at":"2026-01-02T03:30:36.736641838Z","close_reason":"Closed","comments":[{"id":2108,"issue_id":"lettatoolsselector-uv6mm","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T03:30:36Z"}]}
{"id":"lettatoolsselector-uvcpe","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:01:09.171374778Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:01:09.605805233Z","closed_at":"2026-01-02T21:01:09.605805233Z","close_reason":"Closed"}
{"id":"lettatoolsselector-uvigr","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:15:34.288225665Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:15:34.923087039Z","closed_at":"2026-01-02T22:15:34.923087039Z","close_reason":"Closed","comments":[{"id":4301,"issue_id":"lettatoolsselector-uvigr","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T22:15:34Z"}]}
{"id":"lettatoolsselector-uvn3g","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:04.318575912Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:04.318575912Z","comments":[{"id":2263,"issue_id":"lettatoolsselector-uvn3g","author":"root","text":"Synced from Beads: lettatoolsselector-s9o4\n\n---\nHuly Issue: LTSEL-432","created_at":"2026-01-02T03:45:04Z"}]}
{"id":"lettatoolsselector-uvxz","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:23.086320568Z","updated_at":"2025-12-29T21:33:44.465833811Z","closed_at":"2025-12-29T21:33:44.465833811Z","close_reason":"Duplicate","comments":[{"id":324,"issue_id":"lettatoolsselector-uvxz","author":"root","text":"Synced from Beads: lettatoolsselector-ul3\n\n---\nHuly Issue: LTSEL-115","created_at":"2025-12-29T20:11:23Z"}]}
{"id":"lettatoolsselector-uwawg","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:51.036423726Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:51.455540122Z","closed_at":"2026-01-02T03:47:51.455540122Z","close_reason":"Closed","comments":[{"id":2327,"issue_id":"lettatoolsselector-uwawg","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T03:47:51Z"}]}
{"id":"lettatoolsselector-uwkj","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:25:30.251362768Z","updated_at":"2025-12-29T21:33:27.25782361Z","closed_at":"2025-12-29T21:33:27.25782361Z","close_reason":"Duplicate","comments":[{"id":482,"issue_id":"lettatoolsselector-uwkj","author":"root","text":"Synced from Beads: lettatoolsselector-z62\n\n---\nHuly Issue: LTSEL-173","created_at":"2025-12-29T20:25:30Z"}]}
{"id":"lettatoolsselector-uwl3k","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:38.616913268Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:39.168014791Z","closed_at":"2026-01-02T06:17:39.168014791Z","close_reason":"Closed","comments":[{"id":2554,"issue_id":"lettatoolsselector-uwl3k","author":"root","text":"Synced from Huly: LTSEL-42","created_at":"2026-01-02T06:17:38Z"}]}
{"id":"lettatoolsselector-uwpqs","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:03:14.184915417Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:14.567147401Z","closed_at":"2026-01-02T08:03:14.567147401Z","close_reason":"Closed"}
{"id":"lettatoolsselector-uws2r","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:59:01.89418847Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:02.568294017Z","closed_at":"2026-01-02T19:59:02.568294017Z","close_reason":"Closed","comments":[{"id":4028,"issue_id":"lettatoolsselector-uws2r","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T19:59:02Z"}]}
{"id":"lettatoolsselector-uwzxc","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:18.842569028Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:19.295548322Z","closed_at":"2026-01-02T04:20:19.295548322Z","close_reason":"Closed","comments":[{"id":2375,"issue_id":"lettatoolsselector-uwzxc","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T04:20:19Z"}]}
{"id":"lettatoolsselector-ux0op","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:08.908274365Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:08.908274365Z","comments":[{"id":2268,"issue_id":"lettatoolsselector-ux0op","author":"root","text":"Synced from Beads: lettatoolsselector-eumo\n\n---\nHuly Issue: LTSEL-416","created_at":"2026-01-02T03:45:09Z"}]}
{"id":"lettatoolsselector-ux6li","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:30:09.047337151Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:30:09.469377248Z","closed_at":"2026-01-02T21:30:09.469377248Z","close_reason":"Closed"}
{"id":"lettatoolsselector-uxdc","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:18:37.258851905Z","updated_at":"2025-12-30T01:54:31.681479484Z","comments":[{"id":994,"issue_id":"lettatoolsselector-uxdc","author":"root","text":"Synced from Beads: lettatoolsselector-ix0\n\n---\nHuly Issue: LTSEL-90","created_at":"2025-12-29T21:18:37Z"}]}
{"id":"lettatoolsselector-uxfy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:19:03.908918305Z","updated_at":"2025-12-30T01:54:57.759491903Z","comments":[{"id":997,"issue_id":"lettatoolsselector-uxfy","author":"root","text":"Synced from Beads: lettatoolsselector-an3\n\n---\nHuly Issue: LTSEL-89","created_at":"2025-12-29T21:19:04Z"}]}
{"id":"lettatoolsselector-uxkiu","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:34:29.962215782Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:34:30.77843741Z","closed_at":"2026-01-02T14:34:30.77843741Z","close_reason":"Closed","comments":[{"id":3475,"issue_id":"lettatoolsselector-uxkiu","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T14:34:30Z"}]}
{"id":"lettatoolsselector-uyeno","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:04:50.755981992Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:04:51.301954629Z","closed_at":"2026-01-02T14:04:51.301954629Z","close_reason":"Closed","comments":[{"id":3390,"issue_id":"lettatoolsselector-uyeno","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T14:04:51Z"}]}
{"id":"lettatoolsselector-uzaq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:19:56.74305984Z","updated_at":"2025-12-30T01:55:52.169389916Z","comments":[{"id":1001,"issue_id":"lettatoolsselector-uzaq","author":"root","text":"Synced from Beads: lettatoolsselector-m9u\n\n---\nHuly Issue: LTSEL-77","created_at":"2025-12-29T21:19:57Z"}]}
{"id":"lettatoolsselector-uzehn","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:31.23131772Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:31.712065923Z","closed_at":"2026-01-02T07:42:31.712065923Z","close_reason":"Closed","comments":[{"id":2749,"issue_id":"lettatoolsselector-uzehn","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T07:42:31Z"}]}
{"id":"lettatoolsselector-uzjvn","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:29:27.161067661Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:27.915064486Z","closed_at":"2026-01-02T18:29:27.915064486Z","close_reason":"Closed","comments":[{"id":3858,"issue_id":"lettatoolsselector-uzjvn","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T18:29:27Z"}]}
{"id":"lettatoolsselector-uzxx5","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T18:28:55.409599918Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:28:56.068661096Z","closed_at":"2026-01-02T18:28:56.068661096Z","close_reason":"Closed","comments":[{"id":3853,"issue_id":"lettatoolsselector-uzxx5","author":"root","text":"Synced from Huly: LTSEL-239","created_at":"2026-01-02T18:28:55Z"}]}
{"id":"lettatoolsselector-v14tx","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:15:29.693871875Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:15:30.272533482Z","closed_at":"2026-01-02T16:15:30.272533482Z","close_reason":"Closed","comments":[{"id":3661,"issue_id":"lettatoolsselector-v14tx","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T16:15:30Z"}]}
{"id":"lettatoolsselector-v18su","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T12:57:15.426740156Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:15.994149474Z","closed_at":"2026-01-02T12:57:15.994149474Z","close_reason":"Closed","comments":[{"id":3325,"issue_id":"lettatoolsselector-v18su","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T12:57:15Z"}]}
{"id":"lettatoolsselector-v1l","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","description":"The `get_letta_sdk_client` function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-28T17:13:20.013706888Z","updated_at":"2025-12-29T19:21:56.470371504Z","closed_at":"2025-12-29T19:21:56.470371504Z","close_reason":"Fixed: initialized get_letta_sdk_client to None before conditional import"}
{"id":"lettatoolsselector-v1m61","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:58:50.588392433Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:51.178930451Z","closed_at":"2026-01-02T14:58:51.178930451Z","close_reason":"Closed"}
{"id":"lettatoolsselector-v22e0","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:37.777910219Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:38.303023348Z","closed_at":"2026-01-02T06:17:38.303023348Z","close_reason":"Closed","comments":[{"id":2553,"issue_id":"lettatoolsselector-v22e0","author":"root","text":"Synced from Huly: LTSEL-43","created_at":"2026-01-02T06:17:38Z"}]}
{"id":"lettatoolsselector-v2dvj","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:03.336072544Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:03.856003243Z","closed_at":"2026-01-02T14:05:03.856003243Z","close_reason":"Closed","comments":[{"id":3393,"issue_id":"lettatoolsselector-v2dvj","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T14:05:03Z"}]}
{"id":"lettatoolsselector-v2f6f","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:30.468303089Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:30.468303089Z","comments":[{"id":2189,"issue_id":"lettatoolsselector-v2f6f","author":"root","text":"Synced from Beads: lettatoolsselector-4oox\n\n---\nHuly Issue: LTSEL-693","created_at":"2026-01-02T03:43:30Z"}]}
{"id":"lettatoolsselector-v2r69","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:45.37670037Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:45.37670037Z","comments":[{"id":2116,"issue_id":"lettatoolsselector-v2r69","author":"root","text":"Synced from Beads: lettatoolsselector-rfdy\n\n---\nHuly Issue: LTSEL-250","created_at":"2026-01-02T03:30:45Z"}]}
{"id":"lettatoolsselector-v32v","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:16.14178043Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:16.496995927Z","closed_at":"2026-01-02T03:06:16.496995927Z","close_reason":"Closed","comments":[{"id":1529,"issue_id":"lettatoolsselector-v32v","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T03:06:16Z"}]}
{"id":"lettatoolsselector-v3gy1","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:00:48.909955572Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:00:49.50902507Z","closed_at":"2026-01-02T17:00:49.50902507Z","close_reason":"Closed","comments":[{"id":3686,"issue_id":"lettatoolsselector-v3gy1","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T17:00:49Z"}]}
{"id":"lettatoolsselector-v3w4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:10:59.752692749Z","updated_at":"2025-12-30T02:06:00.559077761Z","comments":[{"id":917,"issue_id":"lettatoolsselector-v3w4","author":"root","text":"Synced from Beads: lettatoolsselector-ix0\n\n---\nHuly Issue: LTSEL-90","created_at":"2025-12-29T21:11:00Z"}]}
{"id":"lettatoolsselector-v4a86","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:17:35.733659268Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:17:36.125066033Z","closed_at":"2026-01-02T16:17:36.125066033Z","close_reason":"Closed"}
{"id":"lettatoolsselector-v4x9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:35:32.941386848Z","updated_at":"2025-12-30T02:40:12.906020946Z","comments":[{"id":1071,"issue_id":"lettatoolsselector-v4x9","author":"root","text":"Synced from Beads: lettatoolsselector-7dj\n\n---\nHuly Issue: LTSEL-55","created_at":"2025-12-29T21:35:33Z"}]}
{"id":"lettatoolsselector-v5fgn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:37.391295454Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:37.391295454Z","comments":[{"id":1925,"issue_id":"lettatoolsselector-v5fgn","author":"root","text":"Synced from Beads: lettatoolsselector-kf6r\n\n---\nHuly Issue: LTSEL-404","created_at":"2026-01-02T03:28:37Z"}]}
{"id":"lettatoolsselector-v5o28","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:44:06.415261158Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:44:07.049594074Z","closed_at":"2026-01-02T07:44:07.049594074Z","close_reason":"Closed","comments":[{"id":2789,"issue_id":"lettatoolsselector-v5o28","author":"root","text":"Synced from Huly: LTSEL-235","created_at":"2026-01-02T07:44:06Z"}]}
{"id":"lettatoolsselector-v66","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:06.562903106Z","updated_at":"2025-12-23T03:23:06.933264976Z","closed_at":"2025-12-23T03:23:06.933264976Z","close_reason":"Closed","comments":[{"id":30,"issue_id":"lettatoolsselector-v66","author":"node","text":"## Purpose\n\nRegression guard to ensure tool limits are enforced end-to-end.\n\n## Test Scenario\n\n1. Create test agent with MAX_TOTAL_TOOLS-1 tools attached\n2. Trigger webhook with query that matches 5 tools\n3. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS after operation\n4. Assert: Response includes pruned tools if any were removed\n\n## Acceptance Criteria\n\n- [ ] Test runs in CI on every PR\n- [ ] Uses real tool selector API (integration test)\n- [ ] Cleans up test agent after run\n- [ ] Fails if agent exceeds limit\n\n## Technical Notes\n\n- Use pytest with fixtures for agent setup/teardown\n- May need test-specific MAX_TOTAL_TOOLS value (e.g., 5) for fast testing\n- Tag as \n\n---\nHuly Issue: LTSEL-19","created_at":"2025-12-23T03:23:06Z"}]}
{"id":"lettatoolsselector-v68m5","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:41.958835937Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:42.378186655Z","closed_at":"2026-01-02T04:39:42.378186655Z","close_reason":"Closed","comments":[{"id":2425,"issue_id":"lettatoolsselector-v68m5","author":"root","text":"Synced from Beads: lettatoolsselector-egf\n\n---\nHuly Issue: LTSEL-38","created_at":"2026-01-02T04:39:42Z"}]}
{"id":"lettatoolsselector-v6gej","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:07:15.238671516Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:07:15.808006081Z","closed_at":"2026-01-02T14:07:15.808006081Z","close_reason":"Closed","comments":[{"id":3413,"issue_id":"lettatoolsselector-v6gej","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T14:07:15Z"}]}
{"id":"lettatoolsselector-v75x","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:37:23.916184704Z","updated_at":"2025-12-29T21:33:24.476251266Z","closed_at":"2025-12-29T21:33:24.476251266Z","close_reason":"Duplicate","comments":[{"id":625,"issue_id":"lettatoolsselector-v75x","author":"root","text":"Synced from Beads: lettatoolsselector-xj7\n\n---\nHuly Issue: LTSEL-152","created_at":"2025-12-29T20:37:24Z"}]}
{"id":"lettatoolsselector-v76pt","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:12.048192035Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:12.581907159Z","closed_at":"2026-01-02T04:20:12.581907159Z","close_reason":"Closed","comments":[{"id":2366,"issue_id":"lettatoolsselector-v76pt","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T04:20:12Z"}]}
{"id":"lettatoolsselector-v7ai9","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T18:51:47.854306816Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:48.250769178Z","closed_at":"2026-01-02T18:51:48.250769178Z","close_reason":"Closed"}
{"id":"lettatoolsselector-v7dfh","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:27.773158314Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:27.773158314Z","comments":[{"id":2185,"issue_id":"lettatoolsselector-v7dfh","author":"root","text":"Synced from Beads: lettatoolsselector-jawh\n\n---\nHuly Issue: LTSEL-711","created_at":"2026-01-02T03:43:27Z"}]}
{"id":"lettatoolsselector-v7hso","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:00.996297546Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:00.996297546Z","comments":[{"id":1842,"issue_id":"lettatoolsselector-v7hso","author":"root","text":"Synced from Beads: lettatoolsselector-ib6n\n\n---\nHuly Issue: LTSEL-510","created_at":"2026-01-02T03:28:01Z"}]}
{"id":"lettatoolsselector-v7v1","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:26.917291125Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:27.27923825Z","closed_at":"2026-01-02T03:06:27.27923825Z","close_reason":"Closed","comments":[{"id":1548,"issue_id":"lettatoolsselector-v7v1","author":"root","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2026-01-02T03:06:27Z"}]}
{"id":"lettatoolsselector-v8kb8","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:20:44.182160383Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:44.576516937Z","closed_at":"2026-01-02T04:20:44.576516937Z","close_reason":"Closed"}
{"id":"lettatoolsselector-v8n7d","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:39:23.172081211Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:39:23.686367973Z","closed_at":"2026-01-02T10:39:23.686367973Z","close_reason":"Closed","comments":[{"id":3113,"issue_id":"lettatoolsselector-v8n7d","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T10:39:23Z"}]}
{"id":"lettatoolsselector-v8rk9","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:22:09.352070589Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:22:09.989244569Z","closed_at":"2026-01-02T08:22:09.989244569Z","close_reason":"Closed","comments":[{"id":2869,"issue_id":"lettatoolsselector-v8rk9","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T08:22:09Z"}]}
{"id":"lettatoolsselector-v8xic","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:09.601057068Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:09.601057068Z","comments":[{"id":1994,"issue_id":"lettatoolsselector-v8xic","author":"root","text":"Synced from Beads: lettatoolsselector-r0m2\n\n---\nHuly Issue: LTSEL-322","created_at":"2026-01-02T03:29:09Z"}]}
{"id":"lettatoolsselector-v8zlq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:34.48037892Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:34.48037892Z","comments":[{"id":2046,"issue_id":"lettatoolsselector-v8zlq","author":"root","text":"Synced from Beads: lettatoolsselector-c4b9\n\n---\nHuly Issue: LTSEL-269","created_at":"2026-01-02T03:29:34Z"}]}
{"id":"lettatoolsselector-v9ivj","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:58:35.666976284Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:58:36.269547102Z","closed_at":"2026-01-02T12:58:36.269547102Z","close_reason":"Closed","comments":[{"id":3333,"issue_id":"lettatoolsselector-v9ivj","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T12:58:36Z"}]}
{"id":"lettatoolsselector-v9yyy","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:20:24.130013746Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:24.420219661Z","closed_at":"2026-01-02T04:20:24.420219661Z","close_reason":"Closed"}
{"id":"lettatoolsselector-vac0","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:31:31.229509382Z","updated_at":"2025-12-29T21:33:25.740707415Z","closed_at":"2025-12-29T21:33:25.740707415Z","close_reason":"Duplicate","comments":[{"id":560,"issue_id":"lettatoolsselector-vac0","author":"root","text":"Synced from Beads: lettatoolsselector-2md\n\n---\nHuly Issue: LTSEL-177","created_at":"2025-12-29T20:31:31Z"}]}
{"id":"lettatoolsselector-vae7w","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:34.818225156Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:35.295555368Z","closed_at":"2026-01-02T07:43:35.295555368Z","close_reason":"Closed","comments":[{"id":2776,"issue_id":"lettatoolsselector-vae7w","author":"root","text":"Synced from Huly: LTSEL-231","created_at":"2026-01-02T07:43:35Z"}]}
{"id":"lettatoolsselector-vagin","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:59:42.501631722Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:59:43.062540939Z","closed_at":"2026-01-02T14:59:43.062540939Z","close_reason":"Closed","comments":[{"id":3515,"issue_id":"lettatoolsselector-vagin","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T14:59:42Z"}]}
{"id":"lettatoolsselector-vaj2i","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:38:09.913339367Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:38:10.585947807Z","closed_at":"2026-01-02T22:38:10.585947807Z","close_reason":"Closed","comments":[{"id":4337,"issue_id":"lettatoolsselector-vaj2i","author":"root","text":"Synced from Huly: LTSEL-51","created_at":"2026-01-02T22:38:10Z"}]}
{"id":"lettatoolsselector-vamqp","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:28.52173452Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:30.257267689Z","closed_at":"2026-01-02T14:57:30.257267689Z","close_reason":"Closed","comments":[{"id":3488,"issue_id":"lettatoolsselector-vamqp","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T14:57:30Z"}]}
{"id":"lettatoolsselector-vb52m","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:03:26.82086542Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:03:27.207307145Z","closed_at":"2026-01-02T17:03:27.207307145Z","close_reason":"Closed"}
{"id":"lettatoolsselector-vbh0e","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:07.872292652Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:07.872292652Z","comments":[{"id":2227,"issue_id":"lettatoolsselector-vbh0e","author":"root","text":"Synced from Beads: lettatoolsselector-fkeg\n\n---\nHuly Issue: LTSEL-575","created_at":"2026-01-02T03:44:08Z"}]}
{"id":"lettatoolsselector-vbkl2","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:27.624447692Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:28.033075784Z","closed_at":"2026-01-02T03:30:28.033075784Z","close_reason":"Closed","comments":[{"id":2106,"issue_id":"lettatoolsselector-vbkl2","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T03:30:27Z"}]}
{"id":"lettatoolsselector-vbon2","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:31:05.764666459Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:31:06.146559196Z","closed_at":"2026-01-02T14:31:06.146559196Z","close_reason":"Closed"}
{"id":"lettatoolsselector-vc5","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:15.201745315Z","updated_at":"2025-12-29T18:02:21.205570443-05:00","closed_at":"2025-12-29T18:02:21.205570443-05:00","close_reason":"23 contract tests covering search, attach, health, enrichment, metrics endpoints","comments":[{"id":39,"issue_id":"lettatoolsselector-vc5","author":"node","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2025-12-23T03:23:15Z"}]}
{"id":"lettatoolsselector-vc7bg","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:42.748699205Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:43.409010879Z","closed_at":"2026-01-02T10:57:43.409010879Z","close_reason":"Closed","comments":[{"id":3116,"issue_id":"lettatoolsselector-vc7bg","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T10:57:43Z"}]}
{"id":"lettatoolsselector-vcdi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:07:50.847562866Z","updated_at":"2025-12-30T04:14:16.553520787Z","comments":[{"id":885,"issue_id":"lettatoolsselector-vcdi","author":"root","text":"Synced from Beads: lettatoolsselector-76g\n\n---\nHuly Issue: LTSEL-95","created_at":"2025-12-29T21:07:51Z"}]}
{"id":"lettatoolsselector-vcpkv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:02.494286241Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:02.494286241Z","comments":[{"id":1979,"issue_id":"lettatoolsselector-vcpkv","author":"root","text":"Synced from Beads: lettatoolsselector-6iv1\n\n---\nHuly Issue: LTSEL-337","created_at":"2026-01-02T03:29:02Z"}]}
{"id":"lettatoolsselector-vcz3e","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:43.286551427Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:43.809277414Z","closed_at":"2026-01-02T11:59:43.809277414Z","close_reason":"Closed","comments":[{"id":3268,"issue_id":"lettatoolsselector-vcz3e","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T11:59:43Z"}]}
{"id":"lettatoolsselector-vd5la","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:22:36.281970752Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:36.832832449Z","closed_at":"2026-01-02T09:22:36.832832449Z","close_reason":"Closed","comments":[{"id":2972,"issue_id":"lettatoolsselector-vd5la","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T09:22:36Z"}]}
{"id":"lettatoolsselector-vdo04","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:37:08.577191637Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:09.058613688Z","closed_at":"2026-01-02T06:37:09.058613688Z","close_reason":"Closed","comments":[{"id":2630,"issue_id":"lettatoolsselector-vdo04","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T06:37:08Z"}]}
{"id":"lettatoolsselector-vfdl3","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:34.081687657Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:34.70142934Z","closed_at":"2026-01-02T20:16:34.70142934Z","close_reason":"Closed","comments":[{"id":4072,"issue_id":"lettatoolsselector-vfdl3","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T20:16:34Z"}]}
{"id":"lettatoolsselector-vfg0t","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:17:00.083237485Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:17:00.826363589Z","closed_at":"2026-01-02T22:17:00.826363589Z","close_reason":"Closed","comments":[{"id":4309,"issue_id":"lettatoolsselector-vfg0t","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T22:17:00Z"}]}
{"id":"lettatoolsselector-vfrq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:05:37.80452644Z","updated_at":"2025-12-30T04:14:12.372287615Z","comments":[{"id":864,"issue_id":"lettatoolsselector-vfrq","author":"root","text":"Synced from Beads: lettatoolsselector-mwv\n\n---\nHuly Issue: LTSEL-103","created_at":"2025-12-29T21:05:38Z"}]}
{"id":"lettatoolsselector-vfscw","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:56.118431481Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:56.649676172Z","closed_at":"2026-01-02T03:29:56.649676172Z","close_reason":"Closed","comments":[{"id":2077,"issue_id":"lettatoolsselector-vfscw","author":"root","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2026-01-02T03:29:56Z"}]}
{"id":"lettatoolsselector-vfv7","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:17:30.743768646Z","updated_at":"2025-12-30T01:53:33.938368162Z","comments":[{"id":984,"issue_id":"lettatoolsselector-vfv7","author":"root","text":"Synced from Beads: lettatoolsselector-0ye\n\n---\nHuly Issue: LTSEL-92","created_at":"2025-12-29T21:17:31Z"}]}
{"id":"lettatoolsselector-vg687","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:41.581172118Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:42.793162247Z","closed_at":"2026-01-02T05:40:42.793162247Z","close_reason":"Closed","comments":[{"id":2456,"issue_id":"lettatoolsselector-vg687","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T05:40:42Z"}]}
{"id":"lettatoolsselector-vgazs","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:20:22.854297172Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:23.146914764Z","closed_at":"2026-01-02T04:20:23.146914764Z","close_reason":"Closed"}
{"id":"lettatoolsselector-vghmv","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:05:09.932673822Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:05:10.653461582Z","closed_at":"2026-01-02T17:05:10.653461582Z","close_reason":"Closed","comments":[{"id":3709,"issue_id":"lettatoolsselector-vghmv","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T17:05:10Z"}]}
{"id":"lettatoolsselector-vgsbs","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:23:49.157692831Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:23:49.739433363Z","closed_at":"2026-01-02T07:23:49.739433363Z","close_reason":"Closed","comments":[{"id":2705,"issue_id":"lettatoolsselector-vgsbs","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T07:23:49Z"}]}
{"id":"lettatoolsselector-vh25i","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:28:15.563132043Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:28:16.3682519Z","closed_at":"2026-01-02T22:28:16.3682519Z","close_reason":"Closed","comments":[{"id":4335,"issue_id":"lettatoolsselector-vh25i","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T22:28:16Z"}]}
{"id":"lettatoolsselector-vhvux","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:55:51.129933048Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:55:51.735992763Z","closed_at":"2026-01-02T20:55:51.735992763Z","close_reason":"Closed","comments":[{"id":4160,"issue_id":"lettatoolsselector-vhvux","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T20:55:51Z"}]}
{"id":"lettatoolsselector-vihhj","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T07:43:25.840130519Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:26.366814018Z","closed_at":"2026-01-02T07:43:26.366814018Z","close_reason":"Closed","comments":[{"id":2770,"issue_id":"lettatoolsselector-vihhj","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T07:43:26Z"}]}
{"id":"lettatoolsselector-vj1kr","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:58:20.203665772Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:20.742722674Z","closed_at":"2026-01-02T10:58:20.742722674Z","close_reason":"Closed","comments":[{"id":3134,"issue_id":"lettatoolsselector-vj1kr","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T10:58:20Z"}]}
{"id":"lettatoolsselector-vj6pa","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:48:15.568404537Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:15.994866214Z","closed_at":"2026-01-02T03:48:15.994866214Z","close_reason":"Closed","comments":[{"id":2331,"issue_id":"lettatoolsselector-vj6pa","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T03:48:15Z"}]}
{"id":"lettatoolsselector-vjom8","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:00:45.803401549Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:00:46.236032946Z","closed_at":"2026-01-02T15:00:46.236032946Z","close_reason":"Closed"}
{"id":"lettatoolsselector-vjwri","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:58.91884022Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:59.494957295Z","closed_at":"2026-01-02T14:57:59.494957295Z","close_reason":"Closed","comments":[{"id":3499,"issue_id":"lettatoolsselector-vjwri","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T14:57:59Z"}]}
{"id":"lettatoolsselector-vk0wz","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:43.911192545Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:44.525582736Z","closed_at":"2026-01-02T07:02:44.525582736Z","close_reason":"Closed","comments":[{"id":2664,"issue_id":"lettatoolsselector-vk0wz","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T07:02:44Z"}]}
{"id":"lettatoolsselector-vkci","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T02:19:58.510709238Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:58.781529633Z","closed_at":"2026-01-02T02:19:58.781529633Z","close_reason":"Closed"}
{"id":"lettatoolsselector-vkfz3","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T11:36:03.929315409Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:04.320322903Z","closed_at":"2026-01-02T11:36:04.320322903Z","close_reason":"Closed"}
{"id":"lettatoolsselector-vkzm","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:24.701130904Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:25.040362707Z","closed_at":"2026-01-02T02:19:25.040362707Z","close_reason":"Closed","comments":[{"id":1271,"issue_id":"lettatoolsselector-vkzm","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T02:19:24Z"}]}
{"id":"lettatoolsselector-vl1ed","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:47:12.062374024Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:47:12.747074389Z","closed_at":"2026-01-02T15:47:12.747074389Z","close_reason":"Closed","comments":[{"id":3606,"issue_id":"lettatoolsselector-vl1ed","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T15:47:12Z"}]}
{"id":"lettatoolsselector-vlaue","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:33.677761689Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:34.256138429Z","closed_at":"2026-01-02T17:50:34.256138429Z","close_reason":"Closed","comments":[{"id":3783,"issue_id":"lettatoolsselector-vlaue","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T17:50:34Z"}]}
{"id":"lettatoolsselector-vlmgf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:27.514051623Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:27.514051623Z","comments":[{"id":2030,"issue_id":"lettatoolsselector-vlmgf","author":"root","text":"Synced from Beads: lettatoolsselector-zjdf\n\n---\nHuly Issue: LTSEL-285","created_at":"2026-01-02T03:29:27Z"}]}
{"id":"lettatoolsselector-vln5p","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:03.754174942Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:04.392530977Z","closed_at":"2026-01-02T20:38:04.392530977Z","close_reason":"Closed","comments":[{"id":4107,"issue_id":"lettatoolsselector-vln5p","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T20:38:04Z"}]}
{"id":"lettatoolsselector-vlnd4","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:59.632294487Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:00.171512734Z","closed_at":"2026-01-02T03:30:00.171512734Z","close_reason":"Closed","comments":[{"id":2081,"issue_id":"lettatoolsselector-vlnd4","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T03:29:59Z"}]}
{"id":"lettatoolsselector-vlt2c","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:15:58.807273752Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:15:59.399932221Z","closed_at":"2026-01-02T20:15:59.399932221Z","close_reason":"Closed","comments":[{"id":4064,"issue_id":"lettatoolsselector-vlt2c","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T20:15:59Z"}]}
{"id":"lettatoolsselector-vly","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:13.917942507Z","updated_at":"2025-12-29T18:10:26.752480987-05:00","closed_at":"2025-12-29T18:10:26.752480987-05:00","close_reason":"Performance test with 10/25/50 concurrent requests, P95 latency thresholds","comments":[{"id":37,"issue_id":"lettatoolsselector-vly","author":"node","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2025-12-23T03:23:14Z"}]}
{"id":"lettatoolsselector-vmjdc","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:46.168599392Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:46.641391205Z","closed_at":"2026-01-02T07:42:46.641391205Z","close_reason":"Closed","comments":[{"id":2761,"issue_id":"lettatoolsselector-vmjdc","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T07:42:46Z"}]}
{"id":"lettatoolsselector-vmql","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:55.480388899Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:55.819989155Z","closed_at":"2026-01-02T01:24:55.819989155Z","close_reason":"Closed","comments":[{"id":1228,"issue_id":"lettatoolsselector-vmql","author":"root","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2026-01-02T01:24:55Z"}]}
{"id":"lettatoolsselector-vo0zr","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:55.918997626Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:55.918997626Z","comments":[{"id":2256,"issue_id":"lettatoolsselector-vo0zr","author":"root","text":"Synced from Beads: lettatoolsselector-z5lv\n\n---\nHuly Issue: LTSEL-462","created_at":"2026-01-02T03:44:56Z"}]}
{"id":"lettatoolsselector-vph2","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:25:11.713224553Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:12.075118891Z","closed_at":"2026-01-02T01:25:12.075118891Z","close_reason":"Closed","comments":[{"id":1249,"issue_id":"lettatoolsselector-vph2","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T01:25:11Z"}]}
{"id":"lettatoolsselector-vphvq","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:00.442091232Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:00.908687639Z","closed_at":"2026-01-02T04:20:00.908687639Z","close_reason":"Closed","comments":[{"id":2351,"issue_id":"lettatoolsselector-vphvq","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T04:20:00Z"}]}
{"id":"lettatoolsselector-vpkqg","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:57:37.141429841Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:57:37.69573823Z","closed_at":"2026-01-02T14:57:37.69573823Z","close_reason":"Closed","comments":[{"id":3491,"issue_id":"lettatoolsselector-vpkqg","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T14:57:37Z"}]}
{"id":"lettatoolsselector-vpos9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:26.176397851Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:26.176397851Z","comments":[{"id":2027,"issue_id":"lettatoolsselector-vpos9","author":"root","text":"Synced from Beads: lettatoolsselector-8u7d\n\n---\nHuly Issue: LTSEL-288","created_at":"2026-01-02T03:29:26Z"}]}
{"id":"lettatoolsselector-vq011","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:22:00.600690484Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:22:01.243798827Z","closed_at":"2026-01-02T20:22:01.243798827Z","close_reason":"Closed","comments":[{"id":4098,"issue_id":"lettatoolsselector-vq011","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T20:22:00Z"}]}
{"id":"lettatoolsselector-vq0h","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:03:36.136350897Z","updated_at":"2025-12-30T04:11:43.448966735Z","comments":[{"id":845,"issue_id":"lettatoolsselector-vq0h","author":"root","text":"Synced from Beads: lettatoolsselector-80w\n\n---\nHuly Issue: LTSEL-122","created_at":"2025-12-29T21:03:36Z"}]}
{"id":"lettatoolsselector-vqaxf","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:03:10.791156972Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:03:11.447921568Z","closed_at":"2026-01-02T12:03:11.447921568Z","close_reason":"Closed","comments":[{"id":3290,"issue_id":"lettatoolsselector-vqaxf","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T12:03:11Z"}]}
{"id":"lettatoolsselector-vqeuj","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:24:56.002280306Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:24:56.600792042Z","closed_at":"2026-01-02T19:24:56.600792042Z","close_reason":"Closed","comments":[{"id":3950,"issue_id":"lettatoolsselector-vqeuj","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T19:24:56Z"}]}
{"id":"lettatoolsselector-vquyz","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:57:43.945094884Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:57:44.658885993Z","closed_at":"2026-01-02T19:57:44.658885993Z","close_reason":"Closed","comments":[{"id":4016,"issue_id":"lettatoolsselector-vquyz","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T19:57:44Z"}]}
{"id":"lettatoolsselector-vr72","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:44.495371272Z","updated_at":"2025-12-29T21:33:28.785476049Z","closed_at":"2025-12-29T21:33:28.785476049Z","close_reason":"Duplicate","comments":[{"id":411,"issue_id":"lettatoolsselector-vr72","author":"root","text":"Synced from Beads: lettatoolsselector-72a\n\n---\nHuly Issue: LTSEL-185","created_at":"2025-12-29T20:19:44Z"}]}
{"id":"lettatoolsselector-vsp12","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:20.402920496Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:21.042816086Z","closed_at":"2026-01-02T17:01:21.042816086Z","close_reason":"Closed","comments":[{"id":3692,"issue_id":"lettatoolsselector-vsp12","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T17:01:20Z"}]}
{"id":"lettatoolsselector-vtaw0","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:25:08.340917564Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:25:08.994307802Z","closed_at":"2026-01-02T15:25:08.994307802Z","close_reason":"Closed","comments":[{"id":3572,"issue_id":"lettatoolsselector-vtaw0","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T15:25:08Z"}]}
{"id":"lettatoolsselector-vteb0","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:15:16.417987872Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:15:17.189747042Z","closed_at":"2026-01-02T22:15:17.189747042Z","close_reason":"Closed","comments":[{"id":4297,"issue_id":"lettatoolsselector-vteb0","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T22:15:16Z"}]}
{"id":"lettatoolsselector-vti8w","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:26:03.535682222Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:26:04.100442373Z","closed_at":"2026-01-02T17:26:04.100442373Z","close_reason":"Closed","comments":[{"id":3740,"issue_id":"lettatoolsselector-vti8w","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T17:26:03Z"}]}
{"id":"lettatoolsselector-vtk61","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:02.08142566Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:02.08142566Z","comments":[{"id":1978,"issue_id":"lettatoolsselector-vtk61","author":"root","text":"Synced from Beads: lettatoolsselector-tgvv\n\n---\nHuly Issue: LTSEL-338","created_at":"2026-01-02T03:29:02Z"}]}
{"id":"lettatoolsselector-vtkzd","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:30:07.399512883Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:07.803784631Z","closed_at":"2026-01-02T03:30:07.803784631Z","close_reason":"Closed","comments":[{"id":2090,"issue_id":"lettatoolsselector-vtkzd","author":"root","text":"Synced from Beads: lettatoolsselector-388\n\n---\nHuly Issue: LTSEL-31","created_at":"2026-01-02T03:30:07Z"}]}
{"id":"lettatoolsselector-vtm7a","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:41:05.059860689Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:05.354859489Z","closed_at":"2026-01-02T04:41:05.354859489Z","close_reason":"Closed"}
{"id":"lettatoolsselector-vu0x8","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:20:14.216640743Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:20:14.883636558Z","closed_at":"2026-01-02T16:20:14.883636558Z","close_reason":"Closed","comments":[{"id":3678,"issue_id":"lettatoolsselector-vu0x8","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T16:20:14Z"}]}
{"id":"lettatoolsselector-vu4","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:26.3962366Z","updated_at":"2025-12-29T18:56:10.311815852Z","closed_at":"2025-12-29T18:56:10.311815852Z","close_reason":"Duplicate of closed lettatoolsselector-09g","comments":[{"id":3,"issue_id":"lettatoolsselector-vu4","author":"node","text":"## Problem\n\nTool selector has its own  and  that duplicate SDK functionality.\n\n## Solution\n\nReplace local implementations with SDK imports.\n\n## Acceptance Criteria\n\n- [ ] Add  to \n- [ ] Replace  helpers with SDK imports\n- [ ] Replace  with SDK imports\n- [ ] All existing tests still pass\n- [ ] No functional changes to tool selection behavior\n\n## Technical Notes\n\n- Worker service models may need adjustment\n- Keep API-specific logic in the repo, move generic logic to SDK\n\n---\nHuly Issue: LTSEL-6","created_at":"2025-12-22T23:46:26Z"}]}
{"id":"lettatoolsselector-vuhdp","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:01:21.741454629Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:01:22.534215103Z","closed_at":"2026-01-02T21:01:22.534215103Z","close_reason":"Closed","comments":[{"id":4183,"issue_id":"lettatoolsselector-vuhdp","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T21:01:22Z"}]}
{"id":"lettatoolsselector-vuvmx","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:49:21.028845503Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:49:21.447719678Z","closed_at":"2026-01-02T21:49:21.447719678Z","close_reason":"Closed"}
{"id":"lettatoolsselector-vv2qm","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:57:36.549780729Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:57:38.457904109Z","closed_at":"2026-01-02T19:57:38.457904109Z","close_reason":"Closed","comments":[{"id":4014,"issue_id":"lettatoolsselector-vv2qm","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T19:57:38Z"}]}
{"id":"lettatoolsselector-vvk7i","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:21:49.189289533Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:49.705589477Z","closed_at":"2026-01-02T09:21:49.705589477Z","close_reason":"Closed","comments":[{"id":2956,"issue_id":"lettatoolsselector-vvk7i","author":"root","text":"Synced from Huly: LTSEL-239","created_at":"2026-01-02T09:21:49Z"}]}
{"id":"lettatoolsselector-vwbih","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:58:17.488818308Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:58:18.127349125Z","closed_at":"2026-01-02T09:58:18.127349125Z","close_reason":"Closed","comments":[{"id":3061,"issue_id":"lettatoolsselector-vwbih","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T09:58:17Z"}]}
{"id":"lettatoolsselector-vwg51","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:12:04.59283394Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:12:04.945581377Z","closed_at":"2026-01-02T11:12:04.945581377Z","close_reason":"Closed"}
{"id":"lettatoolsselector-vwh7j","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:02:45.529671544Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:02:46.135570746Z","closed_at":"2026-01-02T21:02:46.135570746Z","close_reason":"Closed","comments":[{"id":4186,"issue_id":"lettatoolsselector-vwh7j","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T21:02:45Z"}]}
{"id":"lettatoolsselector-vwjam","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:31.435911974Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:31.435911974Z","comments":[{"id":2039,"issue_id":"lettatoolsselector-vwjam","author":"root","text":"Synced from Beads: lettatoolsselector-rvjo\n\n---\nHuly Issue: LTSEL-276","created_at":"2026-01-02T03:29:31Z"}]}
{"id":"lettatoolsselector-vwmkh","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:12:05.822164179Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:12:06.360788873Z","closed_at":"2026-01-02T11:12:06.360788873Z","close_reason":"Closed","comments":[{"id":3200,"issue_id":"lettatoolsselector-vwmkh","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T11:12:06Z"}]}
{"id":"lettatoolsselector-vwtqh","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:59:28.521978708Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:29.106932233Z","closed_at":"2026-01-02T10:59:29.106932233Z","close_reason":"Closed","comments":[{"id":3145,"issue_id":"lettatoolsselector-vwtqh","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T10:59:28Z"}]}
{"id":"lettatoolsselector-vxa6d","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:03:53.924226059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:54.530778721Z","closed_at":"2026-01-02T08:03:54.530778721Z","close_reason":"Closed","comments":[{"id":2824,"issue_id":"lettatoolsselector-vxa6d","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T08:03:54Z"}]}
{"id":"lettatoolsselector-vy7v","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:10:31.007330863Z","updated_at":"2025-12-30T04:14:23.633824456Z","comments":[{"id":914,"issue_id":"lettatoolsselector-vy7v","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-100","created_at":"2025-12-29T21:10:31Z"}]}
{"id":"lettatoolsselector-vydoz","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:29.852948286Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:30.396596458Z","closed_at":"2026-01-02T14:05:30.396596458Z","close_reason":"Closed","comments":[{"id":3400,"issue_id":"lettatoolsselector-vydoz","author":"root","text":"Synced from Huly: LTSEL-33","created_at":"2026-01-02T14:05:30Z"}]}
{"id":"lettatoolsselector-vytlt","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:51:09.07164368Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:09.726637809Z","closed_at":"2026-01-02T18:51:09.726637809Z","close_reason":"Closed","comments":[{"id":3896,"issue_id":"lettatoolsselector-vytlt","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T18:51:09Z"}]}
{"id":"lettatoolsselector-vz3aa","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:50.822739736Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:50.822739736Z","comments":[{"id":1818,"issue_id":"lettatoolsselector-vz3aa","author":"root","text":"Synced from Beads: lettatoolsselector-uxwp\n\n---\nHuly Issue: LTSEL-541","created_at":"2026-01-02T03:27:51Z"}]}
{"id":"lettatoolsselector-vzop5","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:00:12.697405878Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:12.998589997Z","closed_at":"2026-01-02T06:00:12.998589997Z","close_reason":"Closed"}
{"id":"lettatoolsselector-w08v","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:50.207962197Z","updated_at":"2025-12-30T01:48:48.238053355Z","comments":[{"id":958,"issue_id":"lettatoolsselector-w08v","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-85","created_at":"2025-12-29T21:14:50Z"}]}
{"id":"lettatoolsselector-w0k04","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:59:29.805125742Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:59:30.443663056Z","closed_at":"2026-01-02T19:59:30.443663056Z","close_reason":"Closed","comments":[{"id":4033,"issue_id":"lettatoolsselector-w0k04","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T19:59:30Z"}]}
{"id":"lettatoolsselector-w0n5c","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:55:09.468777594Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:55:09.859913659Z","closed_at":"2026-01-02T17:55:09.859913659Z","close_reason":"Closed"}
{"id":"lettatoolsselector-w0o1","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:19:46.389280448Z","updated_at":"2025-12-29T21:33:28.698311734Z","closed_at":"2025-12-29T21:33:28.698311734Z","close_reason":"Duplicate","comments":[{"id":414,"issue_id":"lettatoolsselector-w0o1","author":"root","text":"Synced from Beads: lettatoolsselector-qh2\n\n---\nHuly Issue: LTSEL-199","created_at":"2025-12-29T20:19:46Z"}]}
{"id":"lettatoolsselector-w0x5r","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:42:06.116827118Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:42:06.52203926Z","closed_at":"2026-01-02T09:42:06.52203926Z","close_reason":"Closed"}
{"id":"lettatoolsselector-w13cz","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T19:21:54.258144078Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:21:54.664744776Z","closed_at":"2026-01-02T19:21:54.664744776Z","close_reason":"Closed"}
{"id":"lettatoolsselector-w1gts","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:19:55.587635505Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:19:56.364967565Z","closed_at":"2026-01-02T08:19:56.364967565Z","close_reason":"Closed","comments":[{"id":2838,"issue_id":"lettatoolsselector-w1gts","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T08:19:56Z"}]}
{"id":"lettatoolsselector-w1vnn","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:49:48.931345947Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:49:49.608934654Z","closed_at":"2026-01-02T15:49:49.608934654Z","close_reason":"Closed","comments":[{"id":3613,"issue_id":"lettatoolsselector-w1vnn","author":"root","text":"Synced from Huly: LTSEL-242","created_at":"2026-01-02T15:49:49Z"}]}
{"id":"lettatoolsselector-w27ui","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:20:49.396158183Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:20:50.83174057Z","closed_at":"2026-01-02T09:20:50.83174057Z","close_reason":"Closed","comments":[{"id":2927,"issue_id":"lettatoolsselector-w27ui","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T09:20:50Z"}]}
{"id":"lettatoolsselector-w2d2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:18.495428718Z","updated_at":"2025-12-30T04:14:01.213344119Z","comments":[{"id":817,"issue_id":"lettatoolsselector-w2d2","author":"root","text":"Synced from Beads: lettatoolsselector-5j1\n\n---\nHuly Issue: LTSEL-128","created_at":"2025-12-29T21:00:18Z"}]}
{"id":"lettatoolsselector-w3upc","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:56:43.564563236Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:56:44.14630639Z","closed_at":"2026-01-02T17:56:44.14630639Z","close_reason":"Closed","comments":[{"id":3814,"issue_id":"lettatoolsselector-w3upc","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T17:56:43Z"}]}
{"id":"lettatoolsselector-w3zc8","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:22:37.191512519Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:37.708986704Z","closed_at":"2026-01-02T09:22:37.708986704Z","close_reason":"Closed","comments":[{"id":2973,"issue_id":"lettatoolsselector-w3zc8","author":"root","text":"Synced from Huly: LTSEL-238","created_at":"2026-01-02T09:22:37Z"}]}
{"id":"lettatoolsselector-w48y1","title":"[Observability] Emit structured events for tool attach/detach","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:35:54.67719274Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:35:55.228564252Z","closed_at":"2026-01-02T13:35:55.228564252Z","close_reason":"Closed","comments":[{"id":3343,"issue_id":"lettatoolsselector-w48y1","author":"root","text":"Synced from Beads: lettatoolsselector-mu4\n\n---\nHuly Issue: LTSEL-51","created_at":"2026-01-02T13:35:55Z"}]}
{"id":"lettatoolsselector-w4irc","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T03:06:51.597911253Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:51.834062332Z","closed_at":"2026-01-02T03:06:51.834062332Z","close_reason":"Closed"}
{"id":"lettatoolsselector-w4kg","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:27:46.960926329Z","updated_at":"2025-12-30T02:02:03.887955582Z","comments":[{"id":1042,"issue_id":"lettatoolsselector-w4kg","author":"root","text":"Synced from Beads: lettatoolsselector-m9u\n\n---\nHuly Issue: LTSEL-77","created_at":"2025-12-29T21:27:47Z"}]}
{"id":"lettatoolsselector-w4ln9","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:22:06.591651569Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:22:07.19169249Z","closed_at":"2026-01-02T19:22:07.19169249Z","close_reason":"Closed","comments":[{"id":3947,"issue_id":"lettatoolsselector-w4ln9","author":"root","text":"Synced from Huly: LTSEL-229","created_at":"2026-01-02T19:22:06Z"}]}
{"id":"lettatoolsselector-w4s5","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:15:10.599591855Z","updated_at":"2025-12-29T21:33:30.087326336Z","closed_at":"2025-12-29T21:33:30.087326336Z","close_reason":"Duplicate","comments":[{"id":366,"issue_id":"lettatoolsselector-w4s5","author":"root","text":"Synced from Beads: lettatoolsselector-71n\n\n---\nHuly Issue: LTSEL-204","created_at":"2025-12-29T20:15:10Z"}]}
{"id":"lettatoolsselector-w5qjo","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:17:15.63987338Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:17:16.08252025Z","closed_at":"2026-01-02T22:17:16.08252025Z","close_reason":"Closed"}
{"id":"lettatoolsselector-w6159","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:37:27.988788245Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:37:28.588299071Z","closed_at":"2026-01-02T11:37:28.588299071Z","close_reason":"Closed","comments":[{"id":3247,"issue_id":"lettatoolsselector-w6159","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T11:37:28Z"}]}
{"id":"lettatoolsselector-w6ec","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:17:28.985698101Z","updated_at":"2025-12-30T01:53:20.615546199Z","comments":[{"id":982,"issue_id":"lettatoolsselector-w6ec","author":"root","text":"Synced from Beads: lettatoolsselector-4xu\n\n---\nHuly Issue: LTSEL-82","created_at":"2025-12-29T21:17:29Z"}]}
{"id":"lettatoolsselector-w6hhh","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:03:11.776692379Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:12.465093238Z","closed_at":"2026-01-02T08:03:12.465093238Z","close_reason":"Closed","comments":[{"id":2818,"issue_id":"lettatoolsselector-w6hhh","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T08:03:12Z"}]}
{"id":"lettatoolsselector-w6vve","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:52.788439906Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:53.222760571Z","closed_at":"2026-01-02T03:29:53.222760571Z","close_reason":"Closed","comments":[{"id":2073,"issue_id":"lettatoolsselector-w6vve","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T03:29:53Z"}]}
{"id":"lettatoolsselector-w7aq7","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:03:05.371733507Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:03:05.906859437Z","closed_at":"2026-01-02T12:03:05.906859437Z","close_reason":"Closed","comments":[{"id":3287,"issue_id":"lettatoolsselector-w7aq7","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T12:03:05Z"}]}
{"id":"lettatoolsselector-w7v1q","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:36:44.180099269Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:44.70967173Z","closed_at":"2026-01-02T11:36:44.70967173Z","close_reason":"Closed","comments":[{"id":3245,"issue_id":"lettatoolsselector-w7v1q","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T11:36:44Z"}]}
{"id":"lettatoolsselector-w7xup","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:35:59.618964676Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:00.140596468Z","closed_at":"2026-01-02T10:36:00.140596468Z","close_reason":"Closed","comments":[{"id":3077,"issue_id":"lettatoolsselector-w7xup","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T10:35:59Z"}]}
{"id":"lettatoolsselector-w81kl","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:09:52.582929461Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:09:53.12656562Z","closed_at":"2026-01-02T14:09:53.12656562Z","close_reason":"Closed","comments":[{"id":3427,"issue_id":"lettatoolsselector-w81kl","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T14:09:52Z"}]}
{"id":"lettatoolsselector-w8u02","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:08.491363929Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:09.001436867Z","closed_at":"2026-01-02T10:36:09.001436867Z","close_reason":"Closed","comments":[{"id":3083,"issue_id":"lettatoolsselector-w8u02","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T10:36:08Z"}]}
{"id":"lettatoolsselector-w92aw","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:21:48.863375829Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:49.312533666Z","closed_at":"2026-01-02T04:21:49.312533666Z","close_reason":"Closed","comments":[{"id":2398,"issue_id":"lettatoolsselector-w92aw","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T04:21:49Z"}]}
{"id":"lettatoolsselector-w97ny","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:55.227482087Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:55.737693255Z","closed_at":"2026-01-02T03:29:55.737693255Z","close_reason":"Closed","comments":[{"id":2076,"issue_id":"lettatoolsselector-w97ny","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T03:29:55Z"}]}
{"id":"lettatoolsselector-w9d2d","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:31.048253146Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:31.723849162Z","closed_at":"2026-01-02T08:02:31.723849162Z","close_reason":"Closed","comments":[{"id":2807,"issue_id":"lettatoolsselector-w9d2d","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T08:02:31Z"}]}
{"id":"lettatoolsselector-w9eh1","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:54.717955687Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:54.717955687Z","comments":[{"id":2254,"issue_id":"lettatoolsselector-w9eh1","author":"root","text":"Synced from Beads: lettatoolsselector-4rrh\n\n---\nHuly Issue: LTSEL-464","created_at":"2026-01-02T03:44:55Z"}]}
{"id":"lettatoolsselector-w9p78","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T11:11:24.893066372Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:25.244466069Z","closed_at":"2026-01-02T11:11:25.244466069Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wa5rr","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:33:40.967723019Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:33:41.514230169Z","closed_at":"2026-01-02T11:33:41.514230169Z","close_reason":"Closed","comments":[{"id":3212,"issue_id":"lettatoolsselector-wa5rr","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T11:33:41Z"}]}
{"id":"lettatoolsselector-wafmo","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:47.730431958Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:47.730431958Z","comments":[{"id":1947,"issue_id":"lettatoolsselector-wafmo","author":"root","text":"Synced from Beads: lettatoolsselector-dgn2\n\n---\nHuly Issue: LTSEL-375","created_at":"2026-01-02T03:28:47Z"}]}
{"id":"lettatoolsselector-waltp","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:38:04.874819196Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:38:07.112691704Z","closed_at":"2026-01-02T22:38:07.112691704Z","close_reason":"Closed","comments":[{"id":4336,"issue_id":"lettatoolsselector-waltp","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T22:38:06Z"}]}
{"id":"lettatoolsselector-waqo5","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:58:38.309601887Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:58:39.936147415Z","closed_at":"2026-01-02T11:58:39.936147415Z","close_reason":"Closed","comments":[{"id":3251,"issue_id":"lettatoolsselector-waqo5","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T11:58:39Z"}]}
{"id":"lettatoolsselector-wasl0","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:27:34.824443931Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:27:35.454455565Z","closed_at":"2026-01-02T15:27:35.454455565Z","close_reason":"Closed","comments":[{"id":3582,"issue_id":"lettatoolsselector-wasl0","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T15:27:35Z"}]}
{"id":"lettatoolsselector-wbgx","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:30:39.844562139Z","updated_at":"2025-12-29T21:33:25.999877126Z","closed_at":"2025-12-29T21:33:25.999877126Z","close_reason":"Duplicate","comments":[{"id":554,"issue_id":"lettatoolsselector-wbgx","author":"root","text":"Synced from Beads: lettatoolsselector-z62\n\n---\nHuly Issue: LTSEL-173","created_at":"2025-12-29T20:30:40Z"}]}
{"id":"lettatoolsselector-wboud","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:24:13.316944676Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:13.898179247Z","closed_at":"2026-01-02T07:24:13.898179247Z","close_reason":"Closed","comments":[{"id":2718,"issue_id":"lettatoolsselector-wboud","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T07:24:13Z"}]}
{"id":"lettatoolsselector-wcbg","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:32:39.103434263Z","updated_at":"2025-12-29T21:33:25.583244645Z","closed_at":"2025-12-29T21:33:25.583244645Z","close_reason":"Duplicate","comments":[{"id":568,"issue_id":"lettatoolsselector-wcbg","author":"root","text":"Synced from Beads: lettatoolsselector-2bc\n\n---\nHuly Issue: LTSEL-161","created_at":"2025-12-29T20:32:39Z"}]}
{"id":"lettatoolsselector-wchus","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:22:54.946748717Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:22:55.344670645Z","closed_at":"2026-01-02T08:22:55.344670645Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wcyt5","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:22:27.823301305Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:28.203016508Z","closed_at":"2026-01-02T09:22:28.203016508Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wd5bi","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:25.382847045Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:25.763046079Z","closed_at":"2026-01-02T07:24:25.763046079Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wdgbm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:50.707490883Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:50.707490883Z","comments":[{"id":1954,"issue_id":"lettatoolsselector-wdgbm","author":"root","text":"Synced from Beads: lettatoolsselector-b3tq\n\n---\nHuly Issue: LTSEL-367","created_at":"2026-01-02T03:28:50Z"}]}
{"id":"lettatoolsselector-wdoes","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:04:29.125005136Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:04:29.840645647Z","closed_at":"2026-01-02T21:04:29.840645647Z","close_reason":"Closed","comments":[{"id":4187,"issue_id":"lettatoolsselector-wdoes","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T21:04:29Z"}]}
{"id":"lettatoolsselector-wdwpy","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:58:37.999200536Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:58:38.473286178Z","closed_at":"2026-01-02T20:58:38.473286178Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wfd53","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:59.628899962Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:00.165869477Z","closed_at":"2026-01-02T03:47:00.165869477Z","close_reason":"Closed","comments":[{"id":2296,"issue_id":"lettatoolsselector-wfd53","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T03:46:59Z"}]}
{"id":"lettatoolsselector-wfrlq","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:36:42.07523609Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:42.439423758Z","closed_at":"2026-01-02T11:36:42.439423758Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wg1g9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:48.144772Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:48.144772Z","comments":[{"id":1948,"issue_id":"lettatoolsselector-wg1g9","author":"root","text":"Synced from Beads: lettatoolsselector-8jn5\n\n---\nHuly Issue: LTSEL-374","created_at":"2026-01-02T03:28:48Z"}]}
{"id":"lettatoolsselector-wg3m","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:05.798935942Z","updated_at":"2025-12-29T21:33:28.35704772Z","closed_at":"2025-12-29T21:33:28.35704772Z","close_reason":"Duplicate","comments":[{"id":432,"issue_id":"lettatoolsselector-wg3m","author":"root","text":"Synced from Beads: lettatoolsselector-t11\n\n---\nHuly Issue: LTSEL-196","created_at":"2025-12-29T20:21:06Z"}]}
{"id":"lettatoolsselector-wgw0","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:48.87243026Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:49.219382282Z","closed_at":"2026-01-02T02:19:49.219382282Z","close_reason":"Closed","comments":[{"id":1290,"issue_id":"lettatoolsselector-wgw0","author":"root","text":"Synced from Beads: lettatoolsselector-hmg\n\n---\nHuly Issue: LTSEL-32","created_at":"2026-01-02T02:19:49Z"}]}
{"id":"lettatoolsselector-wgxie","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:21:42.807875389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:21:44.604601438Z","closed_at":"2026-01-02T19:21:44.604601438Z","close_reason":"Closed","comments":[{"id":3942,"issue_id":"lettatoolsselector-wgxie","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T19:21:44Z"}]}
{"id":"lettatoolsselector-whdwj","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:59:21.129485993Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:59:21.79862253Z","closed_at":"2026-01-02T18:59:21.79862253Z","close_reason":"Closed","comments":[{"id":3917,"issue_id":"lettatoolsselector-whdwj","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T18:59:21Z"}]}
{"id":"lettatoolsselector-whm4e","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:20:38.392225057Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:38.678830109Z","closed_at":"2026-01-02T04:20:38.678830109Z","close_reason":"Closed"}
{"id":"lettatoolsselector-whreu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:52.076924159Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:52.076924159Z","comments":[{"id":1821,"issue_id":"lettatoolsselector-whreu","author":"root","text":"Synced from Beads: lettatoolsselector-cx0v\n\n---\nHuly Issue: LTSEL-537","created_at":"2026-01-02T03:27:52Z"}]}
{"id":"lettatoolsselector-wi126","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:15:01.80240201Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:15:02.470158826Z","closed_at":"2026-01-02T22:15:02.470158826Z","close_reason":"Closed","comments":[{"id":4296,"issue_id":"lettatoolsselector-wi126","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T22:15:02Z"}]}
{"id":"lettatoolsselector-wi8c","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:31:46.943732256Z","updated_at":"2025-12-30T03:49:38.478851674Z","comments":[{"id":1060,"issue_id":"lettatoolsselector-wi8c","author":"root","text":"Synced from Beads: lettatoolsselector-nlt\n\n---\nHuly Issue: LTSEL-34","created_at":"2025-12-29T21:31:47Z"}]}
{"id":"lettatoolsselector-wica","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:42.26891366Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:42.659924216Z","closed_at":"2026-01-02T02:20:42.659924216Z","close_reason":"Closed","comments":[{"id":1312,"issue_id":"lettatoolsselector-wica","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T02:20:42Z"}]}
{"id":"lettatoolsselector-wiif5","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:21:27.261284642Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:27.818280128Z","closed_at":"2026-01-02T15:21:27.818280128Z","close_reason":"Closed","comments":[{"id":3558,"issue_id":"lettatoolsselector-wiif5","author":"root","text":"Synced from Huly: LTSEL-222","created_at":"2026-01-02T15:21:27Z"}]}
{"id":"lettatoolsselector-wisul","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:33.57952965Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:33.57952965Z","comments":[{"id":2044,"issue_id":"lettatoolsselector-wisul","author":"root","text":"Synced from Beads: lettatoolsselector-jgew\n\n---\nHuly Issue: LTSEL-271","created_at":"2026-01-02T03:29:33Z"}]}
{"id":"lettatoolsselector-wiul","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T02:20:28.442178693Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:28.688480199Z","closed_at":"2026-01-02T02:20:28.688480199Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wj1lf","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:04:51.025968134Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:04:51.777202919Z","closed_at":"2026-01-02T20:04:51.777202919Z","close_reason":"Closed","comments":[{"id":4048,"issue_id":"lettatoolsselector-wj1lf","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T20:04:51Z"}]}
{"id":"lettatoolsselector-wjn9f","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:59:34.253138405Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:59:34.865799553Z","closed_at":"2026-01-02T21:59:34.865799553Z","close_reason":"Closed","comments":[{"id":4284,"issue_id":"lettatoolsselector-wjn9f","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T21:59:34Z"}]}
{"id":"lettatoolsselector-wkbgr","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:08:58.207521791Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:08:58.762981499Z","closed_at":"2026-01-02T14:08:58.762981499Z","close_reason":"Closed","comments":[{"id":3417,"issue_id":"lettatoolsselector-wkbgr","author":"root","text":"Synced from Huly: LTSEL-234","created_at":"2026-01-02T14:08:58Z"}]}
{"id":"lettatoolsselector-wkehe","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:54.466541893Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:55.014538484Z","closed_at":"2026-01-02T15:46:55.014538484Z","close_reason":"Closed","comments":[{"id":3605,"issue_id":"lettatoolsselector-wkehe","author":"root","text":"Synced from Huly: LTSEL-218","created_at":"2026-01-02T15:46:54Z"}]}
{"id":"lettatoolsselector-wlj","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","description":"## Goal\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n### Core Evaluation (4)\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\nMay need services/evaluation.py for:\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-29T00:43:06.516457468Z","updated_at":"2025-12-29T01:21:05.512504219Z","closed_at":"2025-12-29T01:21:05.512504219Z","close_reason":"Migrated all 7 evaluation handlers and 12 helper functions to routes/evaluation.py. Blueprint is now fully self-contained (878 lines). api_server.py reduced to 2,408 lines with only 4 handlers remaining.","labels":["refactor","services-layer"]}
{"id":"lettatoolsselector-wljjo","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:25:12.665224869Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:25:13.261939278Z","closed_at":"2026-01-02T22:25:13.261939278Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wmr1e","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:44.235940178Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:44.235940178Z","comments":[{"id":2247,"issue_id":"lettatoolsselector-wmr1e","author":"root","text":"Synced from Huly: LTSEL-521","created_at":"2026-01-02T03:44:44Z"}]}
{"id":"lettatoolsselector-wn0kr","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:45:29.325227368Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:45:29.770825369Z","closed_at":"2026-01-02T22:45:29.770825369Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wn6mb","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:54:11.578758715Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:54:12.270015318Z","closed_at":"2026-01-02T18:54:12.270015318Z","close_reason":"Closed","comments":[{"id":3904,"issue_id":"lettatoolsselector-wn6mb","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T18:54:11Z"}]}
{"id":"lettatoolsselector-wnepq","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:25:07.196683695Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:25:07.933599118Z","closed_at":"2026-01-02T19:25:07.933599118Z","close_reason":"Closed","comments":[{"id":3953,"issue_id":"lettatoolsselector-wnepq","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T19:25:07Z"}]}
{"id":"lettatoolsselector-wo3bl","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:25:36.678118527Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:25:37.281972096Z","closed_at":"2026-01-02T17:25:37.281972096Z","close_reason":"Closed","comments":[{"id":3732,"issue_id":"lettatoolsselector-wo3bl","author":"root","text":"Synced from Huly: LTSEL-45","created_at":"2026-01-02T17:25:37Z"}]}
{"id":"lettatoolsselector-wopik","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T12:56:24.539956388Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:56:24.944263303Z","closed_at":"2026-01-02T12:56:24.944263303Z","close_reason":"Closed"}
{"id":"lettatoolsselector-worhd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:14.971102157Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:14.971102157Z","comments":[{"id":1874,"issue_id":"lettatoolsselector-worhd","author":"root","text":"Synced from Beads: lettatoolsselector-0czi\n\n---\nHuly Issue: LTSEL-475","created_at":"2026-01-02T03:28:15Z"}]}
{"id":"lettatoolsselector-wosdp","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:21.087640086Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:21.540717007Z","closed_at":"2026-01-02T04:39:21.540717007Z","close_reason":"Closed","comments":[{"id":2411,"issue_id":"lettatoolsselector-wosdp","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T04:39:21Z"}]}
{"id":"lettatoolsselector-wp3mu","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:36:44.354875132Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:36:45.082001953Z","closed_at":"2026-01-02T21:36:45.082001953Z","close_reason":"Closed","comments":[{"id":4239,"issue_id":"lettatoolsselector-wp3mu","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T21:36:44Z"}]}
{"id":"lettatoolsselector-wq78n","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:13.181346003Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:13.181346003Z","comments":[{"id":1870,"issue_id":"lettatoolsselector-wq78n","author":"root","text":"Synced from Beads: lettatoolsselector-3x3p\n\n---\nHuly Issue: LTSEL-480","created_at":"2026-01-02T03:28:13Z"}]}
{"id":"lettatoolsselector-wqu4q","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:27:04.801348888Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:27:05.38306703Z","closed_at":"2026-01-02T15:27:05.38306703Z","close_reason":"Closed","comments":[{"id":3579,"issue_id":"lettatoolsselector-wqu4q","author":"root","text":"Synced from Huly: LTSEL-48","created_at":"2026-01-02T15:27:05Z"}]}
{"id":"lettatoolsselector-wrb1w","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:52.466197554Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:52.928145594Z","closed_at":"2026-01-02T06:36:52.928145594Z","close_reason":"Closed","comments":[{"id":2616,"issue_id":"lettatoolsselector-wrb1w","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T06:36:52Z"}]}
{"id":"lettatoolsselector-ws3xc","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:02.101085754Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:02.659691329Z","closed_at":"2026-01-02T15:46:02.659691329Z","close_reason":"Closed","comments":[{"id":3594,"issue_id":"lettatoolsselector-ws3xc","author":"root","text":"Synced from Huly: LTSEL-39","created_at":"2026-01-02T15:46:02Z"}]}
{"id":"lettatoolsselector-wsg8f","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:00.482722613Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:00.99018301Z","closed_at":"2026-01-02T07:43:00.99018301Z","close_reason":"Closed","comments":[{"id":2765,"issue_id":"lettatoolsselector-wsg8f","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T07:43:00Z"}]}
{"id":"lettatoolsselector-wsh81","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:55.556368147Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:55.556368147Z","comments":[{"id":1829,"issue_id":"lettatoolsselector-wsh81","author":"root","text":"Synced from Beads: lettatoolsselector-ly48\n\n---\nHuly Issue: LTSEL-525","created_at":"2026-01-02T03:27:55Z"}]}
{"id":"lettatoolsselector-wslg7","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:54.292966794Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:54.861944247Z","closed_at":"2026-01-02T15:20:54.861944247Z","close_reason":"Closed","comments":[{"id":3547,"issue_id":"lettatoolsselector-wslg7","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T15:20:54Z"}]}
{"id":"lettatoolsselector-wsml","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:04:31.157812154Z","updated_at":"2025-12-30T04:14:10.456906769Z","comments":[{"id":854,"issue_id":"lettatoolsselector-wsml","author":"root","text":"Synced from Beads: lettatoolsselector-jnc\n\n---\nHuly Issue: LTSEL-105","created_at":"2025-12-29T21:04:31Z"}]}
{"id":"lettatoolsselector-wtrzw","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:15.949372771Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:16.506956078Z","closed_at":"2026-01-02T08:20:16.506956078Z","close_reason":"Closed","comments":[{"id":2846,"issue_id":"lettatoolsselector-wtrzw","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T08:20:16Z"}]}
{"id":"lettatoolsselector-wutv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:17:29.899564281Z","updated_at":"2025-12-30T01:53:26.599205989Z","comments":[{"id":983,"issue_id":"lettatoolsselector-wutv","author":"root","text":"Synced from Beads: lettatoolsselector-dg2\n\n---\nHuly Issue: LTSEL-87","created_at":"2025-12-29T21:17:30Z"}]}
{"id":"lettatoolsselector-wutzt","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:19:37.805181733Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:19:38.463268433Z","closed_at":"2026-01-02T20:19:38.463268433Z","close_reason":"Closed","comments":[{"id":4082,"issue_id":"lettatoolsselector-wutzt","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T20:19:38Z"}]}
{"id":"lettatoolsselector-wuwr9","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:51:22.058904744Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:51:22.658683093Z","closed_at":"2026-01-02T17:51:22.658683093Z","close_reason":"Closed","comments":[{"id":3793,"issue_id":"lettatoolsselector-wuwr9","author":"root","text":"Synced from Huly: LTSEL-22","created_at":"2026-01-02T17:51:22Z"}]}
{"id":"lettatoolsselector-wv2x1","title":"[Refactor] Migrate models handlers to models blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T17:07:49.704611687Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:07:50.363961261Z","closed_at":"2026-01-02T17:07:50.363961261Z","close_reason":"Closed","comments":[{"id":3725,"issue_id":"lettatoolsselector-wv2x1","author":"root","text":"Synced from Beads: lettatoolsselector-7z8\n\n## Goal\n\nMove 4 models-related handlers from api_server.py into routes/models.py with full implementations.\n\n## Handlers to Migrate\n\n- _search_test_handler() - Line 1436\n- _get_embedding_models_handler() - Line 1527\n- _get_embedding_health_handler() - Line 1622\n- _get_reranker_models_handler() - Line 1765\n\n## Dependencies\n\nThese handlers interact with:\n\n- Embedding providers (Ollama, etc.)\n- Reranker configuration\n- Health check utilities\n\n## Pattern\n\n1. Move handler implementations into models.py blueprint\n2. Pass required dependencies via configure() method\n3. May reuse existing services (embedding_providers, etc.)\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 4 handlers removed from api_server.py\n- [ ] routes/models.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-236","created_at":"2026-01-02T17:07:50Z"}]}
{"id":"lettatoolsselector-wvafo","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:39:37.510963145Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:39:38.15641961Z","closed_at":"2026-01-02T20:39:38.15641961Z","close_reason":"Closed","comments":[{"id":4129,"issue_id":"lettatoolsselector-wvafo","author":"root","text":"Synced from Huly: LTSEL-246","created_at":"2026-01-02T20:39:37Z"}]}
{"id":"lettatoolsselector-wvdl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:08:23.082249916Z","updated_at":"2025-12-30T04:14:18.454607453Z","comments":[{"id":892,"issue_id":"lettatoolsselector-wvdl","author":"root","text":"Synced from Beads: lettatoolsselector-w50\n\n---\nHuly Issue: LTSEL-97","created_at":"2025-12-29T21:08:23Z"}]}
{"id":"lettatoolsselector-wvlvv","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:22:34.009657338Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:34.588218871Z","closed_at":"2026-01-02T09:22:34.588218871Z","close_reason":"Closed","comments":[{"id":2970,"issue_id":"lettatoolsselector-wvlvv","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T09:22:34Z"}]}
{"id":"lettatoolsselector-wvs2l","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:27:07.174561603Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:27:07.57171162Z","closed_at":"2026-01-02T18:27:07.57171162Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wwk5","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:32.643985785Z","updated_at":"2025-12-29T21:33:26.987853822Z","closed_at":"2025-12-29T21:33:26.987853822Z","close_reason":"Duplicate","comments":[{"id":497,"issue_id":"lettatoolsselector-wwk5","author":"root","text":"Synced from Beads: lettatoolsselector-eln\n\n---\nHuly Issue: LTSEL-174","created_at":"2025-12-29T20:26:32Z"}]}
{"id":"lettatoolsselector-wxkud","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:00:22.010006912Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:00:22.72211783Z","closed_at":"2026-01-02T20:00:22.72211783Z","close_reason":"Closed","comments":[{"id":4038,"issue_id":"lettatoolsselector-wxkud","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T20:00:22Z"}]}
{"id":"lettatoolsselector-wxr7p","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:08.420187367Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:10.118024312Z","closed_at":"2026-01-02T15:20:10.118024312Z","close_reason":"Closed","comments":[{"id":3533,"issue_id":"lettatoolsselector-wxr7p","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T15:20:09Z"}]}
{"id":"lettatoolsselector-wyj0n","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:16.262702581Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:16.262702581Z","comments":[{"id":1877,"issue_id":"lettatoolsselector-wyj0n","author":"root","text":"Synced from Beads: lettatoolsselector-jwtk\n\n---\nHuly Issue: LTSEL-472","created_at":"2026-01-02T03:28:16Z"}]}
{"id":"lettatoolsselector-wyodo","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T22:44:47.849998214Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:44:48.583500102Z","closed_at":"2026-01-02T22:44:48.583500102Z","close_reason":"Closed","comments":[{"id":4368,"issue_id":"lettatoolsselector-wyodo","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T22:44:48Z"}]}
{"id":"lettatoolsselector-wzsan","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:21:10.15310035Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:10.588755689Z","closed_at":"2026-01-02T08:21:10.588755689Z","close_reason":"Closed"}
{"id":"lettatoolsselector-wzwi2","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:21:15.285061134Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:15.936341315Z","closed_at":"2026-01-02T20:21:15.936341315Z","close_reason":"Closed","comments":[{"id":4091,"issue_id":"lettatoolsselector-wzwi2","author":"root","text":"Synced from Huly: LTSEL-231","created_at":"2026-01-02T20:21:15Z"}]}
{"id":"lettatoolsselector-x0j","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:09.617990903Z","updated_at":"2025-12-23T03:23:09.966249296Z","closed_at":"2025-12-23T03:23:09.966249296Z","close_reason":"Closed","comments":[{"id":34,"issue_id":"lettatoolsselector-x0j","author":"node","text":"## Problem\n\nProtected tools (find_agents, find_tools) logic only exists in webhook receiver. Tool selector API should also respect protected tools during pruning.\n\n## Solution\n\nAdd PROTECTED_TOOLS env var to tool selector API and respect it during all detach operations.\n\n## Acceptance Criteria\n\n- [ ] PROTECTED_TOOLS env var (comma-separated tool names)\n- [ ] Before any detach, check if tool is protected\n- [ ] Never detach protected tools even if over limit\n- [ ] Warn if agent is over limit but can't prune due to protected tools\n- [ ] Document protected tools in compose.yaml\n\n## Technical Notes\n\n- Default protected tools: find_agents, find_tools, send_message\n- Allow override via env var\n- Lookup by name, not ID (IDs can change)\n\n---\nHuly Issue: LTSEL-10","created_at":"2025-12-23T03:23:09Z"}]}
{"id":"lettatoolsselector-x0tl6","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:49:24.884614957Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:49:25.534015041Z","closed_at":"2026-01-02T23:49:25.534015041Z","close_reason":"Closed","comments":[{"id":4386,"issue_id":"lettatoolsselector-x0tl6","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T23:49:25Z"}]}
{"id":"lettatoolsselector-x0y8v","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:11.233261349Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:12.966921517Z","closed_at":"2026-01-02T17:50:12.966921517Z","close_reason":"Closed","comments":[{"id":3777,"issue_id":"lettatoolsselector-x0y8v","author":"root","text":"Synced from Huly: LTSEL-52","created_at":"2026-01-02T17:50:12Z"}]}
{"id":"lettatoolsselector-x1row","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T19:41:12.583009901Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:41:12.980064665Z","closed_at":"2026-01-02T19:41:12.980064665Z","close_reason":"Closed"}
{"id":"lettatoolsselector-x2ukb","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:20.681371808Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:20.681371808Z","comments":[{"id":2015,"issue_id":"lettatoolsselector-x2ukb","author":"root","text":"Synced from Beads: lettatoolsselector-6fk8\n\n---\nHuly Issue: LTSEL-300","created_at":"2026-01-02T03:29:20Z"}]}
{"id":"lettatoolsselector-x2zdg","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:56:53.146933707Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:53.669943053Z","closed_at":"2026-01-02T08:56:53.669943053Z","close_reason":"Closed","comments":[{"id":2913,"issue_id":"lettatoolsselector-x2zdg","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T08:56:53Z"}]}
{"id":"lettatoolsselector-x32u","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:02.659269677Z","updated_at":"2025-12-29T21:33:28.442938125Z","closed_at":"2025-12-29T21:33:28.442938125Z","close_reason":"Duplicate","comments":[{"id":429,"issue_id":"lettatoolsselector-x32u","author":"root","text":"Synced from Beads: lettatoolsselector-n9f\n\n---\nHuly Issue: LTSEL-182","created_at":"2025-12-29T20:21:02Z"}]}
{"id":"lettatoolsselector-x3qd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:24:53.165671294Z","updated_at":"2025-12-30T01:59:47.375279319Z","comments":[{"id":1031,"issue_id":"lettatoolsselector-x3qd","author":"root","text":"Synced from Beads: lettatoolsselector-b0j\n\n---\nHuly Issue: LTSEL-80","created_at":"2025-12-29T21:24:53Z"}]}
{"id":"lettatoolsselector-x3tjy","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:55.987368567Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:56.717153272Z","closed_at":"2026-01-02T20:38:56.717153272Z","close_reason":"Closed","comments":[{"id":4122,"issue_id":"lettatoolsselector-x3tjy","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T20:38:56Z"}]}
{"id":"lettatoolsselector-x3u3j","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:02:50.609345741Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:50.953741478Z","closed_at":"2026-01-02T07:02:50.953741478Z","close_reason":"Closed"}
{"id":"lettatoolsselector-x49s8","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T09:56:14.725135703Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:56:15.061617839Z","closed_at":"2026-01-02T09:56:15.061617839Z","close_reason":"Closed"}
{"id":"lettatoolsselector-x4swg","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:55:50.130450786Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:50.678075247Z","closed_at":"2026-01-02T08:55:50.678075247Z","close_reason":"Closed"}
{"id":"lettatoolsselector-x4yvj","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:20:07.342109838Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:07.766889203Z","closed_at":"2026-01-02T04:20:07.766889203Z","close_reason":"Closed","comments":[{"id":2360,"issue_id":"lettatoolsselector-x4yvj","author":"root","text":"## Purpose\n\nEnsure tool attachment scales and doesn't degrade under concurrent webhooks.\n\n## Test Scenario\n\n1. Simulate 10 concurrent webhook requests for different agents\n2. Measure: Response time for each request\n3. Measure: Total time to process all requests\n4. Assert: P95 response time \u003c 5 seconds\n5. Assert: No errors or timeouts\n\n## Acceptance Criteria\n\n- [ ] Test uses locust or similar load testing tool\n- [ ] Runs on-demand (not in regular CI)\n- [ ] Reports latency percentiles\n- [ ] Identifies bottlenecks if any\n\n## Technical Notes\n\n- Start with 10 concurrent, scale to 50\n- Monitor Letta API rate limits\n- Tag as \n\n---\nHuly Issue: LTSEL-26","created_at":"2026-01-02T04:20:07Z"}]}
{"id":"lettatoolsselector-x5m1c","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:05:53.36501108Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:05:54.055946724Z","closed_at":"2026-01-02T17:05:54.055946724Z","close_reason":"Closed","comments":[{"id":3713,"issue_id":"lettatoolsselector-x5m1c","author":"root","text":"Synced from Huly: LTSEL-244","created_at":"2026-01-02T17:05:53Z"}]}
{"id":"lettatoolsselector-x5vs","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:04:03.483203486Z","updated_at":"2025-12-30T04:14:10.179549278Z","comments":[{"id":852,"issue_id":"lettatoolsselector-x5vs","author":"root","text":"Synced from Beads: lettatoolsselector-eyc\n\n---\nHuly Issue: LTSEL-121","created_at":"2025-12-29T21:04:03Z"}]}
{"id":"lettatoolsselector-x61k7","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T05:41:01.201367196Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:01.713744967Z","closed_at":"2026-01-02T05:41:01.713744967Z","close_reason":"Closed","comments":[{"id":2480,"issue_id":"lettatoolsselector-x61k7","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T05:41:01Z"}]}
{"id":"lettatoolsselector-x63ip","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:15:55.932823307Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:15:56.611436005Z","closed_at":"2026-01-02T20:15:56.611436005Z","close_reason":"Closed","comments":[{"id":4063,"issue_id":"lettatoolsselector-x63ip","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T20:15:56Z"}]}
{"id":"lettatoolsselector-x6fcl","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:53:23.474024647Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:53:24.037760154Z","closed_at":"2026-01-02T15:53:24.037760154Z","close_reason":"Closed","comments":[{"id":3630,"issue_id":"lettatoolsselector-x6fcl","author":"root","text":"Synced from Huly: LTSEL-233","created_at":"2026-01-02T15:53:23Z"}]}
{"id":"lettatoolsselector-x6jr3","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:59:39.119746271Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:59:39.680392002Z","closed_at":"2026-01-02T11:59:39.680392002Z","close_reason":"Closed","comments":[{"id":3267,"issue_id":"lettatoolsselector-x6jr3","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T11:59:39Z"}]}
{"id":"lettatoolsselector-x6sg6","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T20:03:20.966173422Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:21.590209331Z","closed_at":"2026-01-02T20:03:21.590209331Z","close_reason":"Closed","comments":[{"id":4045,"issue_id":"lettatoolsselector-x6sg6","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T20:03:21Z"}]}
{"id":"lettatoolsselector-x6ujq","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:48:16.38601555Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:16.819864318Z","closed_at":"2026-01-02T03:48:16.819864318Z","close_reason":"Closed","comments":[{"id":2332,"issue_id":"lettatoolsselector-x6ujq","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T03:48:16Z"}]}
{"id":"lettatoolsselector-x7pi","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:19:02.235914272Z","updated_at":"2025-12-30T01:54:46.649532512Z","comments":[{"id":995,"issue_id":"lettatoolsselector-x7pi","author":"root","text":"Synced from Beads: lettatoolsselector-leh\n\n---\nHuly Issue: LTSEL-80","created_at":"2025-12-29T21:19:02Z"}]}
{"id":"lettatoolsselector-x8cep","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:36:58.074243353Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:58.620710227Z","closed_at":"2026-01-02T13:36:58.620710227Z","close_reason":"Closed","comments":[{"id":3365,"issue_id":"lettatoolsselector-x8cep","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T13:36:58Z"}]}
{"id":"lettatoolsselector-x8fiq","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T20:58:06.722861994Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:58:07.348668656Z","closed_at":"2026-01-02T20:58:07.348668656Z","close_reason":"Closed","comments":[{"id":4174,"issue_id":"lettatoolsselector-x8fiq","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T20:58:07Z"}]}
{"id":"lettatoolsselector-x8k93","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T10:36:35.081341681Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:35.468935506Z","closed_at":"2026-01-02T10:36:35.468935506Z","close_reason":"Closed"}
{"id":"lettatoolsselector-x8lxg","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T06:00:07.16310595Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:07.473971329Z","closed_at":"2026-01-02T06:00:07.473971329Z","close_reason":"Closed"}
{"id":"lettatoolsselector-x8shh","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:35:57.95793178Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:35:58.491376848Z","closed_at":"2026-01-02T13:35:58.491376848Z","close_reason":"Closed","comments":[{"id":3345,"issue_id":"lettatoolsselector-x8shh","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T13:35:58Z"}]}
{"id":"lettatoolsselector-x8snb","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:57.795419064Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:58.396616326Z","closed_at":"2026-01-02T10:59:58.396616326Z","close_reason":"Closed","comments":[{"id":3159,"issue_id":"lettatoolsselector-x8snb","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T10:59:58Z"}]}
{"id":"lettatoolsselector-x8zwv","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:06.657853201Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:07.189177867Z","closed_at":"2026-01-02T12:54:07.189177867Z","close_reason":"Closed","comments":[{"id":3304,"issue_id":"lettatoolsselector-x8zwv","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T12:54:06Z"}]}
{"id":"lettatoolsselector-x9ba","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:21.823554857Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:22.173407846Z","closed_at":"2026-01-02T03:06:22.173407846Z","close_reason":"Closed","comments":[{"id":1539,"issue_id":"lettatoolsselector-x9ba","author":"root","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2026-01-02T03:06:22Z"}]}
{"id":"lettatoolsselector-x9gic","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:00:46.634982138Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:00:47.212801921Z","closed_at":"2026-01-02T17:00:47.212801921Z","close_reason":"Closed","comments":[{"id":3685,"issue_id":"lettatoolsselector-x9gic","author":"root","text":"Synced from Huly: LTSEL-43","created_at":"2026-01-02T17:00:46Z"}]}
{"id":"lettatoolsselector-x9ihr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:41.173426601Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:41.173426601Z","comments":[{"id":1933,"issue_id":"lettatoolsselector-x9ihr","author":"root","text":"Synced from Beads: lettatoolsselector-cj0f\n\n---\nHuly Issue: LTSEL-394","created_at":"2026-01-02T03:28:41Z"}]}
{"id":"lettatoolsselector-x9k0w","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:46:04.999731535Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:46:05.550691147Z","closed_at":"2026-01-02T15:46:05.550691147Z","close_reason":"Closed","comments":[{"id":3595,"issue_id":"lettatoolsselector-x9k0w","author":"root","text":"Synced from Huly: LTSEL-37","created_at":"2026-01-02T15:46:05Z"}]}
{"id":"lettatoolsselector-xa8k7","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:11:41.158487399Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:11:41.80264454Z","closed_at":"2026-01-02T16:11:41.80264454Z","close_reason":"Closed","comments":[{"id":3646,"issue_id":"lettatoolsselector-xa8k7","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T16:11:41Z"}]}
{"id":"lettatoolsselector-xamgl","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:45:45.807084465Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:45:46.377327161Z","closed_at":"2026-01-02T15:45:46.377327161Z","close_reason":"Closed","comments":[{"id":3589,"issue_id":"lettatoolsselector-xamgl","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T15:45:46Z"}]}
{"id":"lettatoolsselector-xaxni","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:55:47.312099605Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:55:47.955347341Z","closed_at":"2026-01-02T09:55:47.955347341Z","close_reason":"Closed","comments":[{"id":3041,"issue_id":"lettatoolsselector-xaxni","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T09:55:47Z"}]}
{"id":"lettatoolsselector-xb17e","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:21:34.581812118Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:35.159264724Z","closed_at":"2026-01-02T09:21:35.159264724Z","close_reason":"Closed","comments":[{"id":2952,"issue_id":"lettatoolsselector-xb17e","author":"root","text":"Synced from Huly: LTSEL-229","created_at":"2026-01-02T09:21:34Z"}]}
{"id":"lettatoolsselector-xbgxd","title":"[Refactor] Phase 5: Extract route handlers into blueprints","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:17.996144736Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:18.50303756Z","closed_at":"2026-01-02T06:37:18.50303756Z","close_reason":"Closed","comments":[{"id":2638,"issue_id":"lettatoolsselector-xbgxd","author":"root","text":"Synced from Beads: lettatoolsselector-sbw\n\nSplit the 101 route handlers from api_server.py into Flask Blueprints.\n\n## Depends On\n\n- lettatoolsselector-nav (Phase 2: ToolManager)\n- lettatoolsselector-4w9 (Phase 3: SearchService)\n- lettatoolsselector-lan (Phase 4: AgentService)\n\n## Route Groups to Extract\n\n### 1. Tools Blueprint () - 6 routes\n\n- POST /api/v1/tools/search\n- POST /api/v1/tools/search/rerank\n- GET /api/v1/tools\n- POST /api/v1/tools/attach\n- POST /api/v1/tools/prune\n- POST /api/v1/tools/sync\n- POST /api/v1/tools/refresh\n\n### 2. Config Blueprint () - ~40 routes\n\n- /api/v1/config/reranker/*\n- /api/v1/config/embedding/*\n- /api/v1/config/weaviate/*\n- /api/v1/config/ollama/*\n- /api/v1/config/tool-selector/*\n- /api/v1/config/backup/*\n- /api/v1/config/validate/*\n- /api/v1/config/audit/*\n\n### 3. Search Blueprint () - ~8 routes\n\n- /api/v1/search/parameter-schemas\n- /api/v1/search/parameter-sets/*\n- /api/v1/search/statistics\n- /api/v1/search/test\n\n### 4. Benchmark Blueprint () - ~8 routes\n\n- /api/v1/benchmark/query-sets/*\n- /api/v1/benchmark/runs\n\n### 5. Reranker Blueprint () - ~6 routes\n\n- /api/v1/reranker/models/registry/*\n- /api/v1/rerank/compare\n- /api/v1/ab-comparison/*\n\n### 6. Maintenance Blueprint () - ~10 routes\n\n- /api/v1/maintenance/*\n- /api/v1/logs/*\n- /api/v1/weaviate/*\n\n### 7. Health Blueprint () - 2 routes\n\n- GET /api/v1/health\n- GET /api/health\n\n### 8. Cost Control Blueprint () - ~8 routes\n\n- /api/v1/cost-control/*\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All 101 routes moved to appropriate blueprints\n- [ ] api_server.py reduced to \u003c500 lines (app setup only)\n- [ ] Routes use injected services (ToolManager, SearchService, etc.)\n- [ ] All API tests still pass\n- [ ] No changes to API contracts\n\n---\nHuly Issue: LTSEL-223","created_at":"2026-01-02T06:37:18Z"}]}
{"id":"lettatoolsselector-xd0f","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:20:33.628530293Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:33.999301406Z","closed_at":"2026-01-02T02:20:33.999301406Z","close_reason":"Closed","comments":[{"id":1305,"issue_id":"lettatoolsselector-xd0f","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T02:20:33Z"}]}
{"id":"lettatoolsselector-xd4sh","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:06.679538277Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:07.505246535Z","closed_at":"2026-01-02T20:16:07.505246535Z","close_reason":"Closed","comments":[{"id":4067,"issue_id":"lettatoolsselector-xd4sh","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T20:16:07Z"}]}
{"id":"lettatoolsselector-xde","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.198050175Z","updated_at":"2025-12-29T18:56:04.103258369Z","closed_at":"2025-12-29T18:56:04.103258369Z","close_reason":"Duplicate of closed lettatoolsselector-07p","comments":[{"id":9,"issue_id":"lettatoolsselector-xde","author":"node","text":"## Problem\n\nCurrent health endpoint only returns basic status. No way to quickly check if tool management is working correctly.\n\n## Solution\n\nEnhance health endpoint to include tool state summary.\n\n## Acceptance Criteria\n\n- [ ] Health endpoint returns: status, version, config summary\n- [ ] Include: MAX_TOTAL_TOOLS, PROTECTED_TOOLS list\n- [ ] Include: total_agents_tracked, agents_over_limit count\n- [ ] Include: last_attach_timestamp, last_prune_timestamp\n- [ ] Separate deep health check for dependencies (Letta API, Weaviate)\n\n## Technical Notes\n\n- Keep lightweight for frequent polling\n- Deep health check on separate endpoint (/health/deep)\n\n---\nHuly Issue: LTSEL-14","created_at":"2025-12-22T23:46:27Z"}]}
{"id":"lettatoolsselector-xdhk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:16:20.551030413Z","updated_at":"2025-12-30T01:51:33.906313604Z","comments":[{"id":975,"issue_id":"lettatoolsselector-xdhk","author":"root","text":"Synced from Beads: lettatoolsselector-th4\n\n---\nHuly Issue: LTSEL-94","created_at":"2025-12-29T21:16:20Z"}]}
{"id":"lettatoolsselector-xdrwa","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T21:30:49.625589087Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:30:50.292156613Z","closed_at":"2026-01-02T21:30:50.292156613Z","close_reason":"Closed","comments":[{"id":4229,"issue_id":"lettatoolsselector-xdrwa","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T21:30:50Z"}]}
{"id":"lettatoolsselector-xeitr","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:47:30.450431505Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:47:31.120890893Z","closed_at":"2026-01-02T21:47:31.120890893Z","close_reason":"Closed","comments":[{"id":4249,"issue_id":"lettatoolsselector-xeitr","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T21:47:30Z"}]}
{"id":"lettatoolsselector-xeoso","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:53:46.118410435Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:53:46.678215843Z","closed_at":"2026-01-02T12:53:46.678215843Z","close_reason":"Closed","comments":[{"id":3300,"issue_id":"lettatoolsselector-xeoso","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T12:53:46Z"}]}
{"id":"lettatoolsselector-xewq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:05:37.003164149Z","updated_at":"2025-12-30T04:14:12.108076094Z","comments":[{"id":863,"issue_id":"lettatoolsselector-xewq","author":"root","text":"Synced from Beads: lettatoolsselector-mnp\n\n---\nHuly Issue: LTSEL-99","created_at":"2025-12-29T21:05:37Z"}]}
{"id":"lettatoolsselector-xfbqm","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:05:15.870693208Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:05:16.483794711Z","closed_at":"2026-01-02T14:05:16.483794711Z","close_reason":"Closed","comments":[{"id":3396,"issue_id":"lettatoolsselector-xfbqm","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T14:05:16Z"}]}
{"id":"lettatoolsselector-xffc6","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:48.227467079Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:48.651344499Z","closed_at":"2026-01-02T03:46:48.651344499Z","close_reason":"Closed","comments":[{"id":2287,"issue_id":"lettatoolsselector-xffc6","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T03:46:48Z"}]}
{"id":"lettatoolsselector-xfif","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:20.313264664Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:20.528771442Z","closed_at":"2026-01-02T02:35:20.528771442Z","close_reason":"Closed"}
{"id":"lettatoolsselector-xfqcc","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:11:09.558958059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:10.088519329Z","closed_at":"2026-01-02T11:11:10.088519329Z","close_reason":"Closed","comments":[{"id":3188,"issue_id":"lettatoolsselector-xfqcc","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T11:11:09Z"}]}
{"id":"lettatoolsselector-xg205","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:29.313429142Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:29.908568984Z","closed_at":"2026-01-02T10:36:29.908568984Z","close_reason":"Closed","comments":[{"id":3091,"issue_id":"lettatoolsselector-xg205","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T10:36:29Z"}]}
{"id":"lettatoolsselector-xg5p4","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:29:24.361584659Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:29:24.965123982Z","closed_at":"2026-01-02T18:29:24.965123982Z","close_reason":"Closed","comments":[{"id":3857,"issue_id":"lettatoolsselector-xg5p4","author":"root","text":"Synced from Huly: LTSEL-242","created_at":"2026-01-02T18:29:24Z"}]}
{"id":"lettatoolsselector-xgf8w","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:28.605926823Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:29.33347539Z","closed_at":"2026-01-02T21:48:29.33347539Z","close_reason":"Closed","comments":[{"id":4261,"issue_id":"lettatoolsselector-xgf8w","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T21:48:29Z"}]}
{"id":"lettatoolsselector-xgtcs","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:47:26.797639646Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:27.295965322Z","closed_at":"2026-01-02T03:47:27.295965322Z","close_reason":"Closed","comments":[{"id":2319,"issue_id":"lettatoolsselector-xgtcs","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T03:47:27Z"}]}
{"id":"lettatoolsselector-xgv71","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:30:41.413363235Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:41.849998236Z","closed_at":"2026-01-02T03:30:41.849998236Z","close_reason":"Closed","comments":[{"id":2112,"issue_id":"lettatoolsselector-xgv71","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T03:30:41Z"}]}
{"id":"lettatoolsselector-xhibp","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:12:23.268663244Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:12:23.848222738Z","closed_at":"2026-01-02T16:12:23.848222738Z","close_reason":"Closed","comments":[{"id":3652,"issue_id":"lettatoolsselector-xhibp","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T16:12:23Z"}]}
{"id":"lettatoolsselector-xhrmj","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:43:34.290830295Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:43:34.825674117Z","closed_at":"2026-01-02T09:43:34.825674117Z","close_reason":"Closed","comments":[{"id":3016,"issue_id":"lettatoolsselector-xhrmj","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T09:43:34Z"}]}
{"id":"lettatoolsselector-xhvq","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:42:49.09276026Z","updated_at":"2025-12-30T02:41:53.28880713Z","comments":[{"id":1078,"issue_id":"lettatoolsselector-xhvq","author":"root","text":"Synced from Beads: lettatoolsselector-yie\n\n---\nHuly Issue: LTSEL-29","created_at":"2025-12-29T21:42:49Z"}]}
{"id":"lettatoolsselector-xi8w","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:31:05.596331185Z","updated_at":"2025-12-29T23:14:08.403493753Z","comments":[{"id":1058,"issue_id":"lettatoolsselector-xi8w","author":"root","text":"Synced from Beads: lettatoolsselector-57s\n\n---\nHuly Issue: LTSEL-59","created_at":"2025-12-29T21:31:05Z"}]}
{"id":"lettatoolsselector-xir5e","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:00:53.727434943Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:00:54.352124485Z","closed_at":"2026-01-02T15:00:54.352124485Z","close_reason":"Closed","comments":[{"id":3519,"issue_id":"lettatoolsselector-xir5e","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T15:00:54Z"}]}
{"id":"lettatoolsselector-xj174","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:42.296251936Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:43.036926983Z","closed_at":"2026-01-02T06:17:43.036926983Z","close_reason":"Closed","comments":[{"id":2557,"issue_id":"lettatoolsselector-xj174","author":"root","text":"Synced from Huly: LTSEL-39","created_at":"2026-01-02T06:17:42Z"}]}
{"id":"lettatoolsselector-xj5dv","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:44:04.16093842Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:44:04.730216859Z","closed_at":"2026-01-02T07:44:04.730216859Z","close_reason":"Closed","comments":[{"id":2787,"issue_id":"lettatoolsselector-xj5dv","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T07:44:04Z"}]}
{"id":"lettatoolsselector-xjkw8","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T04:39:59.350735702Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:59.796737914Z","closed_at":"2026-01-02T04:39:59.796737914Z","close_reason":"Closed","comments":[{"id":2432,"issue_id":"lettatoolsselector-xjkw8","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T04:39:59Z"}]}
{"id":"lettatoolsselector-xjpo4","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:51.240469577Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:51.240469577Z","comments":[{"id":1819,"issue_id":"lettatoolsselector-xjpo4","author":"root","text":"Synced from Beads: lettatoolsselector-1j0o\n\n---\nHuly Issue: LTSEL-539","created_at":"2026-01-02T03:27:51Z"}]}
{"id":"lettatoolsselector-xk6uw","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:21:50.152298168Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:50.79630626Z","closed_at":"2026-01-02T09:21:50.79630626Z","close_reason":"Closed","comments":[{"id":2957,"issue_id":"lettatoolsselector-xk6uw","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T09:21:50Z"}]}
{"id":"lettatoolsselector-xkm9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:31:49.741287271Z","updated_at":"2025-12-30T02:38:25.325455298Z","comments":[{"id":1063,"issue_id":"lettatoolsselector-xkm9","author":"root","text":"Synced from Beads: lettatoolsselector-4dj\n\n---\nHuly Issue: LTSEL-68","created_at":"2025-12-29T21:31:50Z"}]}
{"id":"lettatoolsselector-xkv8a","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:37:34.077954119Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:34.424472917Z","closed_at":"2026-01-02T10:37:34.424472917Z","close_reason":"Closed"}
{"id":"lettatoolsselector-xlisj","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:21.335402885Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:21.845992054Z","closed_at":"2026-01-02T10:36:21.845992054Z","close_reason":"Closed","comments":[{"id":3089,"issue_id":"lettatoolsselector-xlisj","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T10:36:21Z"}]}
{"id":"lettatoolsselector-xlsi1","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:03:12.810239745Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:13.4175041Z","closed_at":"2026-01-02T08:03:13.4175041Z","close_reason":"Closed","comments":[{"id":2819,"issue_id":"lettatoolsselector-xlsi1","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T08:03:13Z"}]}
{"id":"lettatoolsselector-xlu4x","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:19:33.500187876Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:34.099763096Z","closed_at":"2026-01-02T06:19:34.099763096Z","close_reason":"Closed","comments":[{"id":2594,"issue_id":"lettatoolsselector-xlu4x","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T06:19:33Z"}]}
{"id":"lettatoolsselector-xmeg3","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:39:17.714887085Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:39:18.441752998Z","closed_at":"2026-01-02T22:39:18.441752998Z","close_reason":"Closed","comments":[{"id":4340,"issue_id":"lettatoolsselector-xmeg3","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T22:39:18Z"}]}
{"id":"lettatoolsselector-xmvty","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:38:58.292246611Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:38:59.367165441Z","closed_at":"2026-01-02T04:38:59.367165441Z","close_reason":"Closed","comments":[{"id":2400,"issue_id":"lettatoolsselector-xmvty","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T04:38:59Z"}]}
{"id":"lettatoolsselector-xmwhq","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:41:08.482266148Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:08.930858892Z","closed_at":"2026-01-02T05:41:08.930858892Z","close_reason":"Closed","comments":[{"id":2486,"issue_id":"lettatoolsselector-xmwhq","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T05:41:08Z"}]}
{"id":"lettatoolsselector-xng9p","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:00:18.543752399Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:18.832866279Z","closed_at":"2026-01-02T06:00:18.832866279Z","close_reason":"Closed"}
{"id":"lettatoolsselector-xnu4v","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:19:01.183990397Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:19:01.82084745Z","closed_at":"2026-01-02T20:19:01.82084745Z","close_reason":"Closed","comments":[{"id":4080,"issue_id":"lettatoolsselector-xnu4v","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T20:19:01Z"}]}
{"id":"lettatoolsselector-xnvwb","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:35:58.715645419Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:35:59.399046782Z","closed_at":"2026-01-02T11:35:59.399046782Z","close_reason":"Closed","comments":[{"id":3236,"issue_id":"lettatoolsselector-xnvwb","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T11:35:59Z"}]}
{"id":"lettatoolsselector-xos7q","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:41:05.91208516Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:41:06.52090003Z","closed_at":"2026-01-02T19:41:06.52090003Z","close_reason":"Closed","comments":[{"id":3998,"issue_id":"lettatoolsselector-xos7q","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T19:41:06Z"}]}
{"id":"lettatoolsselector-xoz","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-23T03:23:18.051512948Z","updated_at":"2025-12-29T19:44:55.709740225Z","closed_at":"2025-12-29T19:44:55.709740225Z","close_reason":"docs/OPERATIONAL_RUNBOOKS.md already exists with comprehensive coverage of 8 operational procedures including tool limits, protected tools, pruning, debugging, health checks, audit logs, sync, and restarts.","comments":[{"id":43,"issue_id":"lettatoolsselector-xoz","author":"node","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2025-12-23T03:23:18Z"}]}
{"id":"lettatoolsselector-xp7fx","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:25:58.489011893Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:25:59.114583964Z","closed_at":"2026-01-02T18:25:59.114583964Z","close_reason":"Closed","comments":[{"id":3844,"issue_id":"lettatoolsselector-xp7fx","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T18:25:58Z"}]}
{"id":"lettatoolsselector-xpr4l","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:42:46.525406475Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:42:47.42762682Z","closed_at":"2026-01-02T20:42:47.42762682Z","close_reason":"Closed","comments":[{"id":4143,"issue_id":"lettatoolsselector-xpr4l","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T20:42:47Z"}]}
{"id":"lettatoolsselector-xq4pi","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:50:07.985000424Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:50:08.627432344Z","closed_at":"2026-01-02T18:50:08.627432344Z","close_reason":"Closed","comments":[{"id":3885,"issue_id":"lettatoolsselector-xq4pi","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T18:50:08Z"}]}
{"id":"lettatoolsselector-xqe5c","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T16:18:03.692108389Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:18:04.295116224Z","closed_at":"2026-01-02T16:18:04.295116224Z","close_reason":"Closed","comments":[{"id":3670,"issue_id":"lettatoolsselector-xqe5c","author":"root","text":"Synced from Huly: LTSEL-227","created_at":"2026-01-02T16:18:04Z"}]}
{"id":"lettatoolsselector-xqk63","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:57:09.686019831Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:57:10.184289807Z","closed_at":"2026-01-02T08:57:10.184289807Z","close_reason":"Closed","comments":[{"id":2918,"issue_id":"lettatoolsselector-xqk63","author":"root","text":"Synced from Huly: LTSEL-227","created_at":"2026-01-02T08:57:09Z"}]}
{"id":"lettatoolsselector-xqrva","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:15:34.225576394Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:15:34.826743855Z","closed_at":"2026-01-02T20:15:34.826743855Z","close_reason":"Closed","comments":[{"id":4061,"issue_id":"lettatoolsselector-xqrva","author":"root","text":"Synced from Huly: LTSEL-47","created_at":"2026-01-02T20:15:34Z"}]}
{"id":"lettatoolsselector-xr8lc","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T16:15:33.67324012Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:15:34.742594152Z","closed_at":"2026-01-02T16:15:34.742594152Z","close_reason":"Closed","comments":[{"id":3662,"issue_id":"lettatoolsselector-xr8lc","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T16:15:34Z"}]}
{"id":"lettatoolsselector-xrfci","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:41:10.107690745Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:41:10.863664232Z","closed_at":"2026-01-02T22:41:10.863664232Z","close_reason":"Closed","comments":[{"id":4356,"issue_id":"lettatoolsselector-xrfci","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T22:41:10Z"}]}
{"id":"lettatoolsselector-xrixl","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:00:01.619211315Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:00:02.200792778Z","closed_at":"2026-01-02T12:00:02.200792778Z","close_reason":"Closed","comments":[{"id":3271,"issue_id":"lettatoolsselector-xrixl","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T12:00:01Z"}]}
{"id":"lettatoolsselector-xsk1w","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:22:16.816335759Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:22:17.395707627Z","closed_at":"2026-01-02T08:22:17.395707627Z","close_reason":"Closed","comments":[{"id":2872,"issue_id":"lettatoolsselector-xsk1w","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T08:22:17Z"}]}
{"id":"lettatoolsselector-xt2pv","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:26.96048657Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:26.96048657Z","comments":[{"id":1901,"issue_id":"lettatoolsselector-xt2pv","author":"root","text":"Synced from Beads: lettatoolsselector-vcdi\n\n---\nHuly Issue: LTSEL-436","created_at":"2026-01-02T03:28:27Z"}]}
{"id":"lettatoolsselector-xtduf","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T16:15:23.146688376Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:15:23.719351459Z","closed_at":"2026-01-02T16:15:23.719351459Z","close_reason":"Closed"}
{"id":"lettatoolsselector-xtwj","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:56.096281462Z","updated_at":"2025-12-29T21:33:42.379900957Z","closed_at":"2025-12-29T21:33:42.379900957Z","close_reason":"Duplicate","comments":[{"id":544,"issue_id":"lettatoolsselector-xtwj","author":"root","text":"Synced from Beads: lettatoolsselector-7cz\n\n---\nHuly Issue: LTSEL-74","created_at":"2025-12-29T20:29:56Z"}]}
{"id":"lettatoolsselector-xtwv5","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:58:42.865734457Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:58:43.542301366Z","closed_at":"2026-01-02T20:58:43.542301366Z","close_reason":"Closed","comments":[{"id":4177,"issue_id":"lettatoolsselector-xtwv5","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T20:58:43Z"}]}
{"id":"lettatoolsselector-xuwns","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:56:39.235658219Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:56:40.973276335Z","closed_at":"2026-01-02T17:56:40.973276335Z","close_reason":"Closed","comments":[{"id":3813,"issue_id":"lettatoolsselector-xuwns","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T17:56:40Z"}]}
{"id":"lettatoolsselector-xv7vu","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:10.064953331Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:10.064953331Z","comments":[{"id":1995,"issue_id":"lettatoolsselector-xv7vu","author":"root","text":"Synced from Beads: lettatoolsselector-fr20\n\n---\nHuly Issue: LTSEL-321","created_at":"2026-01-02T03:29:10Z"}]}
{"id":"lettatoolsselector-xvg8r","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:57:28.066699578Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:57:28.641598723Z","closed_at":"2026-01-02T12:57:28.641598723Z","close_reason":"Closed","comments":[{"id":3328,"issue_id":"lettatoolsselector-xvg8r","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T12:57:28Z"}]}
{"id":"lettatoolsselector-xvxau","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:28.17943889Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:28.17943889Z","comments":[{"id":1904,"issue_id":"lettatoolsselector-xvxau","author":"root","text":"Synced from Beads: lettatoolsselector-ycgm\n\n---\nHuly Issue: LTSEL-433","created_at":"2026-01-02T03:28:28Z"}]}
{"id":"lettatoolsselector-xvxh","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:35:38.448502395Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:38.792088466Z","closed_at":"2026-01-02T02:35:38.792088466Z","close_reason":"Closed","comments":[{"id":1371,"issue_id":"lettatoolsselector-xvxh","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T02:35:38Z"}]}
{"id":"lettatoolsselector-xw9mi","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:04:21.279011667Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:04:21.832879076Z","closed_at":"2026-01-02T21:04:21.832879076Z","close_reason":"Closed"}
{"id":"lettatoolsselector-xwqws","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:54.895909983Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:55.505453362Z","closed_at":"2026-01-02T06:17:55.505453362Z","close_reason":"Closed","comments":[{"id":2565,"issue_id":"lettatoolsselector-xwqws","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T06:17:55Z"}]}
{"id":"lettatoolsselector-xx5ts","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:29:28.485637817Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:29:29.031544103Z","closed_at":"2026-01-02T14:29:29.031544103Z","close_reason":"Closed","comments":[{"id":3445,"issue_id":"lettatoolsselector-xx5ts","author":"root","text":"Synced from Huly: LTSEL-41","created_at":"2026-01-02T14:29:28Z"}]}
{"id":"lettatoolsselector-xxx","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T23:46:27.358861104Z","updated_at":"2025-12-29T18:56:03.117446775Z","closed_at":"2025-12-29T18:56:03.117446775Z","close_reason":"Duplicate of closed lettatoolsselector-x0j","comments":[{"id":10,"issue_id":"lettatoolsselector-xxx","author":"node","text":"## Problem\n\nProtected tools (find_agents, find_tools) logic only exists in webhook receiver. Tool selector API should also respect protected tools during pruning.\n\n## Solution\n\nAdd PROTECTED_TOOLS env var to tool selector API and respect it during all detach operations.\n\n## Acceptance Criteria\n\n- [ ] PROTECTED_TOOLS env var (comma-separated tool names)\n- [ ] Before any detach, check if tool is protected\n- [ ] Never detach protected tools even if over limit\n- [ ] Warn if agent is over limit but can't prune due to protected tools\n- [ ] Document protected tools in compose.yaml\n\n## Technical Notes\n\n- Default protected tools: find_agents, find_tools, send_message\n- Allow override via env var\n- Lookup by name, not ID (IDs can change)\n\n---\nHuly Issue: LTSEL-10","created_at":"2025-12-22T23:46:27Z"}]}
{"id":"lettatoolsselector-xy18","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:06:08.249320787Z","updated_at":"2025-12-30T04:14:14.035575717Z","comments":[{"id":873,"issue_id":"lettatoolsselector-xy18","author":"root","text":"Synced from Beads: lettatoolsselector-01y\n\n---\nHuly Issue: LTSEL-60","created_at":"2025-12-29T21:06:08Z"}]}
{"id":"lettatoolsselector-xy3iv","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:07.696130741Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:08.120641453Z","closed_at":"2026-01-02T03:47:08.120641453Z","close_reason":"Closed","comments":[{"id":2305,"issue_id":"lettatoolsselector-xy3iv","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T03:47:07Z"}]}
{"id":"lettatoolsselector-xyo68","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:51:07.640577854Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:51:08.216511522Z","closed_at":"2026-01-02T15:51:08.216511522Z","close_reason":"Closed","comments":[{"id":3620,"issue_id":"lettatoolsselector-xyo68","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T15:51:07Z"}]}
{"id":"lettatoolsselector-xzbqc","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:58:57.448702711Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:58:57.992457235Z","closed_at":"2026-01-02T11:58:57.992457235Z","close_reason":"Closed","comments":[{"id":3256,"issue_id":"lettatoolsselector-xzbqc","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T11:58:57Z"}]}
{"id":"lettatoolsselector-xzkrk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:22.938910942Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:22.938910942Z","comments":[{"id":1892,"issue_id":"lettatoolsselector-xzkrk","author":"root","text":"Synced from Beads: lettatoolsselector-c6em\n\n---\nHuly Issue: LTSEL-450","created_at":"2026-01-02T03:28:23Z"}]}
{"id":"lettatoolsselector-xzymm","title":"[Observability] Add health check endpoint with tool state summary","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T22:38:16.645794781Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:38:17.31141672Z","closed_at":"2026-01-02T22:38:17.31141672Z","close_reason":"Closed","comments":[{"id":4339,"issue_id":"lettatoolsselector-xzymm","author":"root","text":"Synced from Beads: lettatoolsselector-xde\n\n---\nHuly Issue: LTSEL-46","created_at":"2026-01-02T22:38:17Z"}]}
{"id":"lettatoolsselector-y037m","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:27:29.429588528Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:27:30.069257935Z","closed_at":"2026-01-02T18:27:30.069257935Z","close_reason":"Closed","comments":[{"id":3852,"issue_id":"lettatoolsselector-y037m","author":"root","text":"Synced from Huly: LTSEL-241","created_at":"2026-01-02T18:27:29Z"}]}
{"id":"lettatoolsselector-y0oyv","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:55:01.665761131Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:55:02.243285673Z","closed_at":"2026-01-02T12:55:02.243285673Z","close_reason":"Closed","comments":[{"id":3315,"issue_id":"lettatoolsselector-y0oyv","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T12:55:02Z"}]}
{"id":"lettatoolsselector-y16f8","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:20:41.127993787Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:41.613196242Z","closed_at":"2026-01-02T04:20:41.613196242Z","close_reason":"Closed","comments":[{"id":2386,"issue_id":"lettatoolsselector-y16f8","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T04:20:41Z"}]}
{"id":"lettatoolsselector-y19fs","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T16:16:08.117410237Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:16:08.519307369Z","closed_at":"2026-01-02T16:16:08.519307369Z","close_reason":"Closed"}
{"id":"lettatoolsselector-y24v","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:21:42.731187408Z","updated_at":"2025-12-30T01:56:59.171075564Z","comments":[{"id":1012,"issue_id":"lettatoolsselector-y24v","author":"root","text":"Synced from Beads: lettatoolsselector-leh\n\n---\nHuly Issue: LTSEL-81","created_at":"2025-12-29T21:21:43Z"}]}
{"id":"lettatoolsselector-y25vy","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:11:27.603920514Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:27.962982323Z","closed_at":"2026-01-02T11:11:27.962982323Z","close_reason":"Closed"}
{"id":"lettatoolsselector-y2fft","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T06:00:11.768180364Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:12.320158683Z","closed_at":"2026-01-02T06:00:12.320158683Z","close_reason":"Closed","comments":[{"id":2528,"issue_id":"lettatoolsselector-y2fft","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T06:00:12Z"}]}
{"id":"lettatoolsselector-y2s88","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:38.146338967Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:38.146338967Z","comments":[{"id":1789,"issue_id":"lettatoolsselector-y2s88","author":"root","text":"Synced from Beads: lettatoolsselector-w8un\n\n---\nHuly Issue: LTSEL-587","created_at":"2026-01-02T03:27:38Z"}]}
{"id":"lettatoolsselector-y38zp","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:12:40.336402405Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:12:40.973952066Z","closed_at":"2026-01-02T11:12:40.973952066Z","close_reason":"Closed","comments":[{"id":3201,"issue_id":"lettatoolsselector-y38zp","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T11:12:40Z"}]}
{"id":"lettatoolsselector-y3mio","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:21.820035224Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:21.820035224Z","comments":[{"id":2180,"issue_id":"lettatoolsselector-y3mio","author":"root","text":"Synced from Huly: LTSEL-735","created_at":"2026-01-02T03:43:22Z"}]}
{"id":"lettatoolsselector-y3n8p","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:16.679541779Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:17.223320246Z","closed_at":"2026-01-02T10:36:17.223320246Z","close_reason":"Closed","comments":[{"id":3086,"issue_id":"lettatoolsselector-y3n8p","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T10:36:17Z"}]}
{"id":"lettatoolsselector-y4gd","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:09:54.480130635Z","updated_at":"2025-12-30T04:12:04.003187114Z","comments":[{"id":908,"issue_id":"lettatoolsselector-y4gd","author":"root","text":"Synced from Beads: lettatoolsselector-th4\n\n---\nHuly Issue: LTSEL-94","created_at":"2025-12-29T21:09:54Z"}]}
{"id":"lettatoolsselector-y4tjt","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:41:42.450557212Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:42.90687607Z","closed_at":"2026-01-02T04:41:42.90687607Z","close_reason":"Closed","comments":[{"id":2446,"issue_id":"lettatoolsselector-y4tjt","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T04:41:42Z"}]}
{"id":"lettatoolsselector-y4x58","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:20:41.858002629Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:20:42.530722392Z","closed_at":"2026-01-02T19:20:42.530722392Z","close_reason":"Closed","comments":[{"id":3934,"issue_id":"lettatoolsselector-y4x58","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T19:20:42Z"}]}
{"id":"lettatoolsselector-y56li","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:40.282812224Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:40.881504345Z","closed_at":"2026-01-02T17:01:40.881504345Z","close_reason":"Closed","comments":[{"id":3697,"issue_id":"lettatoolsselector-y56li","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T17:01:40Z"}]}
{"id":"lettatoolsselector-y5acq","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:55:15.135452676Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:55:15.784895346Z","closed_at":"2026-01-02T08:55:15.784895346Z","close_reason":"Closed","comments":[{"id":2896,"issue_id":"lettatoolsselector-y5acq","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T08:55:15Z"}]}
{"id":"lettatoolsselector-y5fhq","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:04:00.06377507Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:04:00.729785807Z","closed_at":"2026-01-02T08:04:00.729785807Z","close_reason":"Closed","comments":[{"id":2829,"issue_id":"lettatoolsselector-y5fhq","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T08:04:00Z"}]}
{"id":"lettatoolsselector-y5xy2","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:25.798406092Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:26.400561643Z","closed_at":"2026-01-02T09:54:26.400561643Z","close_reason":"Closed","comments":[{"id":3027,"issue_id":"lettatoolsselector-y5xy2","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T09:54:26Z"}]}
{"id":"lettatoolsselector-y5zuy","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:47.712767591Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:48.141183558Z","closed_at":"2026-01-02T04:39:48.141183558Z","close_reason":"Closed","comments":[{"id":2428,"issue_id":"lettatoolsselector-y5zuy","author":"root","text":"Synced from Huly: LTSEL-31","created_at":"2026-01-02T04:39:47Z"}]}
{"id":"lettatoolsselector-y6nnw","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T09:41:43.92278693Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:41:44.462248806Z","closed_at":"2026-01-02T09:41:44.462248806Z","close_reason":"Closed","comments":[{"id":3006,"issue_id":"lettatoolsselector-y6nnw","author":"root","text":"Synced from Beads: lettatoolsselector-6io\n\n## Overview\n\nImplement a multi-layer semantic enrichment system that uses Claude Sonnet (via Anthropic proxy) to generate semantically rich tool descriptions that dramatically improve search accuracy.\n\n## Key Components\n\n### 1. MCP Server Profiler\n\n- Analyzes all tools from each MCP server\n- Generates domain context, entity types, action verbs\n- Cached with hash-based change detection\n\n### 2. Tool Enricher\n\n- Uses server profile context to enrich individual tools\n- Extracts action-entity pairs (e.g., 'create issue', 'delete file')\n- Generates use cases and semantic keywords\n\n### 3. Change Detection\n\n- Hash-based detection of MCP server changes\n- Only re-enriches when tools/descriptions change\n- Weekly forced refresh\n\n### 4. Weaviate Schema Updates\n\n- New fields: action_entities, semantic_keywords, server_domain, use_cases\n- Enhanced hybrid search with new query properties\n\n## Expected Impact\n\n- 'create issue' directly matches huly_issue_ops\n- 'project management' has high recall for huly_* tools\n- CRUD tools discoverable via any supported operation\n\n## Design Doc\n\nSee docs/SEMANTIC_ENRICHMENT_DESIGN.md\n\n## Implementation Phases\n\n1. MCP Server Profiler\n2. Tool Enricher\n3. Weaviate Schema Update\n4. Incremental Sync Integration\n5. Evaluation\n\n---\nHuly Issue: LTSEL-249","created_at":"2026-01-02T09:41:44Z"}]}
{"id":"lettatoolsselector-y6s0a","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:18:02.647260011Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:03.182995704Z","closed_at":"2026-01-02T06:18:03.182995704Z","close_reason":"Closed","comments":[{"id":2568,"issue_id":"lettatoolsselector-y6s0a","author":"root","text":"Synced from Huly: LTSEL-218","created_at":"2026-01-02T06:18:02Z"}]}
{"id":"lettatoolsselector-y78ri","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:58:11.401703693Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:58:11.964527092Z","closed_at":"2026-01-02T10:58:11.964527092Z","close_reason":"Closed","comments":[{"id":3130,"issue_id":"lettatoolsselector-y78ri","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T10:58:11Z"}]}
{"id":"lettatoolsselector-y7rn","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:35.558353936Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:35.917844238Z","closed_at":"2026-01-02T02:19:35.917844238Z","close_reason":"Closed","comments":[{"id":1277,"issue_id":"lettatoolsselector-y7rn","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T02:19:35Z"}]}
{"id":"lettatoolsselector-y8bt","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T02:19:52.80555739Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:53.200483011Z","closed_at":"2026-01-02T02:19:53.200483011Z","close_reason":"Closed","comments":[{"id":1295,"issue_id":"lettatoolsselector-y8bt","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T02:19:53Z"}]}
{"id":"lettatoolsselector-y8dn","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T02:20:52.359493901Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:20:52.721583529Z","closed_at":"2026-01-02T02:20:52.721583529Z","close_reason":"Closed","comments":[{"id":1314,"issue_id":"lettatoolsselector-y8dn","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T02:20:52Z"}]}
{"id":"lettatoolsselector-y8yk2","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:20:50.021713599Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:50.519811366Z","closed_at":"2026-01-02T04:20:50.519811366Z","close_reason":"Closed","comments":[{"id":2388,"issue_id":"lettatoolsselector-y8yk2","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T04:20:50Z"}]}
{"id":"lettatoolsselector-y8yxo","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:41:44.506303504Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:41:44.966155804Z","closed_at":"2026-01-02T04:41:44.966155804Z","close_reason":"Closed","comments":[{"id":2447,"issue_id":"lettatoolsselector-y8yxo","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T04:41:44Z"}]}
{"id":"lettatoolsselector-y90e","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:22:32.037199451Z","updated_at":"2025-12-30T04:12:18.536017241Z","comments":[{"id":1021,"issue_id":"lettatoolsselector-y90e","author":"root","text":"Synced from Beads: lettatoolsselector-5na\n\n---\nHuly Issue: LTSEL-83","created_at":"2025-12-29T21:22:32Z"}]}
{"id":"lettatoolsselector-ya3jj","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:49.846986981Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:50.338877695Z","closed_at":"2026-01-02T03:46:50.338877695Z","close_reason":"Closed","comments":[{"id":2289,"issue_id":"lettatoolsselector-ya3jj","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T03:46:50Z"}]}
{"id":"lettatoolsselector-yaewu","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:37:47.797678655Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:48.326321164Z","closed_at":"2026-01-02T10:37:48.326321164Z","close_reason":"Closed","comments":[{"id":3103,"issue_id":"lettatoolsselector-yaewu","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T10:37:48Z"}]}
{"id":"lettatoolsselector-yalx","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:26:31.897526958Z","updated_at":"2025-12-29T21:33:27.019295972Z","closed_at":"2025-12-29T21:33:27.019295972Z","close_reason":"Duplicate","comments":[{"id":496,"issue_id":"lettatoolsselector-yalx","author":"root","text":"Synced from Beads: lettatoolsselector-9k9\n\n---\nHuly Issue: LTSEL-171","created_at":"2025-12-29T20:26:32Z"}]}
{"id":"lettatoolsselector-yamd","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:22:39.474854702Z","updated_at":"2025-12-29T21:33:27.998759465Z","closed_at":"2025-12-29T21:33:27.998759465Z","close_reason":"Duplicate","comments":[{"id":451,"issue_id":"lettatoolsselector-yamd","author":"root","text":"Synced from Beads: lettatoolsselector-88g\n\n---\nHuly Issue: LTSEL-193","created_at":"2025-12-29T20:22:39Z"}]}
{"id":"lettatoolsselector-yaoro","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T09:22:32.933205747Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:22:33.421767163Z","closed_at":"2026-01-02T09:22:33.421767163Z","close_reason":"Closed","comments":[{"id":2969,"issue_id":"lettatoolsselector-yaoro","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T09:22:33Z"}]}
{"id":"lettatoolsselector-yap0b","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:51.024471463Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:51.381242144Z","closed_at":"2026-01-02T03:06:51.381242144Z","close_reason":"Closed","comments":[{"id":1572,"issue_id":"lettatoolsselector-yap0b","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T03:06:51Z"}]}
{"id":"lettatoolsselector-yazao","title":"[Feature] Semantic Enrichment System for World-Class Retrieval","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T07:02:52.411339478Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:53.21137022Z","closed_at":"2026-01-02T07:02:53.21137022Z","close_reason":"Closed","comments":[{"id":2670,"issue_id":"lettatoolsselector-yazao","author":"root","text":"Synced from Huly: LTSEL-249","created_at":"2026-01-02T07:02:53Z"}]}
{"id":"lettatoolsselector-yb3w","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:04:01.777995347Z","updated_at":"2025-12-30T04:14:09.569335107Z","comments":[{"id":850,"issue_id":"lettatoolsselector-yb3w","author":"root","text":"Synced from Beads: lettatoolsselector-mwe\n\n---\nHuly Issue: LTSEL-108","created_at":"2025-12-29T21:04:02Z"}]}
{"id":"lettatoolsselector-yb8qv","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T05:41:11.975210847Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:12.287212695Z","closed_at":"2026-01-02T05:41:12.287212695Z","close_reason":"Closed"}
{"id":"lettatoolsselector-yb91x","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:12.10416905Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:12.518579568Z","closed_at":"2026-01-02T03:47:12.518579568Z","close_reason":"Closed","comments":[{"id":2310,"issue_id":"lettatoolsselector-yb91x","author":"root","text":"Synced from Beads: lettatoolsselector-e6b\n\n---\nHuly Issue: LTSEL-35","created_at":"2026-01-02T03:47:12Z"}]}
{"id":"lettatoolsselector-ybjx8","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:31.656334665Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:32.199462633Z","closed_at":"2026-01-02T06:36:32.199462633Z","close_reason":"Closed","comments":[{"id":2600,"issue_id":"lettatoolsselector-ybjx8","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T06:36:31Z"}]}
{"id":"lettatoolsselector-yblgf","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T15:03:16.481183519Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:03:17.057546973Z","closed_at":"2026-01-02T15:03:17.057546973Z","close_reason":"Closed","comments":[{"id":3522,"issue_id":"lettatoolsselector-yblgf","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T15:03:16Z"}]}
{"id":"lettatoolsselector-ybq7","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:31.433951203Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:31.65921304Z","closed_at":"2026-01-02T02:35:31.65921304Z","close_reason":"Closed"}
{"id":"lettatoolsselector-yc6zt","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:42:17.983989552Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:42:18.629700786Z","closed_at":"2026-01-02T19:42:18.629700786Z","close_reason":"Closed","comments":[{"id":4005,"issue_id":"lettatoolsselector-yc6zt","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T19:42:18Z"}]}
{"id":"lettatoolsselector-ycgm","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:07:53.439328837Z","updated_at":"2025-12-30T04:14:17.357975334Z","comments":[{"id":888,"issue_id":"lettatoolsselector-ycgm","author":"root","text":"Synced from Beads: lettatoolsselector-luf\n\n---\nHuly Issue: LTSEL-112","created_at":"2025-12-29T21:07:53Z"}]}
{"id":"lettatoolsselector-yczf3","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:36:35.675186971Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:36:36.199155044Z","closed_at":"2026-01-02T06:36:36.199155044Z","close_reason":"Closed","comments":[{"id":2604,"issue_id":"lettatoolsselector-yczf3","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T06:36:35Z"}]}
{"id":"lettatoolsselector-ydcx0","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:33.0387552Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:33.518510858Z","closed_at":"2026-01-02T07:42:33.518510858Z","close_reason":"Closed","comments":[{"id":2751,"issue_id":"lettatoolsselector-ydcx0","author":"root","text":"Synced from Beads: lettatoolsselector-19c\n\n---\nHuly Issue: LTSEL-37","created_at":"2026-01-02T07:42:33Z"}]}
{"id":"lettatoolsselector-ydhss","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:18.948542812Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:18.948542812Z","comments":[{"id":1883,"issue_id":"lettatoolsselector-ydhss","author":"root","text":"Synced from Beads: lettatoolsselector-yb3w\n\n---\nHuly Issue: LTSEL-461","created_at":"2026-01-02T03:28:19Z"}]}
{"id":"lettatoolsselector-yds5a","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:26.991235926Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:26.991235926Z","comments":[{"id":2129,"issue_id":"lettatoolsselector-yds5a","author":"root","text":"Synced from Beads: lettatoolsselector-vwd\n\n---\nHuly Issue: LTSEL-211","created_at":"2026-01-02T03:31:27Z"}]}
{"id":"lettatoolsselector-ye29m","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:51:08.984278758Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:51:09.640032775Z","closed_at":"2026-01-02T17:51:09.640032775Z","close_reason":"Closed","comments":[{"id":3791,"issue_id":"lettatoolsselector-ye29m","author":"root","text":"Synced from Huly: LTSEL-28","created_at":"2026-01-02T17:51:09Z"}]}
{"id":"lettatoolsselector-ye63h","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T10:37:32.599900737Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:32.984499252Z","closed_at":"2026-01-02T10:37:32.984499252Z","close_reason":"Closed"}
{"id":"lettatoolsselector-yebgy","title":"[Perf] Add connection wait with timeout to Weaviate pool","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T15:01:00.217409003Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:01:00.623078594Z","closed_at":"2026-01-02T15:01:00.623078594Z","close_reason":"Closed"}
{"id":"lettatoolsselector-yekpk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:30.315904663Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:30.315904663Z","comments":[{"id":1909,"issue_id":"lettatoolsselector-yekpk","author":"root","text":"Synced from Beads: lettatoolsselector-7mod\n\n---\nHuly Issue: LTSEL-425","created_at":"2026-01-02T03:28:30Z"}]}
{"id":"lettatoolsselector-yeub3","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T13:36:14.111675183Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:36:14.718162465Z","closed_at":"2026-01-02T13:36:14.718162465Z","close_reason":"Closed","comments":[{"id":3355,"issue_id":"lettatoolsselector-yeub3","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T13:36:14Z"}]}
{"id":"lettatoolsselector-yexon","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:51:05.339157933Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:51:05.949724809Z","closed_at":"2026-01-02T18:51:05.949724809Z","close_reason":"Closed","comments":[{"id":3895,"issue_id":"lettatoolsselector-yexon","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T18:51:05Z"}]}
{"id":"lettatoolsselector-yexvj","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:43:30.083015056Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:30.571069848Z","closed_at":"2026-01-02T07:43:30.571069848Z","close_reason":"Closed","comments":[{"id":2772,"issue_id":"lettatoolsselector-yexvj","author":"root","text":"Synced from Huly: LTSEL-54","created_at":"2026-01-02T07:43:30Z"}]}
{"id":"lettatoolsselector-yezmy","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T16:13:13.241572827Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:13:13.804934571Z","closed_at":"2026-01-02T16:13:13.804934571Z","close_reason":"Closed","comments":[{"id":3656,"issue_id":"lettatoolsselector-yezmy","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T16:13:13Z"}]}
{"id":"lettatoolsselector-yf6ln","title":"[Refactor] Phase 1: Extract data models and types","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:07:43.100811625Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:07:43.807970487Z","closed_at":"2026-01-02T21:07:43.807970487Z","close_reason":"Closed","comments":[{"id":4197,"issue_id":"lettatoolsselector-yf6ln","author":"root","text":"Synced from Beads: lettatoolsselector-869\n\nExtract data models, types, and constants from api_server.py into dedicated modules.\n\n## Depends On\n\n- lettatoolsselector-642 (Phase 0: Test coverage)\n\n## Models to Extract\n\n### 1. Tool Models ()\n\n\n\n### 2. Agent Models ()\n\n\n\n### 3. Request/Response Models ()\n\n\n\n### 4. Constants ()\n\n\n\n## File Structure\n\n\n\n## Acceptance Criteria\n\n- [ ] All models extracted to dedicated files\n- [ ] Constants moved to constants.py\n- [ ] api_server.py imports from new modules\n- [ ] All tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-225","created_at":"2026-01-02T21:07:43Z"}]}
{"id":"lettatoolsselector-yfdi2","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:45:40.81013184Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:45:41.372098198Z","closed_at":"2026-01-02T15:45:41.372098198Z","close_reason":"Closed","comments":[{"id":3588,"issue_id":"lettatoolsselector-yfdi2","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T15:45:41Z"}]}
{"id":"lettatoolsselector-yfmgm","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:47.472002428Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:47.472002428Z","comments":[{"id":2209,"issue_id":"lettatoolsselector-yfmgm","author":"root","text":"Synced from Beads: lettatoolsselector-iu0l\n\n---\nHuly Issue: LTSEL-636","created_at":"2026-01-02T03:43:47Z"}]}
{"id":"lettatoolsselector-yft2","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:35:33.880238758Z","updated_at":"2025-12-30T02:40:23.66046908Z","comments":[{"id":1072,"issue_id":"lettatoolsselector-yft2","author":"root","text":"Synced from Beads: lettatoolsselector-mhi\n\n---\nHuly Issue: LTSEL-61","created_at":"2025-12-29T21:35:34Z"}]}
{"id":"lettatoolsselector-yfyjx","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T21:48:11.766586372Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:48:12.470275842Z","closed_at":"2026-01-02T21:48:12.470275842Z","close_reason":"Closed","comments":[{"id":4257,"issue_id":"lettatoolsselector-yfyjx","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T21:48:12Z"}]}
{"id":"lettatoolsselector-ygjg","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:47.547597597Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:47.904207107Z","closed_at":"2026-01-02T01:24:47.904207107Z","close_reason":"Closed","comments":[{"id":1215,"issue_id":"lettatoolsselector-ygjg","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T01:24:47Z"}]}
{"id":"lettatoolsselector-ygjvm","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:17:01.944462158Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:17:02.660590037Z","closed_at":"2026-01-02T20:17:02.660590037Z","close_reason":"Closed","comments":[{"id":4076,"issue_id":"lettatoolsselector-ygjvm","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T20:17:02Z"}]}
{"id":"lettatoolsselector-yhb8o","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:43.093692343Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:43.654304878Z","closed_at":"2026-01-02T17:01:43.654304878Z","close_reason":"Closed","comments":[{"id":3698,"issue_id":"lettatoolsselector-yhb8o","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T17:01:43Z"}]}
{"id":"lettatoolsselector-yhc64","title":"[SDK] Migrate tool-selector to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:08:50.188118372Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:08:51.857365812Z","closed_at":"2026-01-02T11:08:51.857365812Z","close_reason":"Closed","comments":[{"id":3161,"issue_id":"lettatoolsselector-yhc64","author":"root","text":"Synced from Beads: lettatoolsselector-vu4\n\n---\nHuly Issue: LTSEL-52","created_at":"2026-01-02T11:08:51Z"}]}
{"id":"lettatoolsselector-yhh2n","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T15:21:25.112676301Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:21:25.780377981Z","closed_at":"2026-01-02T15:21:25.780377981Z","close_reason":"Closed","comments":[{"id":3557,"issue_id":"lettatoolsselector-yhh2n","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T15:21:25Z"}]}
{"id":"lettatoolsselector-yhhk8","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:30:24.445508568Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:30:24.878972666Z","closed_at":"2026-01-02T03:30:24.878972666Z","close_reason":"Closed","comments":[{"id":2104,"issue_id":"lettatoolsselector-yhhk8","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T03:30:24Z"}]}
{"id":"lettatoolsselector-yhqa","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:08:24.859779265Z","updated_at":"2025-12-30T04:14:18.722766546Z","comments":[{"id":894,"issue_id":"lettatoolsselector-yhqa","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-110","created_at":"2025-12-29T21:08:25Z"}]}
{"id":"lettatoolsselector-yhrt4","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:48:50.218309064Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:48:50.729828801Z","closed_at":"2026-01-02T03:48:50.729828801Z","close_reason":"Closed","comments":[{"id":2342,"issue_id":"lettatoolsselector-yhrt4","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T03:48:50Z"}]}
{"id":"lettatoolsselector-yhvdv","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:30:36.954194959Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:30:37.628260948Z","closed_at":"2026-01-02T18:30:37.628260948Z","close_reason":"Closed","comments":[{"id":3867,"issue_id":"lettatoolsselector-yhvdv","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T18:30:37Z"}]}
{"id":"lettatoolsselector-yi8rr","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:32.07227934Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:32.649266024Z","closed_at":"2026-01-02T09:54:32.649266024Z","close_reason":"Closed","comments":[{"id":3030,"issue_id":"lettatoolsselector-yi8rr","author":"root","text":"Synced from Beads: lettatoolsselector-ubk\n\n---\nHuly Issue: LTSEL-44","created_at":"2026-01-02T09:54:32Z"}]}
{"id":"lettatoolsselector-yicuv","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:46:56.565766112Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:46:57.057269018Z","closed_at":"2026-01-02T03:46:57.057269018Z","close_reason":"Closed","comments":[{"id":2292,"issue_id":"lettatoolsselector-yicuv","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T03:46:56Z"}]}
{"id":"lettatoolsselector-yid24","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:41:27.953424037Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:41:28.375573994Z","closed_at":"2026-01-02T22:41:28.375573994Z","close_reason":"Closed"}
{"id":"lettatoolsselector-yidmt","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:18:12.20534138Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:12.740652498Z","closed_at":"2026-01-02T06:18:12.740652498Z","close_reason":"Closed","comments":[{"id":2574,"issue_id":"lettatoolsselector-yidmt","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T06:18:12Z"}]}
{"id":"lettatoolsselector-yimej","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:47:28.16290516Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:28.16290516Z","comments":[{"id":2320,"issue_id":"lettatoolsselector-yimej","author":"root","text":"Synced from Beads: lettatoolsselector-uj0r\n\n\n\n---\nHuly Issue: LTSEL-252","created_at":"2026-01-02T03:47:28Z"}]}
{"id":"lettatoolsselector-yinv","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:25:15.852644279Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:25:16.237949431Z","closed_at":"2026-01-02T01:25:16.237949431Z","close_reason":"Closed","comments":[{"id":1253,"issue_id":"lettatoolsselector-yinv","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T01:25:16Z"}]}
{"id":"lettatoolsselector-yir94","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:59:37.013645182Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:37.593252533Z","closed_at":"2026-01-02T10:59:37.593252533Z","close_reason":"Closed","comments":[{"id":3151,"issue_id":"lettatoolsselector-yir94","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T10:59:37Z"}]}
{"id":"lettatoolsselector-yjkte","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:40.238723312Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:40.238723312Z","comments":[{"id":2059,"issue_id":"lettatoolsselector-yjkte","author":"root","text":"Synced from Beads: lettatoolsselector-34t2\n\n---\nHuly Issue: LTSEL-256","created_at":"2026-01-02T03:29:40Z"}]}
{"id":"lettatoolsselector-yk820","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:21:46.079295361Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:46.59747762Z","closed_at":"2026-01-02T08:21:46.59747762Z","close_reason":"Closed","comments":[{"id":2865,"issue_id":"lettatoolsselector-yk820","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T08:21:46Z"}]}
{"id":"lettatoolsselector-ykta","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:30.451421252Z","updated_at":"2025-12-29T21:33:42.729770579Z","closed_at":"2025-12-29T21:33:42.729770579Z","close_reason":"Duplicate","comments":[{"id":523,"issue_id":"lettatoolsselector-ykta","author":"root","text":"Synced from Beads: lettatoolsselector-zq1\n\n---\nHuly Issue: LTSEL-63","created_at":"2025-12-29T20:28:30Z"}]}
{"id":"lettatoolsselector-yl1gs","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:57:02.38726363Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:57:02.966811975Z","closed_at":"2026-01-02T17:57:02.966811975Z","close_reason":"Closed","comments":[{"id":3818,"issue_id":"lettatoolsselector-yl1gs","author":"root","text":"Synced from Huly: LTSEL-238","created_at":"2026-01-02T17:57:02Z"}]}
{"id":"lettatoolsselector-yl5v5","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:29.295811303Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:29.608273682Z","closed_at":"2026-01-02T07:43:29.608273682Z","close_reason":"Closed"}
{"id":"lettatoolsselector-yl8me","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:52:10.164809454Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:52:10.736030803Z","closed_at":"2026-01-02T17:52:10.736030803Z","close_reason":"Closed","comments":[{"id":3798,"issue_id":"lettatoolsselector-yl8me","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T17:52:10Z"}]}
{"id":"lettatoolsselector-ylrk5","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:09:25.971623594Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:09:26.516193739Z","closed_at":"2026-01-02T11:09:26.516193739Z","close_reason":"Closed","comments":[{"id":3173,"issue_id":"lettatoolsselector-ylrk5","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T11:09:26Z"}]}
{"id":"lettatoolsselector-ymayk","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:57:28.249588549Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:57:28.895111146Z","closed_at":"2026-01-02T20:57:28.895111146Z","close_reason":"Closed","comments":[{"id":4168,"issue_id":"lettatoolsselector-ymayk","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T20:57:28Z"}]}
{"id":"lettatoolsselector-yn0nq","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:37:23.151194222Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:37:23.666141217Z","closed_at":"2026-01-02T10:37:23.666141217Z","close_reason":"Closed","comments":[{"id":3100,"issue_id":"lettatoolsselector-yn0nq","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T10:37:23Z"}]}
{"id":"lettatoolsselector-yn5vw","title":"[Perf] Use dict-based O(1) lookup for tool filtering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T11:34:29.474843221Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:34:29.857581697Z","closed_at":"2026-01-02T11:34:29.857581697Z","close_reason":"Closed"}
{"id":"lettatoolsselector-yni2n","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:57:50.587834995Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:57:51.141139071Z","closed_at":"2026-01-02T10:57:51.141139071Z","close_reason":"Closed","comments":[{"id":3122,"issue_id":"lettatoolsselector-yni2n","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T10:57:50Z"}]}
{"id":"lettatoolsselector-ynieg","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:29.884222831Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:30.374869287Z","closed_at":"2026-01-02T07:02:30.374869287Z","close_reason":"Closed","comments":[{"id":2648,"issue_id":"lettatoolsselector-ynieg","author":"root","text":"Synced from Huly: LTSEL-45","created_at":"2026-01-02T07:02:30Z"}]}
{"id":"lettatoolsselector-yo1c","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:56.895875805Z","updated_at":"2025-12-29T21:33:42.547161499Z","closed_at":"2025-12-29T21:33:42.547161499Z","close_reason":"Duplicate","comments":[{"id":530,"issue_id":"lettatoolsselector-yo1c","author":"root","text":"Synced from Beads: lettatoolsselector-65f\n\n---\nHuly Issue: LTSEL-62","created_at":"2025-12-29T20:28:57Z"}]}
{"id":"lettatoolsselector-yo2v","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:19:36.800317591Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:19:37.230024629Z","closed_at":"2026-01-02T02:19:37.230024629Z","close_reason":"Closed","comments":[{"id":1279,"issue_id":"lettatoolsselector-yo2v","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T02:19:37Z"}]}
{"id":"lettatoolsselector-yo3jp","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T10:59:25.012501225Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:25.599941204Z","closed_at":"2026-01-02T10:59:25.599941204Z","close_reason":"Closed","comments":[{"id":3143,"issue_id":"lettatoolsselector-yo3jp","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T10:59:25Z"}]}
{"id":"lettatoolsselector-yq015","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:28:36.772345792Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:28:37.362270217Z","closed_at":"2026-01-02T19:28:37.362270217Z","close_reason":"Closed","comments":[{"id":3963,"issue_id":"lettatoolsselector-yq015","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T19:28:37Z"}]}
{"id":"lettatoolsselector-yqbb1","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:37:05.824310834Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:37:06.1541272Z","closed_at":"2026-01-02T06:37:06.1541272Z","close_reason":"Closed"}
{"id":"lettatoolsselector-yqnr9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:17.615336888Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:17.615336888Z","comments":[{"id":1880,"issue_id":"lettatoolsselector-yqnr9","author":"root","text":"Synced from Beads: lettatoolsselector-zpqy\n\n---\nHuly Issue: LTSEL-469","created_at":"2026-01-02T03:28:17Z"}]}
{"id":"lettatoolsselector-yr4mh","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T10:36:44.752031796Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:45.306414154Z","closed_at":"2026-01-02T10:36:45.306414154Z","close_reason":"Closed","comments":[{"id":3095,"issue_id":"lettatoolsselector-yr4mh","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T10:36:45Z"}]}
{"id":"lettatoolsselector-yro7c","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:29.892978531Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:29.892978531Z","comments":[{"id":1908,"issue_id":"lettatoolsselector-yro7c","author":"root","text":"Synced from Beads: lettatoolsselector-q5fv\n\n---\nHuly Issue: LTSEL-426","created_at":"2026-01-02T03:28:30Z"}]}
{"id":"lettatoolsselector-yryis","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:00:28.74255039Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:00:29.221926626Z","closed_at":"2026-01-02T06:00:29.221926626Z","close_reason":"Closed","comments":[{"id":2543,"issue_id":"lettatoolsselector-yryis","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T06:00:29Z"}]}
{"id":"lettatoolsselector-ys9f3","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:24:21.105408896Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:21.691645635Z","closed_at":"2026-01-02T07:24:21.691645635Z","close_reason":"Closed","comments":[{"id":2722,"issue_id":"lettatoolsselector-ys9f3","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T07:24:21Z"}]}
{"id":"lettatoolsselector-ysi1v","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:40:57.703018042Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:40:58.12837137Z","closed_at":"2026-01-02T04:40:58.12837137Z","close_reason":"Closed","comments":[{"id":2438,"issue_id":"lettatoolsselector-ysi1v","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T04:40:57Z"}]}
{"id":"lettatoolsselector-yt0eg","title":"[Perf] Cache environment-based config at startup","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:44:11.288420696Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:44:12.044501548Z","closed_at":"2026-01-02T22:44:12.044501548Z","close_reason":"Closed","comments":[{"id":4365,"issue_id":"lettatoolsselector-yt0eg","author":"root","text":"Synced from Beads: lettatoolsselector-d8b\n\n## Problem\n\nConfig endpoints parse environment variables on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 0.5ms per config request\n- **Priority:** LOW\n\n## Solution\n\nCache config values at startup, only reload on explicit refresh:\n\n\n\n## Acceptance Criteria\n\n- [ ] Config parsed once at startup\n- [ ] Cached config used for read requests\n- [ ] Explicit refresh endpoint to reload config\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-245","created_at":"2026-01-02T22:44:11Z"}]}
{"id":"lettatoolsselector-yt0gu","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:35:19.047339964Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:35:19.589055731Z","closed_at":"2026-01-02T14:35:19.589055731Z","close_reason":"Closed","comments":[{"id":3480,"issue_id":"lettatoolsselector-yt0gu","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T14:35:19Z"}]}
{"id":"lettatoolsselector-yuh26","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T03:47:44.276132748Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:47:44.805156571Z","closed_at":"2026-01-02T03:47:44.805156571Z","close_reason":"Closed","comments":[{"id":2324,"issue_id":"lettatoolsselector-yuh26","author":"root","text":"Synced from Huly: LTSEL-234","created_at":"2026-01-02T03:47:44Z"}]}
{"id":"lettatoolsselector-yuyrh","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:45:31.788651506Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:45:31.788651506Z","comments":[{"id":2279,"issue_id":"lettatoolsselector-yuyrh","author":"root","text":"Synced from Beads: lettatoolsselector-9jll\n\n---\nHuly Issue: LTSEL-365","created_at":"2026-01-02T03:45:32Z"}]}
{"id":"lettatoolsselector-yvil","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:33.645991364Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:33.987583237Z","closed_at":"2026-01-02T02:35:33.987583237Z","close_reason":"Closed","comments":[{"id":1365,"issue_id":"lettatoolsselector-yvil","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T02:35:33Z"}]}
{"id":"lettatoolsselector-yvqnc","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:43:46.933065565Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:43:46.933065565Z","comments":[{"id":2208,"issue_id":"lettatoolsselector-yvqnc","author":"root","text":"Synced from Beads: lettatoolsselector-zfqe\n\n---\nHuly Issue: LTSEL-640","created_at":"2026-01-02T03:43:47Z"}]}
{"id":"lettatoolsselector-yvrk","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:44:48.278286995Z","updated_at":"2025-12-29T21:33:23.003209699Z","closed_at":"2025-12-29T21:33:23.003209699Z","close_reason":"Duplicate","comments":[{"id":681,"issue_id":"lettatoolsselector-yvrk","author":"root","text":"Synced from Beads: lettatoolsselector-6p9\n\n---\nHuly Issue: LTSEL-148","created_at":"2025-12-29T20:44:48Z"}]}
{"id":"lettatoolsselector-yvtho","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T03:06:32.533219676Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:33.026160932Z","closed_at":"2026-01-02T03:06:33.026160932Z","close_reason":"Closed"}
{"id":"lettatoolsselector-yw26v","title":"[Code Quality] Fix async function return type annotations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:35:54.932117915Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:35:55.535135371Z","closed_at":"2026-01-02T11:35:55.535135371Z","close_reason":"Closed","comments":[{"id":3235,"issue_id":"lettatoolsselector-yw26v","author":"root","text":"Synced from Beads: lettatoolsselector-6ti\n\nSeveral async function decorators have mismatched return type annotations.\n\n## Affected Areas\n\n### Line 18 - Config validation\n\n\n\n### Line 23 - Multiple tracking functions\n\n\n\n## Root Cause\n\nDecorator type hints don't match the actual decorated function signatures.\n\n## Acceptance Criteria\n\n- [ ] All async function return types correctly annotated\n- [ ] Decorator types match decorated function signatures\n- [ ] Consider using ParamSpec for generic decorator typing\n\n---\nHuly Issue: LTSEL-217","created_at":"2026-01-02T11:35:55Z"}]}
{"id":"lettatoolsselector-ywbh","title":"[Refactor] Master: api_server.py modularization roadmap","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T01:08:44.205102096Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:44.53089511Z","closed_at":"2026-01-02T01:08:44.53089511Z","close_reason":"Closed","comments":[{"id":1206,"issue_id":"lettatoolsselector-ywbh","author":"root","text":"Synced from Beads: lettatoolsselector-qgt\n\nMaster tracking issue for refactoring api_server.py from a 9,027 line monolith to a modular architecture.\n\n## Current State\n\n- **api_server.py**: 9,027 lines\n- **Routes**: 101 endpoints in one file\n- **Test coverage**: 8.8% on api_server.py\n- **Modularity**: Poor - most logic in one file\n\n## Target State\n\n- **api_server.py**: \u003c200 lines (app setup only)\n- **Routes**: Split into 8 blueprints\n- **Services**: 4 extracted service classes\n- **Models**: Dedicated model files\n- **Test coverage**: 70%+ on critical paths\n\n## Phases\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003ePhase\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eIssue\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eDescription\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003ePriority\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e0\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-642\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eTest coverage for critical paths\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP1\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e1\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-869\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract data models and types\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e2\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-nav\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract ToolManager service\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e3\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-4w9\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract SearchService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e4\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-lan\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract AgentService\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e5\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-sbw\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eExtract route blueprints\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e6\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003elettatoolsselector-ier\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDependency injection \u0026 app factory\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eP2\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n## Dependency Graph\n\n\n\n## Success Metrics\n\n- [ ] api_server.py \u003c 500 lines\n- [ ] Critical path test coverage \u003e 80%\n- [ ] All existing tests pass\n- [ ] No API contract changes\n- [ ] Services are independently testable\n- [ ] New features easier to add\n\n## Notes\n\n- Each phase should be a separate PR\n- Run full test suite after each phase\n- Keep API contracts unchanged throughout\n- Document any breaking changes\n\n---\nHuly Issue: LTSEL-228","created_at":"2026-01-02T01:08:44Z"}]}
{"id":"lettatoolsselector-ywl95","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T12:59:14.427534719Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:59:14.791945218Z","closed_at":"2026-01-02T12:59:14.791945218Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ywntr","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T23:50:48.673610808Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T23:50:49.455192833Z","closed_at":"2026-01-02T23:50:49.455192833Z","close_reason":"Closed","comments":[{"id":4394,"issue_id":"lettatoolsselector-ywntr","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T23:50:49Z"}]}
{"id":"lettatoolsselector-ywo8i","title":"[Perf] Eliminate redundant agent tools fetch in attach endpoint","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T04:21:08.032655396Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:08.313351326Z","closed_at":"2026-01-02T04:21:08.313351326Z","close_reason":"Closed"}
{"id":"lettatoolsselector-ywrqs","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:31:12.85802891Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:31:13.414180856Z","closed_at":"2026-01-02T14:31:13.414180856Z","close_reason":"Closed","comments":[{"id":3461,"issue_id":"lettatoolsselector-ywrqs","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T14:31:13Z"}]}
{"id":"lettatoolsselector-yxj1j","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:58.011348196Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:58.435678314Z","closed_at":"2026-01-02T03:29:58.435678314Z","close_reason":"Closed","comments":[{"id":2079,"issue_id":"lettatoolsselector-yxj1j","author":"root","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2026-01-02T03:29:58Z"}]}
{"id":"lettatoolsselector-yxukx","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:03:06.227063827Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:03:06.749672495Z","closed_at":"2026-01-02T07:03:06.749672495Z","close_reason":"Closed","comments":[{"id":2679,"issue_id":"lettatoolsselector-yxukx","author":"root","text":"Synced from Beads: lettatoolsselector-tad\n\n## Goal\n\nMove the 3 remaining config handlers from api_server.py into routes/config.py with full implementations.\n\n## Handlers to Migrate\n\n- _validate_config_handler() - Line 783\n- _get_tool_selector_config_handler() - Line 819\n- _update_tool_selector_config_handler() - Line 871\n\n## Pattern\n\n1. These handlers read/write config files - relatively self-contained\n2. Move implementation code directly into config.py routes\n3. Remove delegation pattern\n4. Update any tests mocking these handlers\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/config.py contains full implementations\n- [ ] All unit tests pass\n- [ ] No new dependencies on api_server needed\n\n---\nHuly Issue: LTSEL-237","created_at":"2026-01-02T07:03:06Z"}]}
{"id":"lettatoolsselector-yxznk","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T08:02:45.852464811Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:46.276664817Z","closed_at":"2026-01-02T08:02:46.276664817Z","close_reason":"Closed"}
{"id":"lettatoolsselector-yzjs","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:34.197796441Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:34.537181662Z","closed_at":"2026-01-02T02:35:34.537181662Z","close_reason":"Closed","comments":[{"id":1366,"issue_id":"lettatoolsselector-yzjs","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T02:35:34Z"}]}
{"id":"lettatoolsselector-yzn43","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:22:14.678829837Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:22:15.368582241Z","closed_at":"2026-01-02T19:22:15.368582241Z","close_reason":"Closed","comments":[{"id":3948,"issue_id":"lettatoolsselector-yzn43","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T19:22:15Z"}]}
{"id":"lettatoolsselector-yzq6","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:53.008720243Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:53.391392358Z","closed_at":"2026-01-02T01:24:53.391392358Z","close_reason":"Closed","comments":[{"id":1224,"issue_id":"lettatoolsselector-yzq6","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T01:24:53Z"}]}
{"id":"lettatoolsselector-yzrh6","title":"[Refactor] Add search_tools callback to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:33:49.008999048Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:33:49.675600015Z","closed_at":"2026-01-02T14:33:49.675600015Z","close_reason":"Closed","comments":[{"id":3472,"issue_id":"lettatoolsselector-yzrh6","author":"root","text":"Synced from Huly: LTSEL-231","created_at":"2026-01-02T14:33:49Z"}]}
{"id":"lettatoolsselector-yzxvj","title":"[Refactor] Migrate safety handlers to safety blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:04:27.298420913Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:04:27.91863505Z","closed_at":"2026-01-02T12:04:27.91863505Z","close_reason":"Closed","comments":[{"id":3295,"issue_id":"lettatoolsselector-yzxvj","author":"root","text":"Synced from Beads: lettatoolsselector-33d\n\n## Goal\n\nMove 3 safety-related handlers from api_server.py into routes/safety.py with full implementations.\n\n## Handlers to Migrate\n\n- _get_safety_status_handler() - Line 2388\n- _validate_operation_handler() - Line 2469\n- _get_emergency_status_handler() - Line 2514\n\n## Dependencies\n\nThese handlers interact with:\n\n- Safety/protection status utilities\n- Tool validation logic\n- Emergency mode state\n\n## Pattern\n\n1. Move handler implementations into safety.py blueprint\n2. Pass required dependencies via configure() method\n3. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 3 handlers removed from api_server.py\n- [ ] routes/safety.py contains full implementations\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-235","created_at":"2026-01-02T12:04:27Z"}]}
{"id":"lettatoolsselector-z0nj9","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:03.446303002Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:03.446303002Z","comments":[{"id":1981,"issue_id":"lettatoolsselector-z0nj9","author":"root","text":"Synced from Beads: lettatoolsselector-x7pi\n\n---\nHuly Issue: LTSEL-335","created_at":"2026-01-02T03:29:03Z"}]}
{"id":"lettatoolsselector-z0ntq","title":"[Enforcement] Add pre-attach pruning to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:50:01.116101315Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:50:01.817639133Z","closed_at":"2026-01-02T15:50:01.817639133Z","close_reason":"Closed","comments":[{"id":3616,"issue_id":"lettatoolsselector-z0ntq","author":"root","text":"Synced from Beads: lettatoolsselector-kf7\n\n---\nHuly Issue: LTSEL-54","created_at":"2026-01-02T15:50:01Z"}]}
{"id":"lettatoolsselector-z125o","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:11:45.648832083Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:11:46.166621095Z","closed_at":"2026-01-02T11:11:46.166621095Z","close_reason":"Closed","comments":[{"id":3193,"issue_id":"lettatoolsselector-z125o","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T11:11:45Z"}]}
{"id":"lettatoolsselector-z17ws","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T14:58:16.671074206Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:17.234846072Z","closed_at":"2026-01-02T14:58:17.234846072Z","close_reason":"Closed","comments":[{"id":3505,"issue_id":"lettatoolsselector-z17ws","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T14:58:17Z"}]}
{"id":"lettatoolsselector-z1jgx","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:06:19.514201012Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:06:20.062207423Z","closed_at":"2026-01-02T14:06:20.062207423Z","close_reason":"Closed","comments":[{"id":3409,"issue_id":"lettatoolsselector-z1jgx","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T14:06:19Z"}]}
{"id":"lettatoolsselector-z2kn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:06:44.354045552Z","updated_at":"2025-12-30T04:14:14.899404193Z","comments":[{"id":876,"issue_id":"lettatoolsselector-z2kn","author":"root","text":"Synced from Beads: lettatoolsselector-g9h\n\n---\nHuly Issue: LTSEL-100","created_at":"2025-12-29T21:06:44Z"}]}
{"id":"lettatoolsselector-z3dmc","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:03:06.734049502Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:03:07.555828147Z","closed_at":"2026-01-02T12:03:07.555828147Z","close_reason":"Closed","comments":[{"id":3288,"issue_id":"lettatoolsselector-z3dmc","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T12:03:07Z"}]}
{"id":"lettatoolsselector-z3uf2","title":"[Test] E2E test: Full webhook-to-attachment flow","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T04:39:28.099208716Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:39:28.530247955Z","closed_at":"2026-01-02T04:39:28.530247955Z","close_reason":"Closed","comments":[{"id":2416,"issue_id":"lettatoolsselector-z3uf2","author":"root","text":"## Purpose\n\nEnd-to-end smoke test that the entire pipeline works.\n\n## Test Scenario\n\n1. Create test agent in Letta\n2. Send message to agent (triggers webhook)\n3. Wait for webhook processing\n4. Assert: Agent has tools attached based on message content\n5. Assert: Agent tool count \u003c= MAX_TOTAL_TOOLS\n6. Assert: Protected tools present\n7. Cleanup test agent\n\n## Acceptance Criteria\n\n- [ ] Test uses real services (Letta, webhook, tool selector)\n- [ ] Runs nightly or on-demand (too slow for every PR)\n- [ ] Reports detailed failure info\n- [ ] Cleans up all test resources\n\n## Technical Notes\n\n- Use pytest with longer timeout\n- May need retry logic for async operations\n- Tag as \n- Run in isolated test environment if possible\n\n---\nHuly Issue: LTSEL-25","created_at":"2026-01-02T04:39:28Z"}]}
{"id":"lettatoolsselector-z4lk3","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:24:19.880160968Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:24:20.473109606Z","closed_at":"2026-01-02T18:24:20.473109606Z","close_reason":"Closed","comments":[{"id":3827,"issue_id":"lettatoolsselector-z4lk3","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T18:24:20Z"}]}
{"id":"lettatoolsselector-z4lm6","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:45.742660307Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:45.742660307Z","comments":[{"id":1806,"issue_id":"lettatoolsselector-z4lm6","author":"root","text":"Synced from Beads: lettatoolsselector-3l3y\n\n---\nHuly Issue: LTSEL-563","created_at":"2026-01-02T03:27:45Z"}]}
{"id":"lettatoolsselector-z4q3","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:11.087123143Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:11.421168813Z","closed_at":"2026-01-02T02:35:11.421168813Z","close_reason":"Closed","comments":[{"id":1338,"issue_id":"lettatoolsselector-z4q3","author":"root","text":"## Problem\n\nNo documentation for common ops tasks. Each debugging session rediscovers the same steps.\n\n## Solution\n\nCreate runbooks for common operations.\n\n## Acceptance Criteria\n\n- [ ] Runbook: How to change MAX_TOTAL_TOOLS limit\n- [ ] Runbook: How to add/remove protected tools\n- [ ] Runbook: How to manually prune an agent's tools\n- [ ] Runbook: How to debug \"tool not attaching\" issues\n- [ ] Runbook: How to check tool selector health\n- [ ] Store in docs/ directory within repo\n\n## Technical Notes\n\n- Include exact commands with expected outputs\n- Link to relevant compose services and env vars\n- Keep updated as architecture evolves\n\n---\nHuly Issue: LTSEL-18","created_at":"2026-01-02T02:35:11Z"}]}
{"id":"lettatoolsselector-z4zxp","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:41.002320006Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:41.57330388Z","closed_at":"2026-01-02T15:20:41.57330388Z","close_reason":"Closed","comments":[{"id":3540,"issue_id":"lettatoolsselector-z4zxp","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T15:20:41Z"}]}
{"id":"lettatoolsselector-z523d","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T22:17:30.758282505Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:17:31.252235766Z","closed_at":"2026-01-02T22:17:31.252235766Z","close_reason":"Closed"}
{"id":"lettatoolsselector-z577e","title":"[SDK] Implement ensure_protected_tools helper","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:23.556140798Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:24.21020931Z","closed_at":"2026-01-02T20:38:24.21020931Z","close_reason":"Closed","comments":[{"id":4113,"issue_id":"lettatoolsselector-z577e","author":"root","text":"Synced from Beads: lettatoolsselector-9ve\n\n---\nHuly Issue: LTSEL-42","created_at":"2026-01-02T20:38:23Z"}]}
{"id":"lettatoolsselector-z57aw","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T18:57:17.049712418Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:57:17.717612778Z","closed_at":"2026-01-02T18:57:17.717612778Z","close_reason":"Closed","comments":[{"id":3913,"issue_id":"lettatoolsselector-z57aw","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T18:57:17Z"}]}
{"id":"lettatoolsselector-z5uk","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:13:01.589218027Z","updated_at":"2025-12-30T02:11:01.00318223Z","comments":[{"id":940,"issue_id":"lettatoolsselector-z5uk","author":"root","text":"Synced from Beads: lettatoolsselector-an3\n\n---\nHuly Issue: LTSEL-89","created_at":"2025-12-29T21:13:01Z"}]}
{"id":"lettatoolsselector-z6cql","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:03:53.187911903Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:53.576311724Z","closed_at":"2026-01-02T08:03:53.576311724Z","close_reason":"Closed"}
{"id":"lettatoolsselector-z6pp1","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:07.73469824Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:07.73469824Z","comments":[{"id":1990,"issue_id":"lettatoolsselector-z6pp1","author":"root","text":"Synced from Beads: lettatoolsselector-jmd3\n\n---\nHuly Issue: LTSEL-326","created_at":"2026-01-02T03:29:07Z"}]}
{"id":"lettatoolsselector-z78p","title":"[Test] Contract test: Tool selector API returns valid response","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:53.729979831Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:54.109990982Z","closed_at":"2026-01-02T01:24:54.109990982Z","close_reason":"Closed","comments":[{"id":1225,"issue_id":"lettatoolsselector-z78p","author":"root","text":"## Purpose\n\nGuard against tool selector API returning unexpected response format.\n\n## Test Scenario\n\n1. Send valid attach request to tool selector API\n2. Capture response\n3. Assert: Response matches documented contract schema\n4. Assert: All required fields present (success, details.attached, details.detached)\n\n## Acceptance Criteria\n\n- [ ] Test validates response structure\n- [ ] Covers success and error responses\n- [ ] Fails if response doesn't match contract\n- [ ] Runs in tool-selector CI\n\n## Technical Notes\n\n- Can use real API or mocked\n- Reference contract from LTSEL-9\n- Tag as \n\n---\nHuly Issue: LTSEL-24","created_at":"2026-01-02T01:24:53Z"}]}
{"id":"lettatoolsselector-z7aky","title":"[Config] Document operational runbooks","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:02:25.907401501Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:02:26.450606197Z","closed_at":"2026-01-02T08:02:26.450606197Z","close_reason":"Closed","comments":[{"id":2804,"issue_id":"lettatoolsselector-z7aky","author":"root","text":"Synced from Beads: lettatoolsselector-626\n\n---\nHuly Issue: LTSEL-33","created_at":"2026-01-02T08:02:26Z"}]}
{"id":"lettatoolsselector-z7jj7","title":"[Perf] Reuse Weaviate connection pool instead of creating client per search","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T08:56:39.272503879Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:56:39.662335691Z","closed_at":"2026-01-02T08:56:39.662335691Z","close_reason":"Closed"}
{"id":"lettatoolsselector-z87td","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:56:33.219974066Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:21:19.107665229Z","comments":[{"id":2344,"issue_id":"lettatoolsselector-z87td","author":"root","text":"Synced from Beads: lettatoolsselector-c8lu\n\n---\nHuly Issue: LTSEL-848","created_at":"2026-01-02T03:56:34Z"}]}
{"id":"lettatoolsselector-z88cr","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T06:18:52.411436765Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:18:52.726688772Z","closed_at":"2026-01-02T06:18:52.726688772Z","close_reason":"Closed"}
{"id":"lettatoolsselector-z8dfe","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:26:15.307630629Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:26:15.922985946Z","closed_at":"2026-01-02T18:26:15.922985946Z","close_reason":"Closed","comments":[{"id":3845,"issue_id":"lettatoolsselector-z8dfe","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T18:26:15Z"}]}
{"id":"lettatoolsselector-z8ogu","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:41:26.331942879Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:41:26.780178784Z","closed_at":"2026-01-02T05:41:26.780178784Z","close_reason":"Closed","comments":[{"id":2497,"issue_id":"lettatoolsselector-z8ogu","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T05:41:26Z"}]}
{"id":"lettatoolsselector-z8z77","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T12:56:22.806830874Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:56:23.365262989Z","closed_at":"2026-01-02T12:56:23.365262989Z","close_reason":"Closed","comments":[{"id":3319,"issue_id":"lettatoolsselector-z8z77","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T12:56:23Z"}]}
{"id":"lettatoolsselector-z9oy9","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T13:37:02.767612261Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T13:37:03.325247872Z","closed_at":"2026-01-02T13:37:03.325247872Z","close_reason":"Closed","comments":[{"id":3366,"issue_id":"lettatoolsselector-z9oy9","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T13:37:03Z"}]}
{"id":"lettatoolsselector-za0ow","title":"[Refactor] Extract fetch_agent_tools to tool_manager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:02:58.711412311Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:59.39704043Z","closed_at":"2026-01-02T07:02:59.39704043Z","close_reason":"Closed","comments":[{"id":2674,"issue_id":"lettatoolsselector-za0ow","author":"root","text":"Synced from Huly: LTSEL-230","created_at":"2026-01-02T07:02:59Z"}]}
{"id":"lettatoolsselector-za3uv","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:39:52.615386812Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:53.221805311Z","closed_at":"2026-01-02T19:39:53.221805311Z","close_reason":"Closed","comments":[{"id":3992,"issue_id":"lettatoolsselector-za3uv","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T19:39:52Z"}]}
{"id":"lettatoolsselector-zadpu","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:32:33.232313513Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:32:33.768763759Z","closed_at":"2026-01-02T14:32:33.768763759Z","close_reason":"Closed","comments":[{"id":3466,"issue_id":"lettatoolsselector-zadpu","author":"root","text":"Synced from Huly: LTSEL-234","created_at":"2026-01-02T14:32:33Z"}]}
{"id":"lettatoolsselector-zar7z","title":"[Refactor] Migrate evaluation/analytics handlers to evaluation blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T22:27:56.953059538Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T22:27:57.627917402Z","closed_at":"2026-01-02T22:27:57.627917402Z","close_reason":"Closed","comments":[{"id":4332,"issue_id":"lettatoolsselector-zar7z","author":"root","text":"Synced from Beads: lettatoolsselector-wlj\n\n## Goal\n\nMove 7 evaluation-related handlers from api_server.py into routes/evaluation.py with full implementations.\n\n## Handlers to Migrate\n\n### Core Evaluation (4)\n\n- _submit_evaluation_handler() - Line 1216\n- _get_evaluations_handler() - Line 1250\n- _get_analytics_handler() - Line 1273\n- _compare_rerank_handler() - Line 1305\n\n### A/B Comparison (3)\n\n- _run_ab_comparison_handler() - Line 1847\n- _get_ab_results_handler() - Line 1897\n- _get_ab_result_by_id_handler() - Line 1956\n\n## Services Needed\n\nMay need services/evaluation.py for:\n\n- File I/O for evaluation persistence\n- Metrics calculation utilities\n- A/B statistical comparison functions\n\n## Pattern\n\n1. Create evaluation service if shared utilities needed\n2. Move handler implementations into evaluation.py blueprint\n3. Configure services via blueprint configure() method\n4. Remove old handlers from api_server.py\n\n## Acceptance Criteria\n\n- [ ] All 7 handlers removed from api_server.py\n- [ ] routes/evaluation.py contains full implementations\n- [ ] Service layer created if needed for shared utilities\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-233","created_at":"2026-01-02T22:27:57Z"}]}
{"id":"lettatoolsselector-zas7d","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T15:20:50.842988733Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T15:20:51.408087711Z","closed_at":"2026-01-02T15:20:51.408087711Z","close_reason":"Closed","comments":[{"id":3545,"issue_id":"lettatoolsselector-zas7d","author":"root","text":"Synced from Huly: LTSEL-36","created_at":"2026-01-02T15:20:51Z"}]}
{"id":"lettatoolsselector-zavvn","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T19:26:32.957480279Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:26:33.638308343Z","closed_at":"2026-01-02T19:26:33.638308343Z","close_reason":"Closed","comments":[{"id":3958,"issue_id":"lettatoolsselector-zavvn","author":"root","text":"Synced from Huly: LTSEL-224","created_at":"2026-01-02T19:26:33Z"}]}
{"id":"lettatoolsselector-zaz54","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:27:35.189088167Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:27:35.189088167Z","comments":[{"id":1782,"issue_id":"lettatoolsselector-zaz54","author":"root","text":"Synced from Beads: lettatoolsselector-r31r\n\n---\nHuly Issue: LTSEL-594","created_at":"2026-01-02T03:27:35Z"}]}
{"id":"lettatoolsselector-zbch","title":"[Test] Unit test: ensure_protected_tools attaches missing tools","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T01:24:54.91973889Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:24:55.267680417Z","closed_at":"2026-01-02T01:24:55.267680417Z","close_reason":"Closed","comments":[{"id":1227,"issue_id":"lettatoolsselector-zbch","author":"root","text":"## Purpose\n\nGuard against regression where protected tools logic fails silently.\n\n## Test Scenarios\n\n1. Agent has all protected tools -\u003e Returns already_present, no attach calls\n2. Agent missing find_agents -\u003e Attaches it, returns in attached list\n3. Tool ID lookup fails -\u003e Returns in failed list with reason\n4. Attach API fails -\u003e Returns in failed list with reason\n\n## Acceptance Criteria\n\n- [ ] All 4 scenarios covered\n- [ ] Uses mocked API responses\n- [ ] Verifies correct API calls made\n- [ ] Runs in \u003c 1 second\n\n## Technical Notes\n\n- Use pytest-mock\n- Part of SDK test suite\n- Tag as \n\n---\nHuly Issue: LTSEL-22","created_at":"2026-01-02T01:24:55Z"}]}
{"id":"lettatoolsselector-zbtf2","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:02:36.667768954Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:02:37.16726065Z","closed_at":"2026-01-02T07:02:37.16726065Z","close_reason":"Closed","comments":[{"id":2656,"issue_id":"lettatoolsselector-zbtf2","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T07:02:36Z"}]}
{"id":"lettatoolsselector-zc1i","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:07:51.722207299Z","updated_at":"2025-12-30T04:14:16.82853164Z","comments":[{"id":886,"issue_id":"lettatoolsselector-zc1i","author":"root","text":"Synced from Beads: lettatoolsselector-9cq\n\n---\nHuly Issue: LTSEL-98","created_at":"2025-12-29T21:07:52Z"}]}
{"id":"lettatoolsselector-ze094","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:43:02.469288121Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:43:03.001498556Z","closed_at":"2026-01-02T07:43:03.001498556Z","close_reason":"Closed","comments":[{"id":2767,"issue_id":"lettatoolsselector-ze094","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T07:43:02Z"}]}
{"id":"lettatoolsselector-ze52r","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:27:44.798079107Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:27:45.545007945Z","closed_at":"2026-01-02T21:27:45.545007945Z","close_reason":"Closed","comments":[{"id":4223,"issue_id":"lettatoolsselector-ze52r","author":"root","text":"Synced from Beads: lettatoolsselector-a3a\n\n## Problem\n\nHealth check reads MCP servers cache via async file I/O on every request.\n\n**Location:** \n\n\n\n## Impact\n\n- **Latency:** 5-50ms per health check in file I/O\n- **Priority:** MEDIUM - health checks are frequent\n\n## Solution\n\nCache MCP servers data in memory with TTL, similar to tool cache:\n\n\n\n## Acceptance Criteria\n\n- [ ] MCP servers cached in memory\n- [ ] Cache invalidated on file mtime change\n- [ ] Health check uses cached data\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-241","created_at":"2026-01-02T21:27:45Z"}]}
{"id":"lettatoolsselector-zedax","title":"[SDK] Migrate webhook-receiver to use shared SDK","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:59:33.224120902Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:59:33.761105789Z","closed_at":"2026-01-02T10:59:33.761105789Z","close_reason":"Closed","comments":[{"id":3148,"issue_id":"lettatoolsselector-zedax","author":"root","text":"Synced from Beads: lettatoolsselector-06d\n\n---\nHuly Issue: LTSEL-53","created_at":"2026-01-02T10:59:33Z"}]}
{"id":"lettatoolsselector-zf2k9","title":"[Perf] Queue audit events for async background processing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T17:27:27.013518095Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:27:27.398728479Z","closed_at":"2026-01-02T17:27:27.398728479Z","close_reason":"Closed"}
{"id":"lettatoolsselector-zfjgm","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T12:54:57.689705622Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:54:58.331424845Z","closed_at":"2026-01-02T12:54:58.331424845Z","close_reason":"Closed","comments":[{"id":3314,"issue_id":"lettatoolsselector-zfjgm","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T12:54:58Z"}]}
{"id":"lettatoolsselector-zfscp","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:51:34.455759816Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:51:35.054257443Z","closed_at":"2026-01-02T17:51:35.054257443Z","close_reason":"Closed","comments":[{"id":3796,"issue_id":"lettatoolsselector-zfscp","author":"root","text":"Synced from Huly: LTSEL-13","created_at":"2026-01-02T17:51:34Z"}]}
{"id":"lettatoolsselector-zfsl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:18:06.614299146Z","updated_at":"2025-12-30T04:12:07.151838623Z","comments":[{"id":988,"issue_id":"lettatoolsselector-zfsl","author":"root","text":"Synced from Beads: lettatoolsselector-oij\n\n---\nHuly Issue: LTSEL-86","created_at":"2025-12-29T21:18:06Z"}]}
{"id":"lettatoolsselector-zgii8","title":"[Test] Integration test: Protected tools never detached","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:26:44.38884297Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:26:44.986177971Z","closed_at":"2026-01-02T19:26:44.986177971Z","close_reason":"Closed","comments":[{"id":3961,"issue_id":"lettatoolsselector-zgii8","author":"root","text":"Synced from Beads: lettatoolsselector-bhm\n\n---\nHuly Issue: LTSEL-50","created_at":"2026-01-02T19:26:44Z"}]}
{"id":"lettatoolsselector-zgj2p","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:06.247376165Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:06.247376165Z","comments":[{"id":1987,"issue_id":"lettatoolsselector-zgj2p","author":"root","text":"Synced from Beads: lettatoolsselector-uzaq\n\n---\nHuly Issue: LTSEL-329","created_at":"2026-01-02T03:29:06Z"}]}
{"id":"lettatoolsselector-zgj85","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T05:40:57.614694323Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T05:40:58.082142267Z","closed_at":"2026-01-02T05:40:58.082142267Z","close_reason":"Closed","comments":[{"id":2476,"issue_id":"lettatoolsselector-zgj85","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T05:40:57Z"}]}
{"id":"lettatoolsselector-zgks","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:00:52.95157691Z","updated_at":"2025-12-30T04:14:02.371061739Z","comments":[{"id":821,"issue_id":"lettatoolsselector-zgks","author":"root","text":"Synced from Beads: lettatoolsselector-i3k\n\n---\nHuly Issue: LTSEL-127","created_at":"2025-12-29T21:00:53Z"}]}
{"id":"lettatoolsselector-zgmol","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:50.708559767Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:51.114616936Z","closed_at":"2026-01-02T03:29:51.114616936Z","close_reason":"Closed","comments":[{"id":2070,"issue_id":"lettatoolsselector-zgmol","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T03:29:50Z"}]}
{"id":"lettatoolsselector-zgq2f","title":"[Refactor] Phase 2: Extract service layer - ToolManager","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:00:14.097003065Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:00:14.852398732Z","closed_at":"2026-01-02T20:00:14.852398732Z","close_reason":"Closed","comments":[{"id":4037,"issue_id":"lettatoolsselector-zgq2f","author":"root","text":"Synced from Beads: lettatoolsselector-nav\n\nExtract tool management logic into a dedicated ToolManager service.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### ToolManager Service ()\n\nMove these functions from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eattach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e357-401\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eAttach single tool to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003edetach_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e309-355\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eDetach single tool from agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e403-575\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eBatch attach/detach operations\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_perform_tool_pruning()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1483-1777\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003ePrune tools by relevance\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_is_letta_core_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1456-1481\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eCheck if tool is Letta core\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eprocess_matching_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1083-1134\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eProcess search result for attachment\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n## Acceptance Criteria\n\n- [ ] ToolManager class created in services/tool_manager.py\n- [ ] All tool management functions moved\n- [ ] api_server.py uses ToolManager instance\n- [ ] Unit tests for ToolManager with mocked clients\n- [ ] Integration tests still pass\n- [ ] No functional changes\n\n---\nHuly Issue: LTSEL-226","created_at":"2026-01-02T20:00:14Z"}]}
{"id":"lettatoolsselector-zgz2m","title":"[Config] Add config validation to CI pipeline","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:55:53.039514789Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:55:53.678306671Z","closed_at":"2026-01-02T09:55:53.678306671Z","close_reason":"Closed","comments":[{"id":3043,"issue_id":"lettatoolsselector-zgz2m","author":"root","text":"## Problem\n\nInvalid config values (e.g., MAX_TOTAL_TOOLS \u003e MAX_MCP_TOOLS) can be deployed without warning.\n\n## Solution\n\nAdd CI job that validates configuration constraints.\n\n## Acceptance Criteria\n\n- [ ] CI job runs on every PR\n- [ ] Validates: MAX_TOTAL_TOOLS \u003c= MAX_MCP_TOOLS\n- [ ] Validates: MIN_MCP_TOOLS \u003c= MAX_TOTAL_TOOLS\n- [ ] Validates: PROTECTED_TOOLS contains valid tool names\n- [ ] Fails build with clear error message on invalid config\n\n## Technical Notes\n\n- Can be a simple Python script\n- Read from .env.example for defaults\n- Consider JSON schema for config validation\n\n---\nHuly Issue: LTSEL-16","created_at":"2026-01-02T09:55:53Z"}]}
{"id":"lettatoolsselector-zh1i","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:02:07.778044211Z","updated_at":"2025-12-30T04:14:03.70390299Z","comments":[{"id":828,"issue_id":"lettatoolsselector-zh1i","author":"root","text":"Synced from Beads: lettatoolsselector-5fq\n\n---\nHuly Issue: LTSEL-110","created_at":"2025-12-29T21:02:08Z"}]}
{"id":"lettatoolsselector-zhgx8","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:11.065754804Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:11.065754804Z","comments":[{"id":1865,"issue_id":"lettatoolsselector-zhgx8","author":"root","text":"Synced from Beads: lettatoolsselector-5vjn\n\n---\nHuly Issue: LTSEL-485","created_at":"2026-01-02T03:28:11Z"}]}
{"id":"lettatoolsselector-zhvdy","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:23.198577244Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:23.738672446Z","closed_at":"2026-01-02T09:21:23.738672446Z","close_reason":"Closed","comments":[{"id":2946,"issue_id":"lettatoolsselector-zhvdy","author":"root","text":"Synced from Huly: LTSEL-13","created_at":"2026-01-02T09:21:23Z"}]}
{"id":"lettatoolsselector-zi24x","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T21:30:31.432471403Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:30:31.934760321Z","closed_at":"2026-01-02T21:30:31.934760321Z","close_reason":"Closed"}
{"id":"lettatoolsselector-zi42","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T02:35:06.272649661Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T02:35:06.61938799Z","closed_at":"2026-01-02T02:35:06.61938799Z","close_reason":"Closed","comments":[{"id":1330,"issue_id":"lettatoolsselector-zi42","author":"root","text":"Synced from Beads: lettatoolsselector-1vb\n\n---\nHuly Issue: LTSEL-36","created_at":"2026-01-02T02:35:06Z"}]}
{"id":"lettatoolsselector-zjdf","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:29:35.626924699Z","updated_at":"2025-12-30T02:03:20.295646417Z","comments":[{"id":1050,"issue_id":"lettatoolsselector-zjdf","author":"root","text":"Synced from Beads: lettatoolsselector-4dj\n\n---\nHuly Issue: LTSEL-68","created_at":"2025-12-29T21:29:35Z"}]}
{"id":"lettatoolsselector-zji3","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:17:57.983909518Z","updated_at":"2025-12-29T21:33:29.19505974Z","closed_at":"2025-12-29T21:33:29.19505974Z","close_reason":"Duplicate","comments":[{"id":396,"issue_id":"lettatoolsselector-zji3","author":"root","text":"Synced from Beads: lettatoolsselector-le1\n\n---\nHuly Issue: LTSEL-198","created_at":"2025-12-29T20:17:58Z"}]}
{"id":"lettatoolsselector-zjn43","title":"[Refactor] Extract config module for tool limits","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T12:56:34.584278525Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:56:35.68318934Z","closed_at":"2026-01-02T12:56:35.68318934Z","close_reason":"Closed","comments":[{"id":3321,"issue_id":"lettatoolsselector-zjn43","author":"root","text":"Synced from Beads: lettatoolsselector-9yr\n\n## Summary\n\nExtract tool limit configuration into a dedicated config module to support service layer extraction.\n\n## Current Location\n\n-  (MAX_TOTAL_TOOLS, MAX_MCP_TOOLS, MANAGE_ONLY_MCP_TOOLS, NEVER_DETACH_TOOLS, etc.)\n\n## Proposed Location\n\n-  or add to existing \n\n## Values to Extract\n\n\n\n## Implementation\n\n1. Create dataclass/Pydantic model for ToolLimitConfig\n2. Add to models.py or new config module\n3. Update tool_manager.configure() to accept config\n4. Update api_server.py to use centralized config\n\n## Acceptance Criteria\n\n- [ ] Config values centralized\n- [ ] tool_manager uses config object\n- [ ] api_server.py updated\n- [ ] Tests pass\n\n## Parent Issue\n\nlettatoolsselector-nav\n\n---\nHuly Issue: LTSEL-229","created_at":"2026-01-02T12:56:35Z"}]}
{"id":"lettatoolsselector-zkhcp","title":"[Perf] Cache MCP servers data in memory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T14:07:21.209017801Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:07:21.84640215Z","closed_at":"2026-01-02T14:07:21.84640215Z","close_reason":"Closed","comments":[{"id":3415,"issue_id":"lettatoolsselector-zkhcp","author":"root","text":"Synced from Huly: LTSEL-241","created_at":"2026-01-02T14:07:21Z"}]}
{"id":"lettatoolsselector-zkhy7","title":"[SDK] Create letta-toolkit Python package scaffold","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T10:36:02.793653721Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T10:36:03.308245632Z","closed_at":"2026-01-02T10:36:03.308245632Z","close_reason":"Closed","comments":[{"id":3079,"issue_id":"lettatoolsselector-zkhy7","author":"root","text":"Synced from Beads: lettatoolsselector-hhl\n\n---\nHuly Issue: LTSEL-40","created_at":"2026-01-02T10:36:03Z"}]}
{"id":"lettatoolsselector-zkkh","title":"[Perf] Use persistent HTTP client for reranker calls","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T01:08:39.022204627Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:39.23054378Z","closed_at":"2026-01-02T01:08:39.23054378Z","close_reason":"Closed"}
{"id":"lettatoolsselector-zljnd","title":"[Enforcement] Add PROTECTED_TOOLS support to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:50:27.216617291Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:50:27.786854212Z","closed_at":"2026-01-02T17:50:27.786854212Z","close_reason":"Closed","comments":[{"id":3781,"issue_id":"lettatoolsselector-zljnd","author":"root","text":"Synced from Beads: lettatoolsselector-xxx\n\n---\nHuly Issue: LTSEL-45","created_at":"2026-01-02T17:50:27Z"}]}
{"id":"lettatoolsselector-zm9ke","title":"[Code Quality] Fix unbound variable warnings for get_letta_sdk_client","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:27.218879642Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:27.808507369Z","closed_at":"2026-01-02T09:21:27.808507369Z","close_reason":"Closed","comments":[{"id":2948,"issue_id":"lettatoolsselector-zm9ke","author":"root","text":"Synced from Beads: lettatoolsselector-v1l\n\nThe  function shows 'possibly unbound' warnings at multiple locations.\n\n## Affected Lines\n\n- Line 255\n- Line 314\n- Line 369\n- Line 833\n- Line 854\n- Line 874\n\n## Root Cause\n\nThe function is likely conditionally imported or defined, causing the static analyzer to flag it as potentially undefined.\n\n## Possible Solutions\n\n1. Move import to top of file unconditionally\n2. Add explicit None check before use\n3. Use a try/except import pattern with proper fallback\n4. Add type: ignore comments if intentional (not recommended)\n\n## Acceptance Criteria\n\n- [ ] No 'possibly unbound' warnings for get_letta_sdk_client\n- [ ] Function is reliably available where used\n- [ ] Graceful handling if SDK client unavailable\n\n---\nHuly Issue: LTSEL-218","created_at":"2026-01-02T09:21:27Z"}]}
{"id":"lettatoolsselector-znm5j","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:36:00.641667683Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:01.23898442Z","closed_at":"2026-01-02T11:36:01.23898442Z","close_reason":"Closed","comments":[{"id":3237,"issue_id":"lettatoolsselector-znm5j","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T11:36:01Z"}]}
{"id":"lettatoolsselector-zo0qq","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:31:12.084776586Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:31:12.726668064Z","closed_at":"2026-01-02T17:31:12.726668064Z","close_reason":"Closed","comments":[{"id":3765,"issue_id":"lettatoolsselector-zo0qq","author":"root","text":"Synced from Huly: LTSEL-248","created_at":"2026-01-02T17:31:12Z"}]}
{"id":"lettatoolsselector-zofuz","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T12:00:40.047285374Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T12:00:40.711923559Z","closed_at":"2026-01-02T12:00:40.711923559Z","close_reason":"Closed","comments":[{"id":3273,"issue_id":"lettatoolsselector-zofuz","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T12:00:40Z"}]}
{"id":"lettatoolsselector-zoh4g","title":"[Test] Integration test: Tool count never exceeds MAX_TOTAL_TOOLS","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:19:08.88730349Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:19:09.37502023Z","closed_at":"2026-01-02T06:19:09.37502023Z","close_reason":"Closed","comments":[{"id":2590,"issue_id":"lettatoolsselector-zoh4g","author":"root","text":"Synced from Beads: lettatoolsselector-9kv\n\n---\nHuly Issue: LTSEL-49","created_at":"2026-01-02T06:19:09Z"}]}
{"id":"lettatoolsselector-zpdu","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:11:58.306366834Z","updated_at":"2025-12-29T21:33:31.25823762Z","closed_at":"2025-12-29T21:33:31.25823762Z","close_reason":"Duplicate","comments":[{"id":332,"issue_id":"lettatoolsselector-zpdu","author":"root","text":"Synced from Beads: lettatoolsselector-ylm\n\n---\nHuly Issue: LTSEL-215","created_at":"2025-12-29T20:11:58Z"}]}
{"id":"lettatoolsselector-zpqy","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:03:10.561347794Z","updated_at":"2025-12-30T04:14:07.263869561Z","comments":[{"id":839,"issue_id":"lettatoolsselector-zpqy","author":"root","text":"Synced from Beads: lettatoolsselector-5mj\n\n---\nHuly Issue: LTSEL-123","created_at":"2025-12-29T21:03:10Z"}]}
{"id":"lettatoolsselector-zptmp","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:16:39.064948992Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:16:39.68529335Z","closed_at":"2026-01-02T20:16:39.68529335Z","close_reason":"Closed","comments":[{"id":4073,"issue_id":"lettatoolsselector-zptmp","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T20:16:39Z"}]}
{"id":"lettatoolsselector-zqlqa","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:31:28.843638546Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:31:28.843638546Z","comments":[{"id":2131,"issue_id":"lettatoolsselector-zqlqa","author":"root","text":"Synced from Beads: lettatoolsselector-kl5\n\n---\nHuly Issue: LTSEL-209","created_at":"2026-01-02T03:31:29Z"}]}
{"id":"lettatoolsselector-zqnzs","title":"[Refactor] Migrate config handlers to config blueprint","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T07:24:35.943987053Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:24:36.509268633Z","closed_at":"2026-01-02T07:24:36.509268633Z","close_reason":"Closed","comments":[{"id":2727,"issue_id":"lettatoolsselector-zqnzs","author":"root","text":"Synced from Huly: LTSEL-237","created_at":"2026-01-02T07:24:36Z"}]}
{"id":"lettatoolsselector-zqq3s","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:30.580376969Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:30.580376969Z","comments":[{"id":2037,"issue_id":"lettatoolsselector-zqq3s","author":"root","text":"Synced from Beads: lettatoolsselector-ufru\n\n---\nHuly Issue: LTSEL-278","created_at":"2026-01-02T03:29:30Z"}]}
{"id":"lettatoolsselector-zr14q","title":"[Config] Create automated deploy script","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T19:39:22.832928941Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T19:39:23.470397279Z","closed_at":"2026-01-02T19:39:23.470397279Z","close_reason":"Closed","comments":[{"id":3985,"issue_id":"lettatoolsselector-zr14q","author":"root","text":"## Problem\n\nChanging config requires manual: edit .env, restart container, verify health. This is error-prone.\n\n## Solution\n\nCreate a deploy script that handles config updates safely.\n\n## Acceptance Criteria\n\n- [ ] Script:  to update and restart\n- [ ] Validates config before deploying\n- [ ] Backs up current .env before changes\n- [ ] Waits for health check after restart\n- [ ] Rolls back on health check failure\n- [ ] Logs all actions for audit\n\n## Technical Notes\n\n- Use docker compose up -d --force-recreate\n- Add --dry-run flag for testing\n- Consider GitHub Action for remote deploys\n\n---\nHuly Issue: LTSEL-17","created_at":"2026-01-02T19:39:23Z"}]}
{"id":"lettatoolsselector-zr3ee","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:44:21.922615012Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:44:21.922615012Z","comments":[{"id":2235,"issue_id":"lettatoolsselector-zr3ee","author":"root","text":"Synced from Beads: lettatoolsselector-u30o\n\n---\nHuly Issue: LTSEL-554","created_at":"2026-01-02T03:44:22Z"}]}
{"id":"lettatoolsselector-zrhcu","title":"[Config] Consolidate .env files and compose configurations","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T18:31:44.060037853Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T18:31:44.652362875Z","closed_at":"2026-01-02T18:31:44.652362875Z","close_reason":"Closed","comments":[{"id":3872,"issue_id":"lettatoolsselector-zrhcu","author":"root","text":"Synced from Beads: lettatoolsselector-6sz\n\n---\nHuly Issue: LTSEL-48","created_at":"2026-01-02T18:31:44Z"}]}
{"id":"lettatoolsselector-zrhph","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T21:49:01.662709953Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T21:49:02.359158029Z","closed_at":"2026-01-02T21:49:02.359158029Z","close_reason":"Closed","comments":[{"id":4265,"issue_id":"lettatoolsselector-zrhph","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T21:49:02Z"}]}
{"id":"lettatoolsselector-zrpi","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:39:57.906595069Z","updated_at":"2025-12-29T21:33:23.804454212Z","closed_at":"2025-12-29T21:33:23.804454212Z","close_reason":"Duplicate","comments":[{"id":647,"issue_id":"lettatoolsselector-zrpi","author":"root","text":"Synced from Beads: lettatoolsselector-omu\n\n---\nHuly Issue: LTSEL-157","created_at":"2025-12-29T20:39:58Z"}]}
{"id":"lettatoolsselector-zs0su","title":"[Refactor] Phase 3: Extract service layer - SearchService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:03:57.686166957Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:03:58.347358842Z","closed_at":"2026-01-02T08:03:58.347358842Z","close_reason":"Closed","comments":[{"id":2827,"issue_id":"lettatoolsselector-zs0su","author":"root","text":"Synced from Beads: lettatoolsselector-4w9\n\nExtract search and reranking logic into a dedicated SearchService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### SearchService ()\n\nMove/consolidate these:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eSource\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eapi_server.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eunified_tool_search()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eUnified search interface\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eWeaviate search\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003eweaviate_tool_search_with_reranking.py\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003esearch_tools_with_reranking()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSearch + rerank\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Reranker Abstraction\n\n\n\n## Acceptance Criteria\n\n- [ ] SearchService class created\n- [ ] Reranker abstraction with vLLM and Ollama implementations\n- [ ] Query expansion integrated\n- [ ] api_server.py uses SearchService\n- [ ] Unit tests for SearchService\n- [ ] Reranker can be swapped via config\n\n---\nHuly Issue: LTSEL-227","created_at":"2026-01-02T08:03:58Z"}]}
{"id":"lettatoolsselector-zs3m4","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:03:07.656436102Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:03:08.258125263Z","closed_at":"2026-01-02T20:03:08.258125263Z","close_reason":"Closed","comments":[{"id":4041,"issue_id":"lettatoolsselector-zs3m4","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T20:03:08Z"}]}
{"id":"lettatoolsselector-zsfom","title":"[SDK] Implement attach/detach tool helpers with retry logic","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T16:11:16.548582732Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T16:11:17.155409932Z","closed_at":"2026-01-02T16:11:17.155409932Z","close_reason":"Closed","comments":[{"id":3640,"issue_id":"lettatoolsselector-zsfom","author":"root","text":"Synced from Beads: lettatoolsselector-0g6\n\n---\nHuly Issue: LTSEL-43","created_at":"2026-01-02T16:11:16Z"}]}
{"id":"lettatoolsselector-zste","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:34:48.553450033Z","updated_at":"2025-12-29T21:33:25.022571252Z","closed_at":"2025-12-29T21:33:25.022571252Z","close_reason":"Duplicate","comments":[{"id":596,"issue_id":"lettatoolsselector-zste","author":"root","text":"Synced from Beads: lettatoolsselector-9k9\n\n---\nHuly Issue: LTSEL-171","created_at":"2025-12-29T20:34:48Z"}]}
{"id":"lettatoolsselector-zt1fk","title":"[Code Quality] Add Optional type hints for nullable parameters","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T08:20:58.21994497Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:20:59.559135539Z","closed_at":"2026-01-02T08:20:59.559135539Z","close_reason":"Closed","comments":[{"id":2856,"issue_id":"lettatoolsselector-zt1fk","author":"root","text":"Synced from Beads: lettatoolsselector-fvk\n\nSeveral functions accept None values but lack proper Optional[] type hints.\n\n## Affected Functions\n\n### _emit_matrix_bridge_webhook (line 976-980)\n\nParameters that can be None but aren't typed as Optional:\n\n-  should be \n-  should be \n-  should be \n\n### _send_trigger_message (line 898)\n\n- Similar nullable parameter issues\n\n### Other locations\n\n- Line 1514: list parameter that can be None\n\n## Acceptance Criteria\n\n- [ ] Import Optional from typing module where needed\n- [ ] Update all nullable parameters to use Optional[T]\n- [ ] Ensure default values match the Optional typing\n- [ ] No runtime behavior changes\n\n---\nHuly Issue: LTSEL-219","created_at":"2026-01-02T08:20:58Z"}]}
{"id":"lettatoolsselector-zt1q","title":"[Test] Unit test: SDK list_agent_tools handles pagination","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:14:29.725375438Z","updated_at":"2025-12-30T01:47:15.406119109Z","comments":[{"id":952,"issue_id":"lettatoolsselector-zt1q","author":"root","text":"Synced from Beads: lettatoolsselector-c9x\n\n---\nHuly Issue: LTSEL-69","created_at":"2025-12-29T21:14:30Z"}]}
{"id":"lettatoolsselector-zt8a","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:21:36.415362485Z","updated_at":"2025-12-29T21:33:28.326573829Z","closed_at":"2025-12-29T21:33:28.326573829Z","close_reason":"Duplicate","comments":[{"id":436,"issue_id":"lettatoolsselector-zt8a","author":"root","text":"Synced from Beads: lettatoolsselector-9xp\n\n---\nHuly Issue: LTSEL-181","created_at":"2025-12-29T20:21:36Z"}]}
{"id":"lettatoolsselector-zt8md","title":"[Refactor] Phase 4: Extract service layer - AgentService","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T20:21:52.172897491Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:21:52.805045846Z","closed_at":"2026-01-02T20:21:52.805045846Z","close_reason":"Closed","comments":[{"id":4096,"issue_id":"lettatoolsselector-zt8md","author":"root","text":"Synced from Beads: lettatoolsselector-lan\n\nExtract Letta agent communication into a dedicated AgentService.\n\n## Depends On\n\n- lettatoolsselector-869 (Phase 1: Extract models)\n\n## Functions to Extract\n\n### AgentService ()\n\nMove these from api_server.py:\n\n\u003ctable\u003e\u003ctbody\u003e\u003ctr\u003e\u003cth\u003e\u003cp\u003eFunction\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eLines\u003c/p\u003e\u003c/th\u003e\u003cth\u003e\u003cp\u003eResponsibility\u003c/p\u003e\u003c/th\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_info()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e828-847\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent name/details\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003efetch_agent_tools()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e849-867\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eGet agent's current tools\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003eregister_tool()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e869-896\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eRegister tool with Letta\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_send_trigger_message()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e898-974\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSend trigger message to agent\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003etrigger_agent_loop()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e1037-1081\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eSpawn background trigger\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003ctr\u003e\u003ctd\u003e\u003cp\u003e\u003ccode\u003e_emit_matrix_bridge_webhook()\u003c/code\u003e\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003e976-1035\u003c/p\u003e\u003c/td\u003e\u003ctd\u003e\u003cp\u003eNotify Matrix bridge\u003c/p\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\n### Interface\n\n\n\n### Consolidate with letta_sdk_client.py\n\nConsider merging functionality from  into AgentService or having AgentService use it as underlying client.\n\n## Acceptance Criteria\n\n- [ ] AgentService class created\n- [ ] All agent communication functions moved\n- [ ] Webhook notification integrated\n- [ ] api_server.py uses AgentService\n- [ ] Unit tests with mocked Letta API\n- [ ] Integration tests still pass\n\n---\nHuly Issue: LTSEL-224","created_at":"2026-01-02T20:21:52Z"}]}
{"id":"lettatoolsselector-ztn4c","title":"[Refactor] Phase 0: Establish test coverage for critical paths","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T11:36:02.375127027Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:36:02.752986214Z","closed_at":"2026-01-02T11:36:02.752986214Z","close_reason":"Closed"}
{"id":"lettatoolsselector-zttcl","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:29:30.111955059Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:29:30.111955059Z","comments":[{"id":2036,"issue_id":"lettatoolsselector-zttcl","author":"root","text":"Synced from Beads: lettatoolsselector-39wp\n\n---\nHuly Issue: LTSEL-279","created_at":"2026-01-02T03:29:30Z"}]}
{"id":"lettatoolsselector-zty1j","title":"[Code Quality] Fix type annotation errors in api_server.py","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T14:58:37.437335052Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T14:58:38.320424848Z","closed_at":"2026-01-02T14:58:38.320424848Z","close_reason":"Closed","comments":[{"id":3510,"issue_id":"lettatoolsselector-zty1j","author":"root","text":"Synced from Beads: lettatoolsselector-46k\n\nThe api_server.py file has 68+ type checking errors from Pyright/Pylance. These don't affect runtime but indicate code quality issues.\n\n## Main Categories of Errors\n\n### 1. None vs Expected Type\n\nFunctions return  but type hints expect a specific type:\n\n- Line 309: Expression of type 'None' cannot be assigned to parameter of type 'str'\n- Line 403: Expression of type 'None' cannot be assigned to parameter of type 'list'\n- Line 898, 978, 980, 1037: Similar None assignment issues\n\n### 2. Possibly Unbound Variables\n\nVariables that might not be defined in all code paths:\n\n- Lines 255, 314, 369, 833, 854, 874: 'get_letta_sdk_client' is possibly unbound\n\n### 3. Function Signature Mismatches\n\nDeclared types don't match actual implementations:\n\n- Line 18: ConfigValidationResponse vs expected CoroutineType\n- Line 23: Multiple async function return type mismatches\n\n## Acceptance Criteria\n\n- [ ] All Pyright/Pylance errors resolved\n- [ ] Type hints accurately reflect actual function behavior\n- [ ] No runtime behavior changes\n- [ ] Tests still pass\n\n---\nHuly Issue: LTSEL-220","created_at":"2026-01-02T14:58:38Z"}]}
{"id":"lettatoolsselector-zv30n","title":"[Perf] Eliminate redundant isLettaCoreTool checks in attach loop","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T03:06:47.648996197Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:06:47.882518842Z","closed_at":"2026-01-02T03:06:47.882518842Z","close_reason":"Closed"}
{"id":"lettatoolsselector-zvcg2","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:40:35.551784559Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:40:36.044144582Z","closed_at":"2026-01-02T09:40:36.044144582Z","close_reason":"Closed","comments":[{"id":2999,"issue_id":"lettatoolsselector-zvcg2","author":"root","text":"## Problem\n\nNo quantitative metrics for monitoring tool attachment operations.\n\n## Solution\n\nAdd Prometheus metrics endpoint to tool selector API.\n\n## Acceptance Criteria\n\n- [ ]  endpoint exposing Prometheus format\n- [ ] Counters: tools_attached_total, tools_detached_total, tools_pruned_total\n- [ ] Gauges: agent_tool_count (per agent), agents_over_limit\n- [ ] Histograms: attach_request_duration_seconds\n- [ ] Labels: agent_id (for per-agent breakdown)\n\n## Technical Notes\n\n- Use prometheus_client library\n- Expose on separate port or same API\n- Consider cardinality limits on agent_id label\n\n---\nHuly Issue: LTSEL-13","created_at":"2026-01-02T09:40:35Z"}]}
{"id":"lettatoolsselector-zvx21","title":"[Test] Performance test: Tool attachment under load","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T17:01:15.098591435Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:01:15.739805259Z","closed_at":"2026-01-02T17:01:15.739805259Z","close_reason":"Closed","comments":[{"id":3689,"issue_id":"lettatoolsselector-zvx21","author":"root","text":"Synced from Beads: lettatoolsselector-jql\n\n---\nHuly Issue: LTSEL-39","created_at":"2026-01-02T17:01:15Z"}]}
{"id":"lettatoolsselector-zvybj","title":"[Enforcement] Create scheduled agent tool pruning job","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T20:38:46.485533903Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T20:38:47.095206481Z","closed_at":"2026-01-02T20:38:47.095206481Z","close_reason":"Closed","comments":[{"id":4120,"issue_id":"lettatoolsselector-zvybj","author":"root","text":"Synced from Beads: lettatoolsselector-6fh\n\n---\nHuly Issue: LTSEL-28","created_at":"2026-01-02T20:38:46Z"}]}
{"id":"lettatoolsselector-zwj6","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:29:38.940969738Z","updated_at":"2025-12-29T21:33:26.202938509Z","closed_at":"2025-12-29T21:33:26.202938509Z","close_reason":"Duplicate","comments":[{"id":542,"issue_id":"lettatoolsselector-zwj6","author":"root","text":"Synced from Beads: lettatoolsselector-sk8\n\n---\nHuly Issue: LTSEL-180","created_at":"2025-12-29T20:29:39Z"}]}
{"id":"lettatoolsselector-zwxw","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:06:05.743257369Z","updated_at":"2025-12-30T22:36:06.317721018Z","comments":[{"id":870,"issue_id":"lettatoolsselector-zwxw","author":"root","text":"Synced from Beads: lettatoolsselector-9cq\n\n---\nHuly Issue: LTSEL-98","created_at":"2025-12-29T21:06:06Z"}]}
{"id":"lettatoolsselector-zwyp6","title":"[Bugfix] Fix set iteration order mismatch in tool pruning result mapping","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T06:17:36.870050996Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T06:17:37.426399875Z","closed_at":"2026-01-02T06:17:37.426399875Z","close_reason":"Closed","comments":[{"id":2552,"issue_id":"lettatoolsselector-zwyp6","author":"root","text":"Synced from Huly: LTSEL-44","created_at":"2026-01-02T06:17:37Z"}]}
{"id":"lettatoolsselector-zx8z","title":"[Perf] Reduce excessive logging in hot paths","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-02T01:08:33.507711323Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T01:08:33.717087136Z","closed_at":"2026-01-02T01:08:33.717087136Z","close_reason":"Closed"}
{"id":"lettatoolsselector-zxa3y","title":"[Refactor] Phase 6: Dependency injection and app factory","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T08:21:13.43301231Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T08:21:13.945165596Z","closed_at":"2026-01-02T08:21:13.945165596Z","close_reason":"Closed"}
{"id":"lettatoolsselector-zxadh","title":"[Test] Contract test: Webhook receiver sends valid attach payload","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:21:06.148277755Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:21:06.707156362Z","closed_at":"2026-01-02T09:21:06.707156362Z","close_reason":"Closed","comments":[{"id":2939,"issue_id":"lettatoolsselector-zxadh","author":"root","text":"Synced from Huly: LTSEL-36","created_at":"2026-01-02T09:21:06Z"}]}
{"id":"lettatoolsselector-zy1f4","title":"[Refactor] Migrate tools attach/prune/sync/refresh handlers to services pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-02T04:20:34.304926784Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T04:20:34.752784932Z","closed_at":"2026-01-02T04:20:34.752784932Z","close_reason":"Closed","comments":[{"id":2382,"issue_id":"lettatoolsselector-zy1f4","author":"root","text":"Synced from Beads: lettatoolsselector-dai\n\nMove remaining tools handlers from api_server.py into routes/tools.py using the services layer pattern.\n\n## Handlers to Migrate\n\n- _tools_attach_handler (~320 lines) - attaches tools to agents\n- _tools_prune_handler (~100 lines) - prunes excess tools\n- _tools_sync_handler (~15 lines) - syncs tool cache\n- _tools_refresh_handler (~10 lines) - refreshes tool cache\n\n## New Services Required\n\n- services/agent.py - AgentService wrapping fetch_agent_info, fetch_agent_tools\n- services/letta_client.py - LettaClientService wrapping SDK operations\n\n## Pattern\n\n1. Create new service files with DI pattern\n2. Move handler implementations into routes/tools.py\n3. Configure services in startup()\n4. Remove old handlers from api_server.py\n5. Update any tests mocking api_server to mock services\n\n## Estimated Reduction\n\n~450 lines removed from api_server.py\n\n---\nHuly Issue: LTSEL-234","created_at":"2026-01-02T04:20:34Z"}]}
{"id":"lettatoolsselector-zy3k3","title":"[Enforcement] Define and document auto-attachment contract","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T11:08:56.108728302Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T11:08:56.817338872Z","closed_at":"2026-01-02T11:08:56.817338872Z","close_reason":"Closed","comments":[{"id":3163,"issue_id":"lettatoolsselector-zy3k3","author":"root","text":"Synced from Beads: lettatoolsselector-tzr\n\n---\nHuly Issue: LTSEL-47","created_at":"2026-01-02T11:08:56Z"}]}
{"id":"lettatoolsselector-zy9ja","title":"[SDK] Implement list_agent_tools with full pagination","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T09:54:40.703149435Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T09:54:41.326436377Z","closed_at":"2026-01-02T09:54:41.326436377Z","close_reason":"Closed","comments":[{"id":3033,"issue_id":"lettatoolsselector-zy9ja","author":"root","text":"Synced from Beads: lettatoolsselector-ppg\n\n---\nHuly Issue: LTSEL-41","created_at":"2026-01-02T09:54:41Z"}]}
{"id":"lettatoolsselector-zyph","title":"[Observability] Create Grafana dashboard for tool state","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-29T20:28:39.263154877Z","updated_at":"2025-12-29T21:33:26.462737405Z","closed_at":"2025-12-29T21:33:26.462737405Z","close_reason":"Duplicate","comments":[{"id":528,"issue_id":"lettatoolsselector-zyph","author":"root","text":"Synced from Beads: lettatoolsselector-2md\n\n---\nHuly Issue: LTSEL-177","created_at":"2025-12-29T20:28:39Z"}]}
{"id":"lettatoolsselector-zysoh","title":"[Perf] Add TTL cache for search results","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-02T17:55:06.276934936Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T17:55:06.917964336Z","closed_at":"2026-01-02T17:55:06.917964336Z","close_reason":"Closed","comments":[{"id":3810,"issue_id":"lettatoolsselector-zysoh","author":"root","text":"Synced from Beads: lettatoolsselector-fv0\n\n## Problem\n\nNo caching of search results. Identical queries within seconds hit Weaviate and reranker every time.\n\n**Location:** , \n\n## Impact\n\n- **Latency:** 200-1000ms for repeated identical queries\n- **Priority:** HIGH - significant win for common query patterns\n\n## Solution\n\nAdd TTL-based cache for search results (60-300 seconds):\n\n\n\n## Configuration\n\n- TTL configurable via env var  (default: 60)\n- Max size configurable via  (default: 1000)\n- Add cache stats to health endpoint\n\n## Acceptance Criteria\n\n- [ ] Search results cached with configurable TTL\n- [ ] Cache key includes query, limit, and reranker config\n- [ ] Cache stats available in health/metrics endpoint\n- [ ] Cache can be cleared via API or on tool index refresh\n- [ ] All unit tests pass\n\n---\nHuly Issue: LTSEL-240","created_at":"2026-01-02T17:55:06Z"}]}
{"id":"lettatoolsselector-zz17z","title":"[Observability] Add Prometheus metrics to tool selector API","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-02T07:42:42.628305724Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T07:42:43.10345334Z","closed_at":"2026-01-02T07:42:43.10345334Z","close_reason":"Closed","comments":[{"id":2759,"issue_id":"lettatoolsselector-zz17z","author":"root","text":"Synced from Huly: LTSEL-13","created_at":"2026-01-02T07:42:42Z"}]}
{"id":"lettatoolsselector-zzgpr","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-02T03:28:22.388551663Z","created_by":"Huly Vibe Sync Service","updated_at":"2026-01-02T03:28:22.388551663Z","comments":[{"id":1891,"issue_id":"lettatoolsselector-zzgpr","author":"root","text":"Synced from Beads: lettatoolsselector-vfrq\n\n---\nHuly Issue: LTSEL-451","created_at":"2026-01-02T03:28:22Z"}]}
{"id":"lettatoolsselector-zzom","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:25:22.955682867Z","updated_at":"2025-12-30T02:00:05.629081255Z","comments":[{"id":1033,"issue_id":"lettatoolsselector-zzom","author":"root","text":"Synced from Beads: lettatoolsselector-leh\n\n---\nHuly Issue: LTSEL-80","created_at":"2025-12-29T21:25:23Z"}]}
{"id":"lettatoolsselector-zzvn","title":"[Observability] Create Grafana dashboard for tool state","status":"open","priority":4,"issue_type":"task","created_at":"2025-12-29T21:11:22.218818219Z","updated_at":"2025-12-30T02:07:04.271220365Z","comments":[{"id":922,"issue_id":"lettatoolsselector-zzvn","author":"root","text":"Synced from Beads: lettatoolsselector-an3\n\n---\nHuly Issue: LTSEL-89","created_at":"2025-12-29T21:11:22Z"}]}
