# Letta API Configuration
LETTA_API_URL=https://your-letta-instance.com/v1
LETTA_PASSWORD=your-letta-password

# Server Configuration
PORT=3001
NODE_ENV=production

# Weaviate Configuration
WEAVIATE_URL=http://weaviate:8080/
WEAVIATE_API_KEY=your-weaviate-api-key

# Embedding Provider Configuration
# Choose 'openai' or 'ollama'
EMBEDDING_PROVIDER=ollama

# OpenAI API Key (required if using OpenAI embeddings)
OPENAI_API_KEY=sk-your-openai-api-key

# Ollama Configuration (Graphiti-compatible)
OLLAMA_EMBEDDING_HOST=192.168.50.80
OLLAMA_EMBEDDING_MODEL=dengcao/Qwen3-Embedding-4B:Q4_K_M
EMBEDDING_DIMENSION=2560
USE_OLLAMA_EMBEDDINGS=true

# Tool Pruning Configuration
# Higher values = more aggressive tool detachment (0.1 = 10%, 0.3 = 30%, 0.5 = 50%)
DEFAULT_DROP_RATE=0.6

# Tool Limits
MAX_TOTAL_TOOLS=30
MAX_MCP_TOOLS=20
MIN_MCP_TOOLS=7
EXCLUDE_LETTA_CORE_TOOLS=true
EXCLUDE_OFFICIAL_TOOLS=true

# Protected Tools - Tools that should never be detached (comma-separated names)
# These tools are preserved during all pruning operations
# Default: find_tools
NEVER_DETACH_TOOLS=find_tools
# Alias for consistency with SDK
PROTECTED_TOOLS=find_tools

# Only manage MCP tools, not official Letta tools
MANAGE_ONLY_MCP_TOOLS=true

# SDK Migration Feature Flag
# Set to 'true' to use letta-client SDK instead of raw aiohttp HTTP calls
# Default: false (uses aiohttp)
USE_LETTA_SDK=false

# Tool Selector API Configuration shared by MCP worker
TOOLS_API_BASE_URL=https://tool-selector-api:8020
TOOLS_API_TIMEOUT=15
TOOLS_API_ALLOW_INSECURE_HTTP=false
TOOL_SELECTOR_PASSWORD=your-toolselector-password
TOOL_SELECTOR_BEARER_TOKEN=
FIND_TOOLS_MAX_LIMIT=25

# MCP Worker configuration
WORKER_SERVICE_URL=http://worker-service:3021
WORKER_REQUEST_TIMEOUT_MS=15000
WORKER_LOG_LEVEL=INFO
WORKER_SESSION_POOL_CONNECTIONS=10
WORKER_SESSION_POOL_MAXSIZE=25
WORKER_SESSION_MAX_RETRIES=3
